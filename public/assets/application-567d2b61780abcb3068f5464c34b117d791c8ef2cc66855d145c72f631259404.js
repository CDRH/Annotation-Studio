function isScrolledIntoView(t){if(void 0!==t&&0<$(t).length){var e=$(window).scrollTop(),n=e+$(window).height(),i=$(t).offset().top;return i+$(t).height()<=n&&e<=i}return!1}if(function(m,C){function a(t){var e=t.length,n=Dt.type(t);return!Dt.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||"function"!==n&&(0===e||"number"==typeof e&&0<e&&e-1 in t)))}function t(t){var n=kt[t]={};return Dt.each(t.match(dt)||[],function(t,e){n[e]=!0}),n}function i(t,e,n,i){if(Dt.acceptData(t)){var r,o,s=Dt.expando,a=t.nodeType,u=a?Dt.cache:t,l=a?t[s]:t[s]&&s;if(l&&u[l]&&(i||u[l].data)||n!==C||"string"!=typeof e)return l||(l=a?t[s]=et.pop()||Dt.guid++:s),u[l]||(u[l]=a?{}:{toJSON:Dt.noop}),"object"!=typeof e&&"function"!=typeof e||(i?u[l]=Dt.extend(u[l],e):u[l].data=Dt.extend(u[l].data,e)),o=u[l],i||(o.data||(o.data={}),o=o.data),n!==C&&(o[Dt.camelCase(e)]=n),"string"==typeof e?null==(r=o[e])&&(r=o[Dt.camelCase(e)]):r=o,r}}function n(t,e,n){if(Dt.acceptData(t)){var i,r,o=t.nodeType,s=o?Dt.cache:t,a=o?t[Dt.expando]:Dt.expando;if(s[a]){if(e&&(i=n?s[a]:s[a].data)){r=(e=Dt.isArray(e)?e.concat(Dt.map(e,Dt.camelCase)):e in i?[e]:(e=Dt.camelCase(e))in i?[e]:e.split(" ")).length;for(;r--;)delete i[e[r]];if(n?!l(i):!Dt.isEmptyObject(i))return}(n||(delete s[a].data,l(s[a])))&&(o?Dt.cleanData([t],!0):Dt.support.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function u(t,e,n){if(n===C&&1===t.nodeType){var i="data-"+e.replace(Tt,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:St.test(n)?Dt.parseJSON(n):n)}catch(r){}Dt.data(t,e,n)}else n=C}return n}function l(t){var e;for(e in t)if(("data"!==e||!Dt.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function r(){return!0}function c(){return!1}function e(){try{return X.activeElement}catch(t){}}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t,n,i){if(Dt.isFunction(n))return Dt.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return Dt.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(jt.test(n))return Dt.filter(n,t,i);n=Dt.filter(n,t)}return Dt.grep(t,function(t){return 0<=Dt.inArray(t,n)!==i})}function g(t){var e=Vt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function d(t,e){return Dt.nodeName(t,"table")&&Dt.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function v(t){return t.type=(null!==Dt.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=re.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function y(t,e){for(var n,i=0;null!=(n=t[i]);i++)Dt._data(n,"globalEval",!e||Dt._data(e[i],"globalEval"))}function h(t,e){if(1===e.nodeType&&Dt.hasData(t)){var n,i,r,o=Dt._data(t),s=Dt._data(e,o),a=o.events;if(a)for(n in delete s.handle,s.events={},a)for(i=0,r=a[n].length;i<r;i++)Dt.event.add(e,n,a[n][i]);s.data&&(s.data=Dt.extend({},s.data))}}function f(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!Dt.support.noCloneEvent&&e[Dt.expando]){for(i in(r=Dt._data(e)).events)Dt.removeEvent(e,i,r.handle);e.removeAttribute(Dt.expando)}"script"===n&&e.text!==t.text?(v(e).text=t.text,b(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),Dt.support.html5Clone&&t.innerHTML&&!Dt.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&ee.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function w(t,e){var n,i,r=0,o=typeof t.getElementsByTagName!==K?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==K?t.querySelectorAll(e||"*"):C;if(!o)for(o=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||Dt.nodeName(i,e)?o.push(i):Dt.merge(o,w(i,e));return e===C||e&&Dt.nodeName(t,e)?Dt.merge([t],o):o}function _(t){ee.test(t.type)&&(t.defaultChecked=t.checked)}function p(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=Ce.length;r--;)if((e=Ce[r]+n)in t)return e;return i}function x(t,e){return t=e||t,"none"===Dt.css(t,"display")||!Dt.contains(t.ownerDocument,t)}function k(t,e){for(var n,i,r,o=[],s=0,a=t.length;s<a;s++)(i=t[s]).style&&(o[s]=Dt._data(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&x(i)&&(o[s]=Dt._data(i,"olddisplay",N(i.nodeName)))):o[s]||(r=x(i),(n&&"none"!==n||!r)&&Dt._data(i,"olddisplay",r?n:Dt.css(i,"display"))));for(s=0;s<a;s++)(i=t[s]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function S(t,e,n){var i=ge.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function T(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=Dt.css(t,n+xe[o],!0,r)),i?("content"===n&&(s-=Dt.css(t,"padding"+xe[o],!0,r)),"margin"!==n&&(s-=Dt.css(t,"border"+xe[o]+"Width",!0,r))):(s+=Dt.css(t,"padding"+xe[o],!0,r),"padding"!==n&&(s+=Dt.css(t,"border"+xe[o]+"Width",!0,r)));return s}function E(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=le(t),s=Dt.support.boxSizing&&"border-box"===Dt.css(t,"boxSizing",!1,o);if(r<=0||null==r){if(((r=ce(t,e,o))<0||null==r)&&(r=t.style[e]),ve.test(r))return r;i=s&&(Dt.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+T(t,e,n||(s?"border":"content"),i,o)+"px"}function N(t){var e=X,n=ye[t];return n||("none"!==(n=D(t,e))&&n||((e=((ue=(ue||Dt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement))[0].contentWindow||ue[0].contentDocument).document).write("<!doctype html><html><body>"),e.close(),n=D(t,e),ue.detach()),ye[t]=n),n}function D(t,e){var n=Dt(e.createElement(t)).appendTo(e.body),i=Dt.css(n[0],"display");return n.remove(),i}function A(n,t,i,r){var e;if(Dt.isArray(t))Dt.each(t,function(t,e){i||Se.test(n)?r(n,e):A(n+"["+("object"==typeof e?t:"")+"]",e,i,r)});else if(i||"object"!==Dt.type(t))r(n,t);else for(e in t)A(n+"["+e+"]",t[e],i,r)}function I(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(dt)||[];if(Dt.isFunction(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function P(e,r,o,s){function a(t){var i;return u[t]=!0,Dt.each(e[t]||[],function(t,e){var n=e(r,o,s);return"string"!=typeof n||l||u[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),a(n),!1)}),i}var u={},l=e===je;return a(r.dataTypes[0])||!u["*"]&&a("*")}function R(t,e){var n,i,r=Dt.ajaxSettings.flatOptions||{};for(i in e)e[i]!==C&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&Dt.extend(!0,t,n),t}function O(t,e,n){for(var i,r,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),r===C&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){u.unshift(s);break}if(u[0]in n)o=u[0];else{for(s in n){if(!u[0]||t.converters[s+" "+u[0]]){o=s;break}i||(i=s)}o=o||i}if(o)return o!==u[0]&&u.unshift(o),n[o]}function M(t,e,n,i){var r,o,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=l[u+" "+o]||l["* "+o]))for(r in l)if((a=r.split(" "))[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[r]:!0!==l[r]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function F(){try{return new m.XMLHttpRequest}catch(t){}}function $(){try{return new m.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function L(){return setTimeout(function(){Xe=C}),Xe=Dt.now()}function H(t,e,n){for(var i,r=(nn[e]||[]).concat(nn["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function B(o,t,e){var n,s,i=0,r=en.length,a=Dt.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var t=Xe||L(),e=Math.max(0,l.startTime+l.duration-t),n=1-(e/l.duration||0),i=0,r=l.tweens.length;i<r;i++)l.tweens[i].run(n);return a.notifyWith(o,[l,n,e]),n<1&&r?e:(a.resolveWith(o,[l]),!1)},l=a.promise({elem:o,props:Dt.extend({},t),opts:Dt.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:Xe||L(),duration:e.duration,tweens:[],createTween:function(t,e){var n=Dt.Tween(o,l.opts,t,e,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var e=0,n=t?l.tweens.length:0;if(s)return this;for(s=!0;e<n;e++)l.tweens[e].run(1);return t?a.resolveWith(o,[l,t]):a.rejectWith(o,[l,t]),this}}),c=l.props;for(z(c,l.opts.specialEasing);i<r;i++)if(n=en[i].call(l,o,c,l.opts))return n;return Dt.map(c,H,l),Dt.isFunction(l.opts.start)&&l.opts.start.call(o,l),Dt.fx.timer(Dt.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function z(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=Dt.camelCase(n)],o=t[n],Dt.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=Dt.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}function j(e,t,n){var i,r,o,s,a,u,l=this,c={},d=e.style,h=e.nodeType&&x(e),f=Dt._data(e,"fxshow");for(i in n.queue||(null==(a=Dt._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,l.always(function(){l.always(function(){a.unqueued--,Dt.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===Dt.css(e,"display")&&"none"===Dt.css(e,"float")&&(Dt.support.inlineBlockNeedsLayout&&"inline"!==N(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",Dt.support.shrinkWrapBlocks||l.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),t)if(r=t[i],Je.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show"))continue;c[i]=f&&f[i]||Dt.style(e,i)}if(!Dt.isEmptyObject(c))for(i in f?"hidden"in f&&(h=f.hidden):f=Dt._data(e,"fxshow",{}),o&&(f.hidden=!h),h?Dt(e).show():l.done(function(){Dt(e).hide()}),l.done(function(){var t;for(t in Dt._removeData(e,"fxshow"),c)Dt.style(e,t,c[t])}),c)s=H(h?f[i]:0,i,l),i in f||(f[i]=s.start,h&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}function U(t,e,n,i,r){return new U.prototype.init(t,e,n,i,r)}function q(t,e){var n,i={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=xe[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function W(t){return Dt.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var V,Y,K=typeof C,G=m.location,X=m.document,Q=X.documentElement,J=m.jQuery,Z=m.$,tt={},et=[],nt="1.10.0",it=et.concat,rt=et.push,ot=et.slice,st=et.indexOf,at=tt.toString,ut=tt.hasOwnProperty,lt=nt.trim,Dt=function(t,e){return new Dt.fn.init(t,e,Y)},ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=/\S+/g,ht=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mt=/^[\],:{}\s]*$/,gt=/(?:^|:|,)(?:\s*\[)+/g,vt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,yt=/^-ms-/,wt=/-([\da-z])/gi,_t=function(t,e){return e.toUpperCase()},xt=function(t){(X.addEventListener||"load"===t.type||"complete"===X.readyState)&&(Ct(),Dt.ready())},Ct=function(){X.addEventListener?(X.removeEventListener("DOMContentLoaded",xt,!1),m.removeEventListener("load",xt,!1)):(X.detachEvent("onreadystatechange",xt),m.detachEvent("onload",xt))};Dt.fn=Dt.prototype={jquery:nt,constructor:Dt,init:function(t,e,n){var i,r;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):Dt.isFunction(t)?n.ready(t):(t.selector!==C&&(this.selector=t.selector,this.context=t.context),Dt.makeArray(t,this));if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:ft.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof Dt?e[0]:e,Dt.merge(this,Dt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:X,!0)),pt.test(i[1])&&Dt.isPlainObject(e))for(i in e)Dt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((r=X.getElementById(i[2]))&&r.parentNode){if(r.id!==i[2])return n.find(t);this.length=1,this[0]=r}return this.context=X,this.selector=t,this},selector:"",length:0,toArray:function(){return ot.call(this)},get:function(t){return null==t?this.toArray():t<0?this[this.length+t]:this[t]},pushStack:function(t){var e=Dt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Dt.each(this,t,e)},ready:function(t){return Dt.ready.promise().done(t),this},slice:function(){return this.pushStack(ot.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},map:function(n){return this.pushStack(Dt.map(this,function(t,e){return n.call(t,e,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:rt,sort:[].sort,splice:[].splice},Dt.fn.init.prototype=Dt.fn,Dt.extend=Dt.fn.extend=function(t,e){var n,i,r,o,s,a,u=t||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof u&&(d=u,u=e||{},l=2),"object"==typeof u||Dt.isFunction(u)||(u={}),c===l&&(u=this,--l);l<c;l++)if(null!=(s=arguments[l]))for(o in s)n=u[o],u!==(r=s[o])&&(d&&r&&(Dt.isPlainObject(r)||(i=Dt.isArray(r)))?(i?(i=!1,a=n&&Dt.isArray(n)?n:[]):a=n&&Dt.isPlainObject(n)?n:{},u[o]=Dt.extend(d,a,r)):r!==C&&(u[o]=r));return u},Dt.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),noConflict:function(t){return m.$===Dt&&(m.$=Z),t&&m.jQuery===Dt&&(m.jQuery=J),Dt},isReady:!1,readyWait:1,holdReady:function(t){t?Dt.readyWait++:Dt.ready(!0)},ready:function(t){if(!0===t?!--Dt.readyWait:!Dt.isReady){if(!X.body)return setTimeout(Dt.ready);(Dt.isReady=!0)!==t&&0<--Dt.readyWait||(V.resolveWith(X,[Dt]),Dt.fn.trigger&&Dt(X).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===Dt.type(t)},isArray:Array.isArray||function(t){return"array"===Dt.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?tt[at.call(t)]||"object":typeof t},isPlainObject:function(t){var e;if(!t||"object"!==Dt.type(t)||t.nodeType||Dt.isWindow(t))return!1;try{if(t.constructor&&!ut.call(t,"constructor")&&!ut.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(Dt.support.ownLast)for(e in t)return ut.call(t,e);for(e in t);return e===C||ut.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||X;var i=pt.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=Dt.buildFragment([t],e,r),r&&Dt(r).remove(),Dt.merge([],i.childNodes))},parseJSON:function(t){return m.JSON&&m.JSON.parse?m.JSON.parse(t):null===t?t:"string"==typeof t&&(t=Dt.trim(t))&&mt.test(t.replace(vt,"@").replace(bt,"]").replace(gt,""))?new Function("return "+t)():void Dt.error("Invalid JSON: "+t)},parseXML:function(t){var e;if(!t||"string"!=typeof t)return null;try{m.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(n){e=C}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||Dt.error("Invalid XML: "+t),e},noop:function(){},globalEval:function(t){t&&Dt.trim(t)&&(m.execScript||function(t){m.eval.call(m,t)})(t)},camelCase:function(t){return t.replace(yt,"ms-").replace(wt,_t)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,r=t.length,o=a(t);if(n){if(o)for(;i<r&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(o)for(;i<r&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:lt&&!lt.call("\ufeff\xa0")?function(t){return null==t?"":lt.call(t)}:function(t){return null==t?"":(t+"").replace(ht,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(a(Object(t))?Dt.merge(n,"string"==typeof t?[t]:t):rt.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(st)return st.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){var n=e.length,i=t.length,r=0;if("number"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;e[r]!==C;)t[i++]=e[r++];return t.length=i,t},grep:function(t,e,n){var i=[],r=0,o=t.length;for(n=!!n;r<o;r++)n!==!!e(t[r],r)&&i.push(t[r]);return i},map:function(t,e,n){var i,r=0,o=t.length,s=[];if(a(t))for(;r<o;r++)null!=(i=e(t[r],r,n))&&(s[s.length]=i);else for(r in t)null!=(i=e(t[r],r,n))&&(s[s.length]=i);return it.apply([],s)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),Dt.isFunction(t)?(n=ot.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(ot.call(arguments)))}).guid=t.guid=t.guid||Dt.guid++,i):C},access:function(t,e,n,i,r,o,s){var a=0,u=t.length,l=null==n;if("object"===Dt.type(n))for(a in r=!0,n)Dt.access(t,e,a,n[a],!0,o,s);else if(i!==C&&(r=!0,Dt.isFunction(i)||(s=!0),l&&(s?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(Dt(t),n)})),e))for(;a<u;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):u?e(t[0],n):o},now:function(){return(new Date).getTime()},swap:function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=s[o];return r}}),Dt.ready.promise=function(t){if(!V)if(V=Dt.Deferred(),"complete"===X.readyState)setTimeout(Dt.ready);else if(X.addEventListener)X.addEventListener("DOMContentLoaded",xt,!1),m.addEventListener("load",xt,!1);else{X.attachEvent("onreadystatechange",xt),m.attachEvent("onload",xt);var e=!1;try{e=null==m.frameElement&&X.documentElement}catch(n){}e&&e.doScroll&&function i(){if(!Dt.isReady){try{e.doScroll("left")}catch(n){return setTimeout(i,50)}Ct(),Dt.ready()}}()}return V.promise(t)},Dt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()}),Y=Dt(X),function(n,r){function _(t,e,n,i){var r,o,s,a,u,l,c,d,h,f;if((e?e.ownerDocument||e:q)!==F&&M(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=(e=e||F).nodeType)&&9!==a)return[];if(L&&!i){if(r=xt.exec(t))if(s=r[1]){if(9===a){if(!(o=e.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&j(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return rt.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&E.getElementsByClassName&&e.getElementsByClassName)return rt.apply(n,e.getElementsByClassName(s)),n}if(E.qsa&&(!H||!H.test(t))){if(d=c=U,h=e,f=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=m(t),(c=e.getAttribute("id"))?d=c.replace(St,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+g(l[u]);h=gt.test(t)&&e.parentNode||e,f=l.join(",")}if(f)try{return rt.apply(n,h.querySelectorAll(f)),n}catch(p){}finally{c||e.removeAttribute("id")}}}return k(t.replace(ft,"$1"),e,n,i)}function e(t){return _t.test(t+"")}function t(){function n(t,e){return i.push(t+=" ")>D.cacheLength&&delete n[i.shift()],n[t]=e}var i=[];return n}function u(t){return t[U]=!0,t}function i(t){var e=F.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e,n){for(var i,r=(t=t.split("|")).length,o=n?null:e;r--;)(i=D.attrHandle[t[r]])&&i!==e||(D.attrHandle[t[r]]=o)}function s(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:!0===t[e]?e.toLowerCase():null}function a(t,e){return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}function l(t){if("input"===t.nodeName.toLowerCase())return t.defaultValue}function c(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Z)-(~t.sourceIndex||Z);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function d(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function h(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function f(s){return u(function(o){return o=+o,u(function(t,e){for(var n,i=s([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function m(t,e){var n,i,r,o,s,a,u,l=K[t+" "];if(l)return e?0:l.slice(0);for(s=t,a=[],u=D.preFilter;s;){for(o in n&&!(i=pt.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(r=[])),n=!1,(i=mt.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(ft," ")}),s=s.slice(n.length)),D.filter)!(i=wt[o].exec(s))||u[o]&&!(i=u[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?_.error(t):K(t,a).slice(0)}function g(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function p(a,t,e){var u=t.dir,l=e&&"parentNode"===u,c=V++;return t.first?function(t,e,n){for(;t=t[u];)if(1===t.nodeType||l)return a(t,e,n)}:function(t,e,n){var i,r,o,s=W+" "+c;if(n){for(;t=t[u];)if((1===t.nodeType||l)&&a(t,e,n))return!0}else for(;t=t[u];)if(1===t.nodeType||l)if((r=(o=t[U]||(t[U]={}))[u])&&r[0]===s){if(!0===(i=r[1])||i===N)return!0===i}else if((r=o[u]=[s])[1]=a(t,e,n)||N,!0===r[1])return!0}}function v(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function x(t,e,n,i,r){for(var o,s=[],a=0,u=t.length,l=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),l&&e.push(a)));return s}function b(f,p,m,g,v,t){return g&&!g[U]&&(g=b(g)),v&&!v[U]&&(v=b(v,t)),u(function(t,e,n,i){var r,o,s,a=[],u=[],l=e.length,c=t||C(p||"*",n.nodeType?[n]:n,[]),d=!f||!t&&p?c:x(c,a,f,n,i),h=m?v||(t?f:l||g)?[]:e:d;if(m&&m(d,h,n,i),g)for(r=x(h,u),g(r,[],n,i),o=r.length;o--;)(s=r[o])&&(h[u[o]]=!(d[u[o]]=s));if(t){if(v||f){if(v){for(r=[],o=h.length;o--;)(s=h[o])&&r.push(d[o]=s);v(null,h=[],r,i)}for(o=h.length;o--;)(s=h[o])&&-1<(r=v?st.call(t,s):a[o])&&(t[r]=!(e[r]=s))}}else h=x(h===e?h.splice(l,h.length):h),v?v(null,e,h,i):rt.apply(e,h)})}function y(t){for(var i,e,n,r=t.length,o=D.relative[t[0].type],s=o||D.relative[" "],a=o?1:0,u=p(function(t){return t===i},s,!0),l=p(function(t){return-1<st.call(i,t)},s,!0),c=[function(t,e,n){return!o&&(n||e!==R)||((i=e).nodeType?u(t,e,n):l(t,e,n))}];a<r;a++)if(e=D.relative[t[a].type])c=[p(v(c),e)];else{if((e=D.filter[t[a].type].apply(null,t[a].matches))[U]){for(n=++a;n<r&&!D.relative[t[n].type];n++);return b(1<a&&v(c),1<a&&g(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ft,"$1"),e,a<n&&y(t.slice(a,n)),n<r&&y(t=t.slice(n)),n<r&&g(t))}c.push(e)}return v(c)}function w(g,v){var b=0,y=0<v.length,w=0<g.length,t=function(t,e,n,i,r){var o,s,a,u=[],l=0,c="0",d=t&&[],h=null!=r,f=R,p=t||w&&D.find.TAG("*",r&&e.parentNode||e),m=W+=null==f?1:Math.random()||.1;for(h&&(R=e!==F&&e,N=b);null!=(o=p[c]);c++){if(w&&o){for(s=0;a=g[s++];)if(a(o,e,n)){i.push(o);break}h&&(W=m,N=++b)}y&&((o=!a&&o)&&l--,t&&d.push(o))}if(l+=c,y&&c!==l){for(s=0;a=v[s++];)a(d,u,e,n);if(t){if(0<l)for(;c--;)d[c]||u[c]||(u[c]=nt.call(i));u=x(u)}rt.apply(i,u),h&&!t&&0<u.length&&1<l+v.length&&_.uniqueSort(i)}return h&&(W=m,R=f),d};return y?u(t):t}function C(t,e,n){for(var i=0,r=e.length;i<r;i++)_(t,e[i],n);return n}function k(t,e,n,i){var r,o,s,a,u,l=m(t);if(!i&&1===l.length){if(2<(o=l[0]=l[0].slice(0)).length&&"ID"===(s=o[0]).type&&E.getById&&9===e.nodeType&&L&&D.relative[o[1].type]){if(!(e=(D.find.ID(s.matches[0].replace(Tt,Et),e)||[])[0]))return n;t=t.slice(o.shift().value.length)}for(r=wt.needsContext.test(t)?0:o.length;r--&&(s=o[r],!D.relative[a=s.type]);)if((u=D.find[a])&&(i=u(s.matches[0].replace(Tt,Et),gt.test(o[0].type)&&e.parentNode||e))){if(o.splice(r,1),!(t=i.length&&g(o)))return rt.apply(n,i),n;break}}return P(t,l)(i,e,!L,n,gt.test(t)),n}function S(){}var T,E,N,D,A,I,P,R,O,M,F,$,L,H,B,z,j,U="sizzle"+-new Date,q=n.document,W=0,V=0,Y=t(),K=t(),G=t(),X=!1,Q=function(){return 0},J=typeof r,Z=1<<31,tt={}.hasOwnProperty,et=[],nt=et.pop,it=et.push,rt=et.push,ot=et.slice,st=et.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},at="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ut="[\\x20\\t\\r\\n\\f]",lt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ct=lt.replace("w","w#"),dt="\\["+ut+"*("+lt+")"+ut+"*(?:([*^$|!~]?=)"+ut+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ct+")|)|)"+ut+"*\\]",ht=":("+lt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+dt.replace(3,8)+")*)|.*)\\)|)",ft=new RegExp("^"+ut+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ut+"+$","g"),pt=new RegExp("^"+ut+"*,"+ut+"*"),mt=new RegExp("^"+ut+"*([>+~]|"+ut+")"+ut+"*"),gt=new RegExp(ut+"*[+~]"),vt=new RegExp("="+ut+"*([^\\]'\"]*)"+ut+"*\\]","g"),bt=new RegExp(ht),yt=new RegExp("^"+ct+"$"),wt={ID:new RegExp("^#("+lt+")"),CLASS:new RegExp("^\\.("+lt+")"),TAG:new RegExp("^("+lt.replace("w","w*")+")"),ATTR:new RegExp("^"+dt),PSEUDO:new RegExp("^"+ht),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ut+"*(even|odd|(([+-]|)(\\d*)n|)"+ut+"*(?:([+-]|)"+ut+"*(\\d+)|))"+ut+"*\\)|)","i"),bool:new RegExp("^(?:"+at+")$","i"),needsContext:new RegExp("^"+ut+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ut+"*((?:-\\d)?\\d*)"+ut+"*\\)|)(?=[^-]|$)","i")},_t=/^[^{]+\{\s*\[native \w/,xt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ct=/^(?:input|select|textarea|button)$/i,kt=/^h\d$/i,St=/'|\\/g,Tt=new RegExp("\\\\([\\da-f]{1,6}"+ut+"?|("+ut+")|.)","ig"),Et=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{rt.apply(et=ot.call(q.childNodes),q.childNodes),et[q.childNodes.length].nodeType}catch(Nt){rt={apply:et.length?function(t,e){it.apply(t,ot.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(T in I=_.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},E=_.support={},M=_.setDocument=function(t){var u=t?t.ownerDocument||t:q;return u!==F&&9===u.nodeType&&u.documentElement?($=(F=u).documentElement,L=!I(u),E.attributes=i(function(t){return t.innerHTML="<a href='#'></a>",o("type|href|height|width",a,"#"===t.firstChild.getAttribute("href")),o(at,s,null==t.getAttribute("disabled")),t.className="i",!t.getAttribute("className")}),E.input=i(function(t){return t.innerHTML="<input>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}),o("value",l,E.attributes&&E.input),E.getElementsByTagName=i(function(t){return t.appendChild(u.createComment("")),!t.getElementsByTagName("*").length}),E.getElementsByClassName=i(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),E.getById=i(function(t){return $.appendChild(t).id=U,!u.getElementsByName||!u.getElementsByName(U).length}),E.getById?(D.find.ID=function(t,e){if(typeof e.getElementById!==J&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},D.filter.ID=function(t){var e=t.replace(Tt,Et);return function(t){return t.getAttribute("id")===e}}):(delete D.find.ID,D.filter.ID=function(t){var n=t.replace(Tt,Et);return function(t){var e=typeof t.getAttributeNode!==J&&t.getAttributeNode("id");return e&&e.value===n}}),D.find.TAG=E.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==J)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},D.find.CLASS=E.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==J&&L)return e.getElementsByClassName(t)},B=[],H=[],(E.qsa=e(u.querySelectorAll))&&(i(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||H.push("\\["+ut+"*(?:value|"+at+")"),t.querySelectorAll(":checked").length||H.push(":checked")}),i(function(t){var e=u.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&H.push("[*^$]="+ut+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),H.push(",.*:")})),(E.matchesSelector=e(z=$.webkitMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector||$.msMatchesSelector))&&i(function(t){E.disconnectedMatch=z.call(t,"div"),z.call(t,"[s!='']:x"),B.push("!=",ht)}),H=H.length&&new RegExp(H.join("|")),B=B.length&&new RegExp(B.join("|")),j=e($.contains)||$.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},E.sortDetached=i(function(t){return 1&t.compareDocumentPosition(u.createElement("div"))}),Q=$.compareDocumentPosition?function(t,e){if(t===e)return X=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n||!E.sortDetached&&e.compareDocumentPosition(t)===n?t===u||j(q,t)?-1:e===u||j(q,e)?1:O?st.call(O,t)-st.call(O,e):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(t===e)return X=!0,0;if(!r||!o)return t===u?-1:e===u?1:r?-1:o?1:O?st.call(O,t)-st.call(O,e):0;if(r===o)return c(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?c(s[i],a[i]):s[i]===q?-1:a[i]===q?1:0},u):F},_.matches=function(t,e){return _(t,null,null,e)},_.matchesSelector=function(t,e){if((t.ownerDocument||t)!==F&&M(t),e=e.replace(vt,"='$1']"),E.matchesSelector&&L&&(!B||!B.test(e))&&(!H||!H.test(e)))try{var n=z.call(t,e);if(n||E.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(Nt){}return 0<_(e,F,null,[t]).length},_.contains=function(t,e){return(t.ownerDocument||t)!==F&&M(t),j(t,e)},_.attr=function(t,e){(t.ownerDocument||t)!==F&&M(t);var n=D.attrHandle[e.toLowerCase()],i=n&&tt.call(D.attrHandle,e.toLowerCase())?n(t,e,!L):r;return i===r?E.attributes||!L?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null:i},_.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},_.uniqueSort=function(t){var e,n=[],i=0,r=0;if(X=!E.detectDuplicates,O=!E.sortStable&&t.slice(0),t.sort(Q),X){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},A=_.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=A(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=A(e);return n},D=_.selectors={cacheLength:50,createPseudo:u,match:wt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Tt,Et),t[3]=(t[4]||t[5]||"").replace(Tt,Et),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||_.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&_.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return wt.CHILD.test(t[0])?null:(t[3]&&t[4]!==r?t[2]=t[4]:n&&bt.test(n)&&(e=m(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Tt,Et).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=Y[t+" "];return e||(e=new RegExp("(^|"+ut+")"+t+"("+ut+"|$)"))&&Y(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==J&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=_.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,t,e,p,m){var g="nth"!==f.slice(0,3),v="last"!==f.slice(-4),b="of-type"===t;return 1===p&&0===m?function(t){return!!t.parentNode}:function(t,e,n
){var i,r,o,s,a,u,l=g!==v?"nextSibling":"previousSibling",c=t.parentNode,d=b&&t.nodeName.toLowerCase(),h=!n&&!b;if(c){if(g){for(;l;){for(o=t;o=o[l];)if(b?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;u=l="only"===f&&!u&&"nextSibling"}return!0}if(u=[v?c.firstChild:c.lastChild],v&&h){for(a=(i=(r=c[U]||(c[U]={}))[f]||[])[0]===W&&i[1],s=i[0]===W&&i[2],o=a&&c.childNodes[a];o=++a&&o&&o[l]||(s=a=0)||u.pop();)if(1===o.nodeType&&++s&&o===t){r[f]=[W,a,s];break}}else if(h&&(i=(t[U]||(t[U]={}))[f])&&i[0]===W)s=i[1];else for(;(o=++a&&o&&o[l]||(s=a=0)||u.pop())&&((b?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++s||(h&&((o[U]||(o[U]={}))[f]=[W,s]),o!==t)););return(s-=m)===p||s%p==0&&0<=s/p}}},PSEUDO:function(t,o){var e,s=D.pseudos[t]||D.setFilters[t.toLowerCase()]||_.error("unsupported pseudo: "+t);return s[U]?s(o):1<s.length?(e=[t,t,"",o],D.setFilters.hasOwnProperty(t.toLowerCase())?u(function(t,e){for(var n,i=s(t,o),r=i.length;r--;)t[n=st.call(t,i[r])]=!(e[n]=i[r])}):function(t){return s(t,0,e)}):s}},pseudos:{not:u(function(t){var i=[],r=[],a=P(t.replace(ft,"$1"));return a[U]?u(function(t,e,n,i){for(var r,o=a(t,null,i,[]),s=t.length;s--;)(r=o[s])&&(t[s]=!(e[s]=r))}):function(t,e,n){return i[0]=t,a(i,null,n,r),!r.pop()}}),has:u(function(e){return function(t){return 0<_(e,t).length}}),contains:u(function(e){return function(t){return-1<(t.textContent||t.innerText||A(t)).indexOf(e)}}),lang:u(function(n){return yt.test(n||"")||_.error("unsupported lang: "+n),n=n.replace(Tt,Et).toLowerCase(),function(t){var e;do{if(e=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===$},focus:function(t){return t===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if("@"<t.nodeName||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!D.pseudos.empty(t)},header:function(t){return kt.test(t.nodeName)},input:function(t){return Ct.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:f(function(){return[0]}),last:f(function(t,e){return[e-1]}),eq:f(function(t,e,n){return[n<0?n+e:n]}),even:f(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:f(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:f(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:f(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})D.pseudos[T]=d(T);for(T in{submit:!0,reset:!0})D.pseudos[T]=h(T);P=_.compile=function(t,e){var n,i=[],r=[],o=G[t+" "];if(!o){for(e||(e=m(t)),n=e.length;n--;)(o=y(e[n]))[U]?i.push(o):r.push(o);o=G(t,w(r,i))}return o},D.pseudos.nth=D.pseudos.eq,S.prototype=D.filters=D.pseudos,D.setFilters=new S,E.sortStable=U.split("").sort(Q).join("")===U,M(),[0,0].sort(Q),E.detectDuplicates=X,Dt.find=_,Dt.expr=_.selectors,Dt.expr[":"]=Dt.expr.pseudos,Dt.unique=_.uniqueSort,Dt.text=_.getText,Dt.isXMLDoc=_.isXML,Dt.contains=_.contains}(m);var kt={};Dt.Callbacks=function(r){r="string"==typeof r?kt[r]||t(r):Dt.extend({},r);var o,e,n,s,i,a,u=[],l=!r.once&&[],c=function(t){for(e=r.memory&&t,n=!0,i=a||0,a=0,s=u.length,o=!0;u&&i<s;i++)if(!1===u[i].apply(t[0],t[1])&&r.stopOnFalse){e=!1;break}o=!1,u&&(l?l.length&&c(l.shift()):e?u=[]:d.disable())},d={add:function(){if(u){var t=u.length;!function i(t){Dt.each(t,function(t,e){var n=Dt.type(e);"function"===n?r.unique&&d.has(e)||u.push(e):e&&e.length&&"string"!==n&&i(e)})}(arguments),o?s=u.length:e&&(a=t,c(e))}return this},remove:function(){return u&&Dt.each(arguments,function(t,e){for(var n;-1<(n=Dt.inArray(e,u,n));)u.splice(n,1),o&&(n<=s&&s--,n<=i&&i--)}),this},has:function(t){return t?-1<Dt.inArray(t,u):!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=e=C,this},disabled:function(){return!u},lock:function(){return l=C,e||d.disable(),this},locked:function(){return!l},fireWith:function(t,e){return e=[t,(e=e||[]).slice?e.slice():e],!u||n&&!l||(o?l.push(e):c(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},Dt.extend({Deferred:function(t){var s=[["resolve","done",Dt.Callbacks("once memory"),"resolved"],["reject","fail",Dt.Callbacks("once memory"),"rejected"],["notify","progress",Dt.Callbacks("memory")]],r="pending",a={state:function(){return r},always:function(){return u.done(arguments).fail(arguments),this},then:function(){var o=arguments;return Dt.Deferred(function(r){Dt.each(s,function(t,e){var n=e[0],i=Dt.isFunction(o[t])&&o[t];u[e[1]](function(){var t=i&&i.apply(this,arguments);t&&Dt.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[n+"With"](this===a?r.promise():this,i?[t]:arguments)})}),o=null}).promise()},promise:function(t){return null!=t?Dt.extend(t,a):a}},u={};return a.pipe=a.then,Dt.each(s,function(t,e){var n=e[2],i=e[3];a[e[1]]=n.add,i&&n.add(function(){r=i},s[1^t][2].disable,s[2][2].lock),u[e[0]]=function(){return u[e[0]+"With"](this===u?a:this,arguments),this},u[e[0]+"With"]=n.fireWith}),a.promise(u),t&&t.call(u,u),u},when:function(t){var r,e,n,i=0,o=ot.call(arguments),s=o.length,a=1!==s||t&&Dt.isFunction(t.promise)?s:0,u=1===a?t:Dt.Deferred(),l=function(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?ot.call(arguments):t,i===r?u.notifyWith(n,i):--a||u.resolveWith(n,i)}};if(1<s)for(r=new Array(s),e=new Array(s),n=new Array(s);i<s;i++)o[i]&&Dt.isFunction(o[i].promise)?o[i].promise().done(l(i,n,o)).fail(u.reject).progress(l(i,e,r)):--a;return a||u.resolveWith(n,o),u.promise()}}),Dt.support=function(o){var t,e,n,i,r,s,a,u,l,c=X.createElement("div");if(c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=c.getElementsByTagName("*")||[],!(e=c.getElementsByTagName("a")[0])||!e.style||!t.length)return o;s=(i=X.createElement("select")).appendChild(X.createElement("option")),n=c.getElementsByTagName("input")[0],e.style.cssText="top:1px;float:left;opacity:.5",o.getSetAttribute="t"!==c.className,o.leadingWhitespace=3===c.firstChild.nodeType,o.tbody=!c.getElementsByTagName("tbody").length,o.htmlSerialize=!!c.getElementsByTagName("link").length,o.style=/top/.test(e.getAttribute("style")),o.hrefNormalized="/a"===e.getAttribute("href"),o.opacity=/^0.5/.test(e.style.opacity),o.cssFloat=!!e.style.cssFloat,o.checkOn=!!n.value,o.optSelected=s.selected,o.enctype=!!X.createElement("form").enctype,o.html5Clone="<:nav></:nav>"!==X.createElement("nav").cloneNode(!0).outerHTML,o.inlineBlockNeedsLayout=!1,o.shrinkWrapBlocks=!1,o.pixelPosition=!1,o.deleteExpando=!0,o.noCloneEvent=!0,o.reliableMarginRight=!0,o.boxSizingReliable=!0,n.checked=!0,o.noCloneChecked=n.cloneNode(!0).checked,i.disabled=!0,o.optDisabled=!s.disabled;try{delete c.test}catch(d){o.deleteExpando=!1}for(l in(n=X.createElement("input")).setAttribute("value",""),o.input=""===n.getAttribute("value"),n.value="t",n.setAttribute("type","radio"),o.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),(r=X.createDocumentFragment()).appendChild(n),o.appendChecked=n.checked,o.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,c.attachEvent&&(c.attachEvent("onclick",function(){o.noCloneEvent=!1}),c.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})c.setAttribute(a="on"+l,"t"),o[l+"Bubbles"]=a in m||!1===c.attributes[a].expando;for(l in c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===c.style.backgroundClip,Dt(o))break;return o.ownLast="0"!==l,Dt(function(){var t,e,n,i="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=X.getElementsByTagName("body")[0];r&&((t=X.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(t).appendChild(c),c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=c.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",o.reliableHiddenOffsets=u&&0===n[0].offsetHeight,c.innerHTML="",c.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",Dt.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){o.boxSizing=4===c.offsetWidth}),m.getComputedStyle&&(o.pixelPosition="1%"!==(m.getComputedStyle(c,null)||{}).top,o.boxSizingReliable="4px"===(m.getComputedStyle(c,null)||{width:"4px"}).width,(e=c.appendChild(X.createElement("div"))).style.cssText=c.style.cssText=i,e.style.marginRight=e.style.width="0",c.style.width="1px",o.reliableMarginRight=!parseFloat((m.getComputedStyle(e,null)||{}).marginRight)),typeof c.style.zoom!==K&&(c.innerHTML="",c.style.cssText=i+"width:1px;padding:1px;display:inline;zoom:1",o.inlineBlockNeedsLayout=3===c.offsetWidth,c.style.display="block",c.innerHTML="<div></div>",c.firstChild.style.width="5px",o.shrinkWrapBlocks=3!==c.offsetWidth,o.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(t),t=c=n=e=null)}),t=i=r=s=e=n=null,o}({});var St=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Tt=/([A-Z])/g;Dt.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?Dt.cache[t[Dt.expando]]:t[Dt.expando])&&!l(t)},data:function(t,e,n){return i(t,e,n)},removeData:function(t,e){return n(t,e)},_data:function(t,e,n){return i(t,e,n,!0)},_removeData:function(t,e){return n(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&Dt.noData[t.nodeName.toLowerCase()];return!e||!0!==e&&t.getAttribute("classid")===e}}),Dt.fn.extend({data:function(t,e){var n,i,r=null,o=0,s=this[0];if(t!==C)return"object"==typeof t?this.each(function(){Dt.data(this,t)}):1<arguments.length?this.each(function(){Dt.data(this,t,e)}):s?u(s,t,Dt.data(s,t)):null;if(this.length&&(r=Dt.data(s),1===s.nodeType&&!Dt._data(s,"parsedAttrs"))){for(n=s.attributes;o<n.length;o++)0===(i=n[o].name).indexOf("data-")&&u(s,i=Dt.camelCase(i.slice(5)),r[i]);Dt._data(s,"parsedAttrs",!0)}return r},removeData:function(t){return this.each(function(){Dt.removeData(this,t)})}}),Dt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Dt._data(t,e),n&&(!i||Dt.isArray(n)?i=Dt._data(t,e,Dt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=Dt.queue(t,e),i=n.length,r=n.shift(),o=Dt._queueHooks(t,e),s=function(){Dt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),(o.cur=r)&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Dt._data(t,n)||Dt._data(t,n,{empty:Dt.Callbacks("once memory").add(function(){Dt._removeData(t,e+"queue"),Dt._removeData(t,n)})})}}),Dt.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?Dt.queue(this[0],e):n===C?this:this.each(function(){var t=Dt.queue(this,e,n);Dt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Dt.dequeue(this,e)})},dequeue:function(t){return this.each(function(){Dt.dequeue(this,t)})},delay:function(i,t){return i=Dt.fx&&Dt.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=setTimeout(t,i);e.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=Dt.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=C),t=t||"fx";s--;)(n=Dt._data(o[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var Et,Nt,At=/[\t\r\n\f]/g,It=/\r/g,Pt=/^(?:input|select|textarea|button|object)$/i,Rt=/^(?:a|area)$/i,Ot=/^(?:checked|selected)$/i,Mt=Dt.support.getSetAttribute,Ft=Dt.support.input;Dt.fn.extend({attr:function(t,e){return Dt.access(this,Dt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){Dt.removeAttr(this,t)})},prop:function(t,e){return Dt.access(this,Dt.prop,t,e,1<arguments.length)},removeProp:function(e){return e=Dt.propFix[e]||e,this.each(function(){try{this[e]=C,delete this[e]}catch(t){}})},addClass:function(e){var t,n,i,r,o,s=0,a=this.length,u="string"==typeof e&&e;if(Dt.isFunction(e))return this.each(function(t){Dt(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(dt)||[];s<a;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(At," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=Dt.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,s=0,a=this.length,u=0===arguments.length||"string"==typeof e&&e;if(Dt.isFunction(e))return this.each(function(t){Dt(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(dt)||[];s<a;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(At," "):"")){for(o=0;r=t[o++];)for(;0<=i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");n.className=e?Dt.trim(i):""}return this},toggleClass:function(o,s){var a=typeof o,u="boolean"==typeof s;return Dt.isFunction(o)?this.each(function(t){Dt(this).toggleClass(o.call(this,t,this.className,s),s)}):this.each(function(){if("string"===a)for(var t,e=0,n=Dt(this),i=s,r=o.match(dt)||[];t=r[e++];)i=u?i:!n.hasClass(t),n[i?"addClass":"removeClass"](t);else a!==K&&"boolean"!==a||(this.className&&Dt._data(this,"__className__",this.className),this.className=this.className||!1===o?"":Dt._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(At," ").indexOf(e))return!0;return!1},val:function(n){var t,i,r,e=this[0];return arguments.length?(r=Dt.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,Dt(this).val()):n)?e="":"number"==typeof e?e+="":Dt.isArray(e)&&(e=Dt.map(e,function(t){return null==t?"":t+""})),(i=Dt.valHooks[this.type]||Dt.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==C||(this.value=e))})):e?(i=Dt.valHooks[e.type]||Dt.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==C?t:"string"==typeof(t=e.value)?t.replace(It,""):null==t?"":t:void 0}}),Dt.extend({valHooks:{option:{get:function(t){var e=Dt.find.attr(t,"value");return null!=e?e:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||r<0,s=o?null:[],a=o?r+1:i.length,u=r<0?a:o?r:0;u<a;u++)if(((n=i[u]).selected||u===r)&&(Dt.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!Dt.nodeName(n.parentNode,"optgroup"))){if(e=Dt(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=Dt.makeArray(e),s=r.length;s--;)((i=r[s]).selected=0<=Dt.inArray(Dt(i).val(),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}},attr:function(t,e,n){var i,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===K?Dt.prop(t,e,n):(1===o&&Dt.isXMLDoc(t)||(e=e.toLowerCase(),i=Dt.attrHooks[e]||(Dt.expr.match.bool.test(e)?Nt:Et)),n===C?i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=Dt.find.attr(t,e))?C:r:null!==n?i&&"set"in i&&(r=i.set(t,n,e))!==C?r:(t.setAttribute(e,n+""),n):void Dt.removeAttr(t,e))},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(dt);if(o&&1===t.nodeType)for(;n=o[r++];)i=Dt.propFix[n]||n,Dt.expr.match.bool.test(n)?Ft&&Mt||!Ot.test(n)?t[i]=!1:t[Dt.camelCase("default-"+n)]=t[i]=!1:Dt.attr(t,n,""),t.removeAttribute(Mt?n:i)},attrHooks:{type:{set:function(t,e){if(!Dt.support.radioValue&&"radio"===e&&Dt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!Dt.isXMLDoc(t))&&(e=Dt.propFix[e]||e,r=Dt.propHooks[e]),n!==C?r&&"set"in r&&(i=r.set(t,n,e))!==C?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=Dt.find.attr(t,"tabindex");return e?parseInt(e,10):Pt.test(t.nodeName)||Rt.test(t.nodeName)&&t.href?0:-1}}}}),Nt={set:function(t,e,n){return!1===e?Dt.removeAttr(t,n):Ft&&Mt||!Ot.test(n)?t.setAttribute(!Mt&&Dt.propFix[n]||n,n):t[Dt.camelCase("default-"+n)]=t[n]=!0,n}},Dt.each(Dt.expr.match.bool.source.match(/\w+/g),function(t,e){var o=Dt.expr.attrHandle[e]||Dt.find.attr;Dt.expr.attrHandle[e]=Ft&&Mt||!Ot.test(e)?function(t,e,n){var i=Dt.expr.attrHandle[e],r=n?C:(Dt.expr.attrHandle[e]=C)!=o(t,e,n)?e.toLowerCase():null;return Dt.expr.attrHandle[e]=i,r}:function(t,e,n){return n?C:t[Dt.camelCase("default-"+e)]?e.toLowerCase():null}}),Ft&&Mt||(Dt.attrHooks.value={set:function(t,e,n){if(!Dt.nodeName(t,"input"))return Et&&Et.set(t,e,n);t.defaultValue=e}}),Mt||(Et={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:C}},Dt.expr.attrHandle.id=Dt.expr.attrHandle.name=Dt.expr.attrHandle.coords=function(t,e,n){var i;return n?C:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},Dt.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:C},set:Et.set},Dt.attrHooks.contenteditable={set:function(t,e,n){Et.set(t,""!==e&&e,n)}},Dt.each(["width","height"],function(t,n){Dt.attrHooks[n]={set:function(t,e){if(""===e)return t.setAttribute(n,"auto"),e}}})),Dt.support.hrefNormalized||Dt.each(["href","src"],function(t,e){Dt.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),Dt.support.style||(Dt.attrHooks.style={get:function(t){return t.style.cssText||C},set:function(t,e){return t.style.cssText=e+""}}),Dt.support.optSelected||(Dt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),Dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Dt.propFix[this.toLowerCase()]=this}),Dt.support.enctype||(Dt.propFix.enctype="encoding"),Dt.each(["radio","checkbox"],function(){Dt.valHooks[this]={set:function(t,e){if(Dt.isArray(e))return t.checked=0<=Dt.inArray(Dt(t).val(),e)}},Dt.support.checkOn||(Dt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var $t=/^(?:input|select|textarea)$/i,Lt=/^key/,Ht=/^(?:mouse|contextmenu)|click/,Bt=/^(?:focusinfocus|focusoutblur)$/,zt=/^([^.]*)(?:\.(.+)|)$/;Dt.event={global:{},add:function(t,e,n,i,r){var o,s,a,u,l,c,d,h,f,p,m,g=Dt._data(t);if(g){for(n.handler&&(n=(u=n).handler,r=u.selector),n.guid||(n.guid=Dt.guid++),(s=g.events)||(s=g.events={}),(c=g.handle)||((c=g.handle=function(t){return typeof Dt===K||t&&Dt.event.triggered===t.type?C:Dt.event.dispatch.apply(c.elem,arguments)}).elem=t),a=(e=(e||"").match(dt)||[""]).length;a--;)f=m=(o=zt.exec(e[a])||[])[1],p=(o[2]||"").split(".").sort(),f&&(l=Dt.event.special[f]||{},f=(r?l.delegateType:l.bindType)||f,l=Dt.event.special[f]||{},d=Dt.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Dt.expr.match.needsContext.test(r),namespace:p.join(".")},u),(h=s[f])||((h=s[f]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,i,p,c)||(t.addEventListener?t.addEventListener(f,c,!1):t.attachEvent&&t.attachEvent("on"+f,c))),l.add&&(l.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),Dt.event.global[f]=!0);t=null}},remove:function(t,e,n,i,r){var o,s,a,u,l,c,d,h,f,p,m,g=Dt.hasData(t)&&Dt._data(t);if(g&&(c=g.events)){for(l=(e=(e||"").match(dt)||[""]).length;l--;)if(f=m=(a=zt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(d=Dt.event.special[f]||{},h=c[f=(i?d.delegateType:d.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=h.length;o--;)s=h[o],!r&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(t,s));u&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,p,g.handle)||Dt.removeEvent(t,f,g.handle),delete c[f])}else for(f in c)Dt.event.remove(t,f+e[l],n,i,!0);Dt.isEmptyObject(c)&&(delete g.handle,Dt._removeData(t,"events"))}},trigger:function(t,e,n,i){var r,o,s,a,u,l,c,d=[n||X],h=ut.call(t,"type")?t.type:t,f=ut.call(t,"namespace")?t.namespace.split("."):[];if(s=l=n=n||X,3!==n.nodeType&&8!==n.nodeType&&!Bt.test(h+Dt.event.triggered)&&(0<=h.indexOf(".")&&(h=(f=h.split(".")).shift(),f.sort()),o=h.indexOf(":")<0&&"on"+h,(t=t[Dt.expando]?t:new Dt.Event(h,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=C,t.target||(t.target=n),e=null==e?[t]:Dt.makeArray(e,[t]),u=Dt.event.special[h]||{},i||!u.trigger||!1!==u.trigger.apply(n,e))){if(!i&&!u.noBubble&&!Dt.isWindow(n)){for(a=u.delegateType||h,Bt.test(a+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),l=s;l===(n.ownerDocument||X)&&d.push(l.defaultView||l.parentWindow||m)}for(c=0;(s=d[c++])&&!t.isPropagationStopped();)t.type=1<c?a:u.bindType||h,(r=(Dt._data(s,"events")||{})[t.type]&&Dt._data(s,"handle"))&&r.apply(s,e),(r=o&&s[o])&&Dt.acceptData(s)&&r.apply&&!1===r.apply(s,e)&&t.preventDefault();if(t.type=h,!i&&!t.isDefaultPrevented()&&(!u._default||!1===u._default.apply(d.pop(),e))&&Dt.acceptData(n)&&o&&n[h]&&!Dt.isWindow(n)){(l=n[o])&&(n[o]=null),Dt.event.triggered=h;try{n[h]()}catch(p){}Dt.event.triggered=C,l&&(n[o]=l)}return t.result}},dispatch:function(t){t=Dt.event.fix(t);var e,n,i,r,o,s=[],a=ot.call(arguments),u=(Dt._data(this,"events")||{})[t.type]||[],l=Dt.event.special[t.type]||{};if((a[0]=t).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,t)){for(s=Dt.event.handlers.call(this,t,u),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(i.namespace)||(t.handleObj=i,t.data=i.data,(n=((Dt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))!==C&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,s=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==t.type)){for(r=[],o=0;o<a;o++)r[n=(i=e[o]).selector+" "]===C&&(r[n]=i.needsContext?0<=Dt(n,this).index(u):Dt.find(n,this,null,[u]).length),r[n]&&r.push(i);r.length&&s.push({elem:u,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[Dt.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ht.test(r)?this.mouseHooks:Lt.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new Dt.Event(o),e=i.length;e--;)t[n=i[e]]=o[n];return t.target||(t.target=o.srcElement||X),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(r=(i=t.target.ownerDocument||X).documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||o===C||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==e()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===e()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(Dt.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return Dt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==C&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=Dt.extend(new Dt.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?Dt.event.trigger(r,null,e):Dt.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},Dt.removeEvent=X.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===K&&(t[i]=null),t.detachEvent(i,n))},Dt.Event=function(t,e){if(!(this instanceof Dt.Event))return new Dt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||!1===t.returnValue||t.getPreventDefault&&t.getPreventDefault()?r:c):this.type=t,e&&Dt.extend(this,e),this.timeStamp=t&&t.timeStamp||Dt.now(),this[Dt.expando]=!0},Dt.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=r,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=r,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()}},Dt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,o){Dt.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=this,i=t.relatedTarget,r=t.handleObj;return i&&(i===n||Dt.contains(n,i))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=o),e}}}),Dt.support.submitBubbles||(Dt.event.special.submit={setup:function(){if(Dt.nodeName(this,"form"))return!1;Dt.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=Dt.nodeName(e,"input")||Dt.nodeName(e,"button")?e.form:C;n&&!Dt._data(n,"submitBubbles")&&(Dt.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),Dt._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&Dt.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(Dt.nodeName(this,"form"))return!1;Dt.event.remove(this,"._submit")}}),Dt.support.changeBubbles||(Dt.event.special.change={setup:function(){if($t.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(Dt.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),Dt.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),Dt.event.simulate("change",this,t,!0)})),!1;Dt.event.add(this,"beforeactivate._change",function(t){var e=t.target;$t.test(e.nodeName)&&!Dt._data(e,"changeBubbles")&&(Dt.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||Dt.event.simulate("change",this.parentNode,t,!0)}),Dt._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return Dt.event.remove(this,"._change"),!$t.test(this.nodeName)}}),Dt.support.focusinBubbles||Dt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){Dt.event.simulate(e,t.target,Dt.event.fix(t),!0)};Dt.event.special[e]={setup:function(){0==n++&&X.addEventListener(t,i,!0)},teardown:function(){0==--n&&X.removeEventListener(t,i,!0)}}}),Dt.fn.extend({on:function(t,e,n,i,r){var o,s;if("object"==typeof t){for(o in"string"!=typeof e&&(n=n||e,e=C),t)this.on(o,e,n,t[o],r);return this}if(null==n&&null==i?(i=e,n=e=C):null==i&&("string"==typeof e?(i=n,n=C):(i=n,n=e,e=C)),!1===i)i=c;else if(!i)return this;return 1===r&&(s=i,(i=function(t){return Dt().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=Dt.guid++)),this.each(function(){Dt.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,Dt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=C),!1===n&&(n=c),this.each(function(){Dt.event.remove(this,t,n,e)});for(r in t)this.off(r,e,t[r]);return this},trigger:function(t,e){return this.each(function(){Dt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return Dt.event.trigger(t,e,n,!0)}});var jt=/^.[^:#\[\.,]*$/,Ut=/^(?:parents|prev(?:Until|All))/,qt=Dt.expr.match.needsContext,Wt={children:!0,contents:!0,next:!0,prev:!0};Dt.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(Dt(t).filter(function(){for(e=0;e<r;e++)if(Dt.contains(i[e],this))return!0}));for(e=0;e<r;e++)Dt.find(t,i[e],n);return(n=this.pushStack(1<r?Dt.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e,n=Dt(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(Dt.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(s(this,t||[],!0))},filter:function(t){return this.pushStack(s(this,t||[],!1))},is:function(t){return!!s(this,"string"==typeof t&&qt.test(t)?Dt(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=qt.test(t)||"string"!=typeof t?Dt(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&Dt.find.matchesSelector(n,t))){n=o.push(n);break}return this.pushStack(1<o.length?Dt.unique(o):o)},index:function(t){return t?"string"==typeof t?Dt.inArray(this[0],Dt(t)):Dt.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?Dt(t,e):Dt.makeArray(t&&t.nodeType?[t]:t),i=Dt.merge(this.get(),n);return this.pushStack(Dt.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Dt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Dt.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Dt.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return Dt.dir(t,"nextSibling")},prevAll:function(t){return Dt.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Dt.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Dt.dir(t,"previousSibling",n)},siblings:function(t){return Dt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Dt.sibling(t.firstChild)},contents:function(t){return Dt.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:Dt.merge([],t.childNodes)}},function(i,r){Dt.fn[i]=function(t,e){var n=Dt.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=Dt.filter(e,n)),1<this.length&&(Wt[i]||(n=Dt.unique(n)),Ut.test(i)&&(n=n.reverse())),this.pushStack(n)}}),Dt.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?Dt.find.matchesSelector(i,t)?[i]:[]:Dt.find.matches(t,Dt.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,e,n){for(var i=[],r=t[e];r&&9!==r.nodeType&&(n===C||1!==r.nodeType||!Dt(r).is(n));)1===r.nodeType&&i.push(r),r=r[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Yt=/ jQuery\d+="(?:null|\d+)"/g,Kt=new RegExp("<(?:"+Vt+")[\\s/>]","i"),Gt=/^\s+/,
Xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qt=/<([\w:]+)/,Jt=/<tbody/i,Zt=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ee=/^(?:checkbox|radio)$/i,ne=/checked\s*(?:[^=]|=\s*.checked.)/i,ie=/^$|\/(?:java|ecma)script/i,re=/^true\/(.*)/,oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,se={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:Dt.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ae=g(X).appendChild(X.createElement("div"));se.optgroup=se.option,se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td,Dt.fn.extend({text:function(t){return Dt.access(this,function(t){return t===C?Dt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||d(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?Dt.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||Dt.cleanData(w(n)),n.parentNode&&(e&&Dt.contains(n.ownerDocument,n)&&y(w(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&Dt.cleanData(w(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&Dt.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return Dt.clone(this,t,e)})},html:function(t){return Dt.access(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===C)return 1===e.nodeType?e.innerHTML.replace(Yt,""):C;if("string"==typeof t&&!te.test(t)&&(Dt.support.htmlSerialize||!Kt.test(t))&&(Dt.support.leadingWhitespace||!Gt.test(t))&&!se[(Qt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Xt,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(Dt.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=Dt.map(this,function(t){return[t.nextSibling,t.parentNode]}),r=0;return this.domManip(arguments,function(t){var e=i[r++],n=i[r++];n&&(e&&e.parentNode!==n&&(e=this.nextSibling),Dt(this).remove(),n.insertBefore(t,e))},!0),r?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(n,i,r){n=it.apply([],n);var t,e,o,s,a,u,l=0,c=this.length,d=this,h=c-1,f=n[0],p=Dt.isFunction(f);if(p||!(c<=1||"string"!=typeof f||Dt.support.checkClone)&&ne.test(f))return this.each(function(t){var e=d.eq(t);p&&(n[0]=f.call(this,t,e.html())),e.domManip(n,i,r)});if(c&&(t=(u=Dt.buildFragment(n,this[0].ownerDocument,!1,!r&&this)).firstChild,1===u.childNodes.length&&(u=t),t)){for(o=(s=Dt.map(w(u,"script"),v)).length;l<c;l++)e=u,l!==h&&(e=Dt.clone(e,!0,!0),o&&Dt.merge(s,w(e,"script"))),i.call(this[l],e,l);if(o)for(a=s[s.length-1].ownerDocument,Dt.map(s,b),l=0;l<o;l++)e=s[l],ie.test(e.type||"")&&!Dt._data(e,"globalEval")&&Dt.contains(a,e)&&(e.src?Dt._evalUrl(e.src):Dt.globalEval((e.text||e.textContent||e.innerHTML||"").replace(oe,"")));u=t=null}return this}}),Dt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){Dt.fn[t]=function(t){for(var e,n=0,i=[],r=Dt(t),o=r.length-1;n<=o;n++)e=n===o?this:this.clone(!0),Dt(r[n])[s](e),rt.apply(i,e.get());return this.pushStack(i)}}),Dt.extend({clone:function(t,e,n){var i,r,o,s,a,u=Dt.contains(t.ownerDocument,t);if(Dt.support.html5Clone||Dt.isXMLDoc(t)||!Kt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(ae.innerHTML=t.outerHTML,ae.removeChild(o=ae.firstChild)),!(Dt.support.noCloneEvent&&Dt.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Dt.isXMLDoc(t)))for(i=w(o),a=w(t),s=0;null!=(r=a[s]);++s)i[s]&&f(r,i[s]);if(e)if(n)for(a=a||w(t),i=i||w(o),s=0;null!=(r=a[s]);s++)h(r,i[s]);else h(t,o);return 0<(i=w(o,"script")).length&&y(i,!u&&w(t,"script")),i=a=r=null,o},buildFragment:function(t,e,n,i){for(var r,o,s,a,u,l,c,d=t.length,h=g(e),f=[],p=0;p<d;p++)if((o=t[p])||0===o)if("object"===Dt.type(o))Dt.merge(f,o.nodeType?[o]:o);else if(Zt.test(o)){for(a=a||h.appendChild(e.createElement("div")),u=(Qt.exec(o)||["",""])[1].toLowerCase(),c=se[u]||se._default,a.innerHTML=c[1]+o.replace(Xt,"<$1></$2>")+c[2],r=c[0];r--;)a=a.lastChild;if(!Dt.support.leadingWhitespace&&Gt.test(o)&&f.push(e.createTextNode(Gt.exec(o)[0])),!Dt.support.tbody)for(r=(o="table"!==u||Jt.test(o)?"<table>"!==c[1]||Jt.test(o)?0:a:a.firstChild)&&o.childNodes.length;r--;)Dt.nodeName(l=o.childNodes[r],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(Dt.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(e.createTextNode(o));for(a&&h.removeChild(a),Dt.support.appendChecked||Dt.grep(w(f,"input"),_),p=0;o=f[p++];)if((!i||-1===Dt.inArray(o,i))&&(s=Dt.contains(o.ownerDocument,o),a=w(h.appendChild(o),"script"),s&&y(a),n))for(r=0;o=a[r++];)ie.test(o.type||"")&&n.push(o);return a=null,h},cleanData:function(t,e){for(var n,i,r,o,s=0,a=Dt.expando,u=Dt.cache,l=Dt.support.deleteExpando,c=Dt.event.special;null!=(n=t[s]);s++)if((e||Dt.acceptData(n))&&(o=(r=n[a])&&u[r])){if(o.events)for(i in o.events)c[i]?Dt.event.remove(n,i):Dt.removeEvent(n,i,o.handle);u[r]&&(delete u[r],l?delete n[a]:typeof n.removeAttribute!==K?n.removeAttribute(a):n[a]=null,et.push(r))}},_evalUrl:function(t){return Dt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),Dt.fn.extend({wrapAll:function(e){if(Dt.isFunction(e))return this.each(function(t){Dt(this).wrapAll(e.call(this,t))});if(this[0]){var t=Dt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(n){return Dt.isFunction(n)?this.each(function(t){Dt(this).wrapInner(n.call(this,t))}):this.each(function(){var t=Dt(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=Dt.isFunction(e);return this.each(function(t){Dt(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){Dt.nodeName(this,"body")||Dt(this).replaceWith(this.childNodes)}).end()}});var ue,le,ce,de=/alpha\([^)]*\)/i,he=/opacity\s*=\s*([^)]*)/,fe=/^(top|right|bottom|left)$/,pe=/^(none|table(?!-c[ea]).+)/,me=/^margin/,ge=new RegExp("^("+ct+")(.*)$","i"),ve=new RegExp("^("+ct+")(?!px)[a-z%]+$","i"),be=new RegExp("^([+-])=("+ct+")","i"),ye={BODY:"block"},we={position:"absolute",visibility:"hidden",display:"block"},_e={letterSpacing:0,fontWeight:400},xe=["Top","Right","Bottom","Left"],Ce=["Webkit","O","Moz","ms"];Dt.fn.extend({css:function(t,e){return Dt.access(this,function(t,e,n){var i,r,o={},s=0;if(Dt.isArray(e)){for(r=le(t),i=e.length;s<i;s++)o[e[s]]=Dt.css(t,e[s],!1,r);return o}return n!==C?Dt.style(t,e,n):Dt.css(t,e)},t,e,1<arguments.length)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:x(this))?Dt(this).show():Dt(this).hide()})}}),Dt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ce(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Dt.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=Dt.camelCase(e),u=t.style;if(e=Dt.cssProps[a]||(Dt.cssProps[a]=p(u,a)),s=Dt.cssHooks[e]||Dt.cssHooks[a],n===C)return s&&"get"in s&&(r=s.get(t,!1,i))!==C?r:u[e];if(!("string"===(o=typeof n)&&(r=be.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Dt.css(t,e)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||Dt.cssNumber[a]||(n+="px"),Dt.support.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&(n=s.set(t,n,i))===C)))try{u[e]=n}catch(l){}}},css:function(t,e,n,i){var r,o,s,a=Dt.camelCase(e);return e=Dt.cssProps[a]||(Dt.cssProps[a]=p(t.style,a)),(s=Dt.cssHooks[e]||Dt.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,n)),o===C&&(o=ce(t,e,i)),"normal"===o&&e in _e&&(o=_e[e]),""===n||n?(r=parseFloat(o),!0===n||Dt.isNumeric(r)?r||0:o):o}}),m.getComputedStyle?(le=function(t){return m.getComputedStyle(t,null)},ce=function(t,e,n){var i,r,o,s=n||le(t),a=s?s.getPropertyValue(e)||s[e]:C,u=t.style;return s&&(""!==a||Dt.contains(t.ownerDocument,t)||(a=Dt.style(t,e)),ve.test(a)&&me.test(e)&&(i=u.width,r=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=s.width,u.width=i,u.minWidth=r,u.maxWidth=o)),a}):X.documentElement.currentStyle&&(le=function(t){return t.currentStyle},ce=function(t,e,n){var i,r,o,s=n||le(t),a=s?s[e]:C,u=t.style;return null==a&&u&&u[e]&&(a=u[e]),ve.test(a)&&!fe.test(e)&&(i=u.left,(o=(r=t.runtimeStyle)&&r.left)&&(r.left=t.currentStyle.left),u.left="fontSize"===e?"1em":a,a=u.pixelLeft+"px",u.left=i,o&&(r.left=o)),""===a?"auto":a}),Dt.each(["height","width"],function(t,r){Dt.cssHooks[r]={get:function(t,e,n){if(e)return 0===t.offsetWidth&&pe.test(Dt.css(t,"display"))?Dt.swap(t,we,function(){return E(t,r,n)}):E(t,r,n)},set:function(t,e,n){var i=n&&le(t);return S(t,e,n?T(t,r,n,Dt.support.boxSizing&&"border-box"===Dt.css(t,"boxSizing",!1,i),i):0)}}}),Dt.support.opacity||(Dt.cssHooks.opacity={get:function(t,e){return he.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=Dt.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";((n.zoom=1)<=e||""===e)&&""===Dt.trim(o.replace(de,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=de.test(o)?o.replace(de,r):o+" "+r)}}),Dt(function(){Dt.support.reliableMarginRight||(Dt.cssHooks.marginRight={get:function(t,e){if(e)return Dt.swap(t,{display:"inline-block"},ce,[t,"marginRight"])}}),!Dt.support.pixelPosition&&Dt.fn.position&&Dt.each(["top","left"],function(t,n){Dt.cssHooks[n]={get:function(t,e){if(e)return e=ce(t,n),ve.test(e)?Dt(t).position()[n]+"px":e}}})}),Dt.expr&&Dt.expr.filters&&(Dt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!Dt.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||Dt.css(t,"display"))},Dt.expr.filters.visible=function(t){return!Dt.expr.filters.hidden(t)}),Dt.each({margin:"",padding:"",border:"Width"},function(r,o){Dt.cssHooks[r+o]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+xe[e]+o]=i[e]||i[e-2]||i[0];return n}},me.test(r)||(Dt.cssHooks[r+o].set=S)});var ke=/%20/g,Se=/\[\]$/,Te=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Ne=/^(?:input|select|textarea|keygen)/i;Dt.fn.extend({serialize:function(){return Dt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Dt.prop(this,"elements");return t?Dt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Dt(this).is(":disabled")&&Ne.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!ee.test(t))}).map(function(t,e){var n=Dt(this).val();return null==n?null:Dt.isArray(n)?Dt.map(n,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:n.replace(Te,"\r\n")}}).get()}}),Dt.param=function(t,e){var n,i=[],r=function(t,e){e=Dt.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===C&&(e=Dt.ajaxSettings&&Dt.ajaxSettings.traditional),Dt.isArray(t)||t.jquery&&!Dt.isPlainObject(t))Dt.each(t,function(){r(this.name,this.value)});else for(n in t)A(n,t[n],e,r);return i.join("&").replace(ke,"+")},Dt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){Dt.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),Dt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var De,Ae,Ie=Dt.now(),Pe=/\?/,Re=/#.*$/,Oe=/([?&])_=[^&]*/,Me=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$e=/^(?:GET|HEAD)$/,Le=/^\/\//,He=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Be=Dt.fn.load,ze={},je={},Ue="*/".concat("*");try{Ae=G.href}catch(rn){(Ae=X.createElement("a")).href="",Ae=Ae.href}De=He.exec(Ae.toLowerCase())||[],Dt.fn.load=function(t,e,n){if("string"!=typeof t&&Be)return Be.apply(this,arguments);var i,r,o,s=this,a=t.indexOf(" ");return 0<=a&&(i=t.slice(a,t.length),t=t.slice(0,a)),Dt.isFunction(e)?(n=e,e=C):e&&"object"==typeof e&&(o="POST"),0<s.length&&Dt.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(i?Dt("<div>").append(Dt.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,r||[t.responseText,e,t])}),this},Dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Dt.fn[e]=function(t){return this.on(e,t)}}),Dt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae,type:"GET",isLocal:Fe.test(De[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Dt.parseJSON,"text xml":Dt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?R(R(t,Dt.ajaxSettings),e):R(Dt.ajaxSettings,t)},ajaxPrefilter:I(ze),ajaxTransport:I(je),ajax:function(t,e){function n(t,e,n,i){var r,o,s,a,u,l=e;2!==_&&(_=2,h&&clearTimeout(h),p=C,d=i||"",x.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(a=O(m,x,n)),a=M(m,a,x,r),r?(m.ifModified&&((u=x.getResponseHeader("Last-Modified"))&&(Dt.lastModified[c]=u),(u=x.getResponseHeader("etag"))&&(Dt.etag[c]=u)),204===t||"HEAD"===m.type?l="nocontent":304===t?l="notmodified":(l=a.state,o=a.data,r=!(s=a.error))):(s=l,!t&&l||(l="error",t<0&&(t=0))),x.status=t,x.statusText=(e||l)+"",r?b.resolveWith(g,[o,l,x]):b.rejectWith(g,[x,l,s]),x.statusCode(w),w=C,f&&v.trigger(r?"ajaxSuccess":"ajaxError",[x,m,r?o:s]),y.fireWith(g,[x,l]),f&&(v.trigger("ajaxComplete",[x,m]),--Dt.active||Dt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=C),e=e||{};var i,r,c,d,h,f,p,o,m=Dt.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?Dt(g):Dt.event,b=Dt.Deferred(),y=Dt.Callbacks("once memory"),w=m.statusCode||{},s={},a={},_=0,u="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!o)for(o={};e=Me.exec(d);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?d:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=a[n]=a[n]||t,s[t]=e),this},overrideMimeType:function(t){return _||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(_<2)for(e in t)w[e]=[w[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||u;return p&&p.abort(e),n(0,e),this}};if(b.promise(x).complete=y.add,x.success=x.done,x.error=x.fail,m.url=((t||m.url||Ae)+"").replace(Re,"").replace(Le,De[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=Dt.trim(m.dataType||"*").toLowerCase().match(dt)||[""],null==m.crossDomain&&(i=He.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===De[1]&&i[2]===De[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(De[3]||("http:"===De[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=Dt.param(m.data,m.traditional)),P(ze,m,e,x),2===_)return x;for(r in(f=m.global)&&0==Dt.active++&&Dt.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!$e.test(m.type),c=m.url,m.hasContent||(m.data&&(c=m.url+=(Pe.test(c)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Oe.test(c)?c.replace(Oe,"$1_="+Ie++):c+(Pe.test(c)?"&":"?")+"_="+Ie++)),m.ifModified&&(Dt.lastModified[c]&&x.setRequestHeader("If-Modified-Since",Dt.lastModified[c]),Dt.etag[c]&&x.setRequestHeader("If-None-Match",Dt.etag[c])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ue+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(g,x,m)||2===_))return x.abort();for(r in u="abort",{success:1,error:1,complete:1})x[r](m[r]);if(p=P(je,m,e,x)){x.readyState=1,f&&v.trigger("ajaxSend",[x,m]),m.async&&0<m.timeout&&(h=setTimeout(function(){x.abort("timeout")},m.timeout));try{_=1,p.send(s,n)}catch(rn){if(!(_<2))throw rn;n(-1,rn)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return Dt.get(t,e,n,"json")},getScript:function(t,e){return Dt.get(t,C,e,"script")}}),Dt.each(["get","post"],function(t,r){Dt[r]=function(t,e,n,i){return Dt.isFunction(e)&&(i=i||n,n=e,e=C),Dt.ajax({url:t,type:r,dataType:i,data:e,success:n})}}),Dt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Dt.globalEval(t),t}}}),Dt.ajaxPrefilter("script",function(t){t.cache===C&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),Dt.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=X.head||Dt("head")[0]||X.documentElement;return{send:function(t,n){(i=X.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(C,!0)}}}});var qe=[],We=/(=)\?(?=&|$)|\?\?/;Dt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=qe.pop()||Dt.expando+"_"+Ie++;return this[t]=!0,t}}),Dt.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,s=!1!==t.jsonp&&(We.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=Dt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(We,"$1"+i):!1!==t.jsonp&&(t.url+=(Pe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||Dt.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=m[i],m[i]=function(){o=arguments},n.always(function(){m[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,qe.push(i)),o&&Dt.isFunction(r)&&r(o[0]),o=r=C}),"script"});var Ve,Ye,Ke=0,Ge=m.ActiveXObject&&function(){var t;for(t in Ve)Ve[t](C,!0)};Dt.ajaxSettings.xhr=m.ActiveXObject?function(){return!this.isLocal&&F()||$()}:F,Ye=Dt.ajaxSettings.xhr(),Dt.support.cors=!!Ye&&"withCredentials"in Ye,(Ye=Dt.support.ajax=!!Ye)&&Dt.ajaxTransport(function(c){var d;if(!c.crossDomain||Dt.support.cors)return{send:function(t,a){var u,e,l=c.xhr();if(c.username?l.open(c.type,c.url,c.async,c.username,c.password):l.open(c.type,c.url,c.async),c.xhrFields)for(e in c.xhrFields)l[e]=c.xhrFields[e];c.mimeType&&l.overrideMimeType&&l.overrideMimeType(c.mimeType),c.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest");try{for(e in t)l.setRequestHeader(e,t[e])}catch(n){}l.send(c.hasContent&&c.data||null),d=function(t,e){var n,i,r,o;try{if(d&&(e||4===l.readyState))if(d=C,u&&(l.onreadystatechange=Dt.noop,Ge&&delete Ve[u]),e)4!==l.readyState&&l.abort();else{o={},n=l.status,i=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(o.text=l.responseText);try{r=l.statusText}catch(rn){r=""}n||!c.isLocal||c.crossDomain?1223===n&&(n=204):n=o.text?200:404}}catch(s){e||a(-1,s)}o&&a(n,r,o,i)},c.async?4===l.readyState?setTimeout(d):(u=++Ke,Ge&&(Ve||(Ve={},Dt(m).unload(Ge)),Ve[u]=d),l.onreadystatechange=d):d()},abort:function(){d&&d(C,!0)}}});var Xe,Qe,Je=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+ct+")([a-z%]*)$","i"),tn=/queueHooks$/,en=[j],nn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=Ze.exec(e),o=r&&r[3]||(Dt.cssNumber[t]?"":"px"),s=(Dt.cssNumber[t]||"px"!==o&&+i)&&Ze.exec(Dt.css(n.elem,t)),a=1,u=20;if(s&&s[3]!==o)for(o=o||s[3],r=r||[],s=+i||1;s/=a=a||".5",Dt.style(n.elem,t,s+o),a!==(a=n.cur()/i)&&1!==a&&--u;);return r&&(n.unit=o,n.start=+s||+i||0,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Dt.Animation=Dt.extend(B,{tweener:function(t,e){Dt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;i<r;i++)n=t[i],nn[n]=nn[n]||[],nn[n].unshift(e)},prefilter:function(t,e){e?en.unshift(t):en.push(t)}}),(Dt.Tween=U).prototype={constructor:U,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Dt.cssNumber[n]?"":"px")},cur:function(){var t=U.propHooks[this.prop];return t&&t.get?t.get(this):U.propHooks._default.get(this)},run:function(t){var e,n=U.propHooks[this.prop];return this.options.duration?this.pos=e=Dt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Dt.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){Dt.fx.step[t.prop]?Dt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Dt.cssProps[t.prop]]||Dt.cssHooks[t.prop])?Dt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Dt.each(["toggle","show","hide"],function(t,i){var r=Dt.fn[i];Dt.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(q(i,!0),t,e,n)}}),Dt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(x).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=Dt.isEmptyObject(e),o=Dt.speed(t,n,i),s=function(){var t=B(this,Dt.extend({},e),o);s.finish=function(){t.stop(!0)},(r||Dt._data(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(r,t,o){var s=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof r&&(o=t,t=r,r=C),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=Dt.timers,i=Dt._data(this);if(e)i[e]&&i[e].stop&&s(i[e]);else for(e in i)i[e]&&i[e].stop&&tn.test(e)&&s(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||Dt.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=Dt._data(this),n=e[s+"queue"],i=e[s+"queueHooks"],r=Dt.timers,o=n?n.length:0;for(e.finish=!0,Dt.queue(this,s,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=r.length;t--;)r[t].elem===this&&r[t].queue===s&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),Dt.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){Dt.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),Dt.speed=function(t,e,n){var i=t&&"object"==typeof t?Dt.extend({},t):{complete:n||!n&&e||Dt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Dt.isFunction(e)&&e};return i.duration=Dt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Dt.fx.speeds?Dt.fx.speeds[i.duration]:Dt.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){Dt.isFunction(i.old)&&i.old.call(this),i.queue&&Dt.dequeue(this,i.queue)},i},Dt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Dt.timers=[],Dt.fx=U.prototype.init,Dt.fx.tick=function(){var t,e=Dt.timers,n=0;for(Xe=Dt.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||Dt.fx.stop(),Xe=C},Dt.fx.timer=function(t){t()&&Dt.timers.push(t)&&Dt.fx.start()},Dt.fx.interval=13,Dt.fx.start=function(){Qe||(Qe=setInterval(Dt.fx.tick,Dt.fx.interval))},Dt.fx.stop=function(){clearInterval(Qe),Qe=null},Dt.fx.speeds={slow:600,fast:200,_default:400},Dt.fx.step={},Dt.expr&&Dt.expr.filters&&(Dt.expr.filters.animated=function(e){return Dt.grep(Dt.timers,function(t){return e===t.elem}).length}),Dt.fn.offset=function(e){if(arguments.length)return e===C?this:this.each(function(t){Dt.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(t=o.documentElement,Dt.contains(t,r)?(typeof r.getBoundingClientRect!==K&&(i=r.getBoundingClientRect()),n=W(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},Dt.offset={setOffset:function(t,e,n){var i=Dt.css(t,"position");"static"===i&&(t.style.position="relative");var r,o,s=Dt(t),a=s.offset(),u=Dt.css(t,"top"),l=Dt.css(t,"left"),c={},d={};("absolute"===i||"fixed"===i)&&-1<Dt.inArray("auto",[u,l])?(r=(d=s.position()).top,o=d.left):(r=parseFloat(u)||0,o=parseFloat(l)||0),Dt.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(c.top=e.top-a.top+r),null!=e.left&&(c.left=e.left-a.left+o),"using"in e?e.using.call(t,c):s.css(c)}},Dt.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===Dt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Dt.nodeName(t[0],"html")||(n=t.offset()),n.top+=Dt.css(t[0],"borderTopWidth",!0),n.left+=Dt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-Dt.css(i,"marginTop",!0),left:e.left-n.left-Dt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Q;t&&!Dt.nodeName(t,"html")&&"static"===Dt.css(t,"position");)t=t.offsetParent;return t||Q})}}),Dt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var o=/Y/.test(r);Dt.fn[e]=function(t){return Dt.access(this,function(t,e,n){var i=W(t);if(n===C)return i?r in i?i[r]:i.document.documentElement[e]:t[e];i?i.scrollTo(o?Dt(i).scrollLeft():n,o?n:Dt(i).scrollTop()):t[e]=n},e,t,arguments.length,null)}}),Dt.each({Height:"height",Width:"width"},function(o,s){Dt.each({padding:"inner"+o,content:s,"":"outer"+o},function(i,t){Dt.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return Dt.access(this,function(t,e,n){var i;return Dt.isWindow(t)?t.document.documentElement["client"+o]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+o],i["scroll"+o],t.body["offset"+o],i["offset"+o],i["client"+o])):n===C?Dt.css(t,e,r):Dt.style(t,e,n,r)},s,n?t:C,n,null)}})}),Dt.fn.size=function(){return this.length},Dt.fn.andSelf=Dt.fn.addBack,"object"==typeof module&&"object"==typeof module.exports?module.exports=Dt:(m.jQuery=m.$=Dt,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Dt}))}(window),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(a){function i(t,e){var n,i,r,o=t.nodeName.toLowerCase();return"area"===o?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(r=a("img[usemap='#"+i+"']")[0])&&s(r))):(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o&&t.href||e)&&s(t)}function s(t){return a.expr.filters.visible(t)&&!a(t).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var t,e,n,r;a.ui=a.ui||{},a.extend(a.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({scrollParent:function(t){var e=this.css("position"),n="absolute"===e,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=a(this);return(!n||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&r.length?r:a(this[0].ownerDocument||document)},uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(e){return function(t){return!!a.data(t,e)}}):function(t,e,n){return!!a.data(t,n[3])},focusable:function(t){return i(t,!isNaN(a.attr(t,"tabindex")))},tabbable:function(t){var e=a.attr(t,"tabindex"),n=isNaN(e);return(n||0<=e)&&i(t,!n)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(t,n){function i(t,e,n,i){return a.each(r,function(){e-=parseFloat(a.css(t,"padding"+this))||0,n&&(e-=parseFloat(a.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(a.css(t,"margin"+this))||0)}),e}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){a(this).css(o,i(this,t)+"px")})},a.fn["outer"+n]=function(t,e){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){a(this).css(o,i(this,t,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=(e=a.fn.removeData,function(t){return arguments.length?e.call(this,a.camelCase(t)):e.call(this)})),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.fn.extend({focus:(r=a.fn.focus,function(e,n){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){a(t).focus(),n&&n.call(t)},e)}):r.apply(this,arguments)}),disableSelection:(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(n+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length)for(var e,n,i=a(this[0]);i.length&&i[0]!==document;){if(("absolute"===(e=i.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0}}),a.ui.plugin={add:function(t,e,n){var i,r=a.ui[t].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([e,n[i]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(c){var o,n=0,a=Array.prototype.slice;return c.cleanData=(o=c.cleanData,function(t){var e,n,i;for(i=0;null!=(n=t[i]);i++)try{(e=c._data(n,"events"))&&e.remove&&c(n).triggerHandler("remove")}catch(r){}o(t)}),c.widget=function(t,n,e){var i,r,o,s,a={},u=t.split(".")[0];return t=t.split(".")[1],i=u+"-"+t,e||(e=n,n=c.Widget),c.expr[":"][i.toLowerCase()]=function(t){return!!c.data(t,i)},c[u]=c[u]||{},r=c[u][t],o=c[u][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},c.extend(o,r,{version:e.version,_proto:c.extend({},e),_childConstructors:[]}),(s=new n).options=c.widget.extend({},s.options),c.each(e,function(e,i){var r,o;c.isFunction(i)?a[e]=(r=function(){return n.prototype[e].apply(this,arguments)},o=function(t){
return n.prototype[e].apply(this,t)},function(){var t,e=this._super,n=this._superApply;return this._super=r,this._superApply=o,t=i.apply(this,arguments),this._super=e,this._superApply=n,t}):a[e]=i}),o.prototype=c.widget.extend(s,{widgetEventPrefix:r&&s.widgetEventPrefix||t},a,{constructor:o,namespace:u,widgetName:t,widgetFullName:i}),r?(c.each(r._childConstructors,function(t,e){var n=e.prototype;c.widget(n.namespace+"."+n.widgetName,o,e._proto)}),delete r._childConstructors):n._childConstructors.push(o),c.widget.bridge(t,o),o},c.widget.extend=function(t){for(var e,n,i=a.call(arguments,1),r=0,o=i.length;r<o;r++)for(e in i[r])n=i[r][e],i[r].hasOwnProperty(e)&&n!==undefined&&(c.isPlainObject(n)?t[e]=c.isPlainObject(t[e])?c.widget.extend({},t[e],n):c.widget.extend({},n):t[e]=n);return t},c.widget.bridge=function(o,e){var s=e.prototype.widgetFullName||o;c.fn[o]=function(n){var t="string"==typeof n,i=a.call(arguments,1),r=this;return t?this.each(function(){var t,e=c.data(this,s);return"instance"===n?(r=e,!1):e?c.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&t!==undefined?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:c.error("no such method '"+n+"' for "+o+" widget instance"):c.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):(i.length&&(n=c.widget.extend.apply(null,[n].concat(i))),this.each(function(){var t=c.data(this,s);t?(t.option(n||{}),t._init&&t._init()):c.data(this,s,new e(n,this))})),r}},c.Widget=function(){},c.Widget._childConstructors=[],c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=c(e||this.defaultElement||this)[0],this.element=c(e),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=c(),this.hoverable=c(),this.focusable=c(),e!==this&&(c.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=c(e.style?e.ownerDocument:e.document||e),this.window=c(this.document[0].defaultView||this.document[0].parentWindow)),this.options=c.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:c.noop,_getCreateEventData:c.noop,_create:c.noop,_init:c.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(c.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:c.noop,widget:function(){return this.element},option:function(t,e){var n,i,r,o=t;if(0===arguments.length)return c.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(n=t.split(".")).shift(),n.length){for(i=o[t]=c.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(t=n.pop(),1===arguments.length)return i[t]===undefined?null:i[t];i[t]=e}else{if(1===arguments.length)return this.options[t]===undefined?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(s,a,t){var u,l=this;"boolean"!=typeof s&&(t=a,a=s,s=!1),t?(a=u=c(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,u=this.widget()),c.each(t,function(t,e){function n(){if(s||!0!==l.options.disabled&&!c(this).hasClass("ui-state-disabled"))return("string"==typeof e?l[e]:e).apply(l,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||c.guid++);var i=t.match(/^([\w:-]*)\s*(.*)$/),r=i[1]+l.eventNamespace,o=i[2];o?u.delegate(o,r,n):a.bind(r,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=c(this.bindings.not(t).get()),this.focusable=c(this.focusable.not(t).get()),this.hoverable=c(this.hoverable.not(t).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){c(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){c(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){c(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){c(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,n){var i,r,o=this.options[t];if(n=n||{},(e=c.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(i in r)i in e||(e[i]=r[i]);return this.element.trigger(e,n),!(c.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},c.each({show:"fadeIn",hide:"fadeOut"},function(o,s){c.Widget.prototype["_"+o]=function(e,t,n){"string"==typeof t&&(t={effect:t});var i,r=t?!0===t||"number"==typeof t?s:t.effect||s:o;"number"==typeof(t=t||{})&&(t={duration:t}),i=!c.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&c.effects&&c.effects.effect[r]?e[o](t):r!==o&&e[r]?e[r](t.duration,t.easing,n):e.queue(function(t){c(this)[o](),n&&n.call(e[0]),t()})}}),c.widget}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(l){return l.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=l(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():l()}},_createIcons:function(){var t=this.options.icons;t&&(l("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&(this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))):this._activate(e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=l.ui.keyCode,n=this.headers.length,i=this.headers.index(t.target),r=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:r=this.headers[(i+1)%n];break;case e.LEFT:case e.UP:r=this.headers[(i-1+n)%n];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:r=this.headers[0];break;case e.END:r=this.headers[n-1]}r&&(l(t.target).attr("tabIndex",-1),l(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===l.ui.keyCode.UP&&t.ctrlKey&&l(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=l()):!1===t.active?this._activate(0):this.active.length&&!l.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=l()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var n,t=this.options,e=t.heightStyle,i=this.element.parent();this.active=this._findActive(t.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=l(this),e=t.uniqueId().attr("id"),n=t.next(),i=n.uniqueId().attr("id");t.attr("aria-controls",i),n.attr("aria-labelledby",e)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(n=i.height(),this.element.siblings(":visible").each(function(){var t=l(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=l(this).outerHeight(!0)}),this.headers.next().each(function(){l(this).height(Math.max(0,n-l(this).innerHeight()+l(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.headers.next().each(function(){n=Math.max(n,l(this).css("height","").height())}).height(n))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:l.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):l()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&l.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e=this.options,n=this.active,i=l(t.currentTarget),r=i[0]===n[0],o=r&&e.collapsible,s=o?l():i.next(),a=n.next(),u={oldHeader:n,oldPanel:a,newHeader:o?l():i,newPanel:s};t.preventDefault(),r&&!e.collapsible||!1===this._trigger("beforeActivate",t,u)||(e.active=!o&&this.headers.index(i),this.active=r?l():i,this._toggle(u),n.removeClass("ui-accordion-header-active ui-state-active"),e.icons&&n.children(".ui-accordion-header-icon").removeClass(e.icons.activeHeader).addClass(e.icons.header),r||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),e.icons&&i.children(".ui-accordion-header-icon").removeClass(e.icons.header).addClass(e.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=n,this.options.animate?this._animate(e,n,t):(n.hide(),e.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr({"aria-selected":"false","aria-expanded":"false"}),e.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):e.length&&this.headers.filter(function(){return 0===parseInt(l(this).attr("tabIndex"),10)}).attr("tabIndex",-1),e.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,n,e){var i,r,o,s=this,a=0,u=t.css("box-sizing"),l=t.length&&(!n.length||t.index()<n.index()),c=this.options.animate||{},d=l&&c.down||c,h=function(){s._toggleComplete(e)};return"number"==typeof d&&(o=d),"string"==typeof d&&(r=d),r=r||d.easing||c.easing,o=o||d.duration||c.duration,n.length?t.length?(i=t.show().outerHeight(),n.animate(this.hideProps,{duration:o,easing:r,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:r,complete:h,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?"content-box"===u&&(a+=e.now):"content"!==s.options.heightStyle&&(e.now=Math.round(i-n.outerHeight()-a),a=0)}})):n.animate(this.hideProps,o,r,h):t.animate(this.showProps,o,r,h)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(N){return function(){function x(t,e,n){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?n/100:1)]}function C(t,e){return parseInt(N.css(t,e),10)||0}function e(t){var e=t[0];return 9===e.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:N.isWindow(e)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}N.ui=N.ui||{};var r,k,S=Math.max,T=Math.abs,E=Math.round,i=/left|center|right/,o=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,u=/%$/,n=N.fn.position;N.position={scrollbarWidth:function(){if(r!==undefined)return r;var t,e,n=N("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return N("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),r=t-e},getScrollInfo:function(t){var e=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?N.position.scrollbarWidth():0,height:i?N.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=N(t||window),n=N.isWindow(e[0]),i=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:n,isDocument:i,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:n||i?e.width():e.outerWidth(),height:n||i?e.height():e.outerHeight()}}},N.fn.position=function(d){if(!d||!d.of)return n.apply(this,arguments);d=N.extend({},d);var h,f,p,m,g,t,v=N(d.of),b=N.position.getWithinInfo(d.within),y=N.position.getScrollInfo(b),w=(d.collision||"flip").split(" "),_={};return t=e(v),v[0].preventDefault&&(d.at="left top"),f=t.width,p=t.height,m=t.offset,g=N.extend({},m),N.each(["my","at"],function(){var t,e,n=(d[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",t=s.exec(n[0]),e=s.exec(n[1]),_[this]=[t?t[0]:0,e?e[0]:0],d[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===d.at[0]?g.left+=f:"center"===d.at[0]&&(g.left+=f/2),"bottom"===d.at[1]?g.top+=p:"center"===d.at[1]&&(g.top+=p/2),h=x(_.at,f,p),g.left+=h[0],g.top+=h[1],this.each(function(){var n,t,s=N(this),a=s.outerWidth(),u=s.outerHeight(),e=C(this,"marginLeft"),i=C(this,"marginTop"),r=a+e+C(this,"marginRight")+y.width,o=u+i+C(this,"marginBottom")+y.height,l=N.extend({},g),c=x(_.my,s.outerWidth(),s.outerHeight());"right"===d.my[0]?l.left-=a:"center"===d.my[0]&&(l.left-=a/2),"bottom"===d.my[1]?l.top-=u:"center"===d.my[1]&&(l.top-=u/2),l.left+=c[0],l.top+=c[1],k||(l.left=E(l.left),l.top=E(l.top)),n={marginLeft:e,marginTop:i},N.each(["left","top"],function(t,e){N.ui.position[w[t]]&&N.ui.position[w[t]][e](l,{targetWidth:f,targetHeight:p,elemWidth:a,elemHeight:u,collisionPosition:n,collisionWidth:r,collisionHeight:o,offset:[h[0]+c[0],h[1]+c[1]],my:d.my,at:d.at,within:b,elem:s})}),d.using&&(t=function(t){var e=m.left-l.left,n=e+f-a,i=m.top-l.top,r=i+p-u,o={target:{element:v,left:m.left,top:m.top,width:f,height:p},element:{element:s,left:l.left,top:l.top,width:a,height:u},horizontal:n<0?"left":0<e?"right":"center",vertical:r<0?"top":0<i?"bottom":"middle"};f<a&&T(e+n)<f&&(o.horizontal="center"),p<u&&T(i+r)<p&&(o.vertical="middle"),S(T(e),T(n))>S(T(i),T(r))?o.important="horizontal":o.important="vertical",d.using.call(this,t,o)}),s.offset(N.extend(l,{using:t}))})},N.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=t.left-e.collisionPosition.marginLeft,a=r-s,u=s+e.collisionWidth-o-r;e.collisionWidth>o?0<a&&u<=0?(n=t.left+a+e.collisionWidth-o-r,t.left+=a-n):t.left=0<u&&a<=0?r:u<a?r+o-e.collisionWidth:r:0<a?t.left+=a:0<u?t.left-=u:t.left=S(t.left-s,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,s=t.top-e.collisionPosition.marginTop,a=r-s,u=s+e.collisionHeight-o-r;e.collisionHeight>o?0<a&&u<=0?(n=t.top+a+e.collisionHeight-o-r,t.top+=a-n):t.top=0<u&&a<=0?r:u<a?r+o-e.collisionHeight:r:0<a?t.top+=a:0<u?t.top-=u:t.top=S(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,a=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,l=u-a,c=u+e.collisionWidth-s-a,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];l<0?((n=t.left+d+h+f+e.collisionWidth-s-o)<0||n<T(l))&&(t.left+=d+h+f):0<c&&(0<(i=t.left-e.collisionPosition.marginLeft+d+h+f-a)||T(i)<c)&&(t.left+=d+h+f)},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,a=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,l=u-a,c=u+e.collisionHeight-s-a,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];l<0?((i=t.top+d+h+f+e.collisionHeight-s-o)<0||i<T(l))&&(t.top+=d+h+f):0<c&&(0<(n=t.top-e.collisionPosition.marginTop+d+h+f-a)||T(n)<c)&&(t.top+=d+h+f)}},flipfit:{left:function(){N.ui.position.flip.left.apply(this,arguments),N.ui.position.fit.left.apply(this,arguments)},top:function(){N.ui.position.flip.top.apply(this,arguments),N.ui.position.fit.top.apply(this,arguments)}}},function(){var t,e,n,i,r,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(r in t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&N.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[r]=n[r];t.appendChild(s),(e=o||document.documentElement).insertBefore(t,e.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",i=N(s).offset().left,k=10<i&&i<11,t.innerHTML="",e.removeChild(t)}()}(),N.ui.position}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position"],t):t(jQuery)}(function(a){return a.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(t){var e=a(t.target);!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),e.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var e=a(t.currentTarget);e.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,e)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(t){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=a(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var e,n,i,r,o=!0;switch(t.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(t);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case a.ui.keyCode.HOME:this._move("first","first",t);break;case a.ui.keyCode.END:this._move("last","last",t);break;case a.ui.keyCode.UP:this.previous(t);break;case a.ui.keyCode.DOWN:this.next(t);break;case a.ui.keyCode.LEFT:this.collapse(t);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(t);break;case a.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,n=this.previousFilter||"",i=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),i===n?r=!0:i=n+i,e=this._filterMenuItems(i),(e=r&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),e=this._filterMenuItems(i)),e.length?(this.focus(t,e),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var t,e=this,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=a(this),e=t.parent(),n=a("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",e.attr("id"))}),(t=n.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var t=a(this);e._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,n,i,r,o,s;this._hasScroll()&&(e=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-n,r=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.outerHeight(),i<0?this.activeMenu.scrollTop(r+i):o<i+s&&this.activeMenu.scrollTop(r+i-o+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var t=n?this.element:a(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!a(t.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=a(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=a(this)).offset().top-n+i}),this.focus(t,e)):this.focus(t,this.activeMenu.find(this.options.items).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||a(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)},_filterMenuItems:function(t){var e=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+e,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(a.trim(a(this).text()))})}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position","./menu"],t):t(jQuery)}(function(s){return s.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var n,i,r,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,o="input"===t;this.isMultiLine=!!e||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[e||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))i=r=n=!0;else{i=r=n=!1;var e=s.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:n=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:n=!0,this._move("nextPage",t);break;case e.UP:n=!0,this._keyEvent("previous",t);break;case e.DOWN:n=!0,this._keyEvent("next",t);break;case e.ENTER:this.menu.active&&(n=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(t),t.preventDefault());break;default:i=!0,this._searchTimeout(t)}}},keypress:function(t){if(n)return n=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!i){var e=s.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(r)return r=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=s("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];s(t.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(t){t.target===e.element[0]||t.target===n||s.contains(n,t.target)||e.close()})})},menufocus:function(t,e){var n,i;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){s(t.target).trigger(t.originalEvent)});i=e.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),(n=e.item.attr("aria-label")||i.value)&&s.trim(n).length&&(this.liveRegion.children().hide(),s("<div>").text(n).appendTo(
this.liveRegion))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=s("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?s(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var n,i,r=this;s.isArray(this.options.source)?(n=this.options.source,this.source=function(t,e){e(s.ui.autocomplete.filter(n,t.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,e){r.xhr&&r.xhr.abort(),r.xhr=s.ajax({url:i,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(i){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),e=this.menu.element.is(":visible"),n=i.altKey||i.ctrlKey||i.metaKey||i.shiftKey;t&&(!t||e||n)||(this.selectedItem=null,this.search(null,i))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return s.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:s.map(t,function(t){return"string"==typeof t?{label:t,value:t}:s.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(s.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,t){var i=this;s.each(t,function(t,e){i._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return s("<li>").text(e.label).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),s.extend(s.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var n=new RegExp(s.ui.autocomplete.escapeRegex(e),"i");return s.grep(t,function(t){return n.test(t.label||t.value||t)})}}),s.widget("ui.autocomplete",s.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),s("<div>").text(e).appendTo(this.liveRegion))}}),s.ui.autocomplete}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(o){var r,s="ui-button ui-widget ui-state-default ui-corner-all",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",u=function(){var t=o(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},l=function(t){var e=t.name,n=t.form,i=o([]);return e&&(e=e.replace(/'/g,"\\'"),i=n?o(n).find("[name='"+e+"'][type=radio]"):o("[name='"+e+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),i};return o.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,u),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,n=this.options,t="checkbox"===this.type||"radio"===this.type,i=t?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(s).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===r&&o(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||o(this).removeClass(i)}).bind("click"+this.eventNamespace,function(t){n.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),t&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;o(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var t=e.element[0];l(t).not(t).map(function(){return o(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(n.disabled)return!1;o(this).addClass("ui-state-active"),r=this,e.document.one("mouseup",function(){r=null})}).bind("mouseup"+this.eventNamespace,function(){if(n.disabled)return!1;o(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(n.disabled)return!1;t.keyCode!==o.ui.keyCode.SPACE&&t.keyCode!==o.ui.keyCode.ENTER||o(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){o(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===o.ui.keyCode.SPACE&&o(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(s+" ui-state-active "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")));this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?l(this.element[0]).each(function(){o(this).is(":checked")?o(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):o(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(a),e=o("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,i=n.primary&&n.secondary,r=[];n.primary||n.secondary?(this.options.text&&r.push("ui-button-text-icon"+(i?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(r.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",o.trim(e)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),o.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var t="rtl"===this.element.css("direction"),e=this.element.find(this.options.items),n=e.filter(":ui-button");e.not(":ui-button").button(),n.button("refresh"),this.buttons=e.map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),o.ui.button}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery)}(function(C){function u(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},C.extend(this._defaults,this.regional[""]),this.regional.en=C.extend(!0,{},this.regional[""]),this.regional["en-US"]=C.extend(!0,{},this.regional.en),this.dpDiv=n(C("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(e,"mouseout",function(){C(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).removeClass("ui-datepicker-next-hover")}).delegate(e,"mouseover",s)}function s(){C.datepicker._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])||(C(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),C(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).addClass("ui-datepicker-next-hover"))}function d(t,e){for(var n in C.extend(t,e),e)null==e[n]&&(t[n]=e[n]);return t}var a;return C.extend(C.ui,{datepicker:{version:"1.11.4"}}),C.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return d(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var n,i,r;i="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(r=this._newInst(C(t),i)).settings=C.extend({},e||{}),"input"===n?this._connectDatepicker(t,r):i&&this._inlineDatepicker(t,r)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?n(C("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var n=C(t);e.append=C([]),e.trigger=C([]),n.hasClass(this.markerClassName)||(this._attachments(n,e),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(e),C.data(t,"datepicker",e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var n,i,r,o=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),o&&(e.append=C("<span class='"+this._appendClass+"'>"+o+"</span>"),t[s?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(n=this._get(e,"showOn"))&&"both"!==n||t.focus(this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(e,"buttonText"),r=this._get(e,"buttonImage"),e.trigger=C(this._get(e,"buttonImageOnly")?C("<img/>").addClass(this._triggerClass).attr({src:r,alt:i,title:i}):C("<button type='button'></button>").addClass(this._triggerClass).html(r?C("<img/>").attr({src:r,alt:i,title:i}):i)),t[s?"before":"after"](e.trigger),e.trigger.click(function(){return C.datepicker._datepickerShowing&&C.datepicker._lastInput===t[0]?C.datepicker._hideDatepicker():(C.datepicker._datepickerShowing&&C.datepicker._lastInput!==t[0]&&C.datepicker._hideDatepicker(),C.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,r,o=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(r=i=n=0;r<t.length;r++)t[r].length>n&&(n=t[r].length,i=r);return i},o.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(t,e){var n=C(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(e.dpDiv),C.data(t,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,n,i,r){var o,s,a,u,l,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=C("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),C("body").append(this._dialogInput),(c=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},C.data(this._dialogInput[0],"datepicker",c)),d(c.settings,i||{}),e=e&&e.constructor===Date?this._formatDate(c,e):e,this._dialogInput.val(e),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(s=document.documentElement.clientWidth,a=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+u,a/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),C.blockUI&&C.blockUI(this.dpDiv),C.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var e,n=C(t),i=C.data(t,"datepicker");n.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),C.removeData(t,"datepicker"),"input"===e?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||n.removeClass(this.markerClassName).empty(),a===i&&(a=null))},_enableDatepicker:function(e){var t,n,i=C(e),r=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=C.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,n,i=C(e),r=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=C.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return C.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,n){var i,r,o,s,a=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?C.extend({},C.datepicker._defaults):a?"all"===e?C.extend({},a.settings):this._get(a,e):null;i=e||{},"string"==typeof e&&((i={})[e]=n),a&&(this._curInst===a&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(a,"min"),s=this._getMinMaxDate(a,"max"),d(a.settings,i),null!==o&&i.dateFormat!==undefined&&i.minDate===undefined&&(a.settings.minDate=this._formatDate(a,o)),null!==s&&i.dateFormat!==undefined&&i.maxDate===undefined&&(a.settings.maxDate=this._formatDate(a,s)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(C(t),a),this._autoSize(a),this._setDate(a,r),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(t){var e,n,i,r=C.datepicker._getInst(t.target),o=!0,s=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,C.datepicker._datepickerShowing)switch(t.keyCode){case 9:C.datepicker._hideDatepicker(),o=!1;break;case 13:return(i=C("td."+C.datepicker._dayOverClass+":not(."+C.datepicker._currentClass+")",r.dpDiv))[0]&&C.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,i[0]),(e=C.datepicker._get(r,"onSelect"))?(n=C.datepicker._formatDate(r),e.apply(r.input?r.input[0]:null,[n,r])):C.datepicker._hideDatepicker(),!1;case 27:C.datepicker._hideDatepicker();break;case 33:C.datepicker._adjustDate(t.target,t.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 34:C.datepicker._adjustDate(t.target,t.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&C.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&C.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,s?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&C.datepicker._adjustDate(t.target,t.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,s?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&C.datepicker._adjustDate(t.target,t.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&C.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?C.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,n,i=C.datepicker._getInst(t.target);if(C.datepicker._get(i,"constrainInput"))return e=C.datepicker._possibleChars(C.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!e||-1<e.indexOf(n)},_doKeyUp:function(t){var e=C.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{C.datepicker.parseDate(C.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,C.datepicker._getFormatConfig(e))&&(C.datepicker._setDateFromField(e),C.datepicker._updateAlternate(e),C.datepicker._updateDatepicker(e))}catch(n){}return!0},_showDatepicker:function(t){var e,n,i,r,o,s,a;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=C("input",t.parentNode)[0]),C.datepicker._isDisabledDatepicker(t)||C.datepicker._lastInput===t)||(e=C.datepicker._getInst(t),C.datepicker._curInst&&C.datepicker._curInst!==e&&(C.datepicker._curInst.dpDiv.stop(!0,!0),e&&C.datepicker._datepickerShowing&&C.datepicker._hideDatepicker(C.datepicker._curInst.input[0])),!1!==(i=(n=C.datepicker._get(e,"beforeShow"))?n.apply(t,[t,e]):{})&&(d(e.settings,i),e.lastVal=null,C.datepicker._lastInput=t,C.datepicker._setDateFromField(e),C.datepicker._inDialog&&(t.value=""),C.datepicker._pos||(C.datepicker._pos=C.datepicker._findPos(t),C.datepicker._pos[1]+=t.offsetHeight),r=!1,C(t).parents().each(function(){return!(r|="fixed"===C(this).css("position"))}),o={left:C.datepicker._pos[0],top:C.datepicker._pos[1]},C.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),C.datepicker._updateDatepicker(e),o=C.datepicker._checkOffset(e,o,r),e.dpDiv.css({position:C.datepicker._inDialog&&C.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),e.inline||(s=C.datepicker._get(e,"showAnim"),a=C.datepicker._get(e,"duration"),e.dpDiv.css("z-index",u(C(t))+1),C.datepicker._datepickerShowing=!0,C.effects&&C.effects.effect[s]?e.dpDiv.show(s,C.datepicker._get(e,"showOptions"),a):e.dpDiv[s||"show"](s?a:null),C.datepicker._shouldFocusInput(e)&&e.input.focus(),C.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(a=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var e,n=this._getNumberOfMonths(t),i=n[1],r=17,o=t.dpDiv.find("."+this._dayOverClass+" a");0<o.length&&s.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",r*i+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===C.datepicker._curInst&&C.datepicker._datepickerShowing&&C.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,n){var i=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:C(document).scrollLeft()),u=document.documentElement.clientHeight+(n?0:C(document).scrollTop());return e.left-=this._get(t,"isRTL")?i-o:0,e.left-=n&&e.left===t.input.offset().left?C(document).scrollLeft():0,e.top-=n&&e.top===t.input.offset().top+s?C(document).scrollTop():0,e.left-=Math.min(e.left,e.left+i>a&&i<a?Math.abs(e.left+i-a):0),e.top-=Math.min(e.top,e.top+r>u&&r<u?Math.abs(r+s):0),e},_findPos:function(t){for(var e,n=this._getInst(t),i=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||C.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=C(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,n,i,r,o=this._curInst;!o||t&&o!==C.data(t,"datepicker")||this._datepickerShowing&&(e=this._get(o,"showAnim"),n=this._get(o,"duration"),i=function(){C.datepicker._tidyDialog(o)},C.effects&&(C.effects.effect[e]||C.effects[e])?o.dpDiv.hide(e,C.datepicker._get(o,"showOptions"),n,i):o.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?n:null,i),e||i(),this._datepickerShowing=!1,(r=this._get(o,"onClose"))&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),C.blockUI&&(C.unblockUI(),C("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(C.datepicker._curInst){var e=C(t.target),n=C.datepicker._getInst(e[0]);(e[0].id===C.datepicker._mainDivId||0!==e.parents("#"+C.datepicker._mainDivId).length||e.hasClass(C.datepicker.markerClassName)||e.closest("."+C.datepicker._triggerClass).length||!C.datepicker._datepickerShowing||C.datepicker._inDialog&&C.blockUI)&&(!e.hasClass(C.datepicker.markerClassName)||C.datepicker._curInst===n)||C.datepicker._hideDatepicker()}},_adjustDate:function(t,e,n){var i=C(t),r=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(r,e+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(t){var e,n=C(t),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(t,e,n){var i=C(t),r=this._getInst(i[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(i)},_selectDay:function(t,e,n,i){var r,o=C(t);C(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((r=this._getInst(o[0])).selectedDay=r.currentDay=C("a",i).html(),r.selectedMonth=r.currentMonth=e,r.selectedYear=r.currentYear=n,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var e=C(t);this._selectDate(e,"")},_selectDate:function(t,e){var n,i=C(t),r=this._getInst(i[0]);e=null!=e?e:this._formatDate(r),r.input&&r.input.val(e),this._updateAlternate(r),(n=this._get(r,"onSelect"))?n.apply(r.input?r.input[0]:null,[e,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e,n,i,r=this._get(t,"altField");r&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),i=this.formatDate(e,n,this._getFormatConfig(t)),C(r).each(function(){C(this).val(i)}))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(n,o,t){if(null==n||null==o)throw"Invalid arguments";if(""===(o="object"==typeof o?o.toString():o+""))return null;var i,e,r,s,a=0,u=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),c=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,d=(t?t.dayNames:null)||this._defaults.dayNames,h=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,f=(t?t.monthNames:null)||this._defaults.monthNames,p=-1,m=-1,g=-1,v=-1,b=!1,y=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},w=function(t){var e=y(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,i=new RegExp("^\\d{"+("y"===t?n:1)+","+n+"}"),r=o.substring(a).match(i);if(!r)throw"Missing number at position "+a;return a+=r[0].length,parseInt(r[0],10)},_=function(t,e,n){var i=-1,r=C.map(y(t)?n:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(C.each(r,function(t,e){var n=e[1];if(o.substr(a,n.length).toLowerCase()===n.toLowerCase())return i=e[0],a+=n.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+a},x=function(){if(o.charAt(a)!==n.charAt(i))throw"Unexpected literal at position "+a;a++};for(i=0;i<n.length;i++)if(b)"'"!==n.charAt(i)||y("'")?x():b=!1;else switch(n.charAt(i)){case"d":g=w("d");break;case"D":_("D",c,d);break;case"o":v=w("o");break
;case"m":m=w("m");break;case"M":m=_("M",h,f);break;case"y":p=w("y");break;case"@":p=(s=new Date(w("@"))).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"!":p=(s=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),m=s.getMonth()+1,g=s.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(a<o.length&&(r=o.substr(a),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=l?0:-100)),-1<v)for(m=1,g=v;;){if(g<=(e=this._getDaysInMonth(p,m-1)))break;m++,g-=e}if((s=this._daylightSavingAdjust(new Date(p,m-1,g))).getFullYear()!==p||s.getMonth()+1!==m||s.getDate()!==g)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,t,e){if(!t)return"";var i,r=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,o=(e?e.dayNames:null)||this._defaults.dayNames,s=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,a=(e?e.monthNames:null)||this._defaults.monthNames,u=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},l=function(t,e,n){var i=""+e;if(u(t))for(;i.length<n;)i="0"+i;return i},c=function(t,e,n,i){return u(t)?i[e]:n[e]},d="",h=!1;if(t)for(i=0;i<n.length;i++)if(h)"'"!==n.charAt(i)||u("'")?d+=n.charAt(i):h=!1;else switch(n.charAt(i)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),r,o);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),s,a);break;case"y":d+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":u("'")?d+="'":h=!0;break;default:d+=n.charAt(i)}return d},_possibleChars:function(n){var i,t="",e=!1,r=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e};for(i=0;i<n.length;i++)if(e)"'"!==n.charAt(i)||r("'")?t+=n.charAt(i):e=!1;else switch(n.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":e=!0;break;default:t+=n.charAt(i)}return t},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,r=this._getDefaultDate(t),o=r,s=this._getFormatConfig(t);try{o=this.parseDate(n,i,s)||r}catch(event){i=e?"":i}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=i?o.getDate():0,t.currentMonth=i?o.getMonth():0,t.currentYear=i?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(u,t,e){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},i=null==t||""===t?e:"string"==typeof t?function(t){try{return C.datepicker.parseDate(C.datepicker._get(u,"dateFormat"),t,C.datepicker._getFormatConfig(u))}catch(a){}for(var e=(t.toLowerCase().match(/^c/)?C.datepicker._getDate(u):null)||new Date,n=e.getFullYear(),i=e.getMonth(),r=e.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=o.exec(t);s;){switch(s[2]||"d"){case"d":case"D":r+=parseInt(s[1],10);break;case"w":case"W":r+=7*parseInt(s[1],10);break;case"m":case"M":i+=parseInt(s[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(s[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(n,i))}s=o.exec(t)}return new Date(n,i,r)}(t):"number"==typeof t?isNaN(t)?e:n(t):new Date(t.getTime());return(i=i&&"Invalid Date"===i.toString()?e:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,r=t.selectedMonth,o=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),r===t.selectedMonth&&o===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){C.datepicker._adjustDate(n,-e,"M")},next:function(){C.datepicker._adjustDate(n,+e,"M")},hide:function(){C.datepicker._hideDatepicker()},today:function(){C.datepicker._gotoToday(n)},selectDay:function(){return C.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return C.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return C.datepicker._selectMonthYear(n,this,"Y"),!1}};C(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,r,o,s,a,u,l,c,d,h,f,p,m,g,v,b,y,w,_,x,C,k,S,T,E,N,D,A,I,P,R,O,M,F,$,L,H,B=new Date,z=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),j=this._get(t,"isRTL"),U=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),V=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),K=this._get(t,"stepMonths"),G=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),J=this._getMinMaxDate(t,"max"),Z=t.drawMonth-Y,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),e=Q&&e<Q?Q:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,n=this._get(t,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,Z-K,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+n+"</span></a>",r=this._get(t,"nextText"),r=W?this.formatDate(r,this._daylightSavingAdjust(new Date(tt,Z+K,1)),this._getFormatConfig(t)):r,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+r+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+r+"</span></a>",s=this._get(t,"currentText"),a=this._get(t,"gotoCurrent")&&t.currentDay?X:z,s=W?this.formatDate(s,a,this._getFormatConfig(t)):s,u=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(j?u:"")+(this._isInRange(t,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(j?"":u)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,d=this._get(t,"showWeek"),h=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),m=this._get(t,"monthNamesShort"),g=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),b=this._get(t,"selectOtherMonths"),y=this._getDefaultDate(t),w="",x=0;x<V[0];x++){for(C="",this.maxRows=4,k=0;k<V[1];k++){if(S=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),T=" ui-corner-all",E="",G){if(E+="<div class='ui-datepicker-group",1<V[1])switch(k){case 0:E+=" ui-datepicker-group-first",T=" ui-corner-"+(j?"right":"left");break;case V[1]-1:E+=" ui-datepicker-group-last",T=" ui-corner-"+(j?"left":"right");break;default:E+=" ui-datepicker-group-middle",T=""}E+="'>"}for(E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?j?o:i:"")+(/all|right/.test(T)&&0===x?j?i:o:"")+this._generateMonthYearHeader(t,Z,tt,Q,J,0<x||0<k,p,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",N=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;_<7;_++)N+="<th scope='col'"+(5<=(_+c+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+h[D=(_+c)%7]+"'>"+f[D]+"</span></th>";for(E+=N+"</tr></thead><tbody>",A=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,A)),I=(this._getFirstDayOfMonth(tt,Z)-c+7)%7,P=Math.ceil((I+A)/7),R=G&&this.maxRows>P?this.maxRows:P,this.maxRows=R,O=this._daylightSavingAdjust(new Date(tt,Z,1-I)),M=0;M<R;M++){for(E+="<tr>",F=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",_=0;_<7;_++)$=g?g.apply(t.input?t.input[0]:null,[O]):[!0,""],H=(L=O.getMonth()!==Z)&&!b||!$[0]||Q&&O<Q||J&&J<O,F+="<td class='"+(5<=(_+c+6)%7?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(O.getTime()===S.getTime()&&Z===t.selectedMonth&&t._keyEvent||y.getTime()===O.getTime()&&y.getTime()===S.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+$[1]+(O.getTime()===X.getTime()?" "+this._currentClass:"")+(O.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!$[2]?"":" title='"+$[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===z.getTime()?" ui-state-highlight":"")+(O.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);E+=F+"</tr>"}11<++Z&&(Z=0,tt++),C+=E+="</tbody></table>"+(G?"</div>"+(0<V[0]&&k===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}w+=C}return w+=l,t._keyEvent=!1,w},_generateMonthYearHeader:function(t,e,n,i,r,o,s,a){var u,l,c,d,h,f,p,m,g=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),b=this._get(t,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(u=i&&i.getFullYear()===n,l=r&&r.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!u||c>=i.getMonth())&&(!l||c<=r.getMonth())&&(w+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+a[c]+"</option>");w+="</select>"}if(b||(y+=w+(!o&&g&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(t,"yearRange").split(":"),h=(new Date).getFullYear(),p=(f=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?h+parseInt(t,10):parseInt(t,10);return isNaN(e)?h:e})(d[0]),m=Math.max(p,f(d[1]||"")),p=i?Math.max(p,i.getFullYear()):p,m=r?Math.min(m,r.getFullYear()):m,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=m;p++)t.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",y+=t.yearshtml,t.yearshtml=null}return y+=this._get(t,"yearSuffix"),b&&(y+=(!o&&g&&v?"":"&#xa0;")+w),y+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),r=t.drawMonth+("M"===n?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(i,r))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,r,o)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),r=n&&e<n?n:e;return i&&i<r?i:r},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var r=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(n,i+(e<0?e:r[0]*r[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var n,i,r=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),s=null,a=null,u=this._get(t,"yearRange");return u&&(n=u.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!r||e.getTime()>=r.getTime())&&(!o||e.getTime()<=o.getTime())&&(!s||e.getFullYear()>=s)&&(!a||e.getFullYear()<=a)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var r=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),r,this._getFormatConfig(t))}}),C.fn.datepicker=function(t,e){if(!this.length)return this;C.datepicker.initialized||(C(document).mousedown(C.datepicker._checkExternalClick),C.datepicker.initialized=!0),0===C("#"+C.datepicker._mainDivId).length&&C("body").append(C.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof e?C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this].concat(n)):C.datepicker._attachDatepicker(this,t)}):C.datepicker["_"+t+"Datepicker"].apply(C.datepicker,[this[0]].concat(n))},C.datepicker=new t,C.datepicker.initialized=!1,C.datepicker.uuid=(new Date).getTime(),C.datepicker.version="1.11.4",C.datepicker}),function(t){"function"==typeof define&&define.amd?define(["jquery","./widget"],t):t(jQuery)}(function(r){var o=!1;return r(document).mouseup(function(){o=!1}),r.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===r.data(t.target,e.widgetName+".preventClickEvent"))return r.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&r(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===r.data(t.target,this.widgetName+".preventClickEvent")&&r.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0))}},_mouseMove:function(t){if(this._mouseMoved){if(r.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&r.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(y){return y.widget("ui.draggable",y.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var e=this.options;return this._blurActiveElement(t),!(this.helper||e.disabled||0<y(t.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blockFrames(!0===e.iframeFix?"iframe":e.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=y(this);return y("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var e=this.document[0];if(this.handleElement.is(t.target))try{e.activeElement&&"body"!==e.activeElement.nodeName.toLowerCase()&&y(e.activeElement).blur()}catch(n){}},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),y.ui.ddmanager&&(y.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===y(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),y.ui.ddmanager&&!e.dropBehaviour&&y.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),y.ui.ddmanager&&y.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!e){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",y.ui.ddmanager&&y.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,n=!1;return y.ui.ddmanager&&!this.options.dropBehaviour&&(n=y.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||y.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?y(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),y.ui.ddmanager&&y.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),y.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!y(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var e=this.options,n=y.isFunction(e.helper),i=n?y(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),y.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==e&&y.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options,r=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(e=y(i.containment))[0])&&(t=/(scroll|auto)/.test(e.css("overflow")),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=e)):this.containment=i.containment:this.containment=[0,0,y(r).width()-this.helperProportions.width-this.margins.left,(y(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[y(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,y(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,y(window).scrollLeft()+y(window).width()-this.helperProportions.width-this.margins.left,y(window).scrollTop()+(y(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),u=t.pageX,l=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(u=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(u=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,l=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,u=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(u=this.originalPageX),"x"===s.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,e,n){return n=n||this._uiHash(),y.ui.plugin.call(this,t,[e,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),y.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),y.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,n){var i=y.extend({},t,{item:n.element});n.sortables=[],y(n.options.connectToSortable).each(function(){var t=y(this).sortable("instance");t&&!t.options.disabled&&(n.sortables.push(t),t.refreshPositions(),t._trigger("activate",e,i))})},stop:function(e,t,n){var i=y.extend({},t,{item:n.element});n.cancelHelperRemoval=!1,y.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,i))})},drag:function(n,i,r){y.each(r.sortables,function(){var t=!1,e=this;e.positionAbs=r.positionAbs,e.helperProportions=r.helperProportions,e.offset.click=r.offset.click,e._intersectsWith(e.containerCache)&&(t=!0,y.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&y.contains(e.element[0],this.element[0])&&(t=!1),t})),t?(e.isOver||(e.isOver=1,r._parent=i.helper.parent(),e.currentItem=i.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return i.helper[0]},n.target=e.currentItem[0],e._mouseCapture(n,!0),e._mouseStart(n,!0,!0),e.offset.click.top=r.offset.click.top,e.offset.click.left=r.offset.click.left,e.offset.parent.left-=r.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=r.offset.parent.top-e.offset.parent.top,r._trigger("toSortable",n),r.dropped=e.element,y.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,e.fromOutside=r),e.currentItem&&(e._mouseDrag(n),i.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",n,e._uiHash(e)),e._mouseStop(n,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(n),i.position=r._generatePosition(n,!0),r._trigger("fromSortable",n),r.dropped=!1,y.each(r.sortables,function(){this.refreshPositions()}))})}}),y.ui.plugin.add("draggable","cursor",{start:function(t,e,n){var i=y("body"),r=n.options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(t,e,n){var i=n.options;i._cursor&&y("body").css("cursor",i._cursor)}}),y.ui.plugin.add("draggable","opacity",{start:function(t,e,n){var i=y(e.helper),r=n.options;i.css("opacity")&&(r._opacity=i.css(
"opacity")),i.css("opacity",r.opacity)},stop:function(t,e,n){var i=n.options;i._opacity&&y(e.helper).css("opacity",i._opacity)}}),y.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,e,n){var i=n.options,r=!1,o=n.scrollParentNotHidden[0],s=n.document[0];o!==s&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=r=o.scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-y(s).scrollTop()<i.scrollSensitivity?r=y(s).scrollTop(y(s).scrollTop()-i.scrollSpeed):y(window).height()-(t.pageY-y(s).scrollTop())<i.scrollSensitivity&&(r=y(s).scrollTop(y(s).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-y(s).scrollLeft()<i.scrollSensitivity?r=y(s).scrollLeft(y(s).scrollLeft()-i.scrollSpeed):y(window).width()-(t.pageX-y(s).scrollLeft())<i.scrollSensitivity&&(r=y(s).scrollLeft(y(s).scrollLeft()+i.scrollSpeed)))),!1!==r&&y.ui.ddmanager&&!i.dropBehaviour&&y.ui.ddmanager.prepareOffsets(n,t)}}),y.ui.plugin.add("draggable","snap",{start:function(t,e,n){var i=n.options;n.snapElements=[],y(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=y(this),e=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e,n){var i,r,o,s,a,u,l,c,d,h,f=n.options,p=f.snapTolerance,m=e.offset.left,g=m+n.helperProportions.width,v=e.offset.top,b=v+n.helperProportions.height;for(d=n.snapElements.length-1;0<=d;d--)u=(a=n.snapElements[d].left-n.margins.left)+n.snapElements[d].width,c=(l=n.snapElements[d].top-n.margins.top)+n.snapElements[d].height,g<a-p||u+p<m||b<l-p||c+p<v||!y.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,y.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(l-b)<=p,r=Math.abs(c-v)<=p,o=Math.abs(a-g)<=p,s=Math.abs(u-m)<=p,i&&(e.position.top=n._convertPositionTo("relative",{top:l-n.helperProportions.height,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a-n.helperProportions.width}).left),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:u}).left)),h=i||r||o||s,"outer"!==f.snapMode&&(i=Math.abs(l-v)<=p,r=Math.abs(c-b)<=p,o=Math.abs(a-m)<=p,s=Math.abs(u-g)<=p,i&&(e.position.top=n._convertPositionTo("relative",{top:l,left:0}).top),r&&(e.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(e.position.left=n._convertPositionTo("relative",{top:0,left:a}).left),s&&(e.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(i||r||o||s||h)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,y.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=i||r||o||s||h)}}),y.ui.plugin.add("draggable","stack",{start:function(t,e,n){var i,r=n.options,o=y.makeArray(y(r.stack)).sort(function(t,e){return(parseInt(y(t).css("zIndex"),10)||0)-(parseInt(y(e).css("zIndex"),10)||0)});o.length&&(i=parseInt(y(o[0]).css("zIndex"),10)||0,y(o).each(function(t){y(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),y.ui.plugin.add("draggable","zIndex",{start:function(t,e,n){var i=y(e.helper),r=n.options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,e,n){var i=n.options;i._zIndex&&y(e.helper).css("zIndex",i._zIndex)}}),y.ui.draggable}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(b){return b.widget("ui.resizable",b.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(t,e){if("hidden"===b(t).css("overflow"))return!1;var n=e&&"left"===e?"scrollLeft":"scrollTop",i=!1;return 0<t[n]||(t[n]=1,i=0<t[n],t[n]=0,i)},_create:function(){var t,e,n,i,o=this,r=this.options;if(this.element.addClass("ui-resizable"),b.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=b(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},e=0;e<t.length;e++)n=b.trim(t[e]),(i=b("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:r.zIndex}),"se"===n&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(i);this._renderAxis=function(t){var e,n,i,r;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=b(this.handles[e]),this._on(this.handles[e],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=b(this.handles[e],this.element),r=/sw|ne|nw|se|n|s/.test(e)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),r.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(b(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(b(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,e=function(t){b(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(t){var e,n,i=!1;for(e in this.handles)((n=b(this.handles[e])[0])===t.target||b.contains(n,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var e,n,i,r=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),r.containment&&(e+=b(r.containment).scrollLeft()||0,n+=b(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:e,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=b(".ui-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===i?this.axis+"-resize":i),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,n,i=this.originalMousePosition,r=this.axis,o=t.pageX-i.left||0,s=t.pageY-i.top||0,a=this._change[r];return this._updatePrevProperties(),a&&(e=a.apply(this,[t,o,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,n,i,r,o,s,a,u=this.options,l=this;return this._helper&&(i=(n=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:l.sizeDiff.height,r=n?0:l.sizeDiff.width,o={width:l.helper.width()-r,height:l.helper.height()-i},s=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,u.animate||this.element.css(b.extend(o,{top:a,left:s})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!u.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,i,r,o,s=this.options;o={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:Infinity,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:Infinity},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,r=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),r<o.maxHeight&&(o.maxHeight=r)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(t.width=e.minWidth),s&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),o&&l&&(t.left=a-e.minWidth),i&&l&&(t.left=a-e.maxWidth),s&&c&&(t.top=u-e.minHeight),r&&c&&(t.top=u-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],i=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseInt(i[e],10)||0,n[e]+=parseInt(r[e],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(t,e,n){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},sw:function(t,e,n){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,n]))},ne:function(t,e,n){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},nw:function(t,e,n){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,n]))}},_propagate:function(t,e){b.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),b.ui.plugin.add("resizable","animate",{stop:function(e){var n=b(this).resizable("instance"),t=n.options,i=n._proportionallyResizeElements,r=i.length&&/textarea/i.test(i[0].nodeName),o=r&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=r?0:n.sizeDiff.width,a={width:n.size.width-s,height:n.size.height-o},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(b.extend(a,l&&u?{top:l,left:u}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&b(i[0]).css({width:t.width,height:t.height}),n._updateCache(t),n._propagate("resize",e)}})}}),b.ui.plugin.add("resizable","containment",{start:function(){var n,i,t,e,r,o,s,a=b(this).resizable("instance"),u=a.options,l=a.element,c=u.containment,d=c instanceof b?c.get(0):/parent/.test(c)?l.parent().get(0):c;d&&(a.containerElement=b(d),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}):(n=b(d),i=[],b(["Top","Right","Left","Bottom"]).each(function(t,e){i[t]=a._num(n.css("padding"+e))}),a.containerOffset=n.offset(),a.containerPosition=n.position(),a.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},t=a.containerOffset,e=a.containerSize.height,r=a.containerSize.width,o=a._hasScroll(d,"left")?d.scrollWidth:r,s=a._hasScroll(d)?d.scrollHeight:e,a.parentData={element:d,left:t.left,top:t.top,width:o,height:s}))},resize:function(t){var e,n,i,r,o=b(this).resizable("instance"),s=o.options,a=o.containerOffset,u=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},d=o.containerElement,h=!0;d[0]!==document&&/static/.test(d.css("position"))&&(c=a),u.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,h=!1),o.position.left=s.helper?a.left:0),u.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,h=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),r=/relative|absolute/.test(o.containerElement.css("position")),i&&r?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),e=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),e+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-e,l&&(o.size.height=o.size.width/o.aspectRatio,h=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,l&&(o.size.width=o.size.height*o.aspectRatio,h=!1)),h||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=b(this).resizable("instance"),e=t.options,n=t.containerOffset,i=t.containerPosition,r=t.containerElement,o=b(t.helper),s=o.offset(),a=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(r.css("position"))&&b(this).css({left:s.left-i.left-n.left,width:a,height:u}),t._helper&&!e.animate&&/static/.test(r.css("position"))&&b(this).css({left:s.left-i.left-n.left,width:a,height:u})}}),b.ui.plugin.add("resizable","alsoResize",{start:function(){var t=b(this).resizable("instance").options;b(t.alsoResize).each(function(){var t=b(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,n){var e=b(this).resizable("instance"),i=e.options,r=e.originalSize,o=e.originalPosition,s={height:e.size.height-r.height||0,width:e.size.width-r.width||0,top:e.position.top-o.top||0,left:e.position.left-o.left||0};b(i.alsoResize).each(function(){var t=b(this),i=b(this).data("ui-resizable-alsoresize"),r={},e=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(e,function(t,e){var n=(i[e]||0)+(s[e]||0);n&&0<=n&&(r[e]=n||null)}),t.css(r)})},stop:function(){b(this).removeData("resizable-alsoresize")}}),b.ui.plugin.add("resizable","ghost",{start:function(){var t=b(this).resizable("instance"),e=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=b(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=b(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),b.ui.plugin.add("resizable","grid",{resize:function(){var t,e=b(this).resizable("instance"),n=e.options,i=e.size,r=e.originalSize,o=e.originalPosition,s=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,u=a[0]||1,l=a[1]||1,c=Math.round((i.width-r.width)/u)*u,d=Math.round((i.height-r.height)/l)*l,h=r.width+c,f=r.height+d,p=n.maxWidth&&n.maxWidth<h,m=n.maxHeight&&n.maxHeight<f,g=n.minWidth&&n.minWidth>h,v=n.minHeight&&n.minHeight>f;n.grid=a,g&&(h+=u),v&&(f+=l),p&&(h-=u),m&&(f-=l),/^(se|s|e)$/.test(s)?(e.size.width=h,e.size.height=f):/^(ne)$/.test(s)?(e.size.width=h,e.size.height=f,e.position.top=o.top-d):/^(sw)$/.test(s)?(e.size.width=h,e.size.height=f,e.position.left=o.left-c):((f-l<=0||h-u<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<f-l?(e.size.height=f,e.position.top=o.top-d):(f=l-t.height,e.size.height=f,e.position.top=o.top+r.height-f),0<h-u?(e.size.width=h,e.position.left=o.left-c):(h=u-t.width,e.size.width=h,e.position.left=o.left+r.width-h))}}),b.ui.resizable}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],t):t(jQuery)}(function(u){return u.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=u(this).css(t).offset().top;e<0&&u(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&u.fn.draggable&&this._makeDraggable(),this.options.resizable&&u.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?u(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:u.noop,enable:u.noop,close:function(t){var e,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(e=this.document[0].activeElement)&&"body"!==e.nodeName.toLowerCase()&&u(e).blur()}catch(i){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+u(this).css("z-index")}).get(),r=Math.max.apply(null,i);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),n=!0),n&&!e&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=u(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(t){function e(){var t=this.document[0].activeElement;this.uiDialog[0]===t||u.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=u("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===u.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===u.ui.keyCode.TAB&&!t.isDefaultPrevented()){var e=this.uiDialog.find(":tabbable"),n=e.filter(":first"),i=e.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.focus()}),t.preventDefault()):(this._delay(function(){n.focus()}),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=u("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){u(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=u("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=u("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=u("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=u("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var r=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),u.isEmptyObject(t)||u.isArray(t)&&!t.length?this.uiDialog.removeClass("ui-dialog-buttons"):(u.each(t,function(t,e){var n,i;e=u.isFunction(e)?{click:e,text:t}:e,e=u.extend({type:"button"},e),n=e.click,e.click=function(){n.apply(r.element[0],arguments)},i={icons:e.icons,text:e.showText},delete e.icons,delete e.showText,u("<button></button>",e).button(i).appendTo(r.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function r(t){return{position:t.position,offset:t.offset}}var o=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){u(this).addClass("ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",t,r(e))},drag:function(t,e){o._trigger("drag",t,r(e))},stop:function(t,e){var n=e.offset.left-o.document.scrollLeft(),i=e.offset.top-o.document.scrollTop();s.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=i?"+":"")+i,of:o.window},u(this).removeClass("ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",t,r(e))}})},_makeResizable:function(){function o(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var s=this,a=this.options,t=a.resizable,e=this.uiDialog.css("position"),n="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:n,start:function(t,e){u(this).addClass("ui-dialog-resizing"),s._blockFrames(),s._trigger("resizeStart",t,o(e))},resize:function(t,e){s._trigger("resize",t,o(e))},stop:function(t,e){var n=s.uiDialog.offset(),i=n.left-s.document.scrollLeft(),r=n.top-s.document.scrollTop();a.height=s.uiDialog.height(),a.width=s.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=r?"+":"")+r,of:s.window},u(this).removeClass("ui-dialog-resizing"),s._unblockFrames(),s._trigger("resizeStop",t,o(e))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=u(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),e=u.inArray(this,t);-1!==e&&t.splice(e,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,r={};u.each(t,function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(i=!0),t in n.resizableRelatedOptions&&(r[t]=e)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,e){var n,i,r=this.uiDialog;"dialogClass"===t&&r.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((n=r.is(":data(ui-draggable)"))&&!e&&r.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((i=r.is(":data(ui-resizable)"))&&!e&&r.resizable("destroy"),i&&"string"==typeof e&&r.resizable("option","handles",e),i||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),
n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=u(this);return u("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!u(t.target).closest(".ui-dialog").length||!!u(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=u("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./mouse","./draggable"],t):t(jQuery)}(function(a){return a.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(t){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=t},this._addToManager(t.scope),t.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){a.ui.ddmanager.droppables[t]=a.ui.ddmanager.droppables[t]||[],a.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=a.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,e){if("accept"===t)this.accept=a.isFunction(e)?e:function(t){return t.is(e)};else if("scope"===t){var n=a.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=a.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=a.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(e)))},_drop:function(e,t){var n=t||a.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=a(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&a.ui.intersect(n,a.extend(t,{offset:t.element.offset()}),t.options.tolerance,e))return!(i=!0)}),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),a.ui.intersect=function(){function h(t,e,n){return e<=t&&t<e+n}return function(t,e,n,i){if(!e.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,s=r+t.helperProportions.width,a=o+t.helperProportions.height,u=e.offset.left,l=e.offset.top,c=u+e.proportions().width,d=l+e.proportions().height;switch(n){case"fit":return u<=r&&s<=c&&l<=o&&a<=d;case"intersect":return u<r+t.helperProportions.width/2&&s-t.helperProportions.width/2<c&&l<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<d;case"pointer":return h(i.pageY,l,e.proportions().height)&&h(i.pageX,u,e.proportions().width);case"touch":return(l<=o&&o<=d||l<=a&&a<=d||o<l&&d<a)&&(u<=r&&r<=c||u<=s&&s<=c||r<u&&c<s);default:return!1}}}(),a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,e){var n,i,r=a.ui.ddmanager.droppables[t.options.scope]||[],o=e?e.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++)if(!(r[n].options.disabled||t&&!r[n].accept.call(r[n].element[0],t.currentItem||t.element))){for(i=0;i<s.length;i++)if(s[i]===r[n].element[0]){r[n].proportions().height=0;continue t}r[n].visible="none"!==r[n].element.css("display"),r[n].visible&&("mousedown"===o&&r[n]._activate.call(r[n],e),r[n].offset=r[n].element.offset(),r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight}))}},drop:function(t,e){var n=!1;return a.each((a.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(t,this,this.options.tolerance,e)&&(n=this._drop.call(this,e)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),n},dragStart:function(t,e){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||a.ui.ddmanager.prepareOffsets(t,e)})},drag:function(o,s){o.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(o,s),a.each(a.ui.ddmanager.droppables[o.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,n,i=a.ui.intersect(o,this,this.options.tolerance,s),r=!i&&this.isover?"isout":i&&!this.isover?"isover":null;r&&(this.options.greedy&&(e=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e})).length&&((t=a(n[0]).droppable("instance")).greedyChild="isover"===r)),t&&"isover"===r&&(t.isover=!1,t.isout=!0,t._out.call(t,s)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,s),t&&"isout"===r&&(t.isout=!1,t.isover=!0,t._over.call(t,s)))}})},dragStop:function(t,e){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||a.ui.ddmanager.prepareOffsets(t,e)}},a.ui.droppable}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(d){var n,a="ui-effects-",i=d;return d.effects={effect:{}},function(c,d){function h(t,e,n){var i=g[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:t<0?0:i.max<t?i.max:t)}function a(s){var a=p(),u=a._rgba=[];return s=s.toLowerCase(),b(e,function(t,e){var n,i=e.re.exec(s),r=i&&e.parse(i),o=e.space||"rgba";if(r)return n=a[o](r),a[m[o].cache]=n[m[o].cache],u=a._rgba=n._rgba,!1}),u.length?("0,0,0,0"===u.join()&&c.extend(u,l.transparent),a):l[s]}function u(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var l,t="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",f=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],p=c.Color=function(t,e,n,i){return new c.Color.fn.parse(t,e,n,i)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},g={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},v=p.support={},n=c("<p>")[0],b=c.each;n.style.cssText="background-color:rgba(1,1,1,.5)",v.rgba=-1<n.style.backgroundColor.indexOf("rgba"),b(m,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),p.fn=c.extend(p.prototype,{parse:function(r,t,e,n){if(r===d)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=c(r).css(t),t=d);var o=this,i=c.type(r),s=this._rgba=[];return t!==d&&(r=[r,t,e,n],i="array"),"string"===i?this.parse(a(r)||l._default):"array"===i?(b(m.rgba.props,function(t,e){s[e.idx]=h(r[e.idx],e)}),this):"object"===i?(b(m,r instanceof p?function(t,e){r[e.cache]&&(o[e.cache]=r[e.cache].slice())}:function(t,n){var i=n.cache;b(n.props,function(t,e){if(!o[i]&&n.to){if("alpha"===t||null==r[t])return;o[i]=n.to(o._rgba)}o[i][e.idx]=h(r[t],e,!0)}),o[i]&&c.inArray(null,o[i].slice(0,3))<0&&(o[i][3]=1,n.from&&(o._rgba=n.from(o[i])))}),this):void 0},is:function(t){var r=p(t),o=!0,s=this;return b(m,function(t,e){var n,i=r[e.cache];return i&&(n=s[e.cache]||e.to&&e.to(s._rgba)||[],b(e.props,function(t,e){if(null!=i[e.idx])return o=i[e.idx]===n[e.idx]})),o}),o},_space:function(){var n=[],i=this;return b(m,function(t,e){i[e.cache]&&n.push(t)}),n.pop()},transition:function(t,s){var a=p(t),e=a._space(),n=m[e],i=0===this.alpha()?p("transparent"):this,u=i[n.cache]||n.to(i._rgba),l=u.slice();return a=a[n.cache],b(n.props,function(t,e){var n=e.idx,i=u[n],r=a[n],o=g[e.type]||{};null!==r&&(null===i?l[n]=r:(o.mod&&(r-i>o.mod/2?i+=o.mod:i-r>o.mod/2&&(i-=o.mod)),l[n]=h((r-i)*s+i,e)))}),this[e](l)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),n=e.pop(),i=p(t)._rgba;return p(c.map(e,function(t,e){return(1-n)*i[e]+n*t}))},toRgbaString:function(){var t="rgba(",e=c.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=c.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+c.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),p.fn.parse.prototype=p.fn,m.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=t[3],a=Math.max(i,r,o),u=Math.min(i,r,o),l=a-u,c=a+u,d=.5*c;return e=u===a?0:i===a?60*(r-o)/l+360:r===a?60*(o-i)/l+120:60*(i-r)/l+240,n=0===l?0:d<=.5?l/c:l/(2-c),[Math.round(e)%360,n,d,null==s?1:s]},m.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],o=i<=.5?i*(1+n):i+n-i*n,s=2*i-o;return[Math.round(255*u(s,o,e+1/3)),Math.round(255*u(s,o,e)),Math.round(255*u(s,o,e-1/3)),r]},b(m,function(u,t){var n=t.props,s=t.cache,a=t.to,l=t.from;p.fn[u]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===d)return this[s].slice();var e,i=c.type(t),r="array"===i||"object"===i?t:arguments,o=this[s].slice();return b(n,function(t,e){var n=r["object"===i?t:e.idx];null==n&&(n=o[e.idx]),o[e.idx]=h(n,e)}),l?((e=p(l(o)))[s]=o,e):p(o)},b(n,function(s,a){p.fn[s]||(p.fn[s]=function(t){var e,n=c.type(t),i="alpha"===s?this._hsla?"hsla":"rgba":u,r=this[i](),o=r[a.idx];return"undefined"===n?o:("function"===n&&(t=t.call(this,o),n=c.type(t)),null==t&&a.empty?this:("string"===n&&(e=f.exec(t))&&(t=o+parseFloat(e[2])*("+"===e[1]?1:-1)),r[a.idx]=t,this[i](r)))})})}),p.hook=function(t){var e=t.split(" ");b(e,function(t,s){c.cssHooks[s]={set:function(t,e){var n,i,r="";if("transparent"!==e&&("string"!==c.type(e)||(n=a(e)))){if(e=p(n||e),!v.rgba&&1!==e._rgba[3]){for(i="backgroundColor"===s?t.parentNode:t;(""===r||"transparent"===r)&&i&&i.style;)try{r=c.css(i,"backgroundColor"),i=i.parentNode}catch(o){}e=e.blend(r&&"transparent"!==r?r:"_default")}e=e.toRgbaString()}try{t.style[s]=e}catch(o){}}},c.fx.step[s]=function(t){t.colorInit||(t.start=p(t.elem,s),t.end=p(t.end),t.colorInit=!0),c.cssHooks[s].set(t.elem,t.start.transition(t.end,t.pos))}})},p.hook(t),c.cssHooks.borderColor={expand:function(n){var i={};return b(["Top","Right","Bottom","Left"],function(t,e){i["border"+e+"Color"]=n}),i}},l=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){function s(t){var e,n,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)"string"==typeof i[e=i[n]]&&(r[d.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(r[e]=i[e]);return r}function a(t,e){var n,i,r={};for(n in e)i=e[n],t[n]!==i&&(c[n]||!d.fx.step[n]&&isNaN(parseFloat(i))||(r[n]=i));return r}var o,r,u,l=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};d.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){d.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(i.style(t.elem,e,t.end),t.setAttr=!0)}}),d.fn.addBack||(d.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),d.effects.animateClass=function(r,t,e,n){var o=d.speed(t,e,n);return this.queue(function(){var t,n=d(this),e=n.attr("class")||"",i=o.children?n.find("*").addBack():n;i=i.map(function(){return{el:d(this),start:s(this)}}),(t=function(){d.each(l,function(t,e){r[e]&&n[e+"Class"](r[e])})})(),i=i.map(function(){return this.end=s(this.el[0]),this.diff=a(this.start,this.end),this}),n.attr("class",e),i=i.map(function(){var t=this,e=d.Deferred(),n=d.extend({},o,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),d.when.apply(d,i.get()).done(function(){t(),d.each(arguments,function(){var e=this.el;d.each(this.diff,function(t){e.css(t,"")})}),o.complete.call(n[0])})})},d.fn.extend({addClass:(u=d.fn.addClass,function(t,e,n,i){return e?d.effects.animateClass.call(this,{add:t},e,n,i):u.apply(this,arguments)}),removeClass:(r=d.fn.removeClass,function(t,e,n,i){return 1<arguments.length?d.effects.animateClass.call(this,{remove:t},e,n,i):r.apply(this,arguments)}),toggleClass:(o=d.fn.toggleClass,function(t,e,n,i,r){return"boolean"==typeof e||e===undefined?n?d.effects.animateClass.call(this,e?{add:t}:{remove:t},n,i,r):o.apply(this,arguments):d.effects.animateClass.call(this,{toggle:t},e,n,i)}),switchClass:function(t,e,n,i,r){return d.effects.animateClass.call(this,{add:e,remove:t},n,i,r)}})}(),function(){function i(t,e,n,i){return d.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),d.isFunction(e)&&(i=e,n=null,e={}),("number"==typeof e||d.fx.speeds[e])&&(i=n,n=e,e={}),d.isFunction(n)&&(i=n,n=null),e&&d.extend(t,e),n=n||e.duration,t.duration=d.fx.off?0:"number"==typeof n?n:n in d.fx.speeds?d.fx.speeds[n]:d.fx.speeds._default,t.complete=i||e.complete,t}function n(t){return!(t&&"number"!=typeof t&&!d.fx.speeds[t])||("string"==typeof t&&!d.effects.effect[t]||(!!d.isFunction(t)||"object"==typeof t&&!t.effect))}var r,o,s;d.extend(d.effects,{version:"1.11.4",save:function(t,e){for(var n=0;n<e.length;n++)null!==e[n]&&t.data(a+e[n],t[0].style[e[n]])},restore:function(t,e){var n,i;for(i=0;i<e.length;i++)null!==e[i]&&((n=t.data(a+e[i]))===undefined&&(n=""),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var i={width:n.outerWidth(!0),height:n.outerHeight(!0),"float":n.css("float")},t=d("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},r=document.activeElement;try{r.id}catch(o){r=document.body}return n.wrap(t),(n[0]===r||d.contains(n[0],r))&&d(r).focus(),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):(d.extend(i,{position:n.css("position"),zIndex:n.css("z-index")}),d.each(["top","left","bottom","right"],function(t,e){i[e]=n.css(e),isNaN(parseInt(i[e],10))&&(i[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(i).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===e||d.contains(t[0],e))&&d(e).focus()),t},setTransition:function(i,t,r,o){return o=o||{},d.each(t,function(t,e){var n=i.cssUnit(e);0<n[0]&&(o[e]=n[0]*r+n[1])}),o}}),d.fn.extend({effect:function(){function t(t){function e(){d.isFunction(i)&&i.call(n[0]),d.isFunction(t)&&t()}var n=d(this),i=o.complete,r=o.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),e()):s.call(n[0],o,e)}var o=i.apply(this,arguments),e=o.mode,n=o.queue,s=d.effects.effect[o.effect];return d.fx.off||!s?e?this[e](o.duration,o.complete):this.each(function(){o.complete&&o.complete.call(this)}):!1===n?this.each(t):this.queue(n||"fx",t)},show:(s=d.fn.show,function(t){if(n(t))return s.apply(this,arguments);var e=i.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(o=d.fn.hide,function(t){if(n(t))return o.apply(this,arguments);var e=i.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(r=d.fn.toggle,function(t){if(n(t)||"boolean"==typeof t)return r.apply(this,arguments);var e=i.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var n=this.css(t),i=[];return d.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(i=[parseFloat(n),e])}),i}})}(),n={},d.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){n[t]=function(t){return Math.pow(t,e+2)}}),d.extend(n,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),d.each(n,function(t,e){d.easing["easeIn"+t]=e,d.easing["easeOut"+t]=function(t){return 1-e(1-t)},d.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}}),d.effects}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(v){return v.effects.effect.blind=function(t,e){var n,i,r,o=v(this),s=/up|down|vertical/,a=/up|left|vertical|horizontal/,u=["position","top","bottom","left","right","height","width"],l=v.effects.setMode(o,t.mode||"hide"),c=t.direction||"up",d=s.test(c),h=d?"height":"width",f=d?"top":"left",p=a.test(c),m={},g="show"===l;o.parent().is(".ui-effects-wrapper")?v.effects.save(o.parent(),u):v.effects.save(o,u),o.show(),i=(n=v.effects.createWrapper(o).css({overflow:"hidden"}))[h](),r=parseFloat(n.css(f))||0,m[h]=g?i:0,p||(o.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=g?r:i+r),g&&(n.css(h,0),p||n.css(f,r+i)),n.animate(m,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===l&&o.hide(),v.effects.restore(o,u),v.effects.removeWrapper(o),e()}})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(w){return w.effects.effect.bounce=function(t,e){var n,i,r,o=w(this),s=["position","top","bottom","left","right","height","width"],a=w.effects.setMode(o,t.mode||"effect"),u="hide"===a,l="show"===a,c=t.direction||"up",d=t.distance,h=t.times||5,f=2*h+(l||u?1:0),p=t.duration/f,m=t.easing,g="up"===c||"down"===c?"top":"left",v="up"===c||"left"===c,b=o.queue(),y=b.length;for((l||u)&&s.push("opacity"),w.effects.save(o,s),o.show(),w.effects.createWrapper(o),d||(d=o["top"===g?"outerHeight":"outerWidth"]()/3),l&&((r={opacity:1})[g]=0,o.css("opacity",0).css(g,v?2*-d:2*d).animate(r,p,m)),u&&(d/=Math.pow(2,h-1)),n=(r={})[g]=0;n<h;n++)(i={})[g]=(v?"-=":"+=")+d,o.animate(i,p,m).animate(r,p,m),d=u?2*d:d/2;u&&((i={opacity:0})[g]=(v?"-=":"+=")+d,o.animate(i,p,m)),o.queue(function(){u&&o.hide(),w.effects.restore(o,s),w.effects.removeWrapper(o),e()}),1<y&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),o.dequeue()}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(h){return h.effects.effect.clip=function(t,e){var n,i,r,o=h(this),s=["position","top","bottom","left","right","height","width"],a="show"===h.effects.setMode(o,t.mode||"hide"),u="vertical"===(t.direction||"vertical"),l=u?"height":"width",c=u?"top":"left",d={};h.effects.save(o,s),o.show(),n=h.effects.createWrapper(o).css({overflow:"hidden"}),r=(i="IMG"===o[0].tagName?n:o)[l](),a&&(i.css(l,0),i.css(c,r/2)),d[l]=a?r:0,d[c]=a?0:r/2,i.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){a||o.hide(),h.effects.restore(o,s),h.effects.removeWrapper(o),e()}})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(d){return d.effects.effect.drop=function(t,e){var n,i=d(this),r=["position","top","bottom","left","right","opacity","height","width"],o=d.effects.setMode(i,t.mode||"hide"),s="show"===o,a=t.direction||"left",u="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a?"pos":"neg",c={opacity:s?1:0};d.effects.save(i,r),i.show(),d.effects.createWrapper(i),n=t.distance||i["top"===u?"outerHeight":"outerWidth"](!0)/2,s&&i.css("opacity",0).css(u,"pos"===l?-n:n),c[u]=(s?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+n,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),d.effects.restore(i,r),d.effects.removeWrapper(i),e()}})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(b){return b.effects.effect.explode=function(t,e){function n(){v.push(this),v.length===c*d&&i()}function i(){h.css({visibility:"visible"}),b(v).remove(),f||h.hide(),e()}var r,o,s,a,u,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=c,h=b(this),f="show"===b.effects.setMode(h,t.mode||"hide"),p=h.show().css("visibility","hidden").offset(),m=Math.ceil(h.outerWidth()/d),g=Math.ceil(h.outerHeight()/c),v=[];for(r=0;r<c;r++)for(a=p.top+r*g,l=r-(c-1)/2,o=0;o<d;o++)s=p.left+o*m,u=o-(d-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*m,top:-r*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:g,left:s+(f?u*m:0),top:a+(f?l*g:0),opacity:f?0:1}).animate({left:s+(f?0:u*m),top:a+(f?0:l*g),opacity:f?1:0},t.duration||500,t.easing,n)}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(r){return r.effects.effect.fade=function(t,e){var n=r(this),i=r.effects.setMode(n,t.mode||"toggle");n.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:e})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(v){return v.effects.effect.fold=function(t,e){var n,i,r=v(this),o=["position","top","bottom","left","right","height","width"],s=v.effects.setMode(r,t.mode||"hide"),a="show"===s,u="hide"===s,l=t.size||15,c=/([0-9]+)%/.exec(l),d=!!t.horizFirst,h=a!==d,f=h?["width","height"]:["height","width"],p=t.duration/2,m={},g={};v.effects.save(r,o),r.show(),n=v.effects.createWrapper(r).css({overflow:"hidden"}),i=h?[n.width(),n.height()]:[n.height(),n.width()],c&&(l=parseInt(c[1],10)/100*i[u?0:1]),a&&n.css(d?{height:0,width:l}:{height:l,width:0}),m[f[0]]=a?i[0]:l,g[f[1]]=a?i[1]:0,n.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),v.effects.restore(r,o),v.effects.removeWrapper(r),e()})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(s){return s.effects.effect.highlight=function(t,e){var n=s(this),i=["backgroundImage","backgroundColor","opacity"],r=s.effects.setMode(n,t.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===r&&(o.opacity=0),s.effects.save(n,i),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&n.hide(),s.effects.restore(n,i),e()}})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(y){return y.effects.effect.size=function(n,t){var e,i,r,o=y(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],u=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=y.effects.setMode(o,n.mode||"effect"),f=n.restore||"effect"!==h,p=n.scale||"both",m=n.origin||["middle","center"],g=o.css("position"),v=f?s:a,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&o.show(),e={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===n.mode&&"show"===h?(o.from=n.to||b,o.to=n.from||e):(o.from=n.from||("show"===h?b:e),o.to=n.to||("hide"===h?b:e)),r={from:{y:o.from.height/e.height,x:o.from.width/e.width},to:{y:o.to.height/e.height,x:o.to.width/e.width}},"box"!==p&&"both"!==p||(r.from.y!==r.to.y&&(v=v.concat(c),o.from=y.effects.setTransition(o,c,r.from.y,o.from),o.to=y.effects.setTransition(o,c,r.to.y,o.to)),r.from.x!==r.to.x&&(v=v.concat(d),o.from=y.effects.setTransition(o,d,r.from.x,o.from),o.to=y.effects.setTransition(o,d,r.to.x,o.to))),"content"!==p&&"both"!==p||r.from.y!==r.to.y&&(v=v.concat(l).concat(u),o.from=y.effects.setTransition(o,l,r.from.y,o.from),o.to=y.effects.setTransition(o,l,r.to.y,o.to)),y.effects.save(o,v),o.show(),y.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=y.effects.getBaseline(m,e),o.from.top=(e.outerHeight-o.outerHeight())*i.y,o.from.left=(e.outerWidth-o.outerWidth())*i.x,o.to.top=(e.outerHeight-o.to.outerHeight)*i.y,o.to.left=(e.outerWidth-o.to.outerWidth)*i.x),o.css(o.from),"content"!==p&&"both"!==p||(c=c.concat(["marginTop","marginBottom"]).concat(l),d=d.concat(["marginLeft","marginRight"]),u=s.concat(c).concat(d),o.find("*[width]").each(function(){var t=y(this),e={height:t.height(),width:t.width(),outerHeight:t.outerHeight(),outerWidth:t.outerWidth()};f&&y.effects.save(t,u),t.from={height:e.height*r.from.y,width:e.width*r.from.x,outerHeight:e.outerHeight*r.from.y,outerWidth:e.outerWidth*r.from.x},t.to={height:e.height*r.to.y,width:e.width*r.to.x,outerHeight:e.height*r.to.y,outerWidth:e.width*r.to.x},r.from.y!==r.to.y&&(t.from=y.effects.setTransition(t,c,r.from.y,t.from),t.to=y.effects.setTransition(t,c,r.to.y,t.to)),r.from.x!==r.to.x&&(t.from=y.effects.setTransition(t,d,r.from.x,t.from),t.to=y.effects.setTransition(t,d,r.to.x,t.to)),t.css(t.from),t.animate(t.to,n.duration,n.easing,function(){f&&y.effects.restore(t,u)})})),o.animate(o.to,{queue:!1,duration:n.duration,easing:n.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===h&&o.hide(),y.effects.restore(o,v),f||("static"===g?o.css({position:"relative",top:o.to.top,left:o.to.left}):y.each(["top","left"],function(r,t){o.css(t,function(t,e){var n=parseInt(e,10),i=r?o.to.left:o.to.top;return"auto"===e?i+"px":n+i+"px"})})),y.effects.removeWrapper(o),t()}})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect","./effect-size"],t):t(jQuery)}(function(c){return c.effects.effect.scale=function(t,e){var n=c(this),i=c.extend(!0,{},t),r=c.effects.setMode(n,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===r?0:100),s=t.direction||"both",a=t.origin,u={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},l={y:"horizontal"!==s?o/100:1,x:"vertical"!==s?o/100:1};i.effect="size",i.queue=!1,i.complete=e,"effect"!==r&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:u),i.to={height:u.height*l.y,width:u.width*l.x,outerHeight:u.outerHeight*l.y,outerWidth:u.outerWidth*l.x},i.fade&&("show"===r&&(i.from.opacity=0,i.to.opacity=1),"hide"===r&&(i.from.opacity=1,i.to.opacity=0)),n.effect(i)}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect","./effect-scale"],t):t(jQuery)}(function(u){return u.effects.effect.puff=function(t,e){var n=u(this),i=u.effects.setMode(n,t.mode||"hide"),r="hide"===i,o=parseInt(t.percent,10)||150,s=o/100,a={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};u.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:e,percent:r?o:100,from:r?a:{height:a.height*s,width:a.width*s,outerHeight:a.outerHeight*s,outerWidth:a.outerWidth*s}}),n.effect(t)}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(f){return f.effects.effect.pulsate=function(t,e){var n,i=f(this),r=f.effects.setMode(i,t.mode||"show"),o="show"===r,s="hide"===r,a=o||"hide"===r,u=2*(t.times||5)+(a?1:0),l=t.duration/u,c=0,d=i.queue(),h=d.length;for(!o&&i.is(":visible")||(i.css("opacity",0).show(),c=1),n=1;n<u;n++)i.animate({opacity:c},l,t.easing),c=1-c;i.animate({opacity:c},l,t.easing),i.queue(function(){s&&i.hide(),e()}),1<h&&d.splice.apply(d,[1,0].concat(d.splice(h,u+1))),i.dequeue()}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(b){return b.effects.effect.shake=function(t,e){var n,i=b(this),r=["position","top","bottom","left","right","height","width"],o=b.effects.setMode(i,t.mode||"effect"),s=t.direction||"left",a=t.distance||20,u=t.times||3,l=2*u+1,c=Math.round(t.duration/l),d="up"===s||"down"===s?"top":"left",h="up"===s||"left"===s,f={},p={},m={},g=i.queue(),v=g.length;for(b.effects.save(i,r),i.show(),b.effects.createWrapper(i),f[d]=(h?"-=":"+=")+a,p[d]=(h?"+=":"-=")+2*a,m[d]=(h?"-=":"+=")+2*a,i.animate(f,c,t.easing),n=1;n<u;n++)i.animate(p,c,t.easing).animate(m,c,t.easing);i.animate(p,c,t.easing).animate(f,c/2,t.easing).queue(function(){"hide"===o&&i.hide(),b.effects.restore(i,r),b.effects.removeWrapper(i),e()}),1<v&&g.splice.apply(g,[1,0].concat(g.splice(v,l+1))),i.dequeue()}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(d){return d.effects.effect.slide=function(t,e){var n,i=d(this),r=["position","top","bottom","left","right","width","height"],o=d.effects.setMode(i,t.mode||"show"),s="show"===o,a=t.direction||"left",u="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a,c={};d.effects.save(i,r),i.show(),n=t.distance||i["top"===u?"outerHeight":"outerWidth"](
!0),d.effects.createWrapper(i).css({overflow:"hidden"}),s&&i.css(u,l?isNaN(n)?"-"+n:-n:n),c[u]=(s?l?"+=":"-=":l?"-=":"+=")+n,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),d.effects.restore(i,r),d.effects.removeWrapper(i),e()}})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./effect"],t):t(jQuery)}(function(h){return h.effects.effect.transfer=function(t,e){var n=h(this),i=h(t.to),r="fixed"===i.css("position"),o=h("body"),s=r?o.scrollTop():0,a=r?o.scrollLeft():0,u=i.offset(),l={top:u.top-s,left:u.left-a,height:i.innerHeight(),width:i.innerWidth()},c=n.offset(),d=h("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-s,left:c.left-a,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){d.remove(),e()})}}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(n){return n.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(t===undefined)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return t===undefined&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=n("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(l){return l.widget("ui.selectable",l.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=l(e.options.filter,e.element[0])).addClass("ui-selectee"),t.each(function(){var t=l(this),e=t.offset();l.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=l("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.options.disabled||(this.selectees=l(t.filter,this.element[0]),this._trigger("start",n),l(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=l.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),l(n.target).parents().addBack().each(function(){var t,e=l.data(this,"selectable-item");if(e)return t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var t,i=this,r=this.options,o=this.opos[0],s=this.opos[1],a=n.pageX,u=n.pageY;return a<o&&(t=a,a=o,o=t),u<s&&(t=u,u=s,s=t),this.helper.css({left:o,top:s,width:a-o,height:u-s}),this.selectees.each(function(){var t=l.data(this,"selectable-item"),e=!1;t&&t.element!==i.element[0]&&("touch"===r.tolerance?e=!(t.left>a||t.right<o||t.top>u||t.bottom<s):"fit"===r.tolerance&&(e=t.left>o&&t.right<a&&t.top>s&&t.bottom<u),e?(t.selected&&(t.$element.removeClass("ui-selected"),t.selected=!1),t.unselecting&&(t.$element.removeClass("ui-unselecting"),t.unselecting=!1),t.selecting||(t.$element.addClass("ui-selecting"),t.selecting=!0,i._trigger("selecting",n,{selecting:t.element}))):(t.selecting&&((n.metaKey||n.ctrlKey)&&t.startselected?(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.$element.addClass("ui-selected"),t.selected=!0):(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.startselected&&(t.$element.addClass("ui-unselecting"),t.unselecting=!0),i._trigger("unselecting",n,{unselecting:t.element}))),t.selected&&(n.metaKey||n.ctrlKey||t.startselected||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,l(".ui-unselecting",this.element[0]).each(function(){var t=l.data(this,"selectable-item");t.$element.removeClass("ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),l(".ui-selecting",this.element[0]).each(function(){var t=l.data(this,"selectable-item");t.$element.removeClass("ui-selecting").addClass("ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position","./menu"],t):t(jQuery)}(function(o){return o.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=o("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=o("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),o("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=o("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var i=this;this.menu=o("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=o("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(t,e){t.preventDefault(),i._setSelection(),i._select(e.item.data("ui-selectmenu-item"),t)},focus:function(t,e){var n=e.item.data("ui-selectmenu-item");null!=i.focusIndex&&n.index!==i.focusIndex&&(i._trigger("focus",t,{item:n}),i.isOpen||i._select(n,t)),i.focusIndex=n.index,i.button.attr("aria-activedescendant",i.menuItems.eq(n.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var t,e=this.element.find("option");e.length&&(this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t))},_position:function(){this.menuWrap.position(o.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(n,t){var i=this,r="";o.each(t,function(t,e){e.optgroup!==r&&(o("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(e.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:e.optgroup}).appendTo(n),r=e.optgroup),i._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(t,e){var n=o("<li>");return e.disabled&&n.addClass("ui-state-disabled"),this._setText(n,e.label),n.appendTo(t)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,i,r=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex):(n=this.menuItems.eq(this.element[0].selectedIndex),r+=":not(.ui-state-disabled)"),(i="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](r).eq(-1):n[t+"All"](r).eq(0)).length&&this.menuInstance.focus(e,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(o(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(t){var e=!0;switch(t.keyCode){case o.ui.keyCode.TAB:case o.ui.keyCode.ESCAPE:this.close(t),e=!1;break;case o.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case o.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case o.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case o.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case o.ui.keyCode.LEFT:this._move("prev",t);break;case o.ui.keyCode.RIGHT:this._move("next",t);break;case o.ui.keyCode.HOME:case o.ui.keyCode.PAGE_UP:this._move("first",t);break;case o.ui.keyCode.END:case o.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),e=!1}e&&t.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex);e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this._setText(this.buttonText,t.label),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==n&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){"icons"===t&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(e.button),this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"disabled"===t&&(this.menuInstance.option("disabled",e),this.button.toggleClass("ui-state-disabled",e).attr("aria-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===t&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?o(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;t||(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var r=[];t.each(function(t,e){var n=o(e),i=n.parent("optgroup");r.push({element:n,index:t,value:n.val(),label:n.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||n.prop("disabled")})}),this.items=r},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(c){return c.widget("ui.slider",c.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,n=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(e=n.values&&n.values.length||1,i.length>e&&(i.slice(e).remove(),i=i.slice(0,e)),t=i.length;t<e;t++)o.push(r);this.handles=i.add(c(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){c(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,e="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:c.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=c("<div></div>").appendTo(this.element),e="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(e+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var e,n,i,r,o,s,a,u=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(n-u.values(t));(e<i||i===e&&(t===u._lastChangedValue||u.values(t)===l.min))&&(i=e,r=c(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),s=r.offset(),a=!c(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:t.pageX-s.left-r.width()/2,top:t.pageY-s.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,o;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),1<(i=n/e)&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i<n||1===e&&n<i)&&(n=i),n!==this.values(e)&&((r=this.values())[e]=n,o=this._trigger("slide",t,{handle:this.handles[e],value:n,values:r}),i=this.values(e?0:1),!1!==o&&this.values(e,n))):n!==this.value()&&!1!==(o=this._trigger("slide",t,{handle:this.handles[e],value:n}))&&this.value(n)},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var n,i,r;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!c.isArray(t))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,i=t,r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(i[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,e){var n,i=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),c.isArray(this.options.values)&&(i=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e),this._super(t,e),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===e?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<i;n+=1)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=0<n?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;t=Math.floor(+(t-e).toFixed(this._precision())/n)*n+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,n,t,i,r,o=this.options.range,s=this.options,a=this,u=!this._animateOff&&s.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(t){n=(a.values(t)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l["horizontal"===a.orientation?"left":"bottom"]=n+"%",c(this).stop(1,1)[u?"animate":"css"](l,s.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===t&&a.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},s.animate),1===t&&a.range[u?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===t&&a.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},s.animate),1===t&&a.range[u?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(t=this.value(),i=this._valueMin(),r=this._valueMax(),n=r!==i?(t-i)/(r-i)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](l,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var e,n,i,r=c(t.target).data("ui-slider-handle-index");switch(t.keyCode){case c.ui.keyCode.HOME:case c.ui.keyCode.END:case c.ui.keyCode.PAGE_UP:case c.ui.keyCode.PAGE_DOWN:case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,c(t.target).addClass("ui-state-active"),!1===this._start(t,r)))return}switch(i=this.options.step,e=n=this.options.values&&this.options.values.length?this.values(r):this.value(),t.keyCode){case c.ui.keyCode.HOME:n=this._valueMin();break;case c.ui.keyCode.END:n=this._valueMax();break;case c.ui.keyCode.PAGE_UP:n=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case c.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);break;case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:if(e===this._valueMax())return;n=this._trimAlignValue(e+i);break;case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(e===this._valueMin())return;n=this._trimAlignValue(e-i)}this._slide(t,r,n)},keyup:function(t){var e=c(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),c(t.target).removeClass("ui-state-active"))}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],t):t(jQuery)}(function(f){return f.widget("ui.sortable",f.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return e<=t&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),f.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,e){var n=null,i=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),f(t.target).parents().each(function(){if(f.data(this,r.widgetName+"-item")===r)return n=f(this),!1}),f.data(t.target,r.widgetName+"-item")===r&&(n=f(t.target)),!!n&&(!(this.options.handle&&!e&&(f(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,r,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=f("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return f.ui.ddmanager&&(f.ui.ddmanager.current=this),f.ui.ddmanager&&!o.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,r,o=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==s&&f.ui.ddmanager&&!o.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===i||f.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&f.contains(this.element[0],i))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),f.ui.ddmanager&&f.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,t),this.options.revert){var n=this,
i=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,f(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},f(t).each(function(){var t=(f(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(f(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,u=a+t.height,l=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||a<i+l&&i+l<u,h="y"===this.options.axis||o<e+c&&e+c<s,f=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<u},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=e&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!i&&(this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){function e(){s.push(this)}var n,i,r,o,s=[],a=[],u=this._connectWith();if(u&&t)for(n=u.length-1;0<=n;n--)for(i=(r=f(u[n],this.document[0])).length-1;0<=i;i--)(o=f.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&a.push([f.isFunction(o.options.items)?o.options.items.call(o.element):f(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;0<=n;n--)a[n][0].each(e);return f(s)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=f.grep(this.items,function(t){for(var e=0;e<n.length;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,r,o,s,a,u,l=this.items,c=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):f(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(e=d.length-1;0<=e;e--)for(n=(i=f(d[e],this.document[0])).length-1;0<=n;n--)(r=f.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(c.push([f.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):f(r.options.items,r.element),r]),this.containers.push(r));for(e=c.length-1;0<=e;e--)for(o=c[e][1],n=0,u=(s=c[e][0]).length;n<u;n++)(a=f(s[n])).data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?f(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),r=i.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)r=this.containers[e].element.offset(),this.containers[e].containerCache.left=r.left,this.containers[e].containerCache.top=r.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,r=(n=n||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,r.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=f("<"+t+">",n.document[0]).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===t?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),f("<tr>",n.document[0]).appendTo(e)):"tr"===t?n._createTrPlaceholder(n.currentItem,e):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){i&&!r.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=f(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(t,e){var n=this;t.children().each(function(){f("<td>&#160;</td>",n.document[0]).attr("colspan",f(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,n,i,r,o,s,a,u,l,c,d=null,h=null;for(e=this.containers.length-1;0<=e;e--)if(!f.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(d&&f.contains(this.containers[e].element[0],d.element[0]))continue;d=this.containers[e],h=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(i=1e4,r=null,o=(l=d.floating||this._isFloating(this.currentItem))?"left":"top",s=l?"width":"height",c=l?"clientX":"clientY",n=this.items.length-1;0<=n;n--)f.contains(this.containers[h].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(a=this.items[n].item.offset()[o],u=!1,t[c]-a>this.items[n][s]/2&&(u=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),r=this.items[n],this.direction=u?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=f.isFunction(e.helper)?f(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||f("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!e.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!e.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),f.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&f.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&f.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=f(i.containment)[0],e=f(i.containment).offset(),n="hidden"!==f(t).css("overflow"),this.containment=[e.left+(parseInt(f(t).css("borderLeftWidth"),10)||0)+(parseInt(f(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(f(t).css("borderTopWidth"),10)||0)+(parseInt(f(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(f(t).css("borderLeftWidth"),10)||0)-(parseInt(f(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(f(t).css("borderTopWidth"),10)||0)-(parseInt(f(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,r=t.pageX,o=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(e,n,i){return function(t){i._trigger(e,t,n._uiHash(n))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;0<=i;i--)e||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===f.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||f([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button"],t):t(jQuery)}(function(o){function e(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}return o.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var i={},r=this.element;return o.each(["min","max","step"],function(t,e){var n=r.attr(e);n!==undefined&&n.length&&(i[e]=n)}),i},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){function e(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),e.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,e.call(this)}),!1!==this._start(t)&&this._repeat(null,o(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(o(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,o(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&0<t.height()&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(t){var e=this.options,n=o.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,e.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?o.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return n=t-(e=null!==i.min?i.min:0),t=e+(n=Math.round(n/i.step)*i.step),t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var n=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(n))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable"))},_setOptions:e(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var n;""!==t&&null!==(n=this._parse(t))&&(e||(n=this._adjustValue(n)),t=this._format(n)),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());e(this._value).call(this,t)},widget:function(){return this.uiSpinner}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],t):t(jQuery)}(function(l){return l.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(r=/#.*$/,function(t){var e,n;e=(t=t.cloneNode(!1)).href.replace(r,""),n=location.href.replace(r,"");try{e=decodeURIComponent(e)}catch(i){}try{n=decodeURIComponent(n)}catch(i){}return 1<t.hash.length&&e===n}),_create:function(){var e=this,t=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",t.collapsible),this._processTabs(),t.active=this._initialActive(),l.isArray(t.disabled)&&(t.disabled=l.unique(t.disabled.concat(l.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(t.active):this.active=l(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var n=this.options.active,t=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(t,e){if(l(e).attr("aria-controls")===i)return n=t,!1}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&-1!==n||(n=!!this.tabs.length&&0)),!1!==n&&-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!t&&0),!t&&!1===n&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):l()}},_tabKeydown:function(t){var e=l(this.document[0].activeElement).closest("li"),n=this.tabs.index(e),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case l.ui.keyCode.RIGHT:case l.ui.keyCode.DOWN:n++;break;case l.ui.keyCode.UP:case l.ui.keyCode.LEFT:i=!1,n--;break;case l.ui.keyCode.END:n=this.anchors.length-1;break;case l.ui.keyCode.HOME:n=0;break;case l.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case l.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,i),t.ctrlKey||t.metaKey||(e.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===l.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===l.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===l.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){function n(){return i<t&&(t=0),t<0&&(t=i),t}for(var i=this.tabs.length-1;-1!==l.inArray(n(),this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){"active"!==t?"disabled"!==t?(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._setupDisabled(e):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=l.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!l.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=l()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=l()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var u=this,t=this.tabs,e=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){l(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){l(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return l("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=l(),this.anchors.each(function(t,e){var n,i,r,o=l(e).uniqueId().attr("id"),s=l(e).closest("li"),a=s.attr("aria-controls");u._isLocal(e)?(r=(n=e.hash).substring(1),i=u.element.find(u._sanitizeSelector(n))):(n="#"+(r=s.attr("aria-controls")||l({}).uniqueId()[0].id),(i=u.element.find(n)).length||(i=u._createPanel(r)).insertAfter(u.panels[t-1]||u.tablist),i.attr("aria-live","polite")),i.length&&(u.panels=u.panels.add(i)),a&&s.data("ui-tabs-aria-controls",a),s.attr({"aria-controls":r,"aria-labelledby":o}),i.attr("aria-labelledby",o)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),t&&(this._off(t.not(this.tabs)),this._off(e.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return l("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){l.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var e,n=0;e=this.tabs[n];n++)!0===t||-1!==l.inArray(n,t)?l(e).addClass("ui-state-disabled").attr("aria-disabled","true"):l(e).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&l.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,e=this.element.parent();"fill"===t?(n=e.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=l(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=l(this).outerHeight(!0)}),this.panels.each(function(){l(this).height(Math.max(0,n-l(this).innerHeight()+l(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,l(this).height("").height())}).height(n))},_eventHandler:function(t){var e=this.options,n=this.active,i=l(t.currentTarget).closest("li"),r=i[0]===n[0],o=r&&e.collapsible,s=o?l():this._getPanelForTab(i),a=n.length?this._getPanelForTab(n):l(),u={oldTab:n,oldPanel:a,newTab:o?l():i,newPanel:s};t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading"
)||this.running||r&&!e.collapsible||!1===this._trigger("beforeActivate",t,u)||(e.active=!o&&this.tabs.index(i),this.active=r?l():i,this.xhr&&this.xhr.abort(),a.length||s.length||l.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(i),t),this._toggle(t,u))},_toggle:function(t,e){function n(){r.running=!1,r._trigger("activate",t,e)}function i(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&r.options.show?r._show(o,r.options.show,n):(o.show(),n())}var r=this,o=e.newPanel,s=e.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),i()),s.attr("aria-hidden","true"),e.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&s.length?e.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===l(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),e.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var e,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),e=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:l.noop}))},_findActive:function(t){return!1===t?l():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){l.data(this,"ui-tabs-destroy")?l(this).remove():l(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=l(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var t=this.options.disabled;!1!==t&&(n===undefined?t=!1:(n=this._getIndex(n),t=l.isArray(t)?l.map(t,function(t){return t!==n?t:null}):l.map(this.tabs,function(t,e){return e!==n?e:null})),this._setupDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(t===undefined)e=!0;else{if(t=this._getIndex(t),-1!==l.inArray(t,e))return;e=l.isArray(e)?l.merge([t],e).sort():[t]}this._setupDisabled(e)}},load:function(t,i){t=this._getIndex(t);var r=this,n=this.tabs.eq(t),e=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),s={tab:n,panel:o},a=function(t,e){"abort"===e&&r.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),t===r.xhr&&delete r.xhr};this._isLocal(e[0])||(this.xhr=l.ajax(this._ajaxSettings(e,i,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(t,e,n){setTimeout(function(){o.html(t),r._trigger("load",i,s),a(n,e)},1)}).fail(function(t,e){setTimeout(function(){a(t,e)},1)})))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href"),beforeSend:function(t,e){return r._trigger("beforeLoad",n,l.extend({jqXHR:t,ajaxSettings:e},i))}}},_getPanelForTab:function(t){var e=l(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}});var r}),function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./position"],t):t(jQuery)}(function(l){return l.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=l(this).attr("title")||"";return l("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,e){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(e),t.data("ui-tooltip-id",e).attr("aria-describedby",l.trim(n.join(" ")))},_removeDescribedBy:function(t){var e=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),i=l.inArray(e,n);-1!==i&&n.splice(i,1),t.removeData("ui-tooltip-id"),(n=l.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=l("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,e){var n=this;if("disabled"===t)return this[e?"_disable":"_enable"](),void(this.options[t]=e);this._super(t,e),"content"===t&&l.each(this.tooltips,function(t,e){n._updateContent(e.element)})},_disable:function(){var i=this;l.each(this.tooltips,function(t,e){var n=l.Event("blur");n.target=n.currentTarget=e.element[0],i.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=l(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=l(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,e=l(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=l(this);e.data("ui-tooltip-open")&&((t=l.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),e.attr("title")&&(e.uniqueId(),n.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._registerCloseHandlers(t,e),this._updateContent(e,t))},_updateContent:function(e,n){var t,i=this.options.content,r=this,o=n?n.type:null;if("string"==typeof i)return this._open(n,e,i);(t=i.call(e[0],function(t){r._delay(function(){e.data("ui-tooltip-open")&&(n&&(n.type=o),this._open(n,e,t))})}))&&this._open(n,e,t)},_open:function(t,e,n){function i(t){u.of=t,o.is(":hidden")||o.position(u)}var r,o,s,a,u=l.extend({},this.options.position);n&&((r=this._find(e))?r.tooltip.find(".ui-tooltip-content").html(n):(e.is("[title]")&&(t&&"mouseover"===t.type?e.attr("title",""):e.removeAttr("title")),r=this._tooltip(e),o=r.tooltip,this._addDescribedBy(e,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.liveRegion.children().hide(),n.clone?(a=n.clone()).removeAttr("id").find("[id]").removeAttr("id"):a=n,l("<div>").html(a).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:i}),i(t)):o.position(l.extend({of:e},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){o.is(":visible")&&(i(u.of),clearInterval(s))},l.fx.interval)),this._trigger("open",t,{tooltip:o})))},_registerCloseHandlers:function(t,n){var e={keyup:function(t){if(t.keyCode===l.ui.keyCode.ESCAPE){var e=l.Event(t);e.currentTarget=n[0],this.close(e,!0)}}};n[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(e.mouseleave="close"),t&&"focusin"!==t.type||(e.focusout="close"),this._on(!0,n,e)},close:function(t){var e,n=this,i=l(t?t.currentTarget:this.element),r=this._find(i);r?(e=r.tooltip,r.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),r.hiding=!0,e.stop(!0),this._hide(e,this.options.hide,function(){n._removeTooltip(l(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&l.each(this.parents,function(t,e){l(e.element).attr("title",e.title),delete n.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:e}),r.hiding||(r.closing=!1))):i.removeData("ui-tooltip-open")},_tooltip:function(t){var e=l("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),n=e.uniqueId().attr("id");return l("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[n]={element:t,tooltip:e}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var r=this;l.each(this.tooltips,function(t,e){var n=l.Event("blur"),i=e.element;n.target=n.currentTarget=i[0],r.close(n,!0),l("#"+t).remove(),i.data("ui-tooltip-title")&&(i.attr("title")||i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),function(d,h){var f;d.rails!==h&&d.error("jquery-ujs has already been loaded!"),d.rails=f={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var e=d('meta[name="csrf-token"]').attr("content");e&&t.setRequestHeader("X-CSRF-Token",e)},fire:function(t,e,n){var i=d.Event(e);return t.trigger(i,n),!1!==i.result},confirm:function(t){return confirm(t)},ajax:function(t){return d.ajax(t)},href:function(t){return t.attr("href")},handleRemote:function(i){var t,e,n,r,o,s,a,u;if(f.fire(i,"ajax:before")){if(o=(r=i.data("cross-domain"))===h?null:r,s=i.data("with-credentials")||null,a=i.data("type")||d.ajaxSettings&&d.ajaxSettings.dataType,i.is("form")){t=i.attr("method"),e=i.attr("action"),n=i.serializeArray();var l=i.data("ujs:submit-button");l&&(n.push(l),i.data("ujs:submit-button",null))}else i.is(f.inputChangeSelector)?(t=i.data("method"),e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(f.buttonClickSelector)?(t=i.data("method")||"get",e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(t=i.data("method"),e=f.href(i),n=i.data("params")||null);u={type:t||"GET",data:n,dataType:a,beforeSend:function(t,e){return e.dataType===h&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),f.fire(i,"ajax:beforeSend",[t,e])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:o},s&&(u.xhrFields={withCredentials:s}),e&&(u.url=e);var c=f.ajax(u);return i.trigger("ajax:send",c),c}return!1},handleMethod:function(t){var e=f.href(t),n=t.data("method"),i=t.attr("target"),r=d("meta[name=csrf-token]").attr("content"),o=d("meta[name=csrf-param]").attr("content"),s=d('<form method="post" action="'+e+'"></form>'),a='<input name="_method" value="'+n+'" type="hidden" />';o!==h&&r!==h&&(a+='<input name="'+o+'" value="'+r+'" type="hidden" />'),i&&s.attr("target",i),s.hide().append(a).appendTo("body"),s.submit()},disableFormElements:function(t){t.find(f.disableSelector).each(function(){var t=d(this),e=t.is("button")?"html":"val";t.data("ujs:enable-with",t[e]()),t[e](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(f.enableSelector).each(function(){var t=d(this),e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),i=!1;return!n||(f.fire(t,"confirm")&&(i=f.confirm(n),e=f.fire(t,"confirm:complete",[i])),i&&e)},blankInputs:function(t,e,n){var i,r=d(),o=e||"input,textarea",s=t.find(o);return s.each(function(){if(i=d(this),!(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val())==!n){if(i.is("input[type=radio]")&&s.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;r=r.add(i)}}),!!r.length&&r},nonBlankInputs:function(t,e){return f.blankInputs(t,e,!0)},stopEverything:function(t){return d(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return f.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==h&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},f.fire(d(document),"rails:attachBindings")&&(d.ajaxPrefilter(function(t,e,n){t.crossDomain||f.CSRFProtection(n)}),d(document).delegate(f.linkDisableSelector,"ajax:complete",function(){f.enableElement(d(this))}),d(document).delegate(f.linkClickSelector,"click.rails",function(t){var e=d(this),n=e.data("method"),i=e.data("params");if(!f.allowAction(e))return f.stopEverything(t);if(e.is(f.linkDisableSelector)&&f.disableElement(e),e.data("remote")===h)return e.data("method")?(f.handleMethod(e),!1):void 0;if((t.metaKey||t.ctrlKey)&&(!n||"GET"===n)&&!i)return!0;var r=f.handleRemote(e);return!1===r?f.enableElement(e):r.error(function(){f.enableElement(e)}),!1}),d(document).delegate(f.buttonClickSelector,"click.rails",function(t){var e=d(this);return f.allowAction(e)?(f.handleRemote(e),!1):f.stopEverything(t)}),d(document).delegate(f.inputChangeSelector,"change.rails",function(t){var e=d(this);return f.allowAction(e)?(f.handleRemote(e),!1):f.stopEverything(t)}),d(document).delegate(f.formSubmitSelector,"submit.rails",function(t){var e=d(this),n=e.data("remote")!==h,i=f.blankInputs(e,f.requiredInputSelector),r=f.nonBlankInputs(e,f.fileInputSelector);if(!f.allowAction(e))return f.stopEverything(t);if(i&&e.attr("novalidate")==h&&f.fire(e,"ajax:aborted:required",[i]))return f.stopEverything(t);if(n){if(r){setTimeout(function(){f.disableFormElements(e)},13);var o=f.fire(e,"ajax:aborted:file",[r]);return o||setTimeout(function(){f.enableFormElements(e)},13),o}return f.handleRemote(e),!1}setTimeout(function(){f.disableFormElements(e)},13)}),d(document).delegate(f.formInputClickSelector,"click.rails",function(t){var e=d(this);if(!f.allowAction(e))return f.stopEverything(t);var n=e.attr("name"),i=n?{name:n,value:e.val()}:null;e.closest("form").data("ujs:submit-button",i)}),d(document).delegate(f.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&f.disableFormElements(d(this))}),d(document).delegate(f.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&f.enableFormElements(d(this))}),d(function(){var t=d("meta[name=csrf-token]").attr("content"),e=d("meta[name=csrf-param]").attr("content");d('form input[name="'+e+'"]').val(t)}))}(jQuery),function(r){var e={initTree:function(t){var e=r.extend({},this.treegrid.defaults,t);return this.each(function(){var t=r(this);t.treegrid("setTreeContainer",r(this)),t.treegrid("setSettings",e),e.getRootNodes.apply(this,[r(this)]).treegrid("initNode",e)})},initNode:function(e){return this.each(function(){var t=r(this);t.treegrid("setTreeContainer",e.getTreeGridContainer.apply(this)),t.treegrid("getChildNodes").treegrid("initNode",e),t.treegrid("initExpander").treegrid("initIndent").treegrid("initEvents").treegrid("initState").treegrid("initSettingsEvents")})},initEvents:function(){var t=r(this);return t.on("change",function(){var t=r(this);t.treegrid("render"),t.treegrid("getSetting","saveState")&&t.treegrid("saveState")}),t.on("collapse",function(){var t=r(this);t.removeClass("treegrid-expanded"),t.addClass("treegrid-collapsed")}),t.on("expand",function(){var t=r(this);t.removeClass("treegrid-collapsed"),t.addClass("treegrid-expanded")}),t},initSettingsEvents:function(){var t=r(this);return t.on("change",function(){var t=r(this);"function"==typeof t.treegrid("getSetting","onChange")&&t.treegrid("getSetting","onChange").apply(t)}),t.on("collapse",function(){var t=r(this);"function"==typeof t.treegrid("getSetting","onCollapse")&&t.treegrid("getSetting","onCollapse").apply(t)}),t.on("expand",function(){var t=r(this);"function"==typeof t.treegrid("getSetting","onExpand")&&t.treegrid("getSetting","onExpand").apply(t)}),t},initExpander:function(){var t=r(this),e=t.find("td").get(t.treegrid("getSetting","treeColumn")),n=t.treegrid("getSetting","expanderTemplate"),i=t.treegrid("getSetting","getExpander").apply(this);return i&&i.remove(),r(n).prependTo(e).click(function(){r(r(this).closest("tr")).treegrid("toggle")}),t},initIndent:function(){var t=r(this);t.find(".treegrid-indent").remove();for(var e=0;e<r(this).treegrid("getDepth");e++)r(t.treegrid("getSetting","indentTemplate")).insertBefore(t.find(".treegrid-expander"));return t},initState:function(){var t=r(this);return t.treegrid("getSetting","saveState")&&!t.treegrid("isFirstInit")?t.treegrid("restoreState"):"expanded"===t.treegrid("getSetting","initialState")?t.treegrid("expand"):t.treegrid("collapse"),t},isFirstInit:function(){var t=r(this).treegrid("getTreeContainer");return t.data("first_init")===undefined&&t.data("first_init",r.cookie(t.treegrid("getSetting","saveStateName"))===undefined),t.data("first_init")},saveState:function(){var t=r(this);if("cookie"===t.treegrid("getSetting","saveStateMethod")){var e=r.cookie(t.treegrid("getSetting","saveStateName"))||"",n=""===e?[]:e.split(","),i=t.treegrid("getNodeId");t.treegrid("isExpanded")?-1===r.inArray(i,n)&&n.push(i):t.treegrid("isCollapsed")&&-1!==r.inArray(i,n)&&n.splice(r.inArray(i,n),1),r.cookie(t.treegrid("getSetting","saveStateName"),n.join(","))}return t},restoreState:function(){var t=r(this);if("cookie"===t.treegrid("getSetting","saveStateMethod")){var e=r.cookie(t.treegrid("getSetting","saveStateName")).split(",");-1!==r.inArray(t.treegrid("getNodeId"),e)?t.treegrid("expand"):t.treegrid("collapse")}return t},getSetting:function(t){return r(this).treegrid("getTreeContainer")?r(this).treegrid("getTreeContainer").data("settings")[t]:null},setSettings:function(t){r(this).treegrid("getTreeContainer").data("settings",t)},getTreeContainer:function(){return r(this).data("treegrid")},setTreeContainer:function(t){return r(this).data("treegrid",t)},getRootNodes:function(){return r(this).treegrid("getSetting","getRootNodes").apply(this,[r(this).treegrid("getTreeContainer")])},getAllNodes:function(){return r(this).treegrid("getSetting","getAllNodes").apply(this,[r(this).treegrid("getTreeContainer")])},isNode:function(){return null!==r(this).treegrid("getNodeId")},getNodeId:function(){return null===r(this).treegrid("getSetting","getNodeId")?null:r(this).treegrid("getSetting","getNodeId").apply(this)},getParentNodeId:function(){return r(this).treegrid("getSetting","getParentNodeId").apply(this)},getParentNode:function(){return null===r(this).treegrid("getParentNodeId")?null:r(this).treegrid("getSetting","getNodeById").apply(this,[r(this).treegrid("getParentNodeId"),r(this).treegrid("getTreeContainer")])},getChildNodes:function(){return r(this).treegrid("getSetting","getChildNodes").apply(this,[r(this).treegrid("getNodeId"),r(this).treegrid("getTreeContainer")])},getDepth:function(){return null===r(this).treegrid("getParentNode")?0:r(this).treegrid("getParentNode").treegrid("getDepth")+1},isRoot:function(){return 0===r(this).treegrid("getDepth")},isLeaf:function(){return 0===r(this).treegrid("getChildNodes").length},isLast:function(){if(r(this).treegrid("isNode")){var t=r(this).treegrid("getParentNode");if(null===t){if(r(this).treegrid("getNodeId")===r(this).treegrid("getRootNodes").last().treegrid("getNodeId"))return!0}else if(r(this).treegrid("getNodeId")===t.treegrid("getChildNodes").last().treegrid("getNodeId"))return!0}return!1},isFirst:function(){if(r(this).treegrid("isNode")){var t=r(this).treegrid("getParentNode");if(null===t){if(r(this).treegrid("getNodeId")===r(this).treegrid("getRootNodes").first().treegrid("getNodeId"))return!0}else if(r(this).treegrid("getNodeId")===t.treegrid("getChildNodes").first().treegrid("getNodeId"))return!0}return!1},isExpanded:function(){return r(this).hasClass("treegrid-expanded")},isCollapsed:function(){return r(this).hasClass("treegrid-collapsed")},isOneOfParentsCollapsed:function(){var t=r(this);return!t.treegrid("isRoot")&&(!!t.treegrid("getParentNode").treegrid("isCollapsed")||t.treegrid("getParentNode").treegrid("isOneOfParentsCollapsed"))},expand:function(){return r(this).each(function(){var t=r(this);t.treegrid("isLeaf")||t.treegrid("isExpanded")||(t.trigger("expand"),t.trigger("change"))})},expandAll:function(){var t=r(this);return t.treegrid("getRootNodes").treegrid("expandRecursive"),t},expandRecursive:function(){return r(this).each(function(){var t=r(this);t.treegrid("expand"),t.treegrid("isLeaf")||t.treegrid("getChildNodes").treegrid("expandRecursive")})},collapse:function(){return r(this).each(function(){var t=r(this);t.treegrid("isLeaf")||t.treegrid("isCollapsed")||(t.trigger("collapse"),t.trigger("change"))})},collapseAll:function(){var t=r(this);return t.treegrid("getRootNodes").treegrid("collapseRecursive"),t},collapseRecursive:function(){return r(this).each(function(){var t=r(this);t.treegrid("collapse"),t.treegrid("isLeaf")||t.treegrid("getChildNodes").treegrid("collapseRecursive")})},toggle:function(){var t=r(this);return t.treegrid("isExpanded")?t.treegrid("collapse"):t.treegrid("expand"),t},render:function(){return r(this).each(function(){var t=r(this);t.treegrid("isOneOfParentsCollapsed")?t.hide():t.show(),t.treegrid("isLeaf")||(t.treegrid("renderExpander"),t.treegrid("getChildNodes").treegrid("render"))})},renderExpander:function(){return r(this).each(function(){var t=r(this),e=t.treegrid("getSetting","getExpander").apply(this);e?t.treegrid("isCollapsed")?(e.removeClass(t.treegrid("getSetting","expanderExpandedClass")),e.addClass(t.treegrid("getSetting","expanderCollapsedClass"))):(e.removeClass(t.treegrid("getSetting","expanderCollapsedClass")),e.addClass(t.treegrid("getSetting","expanderExpandedClass"))):(t.treegrid("initExpander"),t.treegrid("renderExpander"))})}};r.fn.treegrid=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void r.error("Method with name "+t+" does not exists for jQuery.treegrid"):e.initTree.apply(this,arguments)},r.fn.treegrid.defaults={initialState:"expanded",saveState:!1,saveStateMethod:"cookie",saveStateName:"tree-grid-state",expanderTemplate:'<span class="treegrid-expander"></span>',indentTemplate:'<span class="treegrid-indent"></span>',expanderExpandedClass:"treegrid-expander-expanded",expanderCollapsedClass:"treegrid-expander-collapsed",treeColumn:0,getExpander:function(){return r(this).find(".treegrid-expander")},getNodeId:function(){var t=/treegrid-([A-Za-z0-9_-]+)/;return t.test(r(this).attr("class"))?t.exec(r(this).attr("class"))[1]:null},getParentNodeId:function(){var t=/treegrid-parent-([A-Za-z0-9_-]+)/;return t.test(r(this).attr("class"))?t.exec(r(this).attr("class"))[1]:null},getNodeById:function(t,e){var n="treegrid-"+t;return e.find("tr."+n)},getChildNodes:function(t,e){var n="treegrid-parent-"+t;return e.find("tr."+n)},getTreeGridContainer:function(){return r(this).closest("table")},getRootNodes:function(t){var e=r.grep(t.find("tr"),function(t){var e=r(t).attr("class"),n=/treegrid-parent-([A-Za-z0-9_-]+)/;return/treegrid-([A-Za-z0-9_-]+)/.test(e)&&!n.test(e)});return r(e)},getAllNodes:function(t){var e=r.grep(t.find("tr"),function(t){var e=r(t).attr("class");return/treegrid-([A-Za-z0-9_-]+)/.test(e)});return r(e)},onCollapse:null,onExpand:null,onChange:null}}(jQuery),$.extend($.fn.treegrid.defaults,{expanderExpandedClass:"glyphicon glyphicon-chevron-down",expanderCollapsedClass:"glyphicon glyphicon-chevron-right"}),function(k){jQuery.fn.extend({slimScroll:function(x){var C=k.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},x);return this.each(function(){function e(t){if(a){var e=0;(t=t||window.event).wheelDelta&&(e=-t.wheelDelta/120),t.detail&&(e=t.detail/3),k(t.target||t.srcTarget||t.srcElement).closest("."+C.wrapperClass).is(v.parent())&&i(e,!0),t.preventDefault&&!g&&t.preventDefault(),g||(t.returnValue=!1)}}function i(t,e,n){g=!1;var i=t,r=v.outerHeight()-y.outerHeight();e&&(i=parseInt(y.css("top"))+t*parseInt(C.wheelStep)/100*y.outerHeight(),i=Math.min(Math.max(i,0),r),i=0<t?Math.ceil(i):Math.floor(i),y.css({top:i+"px"})),i=(f=parseInt(y.css("top"))/(v.outerHeight()-y.outerHeight()))*(v[0].scrollHeight-v.outerHeight()),n&&(t=(i=t)/v[0].scrollHeight*v.outerHeight(),t=Math.min(Math.max(t,0),r),y.css({top:t+"px"})),v.scrollTop(i),v.trigger("slimscrolling",~~i),o(),s()}function n(){window.addEventListener?(this.addEventListener("DOMMouseScroll",e,!1),this.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}function r(){h=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),m),y.css({height:h+"px"});var t=h==v.outerHeight()?"none":"block";y.css({display:t})}function o(){r(),clearTimeout(c),f==~~f?(g=C.allowPageScroll,p!=f&&v.trigger("slimscroll",0==~~f?"top":"bottom")):g=!1,p=f,h>=v.outerHeight()?g=!0:(y.stop(!0,!0).fadeIn("fast"),C.railVisible&&w.stop(!0,!0).fadeIn("fast"))}function s(){C.alwaysVisible||(c=setTimeout(function(){C.disableFadeOut&&a||u||l||(y.fadeOut("slow"),w.fadeOut("slow"))},1e3))}var a,u,l,c,d,h,f,p,m=30,g=!1,v=k(this);if(v.parent().hasClass(C.wrapperClass)){var b=v.scrollTop(),y=v.parent().find("."+C.barClass),w=v.parent().find("."+C.railClass);if(r(),k.isPlainObject(x)){if("height"in x&&"auto"==x.height){v.parent().css("height","auto"),v.css("height","auto");var _=v.parent().parent().height();v.parent().css("height",_),v.css("height",_)}if("scrollTo"in x)b=parseInt(C.scrollTo);else if("scrollBy"in x)b+=parseInt(C.scrollBy);else if("destroy"in x)return y.remove(),w.remove(),void v.unwrap();i(b,!1,!0)}}else{C.height="auto"==x.height?v.parent().height():x.height,b=k("<div></div>").addClass(C.wrapperClass).css({position:"relative",overflow:"hidden",width:C.width,height:C.height}),v.css({overflow:"hidden",width:C.width,height:C.height});w=k("<div></div>").addClass(C.railClass).css({width:C.size,height:"100%",position:"absolute",top:0,display:C.alwaysVisible&&C.railVisible?"block":"none","border-radius":C.railBorderRadius,background:C.railColor,opacity:C.railOpacity,zIndex:90}),y=k("<div></div>").addClass(C.barClass).css({background:C.color,width:C.size,position:"absolute",top:0,opacity:C.opacity,display:C.alwaysVisible?"block":"none","border-radius":C.borderRadius,BorderRadius:C.borderRadius,MozBorderRadius:C.borderRadius,WebkitBorderRadius:C.borderRadius,zIndex:99}),_="right"==C.position?{right:C.distance}:{left:C.distance};w.css(_),y.css(_),v.wrap(b),v.parent().append(y),v.parent().append(w),C.railDraggable&&y.bind("mousedown",function(e){var n=k(document);return l=!0,t=parseFloat(y.css("top")),pageY=e.pageY,n.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,y.css("top",currTop),i(0,y.position().top,!1)}),n.bind("mouseup.slimscroll",function(){l=!1,s(),n.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),w.hover(function(){o()},function(){s()}),y.hover(function(){u=!0},function(){u=!1}),v.hover(function(){a=!0,o(),s()},function(){a=!1,s()}),v.bind("touchstart",function(t){t.originalEvent.touches.length&&(d=t.originalEvent.touches[0].pageY)}),v.bind("touchmove",function(t){g||t.originalEvent.preventDefault(),t.originalEvent.touches.length&&(i((d-t.originalEvent.touches[0].pageY)/C.touchScrollStep,!0),d=t.originalEvent.touches[0].pageY)}),r(),"bottom"===C.start?(y.css({top:v.outerHeight()-y.outerHeight()}),i(0,!0)):"top"!==C.start&&(i(k(C.start).position().top,null,!0),C.alwaysVisible||y.hide()),n()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),function(o,l){function c(t){function u(t,e){var n;if(l!==t&&(t=parseFloat(t)),l===e)n=e=255;else if(1===e){if(l===t||1===t)return 1;e=100,n=1}else n=e;return isNaN(t)||t<=0?0:e<t?n:t<1||1===e?1===n?t:t*n|0:t*n/e}function r(t,e,n){function i(t,e,n){return 6*(n=++n%1)<1?t+6*(e-t)*n:2*n<1?e:3*n<2?t+(e-t)*(4-6*n):t}if(t=u(t,360)/360,e=u(e,1),n=u(n,1),0===e)return[n=Math.round(255*n),n,n];var r=n<.5?n+n*e:n+e-n*e,o=n+n-r;return[Math.round(255*i(o,r,t+1/3)),Math.round(255*i(o,r,t)),Math.round(255*i(o,r,t-1/3))]}function o(t,e,n){t=u(t,360)/60,e=u(e,1),n=u(n,1);var i=0|t,r=t-i,o=Math.round(255*n*(1-e)),s=Math.round(255*n*(1-e*r)),a=Math.round(255*n*(1-e*(1-r)));switch(n=Math.round(255*n),i){case 1:return[s,n,o];case 2:return[o,n,a];case 3:return[o,s,n];case 4:return[a,o,n];case 5:return[n,o,s]}return[n,a,o]}this.setColor=function(t){if(this.success=!0,"number"==typeof t)return this.a=(t>>24&255)/255,this.r=t>>16&255,this.g=t>>8&255,void(this.b=255&t);for(;"object"==typeof t;){if(0 in t&&1 in t&&2 in t)return this.a=u(t[3],1),this.r=u(t[0]),this.g=u(t[1]),void(this.b=u(t[2]));if("r"in t&&"g"in t&&"b"in t)return this.a=u(t.a,1),this.r=u(t.r),this.g=u(t.g),void(this.b=u(t.b));if("h"in t&&"s"in t){var e;if("l"in t)e=r(t.h,t.s,t.l);else if("v"in t)e=o(t.h,t.s,t.v);else{if(!("b"in t))break;e=o(t.h,t.s,t.b)}return this.a=u(t.a,1),this.r=e[0],this.g=e[1],void(this.b=e[2])}break}if("string"==typeof t){var n,i;if("transparent"===(t=t.toLowerCase().replace(/[^a-z0-9,.()#%]/g,"")))return void(this.a=this.r=this.g=this.b=0);if("rand"===t)return i=16777215*Math.random()|0,this.a=1,this.r=i>>16&255,this.g=i>>8&255,void(this.b=255&i);if(l!==a[t]&&(t="#"+a[t]),n=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/.exec(t))return this.a=1,this.r=parseInt(n[1],16),this.g=parseInt(n[2],16),void(this.b=parseInt(n[3],16));if(n=/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/.exec(t))return this.a=1,this.r=parseInt(n[1]+n[1],16),this.g=parseInt(n[2]+n[2],16),void(this.b=parseInt(n[3]+n[3],16));if(n=/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?\)$/.exec(t))return this.a=u(n[5],1),this.r=u(n[1]),this.g=u(n[2]),void(this.b=u(n[3]));if(n=/^rgba?\(([0-9.]+\%),([0-9.]+\%),([0-9.]+\%)(,([0-9.]+)\%?)?\)$/.exec(t))return this.a=u(n[5],1),this.r=Math.round(2.55*u(n[1],100)),this.g=Math.round(2.55*u(n[2],100)),void(this.b=Math.round(2.55*u(n[3],100)));if(n=/^hs([bvl])a?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?\)$/.exec(t))return i=("l"===n[1]?r:o)(parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10)),this.a=u(n[6],1),this.r=i[0],this.g=i[1],void(this.b=i[2]);if(n=/^(\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?$/.exec(t))return this.a=u(n[5],1),this.r=u(n[1]),this.g=u(n[2]),void(this.b=u(n[3]))}this.success=!1},this.getColor=function(t){if(l!==t)switch(t.toLowerCase()){case"rgb":return this.getRGB();case"hsv":case"hsb":return this.getHSV();case"hsl":return this.getHSL();case"int":return this.getInt();case"array":return this.getArray();case"fraction":return this.getFraction();case"css":case"style":return this.getCSS();case"name":return this.getName()}return this.getHex()},this.getRGB=function(){return this.success?{r:this.r,g:this.g,b:this.b,a:this.a}:null},this.getCSS=function(){return this.success?0===this.a?"transparent":1===this.a?"rgb("+this.r+","+this.g+","+this.b+")":v(this.r,this.g,this.b,this.a):null},this.getArray=function(){return this.success?[this.r,this.g,this.b,100*this.a|0]:null},this.getName=function(){if(this.success){var t,e=null,n=a,i=this.getHSL();for(var r in n){var o=new c(n[r]).getHSL(),s=Math.sqrt(.5*(i.h-o.h)*(i.h-o.h)+.5*(i.s-o.s)*(i.s-o.s)+(i.l-o.l)*(i.l-o.l));(null===e||s<e)&&(e=s,t=r)}return t}return null},this.getFraction=function(){return this.success?{
r:this.r/255,g:this.g/255,b:this.b/255,a:this.a}:null},this.getHSL=function(){if(this.success){var t,e,n=this.r/255,i=this.g/255,r=this.b/255,o=Math.min(n,i,r),s=Math.max(n,i,r),a=s-o,u=(s+o)/2;return 0===a?e=t=0:(t=n===s?(i-r)/a:i===s?2+(r-n)/a:4+(n-i)/a,e=a/(u<.5?s+o:2-s-o)),{h:Math.round((6+t)%6*60),s:Math.round(100*e),l:Math.round(100*u),a:this.a}}return null},this.getHSV=function(){if(this.success){var t,e,n=this.r/255,i=this.g/255,r=this.b/255,o=Math.min(n,i,r),s=Math.max(n,i,r),a=s-o,u=s;return e=0===s?0:a/s,t=0===a?0:n===s?(i-r)/a:i===s?2+(r-n)/a:4+(n-i)/a,{h:Math.round((6+t)%6*60),s:Math.round(100*e),v:Math.round(100*u),a:this.a}}return null},this.getHex=function(){if(this.success){var t="0123456789abcdef",e=this.r>>4,n=this.g>>4,i=this.b>>4,r=15&this.r,o=15&this.g,s=15&this.b;return"#"+t.charAt(e)+t.charAt(r)+t.charAt(n)+t.charAt(o)+t.charAt(i)+t.charAt(s)}return null},this.getInt=function(t){return this.success?l!==t?(100*this.a|0)<<24^this.r<<16^this.g<<8^this.b:16777215&(this.r<<16^this.g<<8^this.b):null},this.toString=function(){return this.getHex()},this.setColor(t)}function d(t,e){var n="";do{if(""!==(n=o.css(t,e))&&"transparent"!==n&&"rgba(0, 0, 0, 0)"!==n||o.nodeName(t,"body"))break}while(t=t.parentNode);return""===n&&(n=o.support.rgba?"transparent":"backgroundColor"===e?"white":"black"),new c(n)}function t(){this.test=function(t){var e=new c(t);return e.success?e:null},this.red=function(t){var e=new c(t);return e.success?(e.g=255,e.b=255,e):null},this.blue=function(t){var e=new c(t);return e.success?(e.r=255,e.g=255,e):null},this.green=function(t){var e=new c(t);return e.success?(e.r=255,e.b=255,e):null},this.sepia=function(t){var e=new c(t);if(e.success){var n=e.r,i=e.g,r=e.b;return e.r=Math.round(.393*n+.769*i+.189*r),e.g=Math.round(.349*n+.686*i+.168*r),e.b=Math.round(.272*n+.534*i+.131*r),e}return null},this.random=function(){return new c([255*Math.random()|0,255*Math.random()|0,255*Math.random()|0])},this.inverse=function(t){var e=new c(t);return e.success?(e.r^=255,e.g^=255,e.b^=255,e):null},this.opacity=function(t,e,n){var i=new c(t),r=new c(e);return i.success&r.success?(1<n&&(n/=100),n=Math.max(n-1+r.a,0),i.r=Math.round((r.r-i.r)*n+i.r),i.g=Math.round((r.g-i.g)*n+i.g),i.b=Math.round((r.b-i.b)*n+i.b),i):null},this.greyfilter=function(t,e){var n,i=new c(t);if(i.success){switch(e){case 1:n=.35+13*(i.r+i.g+i.b)/60;break;case 2:n=(13*(i.r+i.g+i.b)+5355)/60;break;default:n=.3*i.r+.59*i.g+.11*i.b}return i.r=i.g=i.b=Math.min(0|n,255),i}return null},this.webround=function(t){var e=new c(t);return e.success?(255<(e.r+=51-e.r%51)&&(e.r=255),255<(e.g+=51-e.g%51)&&(e.g=255),255<(e.b+=51-e.b%51)&&(e.b=255),e):null},this.distance=function(t,e){var n=new c(t),i=new c(e);return n.success&i.success?Math.sqrt(3*(i.r-n.r)*(i.r-n.r)+4*(i.g-n.g)*(i.g-n.g)+2*(i.b-n.b)*(i.b-n.b)):null},this.readable=function(t,e,n){var i=new c(e),r=new c(t);if(n=n||10,i.success&r.success){var o=.299*r.r+.587*r.g+.114*r.b-.299*i.r-.587*i.g-.114*i.b;return!(o<1.5+141.162*Math.pow(.975,n)&&o>-.5-154.709*Math.pow(.99,n))}return null},this.combine=function(t,e){var n=new c(t),i=new c(e);return n.success&i.success?(n.r^=i.r,n.g^=i.g,n.b^=i.b,n):null},this.breed=function(t,e){var n=new c(t),i=new c(e),r=0,o=6;if(n.success&i.success){for(;o--;)Math.random()<.5&&(r|=15<<(o<<2));return n.r=n.r&r>>16&255|i.r&(r>>16&255^255),n.g=n.g&r>>8&255|i.g&(r>>8&255^255),n.b=n.b&r>>0&255|i.b&(r>>0&255^255),n}return null},this.additive=function(t,e){var n=new c(t),i=new c(e);return n.success&i.success?(255<(n.r+=i.r)&&(n.r=255),255<(n.g+=i.g)&&(n.g=255),255<(n.b+=i.b)&&(n.b=255),n):null},this.subtractive=function(t,e){var n=new c(t),i=new c(e);return n.success&i.success?((n.r+=i.r-255)<0&&(n.r=0),(n.g+=i.g-255)<0&&(n.g=0),(n.b+=i.b-255)<0&&(n.b=0),n):null},this.subtract=function(t,e){var n=new c(t),i=new c(e);return n.success&i.success?((n.r-=i.r)<0&&(n.r=0),(n.g-=i.g)<0&&(n.g=0),(n.b-=i.b)<0&&(n.b=0),n):null},this.multiply=function(t,e){var n=new c(t),i=new c(e);return n.success&i.success?(n.r=n.r/255*i.r|0,n.g=n.g/255*i.g|0,n.b=n.b/255*i.b|0,n):null},this.average=function(t,e){var n=new c(t),i=new c(e);return n.success&i.success?(n.r=n.r+i.r>>1,n.g=n.g+i.g>>1,n.b=n.b+i.b>>1,n):null},this.triad=function(t){var e=new c(t);return e.success?[e,new c([e.b,e.r,e.g]),new c([e.g,e.b,e.r])]:null},this.tetrad=function(t){var e=new c(t);return e.success?[e,new c([e.b,e.r,e.b]),new c([e.b,e.g,e.r]),new c([e.r,e.b,e.r])]:null},this.gradientlevel=function(t,e,n,i){if(l===i&&(i=1),i<n)return null;var r=new c(t),o=new c(e);return r.success&o.success?(r.r=r.r+(o.r-r.r)/i*n|0,r.g=r.g+(o.g-r.g)/i*n|0,r.b=r.b+(o.b-r.b)/i*n|0,r):null},this.gradientarray=function(t,e,n){if(n<e||!t.length)return null;if(1==t.length)return new c(t[0]);var i=e*(t.length-1)/(n+1)|0,r=n/(t.length-1);return o.xcolor.gradientlevel(t[i],t[i+1],e-i*r,r)},this.nearestname=function(t){return(t=new c(t)).success?t.getName():null},this.darken=function(t,e,n){if(l===e)e=1;else if(e<0)return this.lighten(t,-e,n);l===n&&(n=32);var i=new c(t);return i.success?((i.r-=n*e)<0&&(i.r=0),(i.g-=n*e)<0&&(i.g=0),(i.b-=n*e)<0&&(i.b=0),i):null},this.lighten=function(t,e,n){if(l===e)e=1;else if(e<0)return this.darken(t,-e,n);l===n&&(n=32);var i=new c(t);return i.success?(255<(i.r+=n*e)&&(i.r=255),255<(i.g+=n*e)&&(i.g=255),255<(i.b+=n*e)&&(i.b=255),i):null},this.analogous=function(t,e,n){l===e&&(e=8),l===n&&(n=30);var i=new c(t);if(i.success){var r=i.getHSV(),o=360/n,s=[i];for(r.h=(r.h-(o*e>>1)+720)%360;--e;)r.h+=o,r.h%=360,s.push(new c(r));return s}return null},this.complementary=function(t){var e=new c(t);if(e.success){var n=e.getHSL();return n.h=(n.h+180)%360,new c(n)}return null},this.splitcomplement=function(t){var e=new c(t);if(e.success){var n=e.getHSV(),i=[e];return n.h+=72,n.h%=360,i.push(new c(n)),n.h+=144,n.h%=360,i.push(new c(n)),i}return null},this.monochromatic=function(t,e){l===e&&(e=6);var n=new c(t);if(n.success){for(var i=n.getHSV(),r=[n];--e;)i.v+=20,i.v%=100,r.push(new c(i));return r}return null}}var v,a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};o.each(["color","backgroundColor","borderColor","borderTopColor","borderBottomColor","borderLeftColor","borderRightColor","outlineColor"],function(t,u){o.cssHooks[u]={set:function(t,e){t.style[u]=new c(e).getCSS()}},o.fx.step[u]=function(t){if(l===t.xinit){if("string"==typeof t.end&&-1!==t.end.indexOf(";")){var e,n=t.end.split(";");if(2<n.length){for(e in n)-1===n[e].indexOf("native")?n[e]=new c(n[e]):n[e]=d(t.elem,u);t.start=null,t.end=n}else t.start=new c(n[0]),t.end=new c(n[1])}else t.start=d(t.elem,u),t.end=new c(t.end);t.xinit=1}var i=t.start,r=t.end,o=t.pos;if(null===i){var s=o*(r.length-1),a=o<1?0|s:r.length-2;i=r[a],r=r[a+1],o=s-a}t.elem.style[u]=v(i.r+o*(r.r-i.r)|0,i.g+o*(r.g-i.g)|0,i.b+o*(r.b-i.b)|0,i.a+o*(r.a-i.a))}}),o(function(){var t=document.createElement("div").style;v=function(t,e,n,i){return"rgba("+t+","+e+","+n+","+i+")"},t.cssText="background-color:rgba(1,1,1,.5)",(o.support.rgba=-1<t.backgroundColor.indexOf("rgba"))||(v=function(t,e,n){return"rgb("+t+","+e+","+n+")"})}),o.xcolor=new t,o.fn.readable=function(){var t=this[0],e="",n="";do{if(""!==e||"transparent"!==(e=o.css(t,"color"))&&"rgba(0, 0, 0, 0)"!==e||(e=""),""!==n||"transparent"!==(n=o.css(t,"backgroundColor"))&&"rgba(0, 0, 0, 0)"!==n||(n=""),""!==e&&""!==n||o.nodeName(t,"body"))break}while(t=t.parentNode);return""===e&&(e="black"),""===n&&(n="white"),o.xcolor.readable(n,e)},o.fn.colorize=function(p,m,g){var t={gradient:function(t,e){return t/e},flip:function(t,e,n,i){return" "===i?n:!n},pillow:function(t,e){return(t*=2)<=e?t/e:2-t/e}};if("function"==typeof g);else{if(void 0===t[g])return;g=t[g]}p=new c(p),m=new c(m),this.each(function(){var t=this.childNodes,d=0,h=0;if(p.success&m.success){for(var e=t.length;e--;d+=t[e].textContent.length);!function f(t){var e,n=0;if(3===t.nodeType){var i,r,o,s=p,a=m,u=d,l=0,c=g;for(e=t.nodeValue.length,r=document.createElement("span"),n=0;n<e;++n)i=document.createElement("span"),o=t.nodeValue.charAt(n),l=c(h,u,l,o),i.style.color=v(s.r+l*(a.r-s.r)|0,s.g+l*(a.g-s.g)|0,s.b+l*(a.b-s.b)|0,s.a+l*(a.a-s.a)),i.appendChild(document.createTextNode(o)),r.appendChild(i),++h;t.parentNode.replaceChild(r,t)}else for(e=t.childNodes.length;n<e;++n)f(t.childNodes[n])}(this)}})}}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");if(function(){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(),function(i){"use strict";function t(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(t.style[n]!==undefined)return{end:e[n]};return!1}i.fn.emulateTransitionEnd=function(t){var e=!1,n=this;return i(this).one("bsTransitionEnd",function(){e=!0}),setTimeout(function(){e||i(n).trigger(i.support.transition.end)},t),this},i(function(){i.support.transition=t(),i.support.transition&&(i.event.special.bsTransitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end,handle:function(t){if(i(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(o){"use strict";function t(n){return this.each(function(){var t=o(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new s(this)),"string"==typeof n&&e[n].call(t)})}var e='[data-dismiss="alert"]',s=function(t){o(t).on("click",e,this.close)};s.VERSION="3.3.2",s.TRANSITION_DURATION=150,s.prototype.close=function(t){function e(){r.detach().trigger("closed.bs.alert").remove()}var n=o(this),i=n.attr("data-target");i||(i=(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var r=o(i);t&&t.preventDefault(),r.length||(r=n.closest(".alert")),r.trigger(t=o.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),o.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(s.TRANSITION_DURATION):e())};var n=o.fn.alert;o.fn.alert=t,o.fn.alert.Constructor=s,o.fn.alert.noConflict=function(){return o.fn.alert=n,this},o(document).on("click.bs.alert.data-api",e,s.prototype.close)}(jQuery),function(o){"use strict";function n(i){return this.each(function(){var t=o(this),e=t.data("bs.button"),n="object"==typeof i&&i;e||t.data("bs.button",e=new r(this,n)),"toggle"==i?e.toggle():i&&e.setState(i)})}var r=function(t,e){this.$element=o(t),this.options=o.extend({},r.DEFAULTS,e),this.isLoading=!1};r.VERSION="3.3.2",r.DEFAULTS={loadingText:"loading..."},r.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.is("input")?"val":"html",r=n.data();t+="Text",null==r.resetText&&n.data("resetText",n[i]()),setTimeout(o.proxy(function(){n[i](null==r[t]?this.options[t]:r[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(e).attr(e,e)):this.isLoading&&(this.isLoading=!1,n.removeClass(e).removeAttr(e))},this),0)},r.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var t=o.fn.button;o.fn.button=n,o.fn.button.Constructor=r,o.fn.button.noConflict=function(){return o.fn.button=t,this},o(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=o(t.target);e.hasClass("btn")||(e=e.closest(".btn")),n.call(e,"toggle"),t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){o(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(d){"use strict";function s(r){return this.each(function(){var t=d(this),e=t.data("bs.carousel"),n=d.extend({},h.DEFAULTS,t.data(),"object"==typeof r&&r),i="string"==typeof r?r:n.slide;e||t.data("bs.carousel",e=new h(this,n)),"number"==typeof r?e.to(r):i?e[i]():n.interval&&e.pause().cycle()})}var h=function(t,e){this.$element=d(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",d.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",d.proxy(this.pause,this)).on("mouseleave.bs.carousel",d.proxy(this.cycle,this))};h.VERSION="3.3.2",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},h.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},h.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},h.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(n<t?"next":"prev",this.$items.eq(t))},h.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(t,e){var n=this.$element.find(".item.active"),i=e||this.getItemForDirection(t,n),r=this.interval,o="next"==t?"left":"right",s=this;if(i.hasClass("active"))return this.sliding=!1;var a=i[0],u=d.Event("slide.bs.carousel",{relatedTarget:a,direction:o});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=d(this.$indicators.children()[this.getItemIndex(i)]);l&&l.addClass("active")}var c=d.Event("slid.bs.carousel",{relatedTarget:a,direction:o});return d.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,n.addClass(o),i.addClass(o),n.one("bsTransitionEnd",function(){i.removeClass([t,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(c)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(n.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(c)),r&&this.cycle(),this}};var t=d.fn.carousel;d.fn.carousel=s,d.fn.carousel.Constructor=h,d.fn.carousel.noConflict=function(){return d.fn.carousel=t,this};var e=function(t){var e,n=d(this),i=d(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var r=d.extend({},i.data(),n.data()),o=n.attr("data-slide-to");o&&(r.interval=!1),s.call(i,r),o&&i.data("bs.carousel").to(o),t.preventDefault()}};d(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var t=d(this);s.call(t,t.data())})})}(jQuery),function(s){"use strict";function r(t){var e,n=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return s(n)}function a(i){return this.each(function(){var t=s(this),e=t.data("bs.collapse"),n=s.extend({},u.DEFAULTS,t.data(),"object"==typeof i&&i);!e&&n.toggle&&"show"==i&&(n.toggle=!1),e||t.data("bs.collapse",e=new u(this,n)),"string"==typeof i&&e[i]()})}var u=function(t,e){this.$element=s(t),this.options=s.extend({},u.DEFAULTS,e),this.$trigger=s(this.options.trigger).filter('[href="#'+t.id+'"], [data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};u.VERSION="3.3.2",u.TRANSITION_DURATION=350,u.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},u.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},u.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(t=e.data("bs.collapse"))&&t.transitioning)){var n=s.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){e&&e.length&&(a.call(e,"hide"),t||e.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!s.support.transition)return r.call(this);var o=s.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",s.proxy(r,this)).emulateTransitionEnd(u.TRANSITION_DURATION)[i](this.$element[0][o])}}}},u.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=s.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!s.support.transition)return n.call(this);this.$element[e](0).one("bsTransitionEnd",s.proxy(n,this)).emulateTransitionEnd(u.TRANSITION_DURATION)}}},u.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},u.prototype.getParent=function(){return s(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(s.proxy(function(t,e){var n=s(e);this.addAriaAndCollapsedClass(r(n),n)},this)).end()},u.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var t=s.fn.collapse;s.fn.collapse=a,s.fn.collapse.Constructor=u,s.fn.collapse.noConflict=function(){return s.fn.collapse=t,this},s(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=s(this);e.attr("data-target")||t.preventDefault();var n=r(e),i=n.data("bs.collapse")?"toggle":s.extend({},e.data(),{trigger:this});a.call(n,i)})}(jQuery),function(a){"use strict";function o(i){i&&3===i.which||(a(e).remove(),a(l).each(function(){var t=a(this),e=u(t),n={relatedTarget:this};e.hasClass("open")&&(e.trigger(i=a.Event("hide.bs.dropdown",n)),i.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",n)))}))}function u(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&a(e);return n&&n.length?n:t.parent()}function t(n){return this.each(function(){var t=a(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})}var e=".dropdown-backdrop",l='[data-toggle="dropdown"]',i=function(t){a(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.2",i.prototype.toggle=function(t){var e=a(this);if(!e.is(".disabled, :disabled")){var n=u(e),i=n.hasClass("open");if(o(),!i){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",o);var r={relatedTarget:this};if(n.trigger(t=a.Event("show.bs.dropdown",r)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},i.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=u(e),i=n.hasClass("open");if(!i&&27!=t.which||i&&27==t.which)return 27==t.which&&n.find(l).trigger("focus"),e.trigger("click");var r=" li:not(.divider):visible a",o=n.find('[role="menu"]'+r+', [role="listbox"]'+r);if(o.length){var s=o.index(t.target);38==t.which&&0<s&&s--,40==t.which&&s<o.length-1&&s++,~s||(s=0),o.eq(s).trigger("focus")}}}};var n=a.fn.dropdown;a.fn.dropdown=t,a.fn.dropdown.Constructor=i,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=n,this},a(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",l,i.prototype.toggle).on("keydown.bs.dropdown.data-api",l,i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',i.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',i.prototype.keydown)}(jQuery),function(o){"use strict";function s(i,r){return this.each(function(){var t=o(this),e=t.data("bs.modal"),n=o.extend({},a.DEFAULTS,t.data(),"object"==typeof i&&i);e||t.data("bs.modal",e=new a(this,n)),"string"==typeof i?e[i](r):n.show&&e.show(r)})}var a=function(t,e){this.options=e,this.$body=o(document.body),this.$element=o(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,o.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};a.VERSION="3.3.2",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},a.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},a.prototype.show=function(n){var i=this,t=o.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',o.proxy(this.hide,this)),this.backdrop(function(){var t=o.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),t&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var e=o.Event("shown.bs.modal",{relatedTarget:n});t?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(a.TRANSITION_DURATION):i.$element.trigger("focus").trigger(e)}))},a.prototype.hide=function(t){t&&t.preventDefault(),t=o.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),o(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),o.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",o.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())},a.prototype.enforceFocus=function(){o(document).off("focusin.bs.modal").on("focusin.bs.modal",o.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",o.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},a.prototype.resize=function(){this.isShown?o(window).on("resize.bs.modal",o.proxy(this.handleUpdate,this)):o(window).off("resize.bs.modal")},a.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(t){var e=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=o.support.transition&&n;if(this.$backdrop=o('<div class="modal-backdrop '+n+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",o.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){e.removeBackdrop(),t&&t()};o.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):r()}else t&&t()},a.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},a.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},a.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},a.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},a.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},a.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},a.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=o.fn.modal;o.fn.modal=s,o.fn.modal.Constructor=a,o.fn.modal.noConflict=function(){return o.fn.modal=t,this},o(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=o(this),n=e.attr("href"),i=o(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=i.data("bs.modal")?"toggle":o.extend({remote:!/#/.test(n)&&n},i.data(),e.data());e.is("a")&&t.preventDefault(),i.one("show.bs.modal",function(t){t.isDefaultPrevented()||i.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),s.call(i,r,this)})}(jQuery),function(g){"use strict";function t(i){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;(e||"destroy"!=i)&&(e||t.data("bs.tooltip",e=new v(this,n)),"string"==typeof i&&e[i]())})}var v=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};v.VERSION="3.3.2",v.TRANSITION_DURATION=150,v.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},v.prototype.init=function(t,e,n){this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&g(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),r=i.length;r--;){var o=i[r];if("click"==o)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",a="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},v.prototype.getDefaults=function(){return v.DEFAULTS},v.prototype.getOptions=function(t){return(t=g.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},v.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&g.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},v.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e&&e.$tip&&e.$tip.is(":visible"))e.hoverState="in";else{if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},v.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)},v.prototype.show=function(){var t=g.Event("show.bs."+this.type)
;if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var n=this,i=this.tip(),r=this.getUID(this.type);this.setContent(),i.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&i.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(o);a&&(o=o.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var u=this.getPosition(),l=i[0].offsetWidth,c=i[0].offsetHeight;if(a){var d=o,h=this.options.container?g(this.options.container):this.$element.parent(),f=this.getPosition(h);o="bottom"==o&&u.bottom+c>f.bottom?"top":"top"==o&&u.top-c<f.top?"bottom":"right"==o&&u.right+l>f.width?"left":"left"==o&&u.left-l<f.left?"right":o,i.removeClass(d).addClass(o)}var p=this.getCalculatedOffset(o,u,l,c);this.applyPlacement(p,o);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};g.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(v.TRANSITION_DURATION):m()}},v.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,r=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),t.top=t.top+o,t.left=t.left+s,g.offset.setOffset(n[0],g.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var a=n[0].offsetWidth,u=n[0].offsetHeight;"top"==e&&u!=r&&(t.top=t.top+r-u);var l=this.getViewportAdjustedDelta(e,t,a,u);l.left?t.left+=l.left:t.top+=l.top;var c=/top|bottom/.test(e),d=c?2*l.left-i+a:2*l.top-r+u,h=c?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(d,n[0][h],c)},v.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},v.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},v.prototype.hide=function(t){function e(){"in"!=n.hoverState&&i.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),t&&t()}var n=this,i=this.tip(),r=g.Event("hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return i.removeClass("in"),g.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",e).emulateTransitionEnd(v.TRANSITION_DURATION):e(),this.hoverState=null,this},v.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},v.prototype.hasContent=function(){return this.getTitle()},v.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect();null==i.width&&(i=g.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var r=n?{top:0,left:0}:t.offset(),o={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},i,o,s,r)},v.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},v.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,u=e.top+o-s.scroll+i;a<s.top?r.top=s.top-a:u>s.top+s.height&&(r.top=s.top+s.height-u)}else{var l=e.left-o,c=e.left+o+n;l<s.left?r.left=s.left-l:c>s.width&&(r.left=s.left+s.width-c)}return r},v.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},v.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},v.prototype.tip=function(){return this.$tip=this.$tip||g(this.options.template)},v.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},v.prototype.enable=function(){this.enabled=!0},v.prototype.disable=function(){this.enabled=!1},v.prototype.toggleEnabled=function(){this.enabled=!this.enabled},v.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),e.tip().hasClass("in")?e.leave(e):e.enter(e)},v.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var e=g.fn.tooltip;g.fn.tooltip=t,g.fn.tooltip.Constructor=v,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=e,this}}(jQuery),function(r){"use strict";function t(i){return this.each(function(){var t=r(this),e=t.data("bs.popover"),n="object"==typeof i&&i;(e||"destroy"!=i)&&(e||t.data("bs.popover",e=new o(this,n)),"string"==typeof i&&e[i]())})}var o=function(t,e){this.init("popover",t,e)};if(!r.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.3.2",o.DEFAULTS=r.extend({},r.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),o.prototype=r.extend({},r.fn.tooltip.Constructor.prototype),(o.prototype.constructor=o).prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},o.prototype.tip=function(){return this.$tip||(this.$tip=r(this.options.template)),this.$tip};var e=r.fn.popover;r.fn.popover=t,r.fn.popover.Constructor=o,r.fn.popover.noConflict=function(){return r.fn.popover=e,this}}(jQuery),function(o){"use strict";function r(t,e){var n=o.proxy(this.process,this);this.$body=o("body"),this.$scrollElement=o(t).is("body")?o(window):o(t),this.options=o.extend({},r.DEFAULTS,e),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",n),this.refresh(),this.process()}function e(i){return this.each(function(){var t=o(this),e=t.data("bs.scrollspy"),n="object"==typeof i&&i;e||t.data("bs.scrollspy",e=new r(this,n)),"string"==typeof i&&e[i]()})}r.VERSION="3.3.2",r.DEFAULTS={offset:10},r.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},r.prototype.refresh=function(){var i="offset",r=0;o.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var t=this;this.$body.find(this.selector).map(function(){var t=o(this),e=t.data("target")||t.attr("href"),n=/^#./.test(e)&&o(e);return n&&n.length&&n.is(":visible")&&[[n[i]().top+r,e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},r.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),i<=e)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(o[t])},r.prototype.activate=function(t){this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=o(e).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},r.prototype.clear=function(){o(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var t=o.fn.scrollspy;o.fn.scrollspy=e,o.fn.scrollspy.Constructor=r,o.fn.scrollspy.noConflict=function(){return o.fn.scrollspy=t,this},o(window).on("load.bs.scrollspy.data-api",function(){o('[data-spy="scroll"]').each(function(){var t=o(this);e.call(t,t.data())})})}(jQuery),function(a){"use strict";function e(n){return this.each(function(){var t=a(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new s(this)),"string"==typeof n&&e[n]()})}var s=function(t){this.element=a(t)};s.VERSION="3.3.2",s.TRANSITION_DURATION=150,s.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=e.find(".active:last a"),r=a.Event("hide.bs.tab",{relatedTarget:t[0]}),o=a.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(r),t.trigger(o),!o.isDefaultPrevented()&&!r.isDefaultPrevented()){var s=a(n);this.activate(t.closest("li"),e),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},s.prototype.activate=function(t,e,n){function i(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var r=e.find("> .active"),o=n&&a.support.transition&&(r.length&&r.hasClass("fade")||!!e.find("> .fade").length);r.length&&o?r.one("bsTransitionEnd",i).emulateTransitionEnd(s.TRANSITION_DURATION):i(),r.removeClass("in")};var t=a.fn.tab;a.fn.tab=e,a.fn.tab.Constructor=s,a.fn.tab.noConflict=function(){return a.fn.tab=t,this};var n=function(t){t.preventDefault(),e.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),function(u){"use strict";function n(i){return this.each(function(){var t=u(this),e=t.data("bs.affix"),n="object"==typeof i&&i;e||t.data("bs.affix",e=new l(this,n)),"string"==typeof i&&e[i]()})}var l=function(t,e){this.options=u.extend({},l.DEFAULTS,e),this.$target=u(this.options.target).on("scroll.bs.affix.data-api",u.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",u.proxy(this.checkPositionWithEventLoop,this)),this.$element=u(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};l.VERSION="3.3.2",l.RESET="affix affix-top affix-bottom",l.DEFAULTS={offset:0,target:window},l.prototype.getState=function(t,e,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(r+s<=t-i)&&"bottom";var a=null==this.affixed,u=a?r:o.top;return null!=n&&r<=n?"top":null!=i&&t-i<=u+(a?s:e)&&"bottom"},l.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(l.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},l.prototype.checkPositionWithEventLoop=function(){setTimeout(u.proxy(this.checkPosition,this),1)},l.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,n=e.top,i=e.bottom,r=u("body").height();"object"!=typeof e&&(i=n=e),"function"==typeof n&&(n=e.top(this.$element)),"function"==typeof i&&(i=e.bottom(this.$element));var o=this.getState(r,t,n,i);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var s="affix"+(o?"-"+o:""),a=u.Event(s+".bs.affix");if(this.$element.trigger(a),a.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(l.RESET).addClass(s).trigger(s.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:r-t-i})}};var t=u.fn.affix;u.fn.affix=n,u.fn.affix.Constructor=l,u.fn.affix.noConflict=function(){return u.fn.affix=t,this},u(window).on("load",function(){u('[data-spy="affix"]').each(function(){var t=u(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),n.call(t,e)})})}(jQuery),function(h){"use strict";function o(t,e){this.itemsArray=[],this.$element=h(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=e&&e.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=h('<div class="bootstrap-tagsinput"></div>'),this.$input=h('<input size="'+this.inputSize+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(e)}function e(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function f(t){return t?i.text(t).html():""}function u(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}var r={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,maxTags:undefined,confirmKeys:[13],onTagExists:function(t,e){e.hide().fadeIn()}};o.prototype={constructor:o,add:function(t,e){var n=this;if(!(n.options.maxTags&&n.itemsArray.length>=n.options.maxTags)&&(!1===t||t)){if("object"==typeof t&&!n.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(n.isSelect&&!n.multiple&&0<n.itemsArray.length&&n.remove(n.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var i=t.split(",");if(1<i.length){for(var r=0;r<i.length;r++)this.add(i[r],!0);return void(e||n.pushVal())}}var o=n.options.itemValue(t),s=n.options.itemText(t),a=n.options.tagClass(t),u=h.grep(n.itemsArray,function(t){return n.options.itemValue(t)===o})[0];if(u){if(n.options.onTagExists){var l=h(".tag",n.$container).filter(function(){return h(this).data("item")===u});n.options.onTagExists(t,l)}}else{n.itemsArray.push(t);var c=h('<span class="tag '+f(a)+'">'+f(s)+'<span data-role="remove"></span></span>');if(c.data("item",t),n.findInputWrapper().before(c),c.after(" "),n.isSelect&&!h('option[value="'+escape(o)+'"]',n.$element)[0]){var d=h("<option selected>"+f(s)+"</option>");d.data("item",t),d.attr("value",o),n.$element.append(d)}e||n.pushVal(),n.options.maxTags===n.itemsArray.length&&n.$container.addClass("bootstrap-tagsinput-max"),n.$element.trigger(h.Event("itemAdded",{item:t}))}}}},remove:function(e,t){var n=this;n.objectItems&&(e="object"==typeof e?h.grep(n.itemsArray,function(t){return n.options.itemValue(t)==n.options.itemValue(e)})[0]:h.grep(n.itemsArray,function(t){return n.options.itemValue(t)==e})[0]),e&&(h(".tag",n.$container).filter(function(){return h(this).data("item")===e}).remove(),h("option",n.$element).filter(function(){return h(this).data("item")===e}).remove(),n.itemsArray.splice(h.inArray(e,n.itemsArray),1)),t||n.pushVal(),n.options.maxTags>n.itemsArray.length&&n.$container.removeClass("bootstrap-tagsinput-max"),n.$element.trigger(h.Event("itemRemoved",{item:e}))},removeAll:function(){var t=this;for(h(".tag",t.$container).remove(),h("option",t.$element).remove();0<t.itemsArray.length;)t.itemsArray.pop();t.pushVal(),t.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var o=this;h(".tag",o.$container).each(function(){var t=h(this),e=t.data("item"),n=o.options.itemValue(e),i=o.options.itemText(e),r=o.options.tagClass(e);(t.attr("class",null),t.addClass("tag "+f(r)),t.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=f(i),o.isSelect)&&h("option",o.$element).filter(function(){return h(this).data("item")===e}).attr("value",n)})},items:function(){return this.itemsArray},pushVal:function(){var e=this,t=h.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(t,!0).trigger("change")},build:function(t){var a=this;a.options=h.extend({},r,t);var i=a.options.typeahead||{};a.objectItems&&(a.options.freeInput=!1),e(a.options,"itemValue"),e(a.options,"itemText"),e(a.options,"tagClass"),a.options.source&&(i.source=a.options.source),i.source&&h.fn.typeahead&&(n(i,"source"),a.$input.typeahead({source:function(t,r){function e(t){for(var e=[],n=0;n<t.length;n++){var i=a.options.itemText(t[n]);o[i]=t[n],e.push(i)}r(e)}this.map={};var o=this.map,n=i.source(t);h.isFunction(n.success)?n.success(e):h.when(n).then(e)},updater:function(t){a.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}})),a.$container.on("click",h.proxy(function(){a.$input.focus()},a)),a.$container.on("keydown","input",h.proxy(function(t){var e=h(t.target),n=a.findInputWrapper();switch(t.which){case 8:if(0===u(e[0])){var i=n.prev();i&&a.remove(i.data("item"))}break;case 46:if(0===u(e[0])){var r=n.next();r&&a.remove(r.data("item"))}break;case 37:var o=n.prev();0===e.val().length&&o[0]&&(o.before(n),e.focus());break;case 39:var s=n.next();0===e.val().length&&s[0]&&(s.after(n),e.focus());break;default:a.options.freeInput&&0<=h.inArray(t.which,a.options.confirmKeys)&&(a.add(e.val()),e.val(""),t.preventDefault())}e.attr("size",Math.max(this.inputSize,e.val().length))},a)),a.$container.on("click","[data-role=remove]",h.proxy(function(t){a.remove(h(t.target).closest(".tag").data("item"))},a)),a.options.itemValue===r.itemValue&&("INPUT"===a.$element[0].tagName?a.add(a.$element.val()):h("option",a.$element).each(function(){a.add(h(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],e=this.$container[0];t&&t.parentNode!==e;)t=t.parentNode;return h(t)}},h.fn.tagsinput=function(n,i){var r=[];return this.each(function(){var t=h(this).data("tagsinput");if(t){var e=t[n](i);e!==undefined&&r.push(e)}else t=new o(this,n),h(this).data("tagsinput",t),r.push(t),"SELECT"===this.tagName&&h("option",h(this)).attr("selected","selected"),h(this).val(h(this).val())}),"string"==typeof n?1<r.length?r:r[0]:r},h.fn.tagsinput.Constructor=o;var i=h("<div />");h(function(){h("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),"undefined"==typeof jQuery)throw new Error("Jasny Bootstrap's JavaScript requires jQuery");!function(i){"use strict";function t(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(t.style[n]!==undefined)return{end:e[n]};return!1}i.support.transition===undefined&&(i.fn.emulateTransitionEnd=function(t){var e=!1,n=this;return i(this).one(i.support.transition.end,function(){e=!0}),setTimeout(function(){e||i(n).trigger(i.support.transition.end)},t),this},i(function(){i.support.transition=t()}))}(window.jQuery),function(a){"use strict";var r=function(t,e){this.$element=a(t),this.options=a.extend({},r.DEFAULTS,e),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),a(window).on("resize",a.proxy(this.recalc,this))),this.options.autohide&&a(document).on("click",a.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};r.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},r.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},r.prototype.calcPlacement=function(){function t(t,e){if("auto"===i.css(e))return t;if("auto"===i.css(t))return e;var n=parseInt(i.css(t),10);return parseInt(i.css(e),10)<n?e:t}if("auto"===this.options.placement){this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var e=a(window).width()/this.$element.width(),n=a(window).height()/this.$element.height(),i=this.$element;this.placement=n<=e?t("left","right"):t("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")}else this.placement=this.options.placement},r.prototype.opposite=function(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},r.prototype.getCanvasElements=function(){var t=this.options.canvas?a(this.options.canvas):this.$element,e=t.find("*").filter(function(){return"fixed"===a(this).css("position")}).not(this.options.exclude);return t.add(e)},r.prototype.slide=function(t,e,n){if(!a.support.transition){var i={};return i[this.placement]="+="+e,t.animate(i,350,n)}var r=this.placement,o=this.opposite(r);t.each(function(){"auto"!==a(this).css(r)&&a(this).css(r,(parseInt(a(this).css(r),10)||0)+e),"auto"!==a(this).css(o)&&a(this).css(o,(parseInt(a(this).css(o),10)||0)-e)}),this.$element.one(a.support.transition.end,n).emulateTransitionEnd(350)},r.prototype.disableScrolling=function(){var t=a("body").width(),e="padding-"+this.opposite(this.placement);if(a("body").data("offcanvas-style")===undefined&&a("body").data("offcanvas-style",a("body").attr("style")||""),a("body").css("overflow","hidden"),a("body").width()>t){var n=parseInt(a("body").css(e),10)+a("body").width()-t;setTimeout(function(){a("body").css(e,n)},1)}},r.prototype.show=function(){if(!this.state){var t=a.Event("show.bs.offcanvas");if(this.$element.trigger(t),!t.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var e=this.getCanvasElements(),n=this.placement,i=this.opposite(n),r=this.offset();-1!==e.index(this.$element)&&(a(this.$element).data("offcanvas-style",a(this.$element).attr("style")||""),this.$element.css(n,-1*r),this.$element.css(n)),e.addClass("canvas-sliding").each(function(){a(this).data("offcanvas-style")===undefined&&a(this).data("offcanvas-style",a(this).attr("style")||""),"static"===a(this).css("position")&&a(this).css("position","relative"),"auto"!==a(this).css(n)&&"0px"!==a(this).css(n)||"auto"!==a(this).css(i)&&"0px"!==a(this).css(i)||a(this).css(n,0)}),this.options.disableScrolling&&this.disableScrolling();var o=function(){"slide-in"==this.state&&(this.state="slid",e.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(a.proxy(function(){this.$element.addClass("in"),this.slide(e,r,a.proxy(o,this))},this),1)}}},r.prototype.hide=function(){if("slid"===this.state){var t=a.Event("hide.bs.offcanvas");if(this.$element.trigger(t),!t.isDefaultPrevented()){this.state="slide-out";var e=a(".canvas-slid"),n=(this.placement,-1*this.offset()),i=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),e.removeClass("canvas-sliding"),e.add(this.$element).add("body").each(function(){a(this).attr("style",a(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};e.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(a.proxy(function(){this.slide(e,n,a.proxy(i,this))},this),1)}}},r.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},r.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(a("body"))},r.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var t=this.getCanvasElements();this.$element.removeClass("in"),t.removeClass("canvas-slid"),t.add(this.$element).add("body").each(function(){a(this).attr("style",a(this).data("offcanvas-style")).removeData("offcanvas-style")})}},r.prototype.autohide=function(t){0===a(t.target).closest(this.$element).length&&this.hide()};var t=a.fn.offcanvas;a.fn.offcanvas=function(i){return this.each(function(){var t=a(this),e=t.data("bs.offcanvas"),n=a.extend({},r.DEFAULTS,t.data(),"object"==typeof i&&i);e||t.data("bs.offcanvas",e=new r(this,n)),"string"==typeof i&&e[i]()})},a.fn.offcanvas.Constructor=r,a.fn.offcanvas.noConflict=function(){return a.fn.offcanvas=t,this},a(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(t){var e,n=a(this),i=n.attr("data-target")||t.preventDefault()||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),r=a(i),o=r.data("bs.offcanvas"),s=o?"toggle":n.data();t.stopPropagation(),o?o.toggle():r.offcanvas(s)})}(window.jQuery),function(i){"use strict";var r=function(t,e){this.$element=i(t),this.options=i.extend({},r.DEFAULTS,e),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",i.proxy(this.click,this))};r.DEFAULTS={target:"a"},r.prototype.click=function(t){var e=i(t.currentTarget).closest("tr").find(this.options.target)[0];if(i(t.target)[0]!==e)if(t.preventDefault(),e.click)e.click();else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}};var t=i.fn.rowlink;i.fn.rowlink=function(n){return this.each(function(){var t=i(this),e=t.data("bs.rowlink");e||t.data("bs.rowlink",e=new r(this,n))})},i.fn.rowlink.Constructor=r,i.fn.rowlink.noConflict=function(){return i.fn.rowlink=t,this},i(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(t){if(0===i(t.target).closest(".rowlink-skip").length){var e=i(this);e.data("bs.rowlink")||(e.rowlink(e.data()),i(t.target).trigger("click.bs.rowlink"))}})}(window.jQuery),function(i){"use strict";var o=window.orientation!==undefined,n=-1<navigator.userAgent.toLowerCase().indexOf("android"),e="Microsoft Internet Explorer"==window.navigator.appName,r=function(t,e){n||(this.$element=i(t),this.options=i.extend({},r.DEFAULTS,e),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};r.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]",w:"[A-Za-z0-9]","*":"."}},r.prototype.init=function(){var n=this.options.definitions;this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,i.each(this.mask.split(""),i.proxy(function(t,e){"?"==e?(0,this.partialPosition=t):n[e]?(this.tests.push(new RegExp(n[e])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=i.map(this.mask.split(""),i.proxy(function(t){if("?"!=t)return n[t]?this.options.placeholder:t},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",i.proxy(function(){return i.map(this.buffer,function(t,e){return this.tests[e]&&t!=this.options.placeholder?t:null}).join("")},this))},r.prototype.listen=function(){if(!this.$element.attr("readonly")){var t=(e?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",i.proxy(this.unmask,this)).on("focus.bs.inputmask",i.proxy(this.focusEvent,this)).on("blur.bs.inputmask",i.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",i.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",i.proxy(this.keypressEvent,this)).on(t,i.proxy(this.pasteEvent,this))}},r.prototype.caret=function(e,n){if(0!==this.$element.length){if("number"==typeof e)return n="number"==typeof n?n:e,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,n);else if(this.createTextRange){var t=this.createTextRange();t.collapse(!0),t.moveEnd("character",n),t.moveStart("character",e),t.select()}});if(this.$element[0].setSelectionRange)e=this.$element[0].selectionStart,n=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var t=document.selection.createRange();e=0-t.duplicate().moveStart("character",-1e5),n=e+t.text.length}return{begin:e,end:n}}},r.prototype.seekNext=function(t){for(var e=this.mask.length;++t<=e&&!this.tests[t];);return t},r.prototype.seekPrev=function(t){for(;0<=--t&&!this.tests[t];);return t},r.prototype.shiftL=function(t,e){var n=this.mask.length;if(!(t<0)){for(var i=t,r=this.seekNext(e);i<n;i++)if(this.tests[i]){if(!(r<n&&this.tests[i].test(this.buffer[r])))break;this.buffer[i]=this.buffer[r],this.buffer[r]=this.options.placeholder,r=this.seekNext(r)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}},r.prototype.shiftR=function(t){for(var e=this.mask.length,n=t,i=this.options.placeholder;n<e;n++)if(this.tests[n]){var r=this.seekNext(n),o=this.buffer[n];if(this.buffer[n]=i,!(r<e&&this.tests[r].test(o)))break;i=o}},r.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},r.prototype.focusEvent=function(){this.focusText=this.$element.val();var t=this.mask.length,e=this.checkVal();this.writeBuffer();var n=this,i=function(){e==t?n.caret(0,e):n.caret(e)};i(),setTimeout(i,50)},r.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},r.prototype.keydownEvent=function(t){var e=t.which;if(8==e||46==e||o&&127==e){var n=this.caret(),i=n.begin,r=n.end;return r-i==0&&(i=46!=e?this.seekPrev(i):r=this.seekNext(i-1),r=46==e?this.seekNext(r):r),this.clearBuffer(i,r),this.shiftL(i,r-1),!1}if(27==e)return this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1},r.prototype.keypressEvent=function(t){var e=this.mask.length,n=t.which,i=this.caret();if(t.ctrlKey||t.altKey||t.metaKey||n<32)return!0;if(n){i.end-i.begin!=0&&(this.clearBuffer(i.begin,i.end),this.shiftL(i.begin,i.end-1));var r=this.seekNext(i.begin-1);if(r<e){var o=String.fromCharCode(n);if(this.tests[r].test(o)){this.shiftR(r),this.buffer[r]=o,this.writeBuffer();var s=this.seekNext(r);this.caret(s)}}return!1}},r.prototype.pasteEvent=function(){var t=this;setTimeout(function(){t.caret(t.checkVal(!0))},0)},r.prototype.clearBuffer=function(t,e){for(var n=this.mask.length,i=t;i<e&&i<n;i++)this.tests[i]&&(this.buffer[i]=this.options.placeholder)},r.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},r.prototype.checkVal=function(t){for(var e=this.mask.length,n=this.$element.val(),i=-1,r=0,o=0;r<e;r++)if(this.tests[r]){for(this.buffer[r]=this.options.placeholder;o++<n.length;){var s=n.charAt(o-1);if(this.tests[r].test(s)){this.buffer[r]=s,i=r;break}}if(o>n.length)break}else this.buffer[r]==n.charAt(o)&&r!=this.partialPosition&&(o++,i=r);return!t&&i+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,e)):(t||i+1>=this.partialPosition)&&(this.writeBuffer(),t||this.$element.val(this.$element.val().substring(0,i+1))),this.partialPosition?r:this.firstNonMaskPos};var t=i.fn.inputmask;i.fn.inputmask=function(n){return this.each(function(){var t=i(this),e=t.data("bs.inputmask");e||t.data("bs.inputmask",e=new r(this,n))})},i.fn.inputmask.Constructor=r,i.fn.inputmask.noConflict=function(){return i.fn.inputmask=t,this},i(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var t=i(this);t.data("bs.inputmask"
)||t.inputmask(t.data())})}(window.jQuery),function(s){"use strict";var n="Microsoft Internet Explorer"==window.navigator.appName,i=function(t,e){if(this.$element=s(t),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||e.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=s('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var n=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==n&&"none"!==n&&this.$preview.css("line-height",n),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};i.prototype.listen=function(){this.$input.on("change.bs.fileinput",s.proxy(this.change,this)),s(this.$input[0].form).on("reset.bs.fileinput",s.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",s.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",s.proxy(this.clear,this))},i.prototype.change=function(t){var n=t.target.files===undefined?t.target&&t.target.value?[{name:t.target.value.replace(/^.+\\/,"")}]:[]:t.target.files;if(t.stopPropagation(),0!==n.length){this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var i=n[0];if(0<this.$preview.length&&("undefined"!=typeof i.type?i.type.match(/^image\/(gif|png|jpeg)$/):i.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var e=new FileReader,r=this.$preview,o=this.$element;e.onload=function(t){var e=s("<img>");e[0].src=t.target.result,n[0].result=t.target.result,o.find(".fileinput-filename").text(i.name),"none"!=r.css("max-height")&&e.css("max-height",parseInt(r.css("max-height"),10)-parseInt(r.css("padding-top"),10)-parseInt(r.css("padding-bottom"),10)-parseInt(r.css("border-top"),10)-parseInt(r.css("border-bottom"),10)),r.html(e),o.addClass("fileinput-exists").removeClass("fileinput-new"),o.trigger("change.bs.fileinput",n)},e.readAsDataURL(i)}else this.$element.find(".fileinput-filename").text(i.name),this.$preview.text(i.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")}else this.clear()},i.prototype.clear=function(t){if(t&&t.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),n){var e=this.$input.clone(!0);this.$input.after(e),this.$input.remove(),this.$input=e}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),t!==undefined&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},i.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},i.prototype.trigger=function(t){this.$input.trigger("click"),t.preventDefault()};var t=s.fn.fileinput;s.fn.fileinput=function(n){return this.each(function(){var t=s(this),e=t.data("bs.fileinput");e||t.data("bs.fileinput",e=new i(this,n)),"string"==typeof n&&e[n]()})},s.fn.fileinput.Constructor=i,s.fn.fileinput.noConflict=function(){return s.fn.fileinput=t,this},s(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(t){var e=s(this);if(!e.data("bs.fileinput")){e.fileinput(e.data());var n=s(t.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');0<n.length&&(t.preventDefault(),n.trigger("click.bs.fileinput"))}})}(window.jQuery),function(){var t=this,e=t._,s={},r=Array.prototype,n=Object.prototype,i=Function.prototype,o=r.push,a=r.slice,u=r.concat,d=n.toString,l=n.hasOwnProperty,c=r.forEach,h=r.map,f=r.reduce,p=r.reduceRight,m=r.filter,g=r.every,v=r.some,b=r.indexOf,y=r.lastIndexOf,w=Array.isArray,_=Object.keys,x=i.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.5.1";var k=C.each=C.forEach=function(t,e,n){if(null!=t)if(c&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t)===s)return}else for(var o in t)if(C.has(t,o)&&e.call(n,t[o],o,t)===s)return};C.map=C.collect=function(t,i,r){var o=[];return null==t?o:h&&t.map===h?t.map(i,r):(k(t,function(t,e,n){o.push(i.call(r,t,e,n))}),o)};var S="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,i,r,o){var s=2<arguments.length;if(null==t&&(t=[]),f&&t.reduce===f)return o&&(i=C.bind(i,o)),s?t.reduce(i,r):t.reduce(i);if(k(t,function(t,e,n){s?r=i.call(o,r,t,e,n):(r=t,s=!0)}),!s)throw new TypeError(S);return r},C.reduceRight=C.foldr=function(i,r,o,s){var a=2<arguments.length;if(null==i&&(i=[]),p&&i.reduceRight===p)return s&&(r=C.bind(r,s)),a?i.reduceRight(r,o):i.reduceRight(r);var u=i.length;if(u!==+u){var l=C.keys(i);u=l.length}if(k(i,function(t,e,n){e=l?l[--u]:--u,a?o=r.call(s,o,i[e],e,n):(o=i[e],a=!0)}),!a)throw new TypeError(S);return o},C.find=C.detect=function(t,i,r){var o;return T(t,function(t,e,n){if(i.call(r,t,e,n))return o=t,!0}),o},C.filter=C.select=function(t,i,r){var o=[];return null==t?o:m&&t.filter===m?t.filter(i,r):(k(t,function(t,e,n){i.call(r,t,e,n)&&o.push(t)}),o)},C.reject=function(t,i,r){return C.filter(t,function(t,e,n){return!i.call(r,t,e,n)},r)},C.every=C.all=function(t,i,r){i||(i=C.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(i,r):(k(t,function(t,e,n){if(!(o=o&&i.call(r,t,e,n)))return s}),!!o)};var T=C.some=C.any=function(t,i,r){i||(i=C.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(i,r):(k(t,function(t,e,n){if(o||(o=i.call(r,t,e,n)))return s}),!!o)};C.contains=C.include=function(t,e){return null!=t&&(b&&t.indexOf===b?-1!=t.indexOf(e):T(t,function(t){return t===e}))},C.invoke=function(t,e){var n=a.call(arguments,2),i=C.isFunction(e);return C.map(t,function(t){return(i?e:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,function(t){return t[e]})},C.where=function(t,n,e){return C.isEmpty(n)?e?void 0:[]:C[e?"find":"filter"](t,function(t){for(var e in n)if(n[e]!==t[e])return!1;return!0})},C.findWhere=function(t,e){return C.where(t,e,!0)},C.max=function(t,r,o){if(!r&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&C.isEmpty(t))return-Infinity;var s={computed:-Infinity,value:-Infinity};return k(t,function(t,e,n){var i=r?r.call(o,t,e,n):t;i>s.computed&&(s={value:t,computed:i})}),s.value},C.min=function(t,r,o){if(!r&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&C.isEmpty(t))return Infinity;var s={computed:Infinity,value:Infinity};return k(t,function(t,e,n){var i=r?r.call(o,t,e,n):t;i<s.computed&&(s={value:t,computed:i})}),s.value},C.shuffle=function(t){var e,n=0,i=[];return k(t,function(t){e=C.random(n++),i[n-1]=i[e],i[e]=t}),i};var E=function(e){return C.isFunction(e)?e:function(t){return t[e]}};C.sortBy=function(t,e,i){var r=E(e);return C.pluck(C.map(t,function(t,e,n){return{value:t,index:e,criteria:r.call(i,t,e,n)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var N=function(i,t,r,o){var s={},a=E(null==t?C.identity:t);return k(i,function(t,e){var n=a.call(r,t,e,i);o(s,n,t)}),s};C.groupBy=function(t,e,n){return N(t,e,n,function(t,e,n){(C.has(t,e)?t[e]:t[e]=[]).push(n)})},C.countBy=function(t,e,n){return N(t,e,n,function(t,e){C.has(t,e)||(t[e]=0),t[e]++})},C.sortedIndex=function(t,e,n,i){for(var r=(n=null==n?C.identity:E(n)).call(i,e),o=0,s=t.length;o<s;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},C.toArray=function(t){return t?C.isArray(t)?a.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:a.call(t,0,e)},C.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var D=function(t,e,n){return e&&C.every(t,C.isArray)?u.apply(n,t):(k(t,function(t){C.isArray(t)||C.isArguments(t)?e?o.apply(n,t):D(t,e,n):n.push(t)}),n)};C.flatten=function(t,e){return D(t,e,[])},C.without=function(t){return C.difference(t,a.call(arguments,1))},C.uniq=C.unique=function(n,i,t,e){C.isFunction(i)&&(e=t,t=i,i=!1);var r=t?C.map(n,t,e):n,o=[],s=[];return k(r,function(t,e){(i?e&&s[s.length-1]===t:C.contains(s,t))||(s.push(t),o.push(n[e]))}),o},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var n=a.call(arguments,1);return C.filter(C.uniq(t),function(e){return C.every(n,function(t){return 0<=C.indexOf(t,e)})})},C.difference=function(t){var e=u.apply(r,a.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;n<t;n++)e[n]=C.pluck(arguments,""+n);return e},C.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return t[i=C.sortedIndex(t,e)]===e?i:-1;i=n<0?Math.max(0,r+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;i<r;i++)if(t[i]===e)return i;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(y&&t.lastIndexOf===y)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);r<i;)o[r++]=t,t+=n;return o};var A=function(){};C.bind=function(n,i){var r,o;if(x&&n.bind===x)return x.apply(n,a.call(arguments,1));if(!C.isFunction(n))throw new TypeError;return r=a.call(arguments,2),o=function(){if(!(this instanceof o))return n.apply(i,r.concat(a.call(arguments)));A.prototype=n.prototype;var t=new A;A.prototype=null;var e=n.apply(t,r.concat(a.call(arguments)));return Object(e)===e?e:t}},C.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},C.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return k(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,n){var i={};return n||(n=C.identity),function(){var t=n.apply(this,arguments);return C.has(i,t)?i[t]:i[t]=e.apply(this,arguments)}},C.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(a.call(arguments,1)))},C.throttle=function(n,i,r){var o,s,a,u=null,l=0;r||(r={});var c=function(){l=!1===r.leading?0:new Date,u=null,a=n.apply(o,s)};return function(){var t=new Date;l||!1!==r.leading||(l=t);var e=i-(t-l);return o=this,s=arguments,e<=0?(clearTimeout(u),u=null,l=t,a=n.apply(o,s)):u||!1===r.trailing||(u=setTimeout(c,e)),a}},C.debounce=function(r,o,s){var a,u=null;return function(){var t=this,e=arguments,n=function(){u=null,s||(a=r.apply(t,e))},i=s&&!u;return clearTimeout(u),u=setTimeout(n,o),i&&(a=r.apply(t,e)),a}},C.once=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}},C.wrap=function(e,n){return function(){var t=[e];return o.apply(t,arguments),n.apply(this,t)}},C.compose=function(){var n=arguments;return function(){for(var t=arguments,e=n.length-1;0<=e;e--)t=[n[e].apply(this,t)];return t[0]}},C.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},C.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)C.has(t,n)&&e.push(n);return e},C.values=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push(t[n]);return e},C.pairs=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push([n,t[n]]);return e},C.invert=function(t){var e={};for(var n in t)C.has(t,n)&&(e[t[n]]=n);return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(n){return k(a.call(arguments,1),function(t){if(t)for(var e in t)n[e]=t[e]}),n},C.pick=function(e){var n={},t=u.apply(r,a.call(arguments,1));return k(t,function(t){t in e&&(n[t]=e[t])}),n},C.omit=function(t){var e={},n=u.apply(r,a.call(arguments,1));for(var i in t)C.contains(n,i)||(e[i]=t[i]);return e},C.defaults=function(n){return k(a.call(arguments,1),function(t){if(t)for(var e in t)void 0===n[e]&&(n[e]=t[e])}),n},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var I=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var r=d.call(t);if(r!=d.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(C.isFunction(s)&&s instanceof s&&C.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var u=0,l=!0;if("[object Array]"==r){if(l=(u=t.length)==e.length)for(;u--&&(l=I(t[u],e[u],n,i)););}else{for(var c in t)if(C.has(t,c)&&(u++,!(l=C.has(e,c)&&I(t[c],e[c],n,i))))break;if(l){for(c in e)if(C.has(e,c)&&!u--)break;l=!u}}return n.pop(),i.pop(),l};C.isEqual=function(t,e){return I(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=w||function(t){return"[object Array]"==d.call(t)},C.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(e){C["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==d.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return l.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;r<t;r++)i[r]=e.call(n,r);return i},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=C.invert(P.escape);var R={escape:new RegExp("["+C.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(P.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(e){C[e]=function(t){return null==t?"":(""+t).replace(R[e],function(t){return P[e][t]})}}),C.result=function(t,e){if(null!=t){var n=t[e];return C.isFunction(n)?n.call(t):n}},C.mixin=function(n){k(C.functions(n),function(t){var e=C[t]=n[t];C.prototype[t]=function(){var t=[this._wrapped];return o.apply(t,arguments),L.call(this,e.apply(C,t))}})};var O=0;C.uniqueId=function(t){var e=++O+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(o,t,e){var n;e=C.defaults({},e,C.templateSettings);var i=new RegExp([(e.escape||M).source,(e.interpolate||M).source,(e.evaluate||M).source].join("|")+"|$","g"),s=0,a="__p+='";o.replace(i,function(t,e,n,i,r){return a+=o.slice(s,r).replace($,function(t){return"\\"+F[t]}),e&&(a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),s=r+t.length,t}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(e.variable||"obj","_",a)}catch(u){throw u.source=a,u}if(t)return n(t,C);var r=function(t){return n.call(this,t,C)};return r.source="function("+(e.variable||"obj")+"){\n"+a+"}",r},C.chain=function(t){return C(t).chain()};var L=function(t){return this._chain?C(t).chain():t};C.mixin(C),k(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=r[e];C.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!=e&&"splice"!=e||0!==t.length||delete t[0],L.call(this,t)}}),k(["concat","join","slice"],function(t){var e=r[t];C.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var a,t=this,e=t.Backbone,n=[],f=n.push,r=n.slice,p=n.splice;(a="undefined"!=typeof exports?exports:t.Backbone={}).VERSION="1.0.0";var m=t._;m||"undefined"==typeof require||(m=require("underscore")),a.$=t.jQuery||t.Zepto||t.ender||t.$,a.noConflict=function(){return t.Backbone=e,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(t,e,n){return d(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!d(this,"once",t,[e,n])||!e)return this;var i=this,r=m.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,u,l,c;if(!this._events||!d(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=0,u=(s=t?[t]:m.keys(this._events)).length;a<u;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,c=o.length;l<c;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!d(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&o(n,e),i&&o(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;for(var o in"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t),i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},u=/\s+/,d=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;s<a;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},o=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},s={listenTo:"on",listenToOnce:"once"};m.each(s,function(r,t){i[t]=function(t,e,n){var i=this._listeners||(this._listeners={});return"object"==typeof e&&(n=this),(i[t._listenerId||(t._listenerId=m.uniqueId("l"))]=t)[r](e,n,this),this}}),i.bind=i.on,i.unbind=i.off,m.extend(a,i);var l=a.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=m.uniqueId("c"),this.attributes={},m.extend(this,m.pick(e,c)),e.parse&&(i=this.parse(i,e)||{}),(n=m.result(this,"defaults"))&&(i=m.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},c=["url","urlRoot","collection"];m.extend(l.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return m.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return m.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,o,s,a,u,l,c;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;for(i in o=n.unset,a=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=m.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)e=r[i],m.isEqual(c[i],e)||s.push(i),m.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,o?delete c[i]:c[i]=e;if(!a){s.length&&(this._pending=!0);for(var d=0,h=s.length;d<h;d++)this.trigger("change:"+s[d],this,c[s[d]],n)}if(u)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,m.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,m.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!m.isEmpty(this.changed):m.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&m.clone(this.changed);var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)m.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return m.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?m.clone(e):{}).parse&&(e.parse=!0);var n=this,i=e.success;return e.success=function(t){if(!n.set(n.parse(t,e),e))return!1;i&&i(n,t,e),n.trigger("sync",n,t,e)},$(this,e),this.sync("read",this,e)},save:function(t,e,n){var i,r,o,s=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,i&&(!n||!n.wait)&&!this.set(i,n))return!1;if(n=m.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=m.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var a=this,u=n.success;return n.success=function(t){a.attributes=s;var e=a.parse(t,n);if(n.wait&&(e=m.extend(i||{},e)),m.isObject(e)&&!a.set(e,n))return!1;u&&u(a,t,n),a.trigger("sync",a,t,n)},$(this,n),"patch"===(r=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(e){e=e?m.clone(e):{};var n=this,i=e.success,r=function(){n.trigger("destroy",n,n.collection,e)};if(e.success=function(t){(e.wait||n.isNew())&&r(),i&&i(n,t,e),n.isNew()||n.trigger("sync",n,t,e)},this.isNew())return e.success(),!1;$(this,e);var t=this.sync("delete",this,e);return e.wait||r(),t},url:function(){var t=m.result(this,"urlRoot")||m.result(this.collection,"url")||F();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},m.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=m.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,m.extend(e||{},{validationError:n})),!1)}});var h=["keys","values","pairs","invert","pick","omit"];m.each(h,function(e){l.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),m[e].apply(m,t)}});var g=a.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,m.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};m.extend(g.prototype,i,{model:l,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,m.defaults(e||{},b))},remove:function(t,e){var n,i,r,o;for(e||(e={}),n=0,i=(t=m.isArray(t)?t.slice():[t]).length;n<i;n++)(o=this.get(t[n]))&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){var n,i,r,o,s;(e=m.defaults(e||{},v)).parse&&(t=this.parse(t,e)),m.isArray(t)||(t=t?[t]:[]);var a=e.at,u=this.comparator&&null==a&&!1!==e.sort,l=m.isString(this.comparator)?this.comparator:null,c=[],d=[],h={};for(n=0,i=t.length;n<i;n++)(r=this._prepareModel(t[n],e))&&((o=this.get(r))?(e.remove&&(h[o.cid]=!0),e.merge&&(o.set(r.attributes,e),u&&!s&&o.hasChanged(l)&&(s=!0))):e.add&&(c.push(r),r.on("all",this._onModelEvent,this),null!=(this._byId[r.cid]=r).id&&(this._byId[r.id]=r)));if(e.remove){for(n=0,i=this.length;n<i;++n)h[(r=this.models[n]).cid]||d.push(r);d.length&&this.remove(d,e)}if(c.length&&(u&&(s=!0),this.length+=c.length,null!=a?p.apply(this.models,[a,0].concat(c)):f.apply(this.models,c)),s&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=c.length;n<i;n++)(r=c[n]).trigger("add",r,this,e);return s&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,m.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,m.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,m.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){if(null!=t)return this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(n,t){return m.isEmpty(n)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in n)if(n[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),m.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(m.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=m.isFunction(e)?e:function(t){return t.get(e)};return m.sortedIndex(this.models,t,i,n)},pluck:function(t){return m.invoke(this.models,"get",t)},fetch:function(n){void 0===(n=n?m.clone(n):{}).parse&&(n.parse=!0);var i=n.success,r=this;return n.success=function(t){var e=n.reset?"reset":"set";r[e](t,n),i&&i(r,t,n),r.trigger("sync",r,t,n)},$(this,n),this.sync("read",this,n)},create:function(e,n){if(n=n?m.clone(n):{},!(e=this._prepareModel(e,n)))return!1;n.wait||this.add(e,n);var i=this,r=n.success;return n.success=function(t){n.wait&&i.add(e,n),r&&r(e,t,n)},e.save(null,n),e},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof l)return t.collection||(t.collection=this),t;e||(e={});var n=new(e.collection=this).model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];m.each(y,function(e){g.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),m[e].apply(m,t)}});var w=["groupBy","countBy","sortBy"];m.each(w,function(i){g.prototype[i]=function(e,t){var n=m.isFunction(e)?e:function(t){return t.get(e)};return m[i](this.models,n,t)}});var _=a.View=function(t){this.cid=m.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];m.extend(_.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof a.$?t:a.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=m.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(m.isFunction(n)||(n=this[t[e]]),n){var i=e.match(x),r=i[1],o=i[2];n=m.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=m.extend({},m.result(this,"options"),t)),m.extend(this,m.pick(t,C)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(m.result(this,"el"),!1);else{var t=m.extend({},m.result(this,"attributes"));this.id&&(t.id=m.result(this,"id")),this.className&&(t["class"]=m.result(this,"className"));var e=a.$("<"+m.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),a.sync=function(t,e,n){var i=k[t];m.defaults(n||(n={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var r={type:i,dataType:"json"};if(n.url||(r.url=m.result(e,"url")||F()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){r.type="POST",n.emulateJSON&&(r.data._method=i);var o=n.beforeSend;n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),o)return o.apply(this,arguments)}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var s=n.xhr=a.ajax(m.extend(r,n));return e.trigger("request",e,s,n),s};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var S=a.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,N=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;m.extend(S.prototype,i,{initialize:function(){},route:function(n,i,r){m.isRegExp(n)||(n=this._routeToRegExp(n)),m.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return a.history.route(n,function(t){var e=o._extractParameters(n,t);r&&r.apply(o,e),o.trigger.apply(o,["route:"+i].concat(e)),o.trigger("route",i,e),a.history.trigger("route",o,i,e)}),this},navigate:function(t,e){return a.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=m.result(this,"routes");for(var t,e=m.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(T,"(?:$1)?").replace(E,function(t,e){return e?t:"([^/]+)"}).replace(N,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return m.map(n,function(t){return t?decodeURIComponent(t):null})}});var A=a.History=function(){this.handlers=[],m.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,
this.history=window.history)},I=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/;A.started=!1,m.extend(A.prototype,i,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(O,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=m.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),n=document.documentMode,i=R.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(P,"/"),i&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(t){var e=this.fragment=this.getFragment(t);return m.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!A.started)return!1;if(e&&!0!==e||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),a.history=new A;var M=function(t,e){var n,i=this;n=t&&m.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},m.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&m.extend(n.prototype,t),n.__super__=i.prototype,n};l.extend=g.extend=S.extend=_.extend=A.extend=M;var F=function(){throw new Error('A "url" property or function must be specified')},$=function(e,n){var i=n.error;n.error=function(t){i&&i(e,t,n),e.trigger("error",e,t,n)}}}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery)}(this,function(T){"use strict";function t(e){return function(t){return e===t}}function e(t,e){return t===e}function n(n){return function(t,e){return t[n]===e[n]}}function i(){return!0}function r(){return!1}function o(t){return function(){return!t.apply(t,arguments)}}function s(e,n){return function(t){return e(t)&&n(t)}}function a(t){return t}function u(t,e){return function(){return t[e].apply(t,arguments)}}function l(t){var e=++pe+"";return t?t+e:e}function c(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}}function d(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function h(t,e){return(e=e||"")+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")}function f(r,o,s){var a,u=this;return function(){var t=u,e=arguments,n=function(){a=null,s||r.apply(t,e)},i=s&&!a;clearTimeout(a),a=setTimeout(n,o),i&&r.apply(t,e)}}function p(t){return t[0]}function m(t){return t[t.length-1]}function g(t){return t.slice(0,t.length-1)}function v(t){return t.slice(1)}function b(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e(r))return r}}function y(t,e){for(var n=0,i=t.length;n<i;n++)if(!e(t[n]))return!1;return!0}function w(t,e){return T.inArray(e,t)}function _(t,e){return-1!==w(t,e)}function x(t,n){return n=n||me.self,t.reduce(function(t,e){return t+n(e)},0)}function C(t){for(var e=[],n=t.length,i=-1;++i<n;)e[i]=t[i];return e}function k(t){return!t||!t.length}function S(t,i){return t.length?v(t).reduce(function(t,e){var n=m(t);return i(m(n),e)?n[n.length]=e:t[t.length]=[e],t},[[p(t)]]):[]}function E(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&e.push(t[n]);return e}function N(t){for(var e=[],n=0,i=t.length;n<i;n++)_(e,t[n])||e.push(t[n]);return e}function D(t,e){var n=w(t,e);return-1===n?null:t[n+1]}function A(t,e){var n=w(t,e);return-1===n?null:t[n-1]}function I(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",n=T("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),i=n.css("fontFamily",e).width(),r=n.css("fontFamily",t+","+e).width();return n.remove(),i!==r}function P(t){return t&&T(t).hasClass("note-editable")}function R(t){return t&&T(t).hasClass("note-control-sizing")}function O(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}}function M(t){return t&&3===t.nodeType}function F(t){return t&&1===t.nodeType}function L(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(t.nodeName.toUpperCase())}function H(t){return!P(t)&&(t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase()))}function B(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())}function z(t){return H(t)&&!De(t)}function j(t){return!(W(t)||U(t)||Pe(t)||H(t)||Ae(t)||Re(t)||Ie(t))}function U(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())}function q(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())}function W(t){return q(t)||Re(t)||P(t)}function V(t){return j(t)&&!!Z(t,H)}function Y(t){return j(t)&&!Z(t,H)}function K(t,e){return t.nextSibling===e||t.previousSibling===e}function G(t,e){e=e||me.ok;var n=[];return t.previousSibling&&e(t.previousSibling)&&n.push(t.previousSibling),n.push(t),t.nextSibling&&e(t.nextSibling)&&n.push(t.nextSibling),n}function X(t){return M(t)?t.nodeValue.length:t?t.childNodes.length:0}function Q(t){var e=X(t);return 0===e||(!M(t)&&1===e&&t.innerHTML===Fe||!(!ge.all(t.childNodes,M)||""!==t.innerHTML))}function J(t){L(t)||X(t)||(t.innerHTML=Fe)}function Z(t,e){for(;t;){if(e(t))return t;if(P(t))break;t=t.parentNode}return null}function tt(t,e){for(t=t.parentNode;t&&1===X(t);){if(e(t))return t;if(P(t))break;t=t.parentNode}return null}function et(t,e){e=e||me.fail;var n=[];return Z(t,function(t){return P(t)||n.push(t),e(t)}),n}function nt(t,e){var n=et(t);return ge.last(n.filter(e))}function it(t,e){for(var n=et(t),i=e;i;i=i.parentNode)if(-1<T.inArray(i,n))return i;return null}function rt(t,e){e=e||me.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.previousSibling;return n}function ot(t,e){e=e||me.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.nextSibling;return n}function st(i,r){var o=[];return r=r||me.ok,function s(t){i!==t&&r(t)&&o.push(t);for(var e=0,n=t.childNodes.length;e<n;e++)s(t.childNodes[e])}(i),o}function at(t,e){var n=t.parentNode,i=T("<"+e+">")[0];return n.insertBefore(i,t),i.appendChild(t),i}function ut(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t}function lt(n,t){return T.each(t,function(t,e){n.appendChild(e)}),n}function ct(t){return 0===t.offset}function dt(t){return t.offset===X(t.node)}function ht(t){return ct(t)||dt(t)}function ft(t,e){for(;t&&t!==e;){if(0!==vt(t))return!1;t=t.parentNode}return!0}function pt(t,e){if(!e)return!1;for(;t&&t!==e;){if(vt(t)!==X(t.parentNode)-1)return!1;t=t.parentNode}return!0}function mt(t,e){return ct(t)&&ft(t.node,e)}function gt(t,e){return dt(t)&&pt(t.node,e)}function vt(t){for(var e=0;t=t.previousSibling;)e+=1;return e}function bt(t){return!!(t&&t.childNodes&&t.childNodes.length)}function yt(t,e){var n,i;if(0===t.offset){if(P(t.node))return null;n=t.node.parentNode,i=vt(t.node)}else bt(t.node)?i=X(n=t.node.childNodes[t.offset-1]):(n=t.node,i=e?0:t.offset-1);return{node:n,offset:i}}function wt(t,e){var n,i;if(X(t.node)===t.offset){if(P(t.node))return null;n=t.node.parentNode,i=vt(t.node)+1}else bt(t.node)?(n=t.node.childNodes[t.offset],i=0):(n=t.node,i=e?X(t.node):t.offset+1);return{node:n,offset:i}}function _t(t,e){return t.node===e.node&&t.offset===e.offset}function xt(t){if(M(t.node)||!bt(t.node)||Q(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return!(e&&!L(e)||n&&!L(n))}function Ct(t,e){for(;t;){if(e(t))return t;t=yt(t)}return null}function kt(t,e){for(;t;){if(e(t))return t;t=wt(t)}return null}function St(t){if(!M(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==Te}function Tt(t,e,n,i){for(var r=t;r&&(n(r),!_t(r,e));){r=wt(r,i&&t.node!==r.node&&e.node!==r.node)}}function Et(t,e){return et(e,me.eq(t)).map(vt).reverse()}function Nt(t,e){for(var n=t,i=0,r=e.length;i<r;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n}function Dt(t,e){var n=e&&e.isSkipPaddingBlankHTML,i=e&&e.isNotSplitEdgePoint;if(ht(t)&&(M(t.node)||i)){if(ct(t))return t.node;if(dt(t))return t.node.nextSibling}if(M(t.node))return t.node.splitText(t.offset);var r=t.node.childNodes[t.offset],o=ut(t.node.cloneNode(!1),t.node);return lt(o,ot(r)),n||(J(t.node),J(o)),o}function At(t,n,i){var e=et(n.node,me.eq(t));return e.length?1===e.length?Dt(n,i):e.reduce(function(t,e){return t===n.node&&(t=Dt(n,i)),Dt({node:e,offset:t?vt(t):X(e)},i)}):null}function It(t,e){var n,i,r=e?H:W,o=et(t.node,r),s=ge.last(o)||t.node;r(s)?(n=o[o.length-2],i=s):i=(n=s).parentNode;var a=n&&At(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return a||i!==t.node||(a=t.node.childNodes[t.offset]),{rightNode:a,container:i}}function Pt(t){return document.createElement(t)}function Rt(t){return document.createTextNode(t)}function Ot(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){for(var i=[],r=0,o=t.childNodes.length;r<o;r++)i.push(t.childNodes[r]);for(r=0,o=i.length;r<o;r++)n.insertBefore(i[r],t)}n.removeChild(t)}}function Mt(t,e){for(;t&&!P(t)&&e(t);){var n=t.parentNode;Ot(t),t=n}}function Ft(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=Pt(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),lt(n,ge.from(t.childNodes)),ut(n,t),Ot(t),n}function $t(t,e){var n=$e(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n}function Lt(t,e){var n=$t(t);if(e){var i=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;n=n.replace(i,function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||r?"\n":"")}),n=T.trim(n)}return n}function Ht(t){var e=T(t),n=e.offset(),i=e.outerHeight(!0);return{left:n.left,top:n.top+i}}function Bt(e,n){Object.keys(n).forEach(function(t){e.on(t,n[t])})}function zt(e,n){Object.keys(n).forEach(function(t){e.off(t,n[t])})}function jt(t){return t&&!M(t)&&ge.contains(t.classList,"note-styletag")}function Ut(t,e){var n,i,r=t.parentElement(),o=document.body.createTextRange(),s=ge.from(r.childNodes);for(n=0;n<s.length;n++)if(!Le.isText(s[n])){if(o.moveToElementText(s[n]),0<=o.compareEndPoints("StartToStart",t))break;i=s[n]}if(0!==n&&Le.isText(s[n-1])){var a=document.body.createTextRange(),u=null;a.moveToElementText(i||r),a.collapse(!i),u=i?i.nextSibling:r.firstChild;var l=t.duplicate();l.setEndPoint("StartToStart",a);for(var c=l.text.replace(/[\r\n]/g,"").length;c>u.nodeValue.length&&u.nextSibling;)c-=u.nodeValue.length,u=u.nextSibling;u.nodeValue;e&&u.nextSibling&&Le.isText(u.nextSibling)&&c===u.nodeValue.length&&(c-=u.nodeValue.length,u=u.nextSibling),r=u,n=c}return{cont:r,offset:n}}function qt(t){var s=function(t,e){var n,i;if(Le.isText(t)){var r=Le.listPrev(t,me.not(Le.isText)),o=ge.last(r).previousSibling;n=o||t.parentNode,e+=ge.sum(ge.tail(r),Le.nodeLength),i=!o}else{if(n=t.childNodes[e]||t,Le.isText(n))return s(n,0);e=0,i=!1}return{node:n,collapseToStart:i,offset:e}},e=document.body.createTextRange(),n=s(t.node,t.offset);return e.moveToElementText(n.node),e.collapse(n.collapseToStart),e.moveStart("character",n.offset),e}function Wt(t){return T.Deferred(function(n){T.extend(new FileReader,{onload:function(t){var e=t.target.result;n.resolve(e)},onerror:function(t){n.reject(t)}}).readAsDataURL(t)}).promise()}function Vt(n){return T.Deferred(function(t){var e=T("<img>");e.one("load",function(){e.off("error abort"),t.resolve(e)}).one("error abort",function(){e.off("load").detach(),t.reject(e)}).css({display:"none"}).appendTo(document.body).attr("src",n)}).promise()}T=T&&T.hasOwnProperty("default")?T["default"]:T;var Yt,Kt=function(){function t(t,e,n,i){this.markup=t,this.children=e,this.options=n,this.callback=i}return t.prototype.render=function(t){var n=T(this.markup);if(this.options&&this.options.contents&&n.html(this.options.contents),this.options&&this.options.className&&n.addClass(this.options.className),this.options&&this.options.data&&T.each(this.options.data,function(t,e){n.attr("data-"+t,e)}),this.options&&this.options.click&&n.on("click",this.options.click),this.children){var e=n.find(".note-children-container");this.children.forEach(function(t){t.render(e.length?e:n)})}return this.callback&&this.callback(n,this.options),this.options&&this.options.callback&&this.options.callback(n),t&&t.append(n),n},t}(),Gt={create:function(r,o){return function(t,e){var n="object"==typeof e?arguments[1]:arguments[0],i=T.isArray(arguments[0])?arguments[0]:[];return n&&n.children&&(i=n.children),new Kt(r,i,n,o)}}},Xt=Gt.create('<div class="note-editor note-frame panel"/>'),Qt=Gt.create('<div class="note-toolbar-wrapper panel-default"><div class="note-toolbar panel-heading" role="toolbar"></div></div>'),Jt=Gt.create('<div class="note-editing-area"/>'),Zt=Gt.create('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),te=Gt.create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),ee=Gt.create(['<output class="note-status-output" aria-live="polite"/>','<div class="note-statusbar" role="status">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),ne=Gt.create('<div class="note-editor"/>'),ie=Gt.create(['  <output class="note-status-output" aria-live="polite"/>','<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'].join("")),re=Gt.create('<div class="note-btn-group btn-group">'),oe=Gt.create('<ul class="dropdown-menu" role="list">',function(t,r){var e=T.isArray(r.items)?r.items.map(function(t){var e="string"==typeof t?t:t.value||"",n=r.template?r.template(t):t,i="object"==typeof t?t.option:undefined;return'<li role="listitem" aria-label="'+t+'"><a href="#" '+('data-value="'+e+'"'+(i!==undefined?' data-option="'+i+'"':""))+">"+n+"</a></li>"}).join(""):r.items;t.html(e).attr({"aria-label":r.title})}),se=function(t,e){return t+" "+he(e.icons.caret,"span")},ae=Gt.create('<ul class="dropdown-menu note-check" role="list">',function(t,i){var e=T.isArray(i.items)?i.items.map(function(t){var e="string"==typeof t?t:t.value||"",n=i.template?i.template(t):t;return'<li role="listitem" aria-label="'+t+'"><a href="#" data-value="'+e+'">'+he(i.checkClassName)+" "+n+"</a></li>"}).join(""):i.items;t.html(e).attr({"aria-label":i.title})}),ue=Gt.create('<div class="note-color-palette"/>',function(t,e){for(var n=[],i=0,r=e.colors.length;i<r;i++){for(var o=e.eventName,s=e.colors[i],a=e.colorsName[i],u=[],l=0,c=s.length;l<c;l++){var d=s[l],h=a[l];u.push(['<button type="button" class="note-color-btn"','style="background-color:',d,'" ','data-event="',o,'" ','data-value="',d,'" ','title="',h,'" ','aria-label="',h,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+u.join("")+"</div>")}t.html(n.join("")),e.tooltip&&t.find(".note-color-btn").tooltip({container:e.container,trigger:"hover",placement:"bottom"})}),le=Gt.create('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(t,e){e.fade&&t.addClass("fade"),t.attr({"aria-label":e.title}),t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))}),ce=Gt.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var n="undefined"!=typeof e.direction?e.direction:"bottom";t.addClass(n),e.hideArrow&&t.find(".arrow").hide()}),de=Gt.create('<div class="checkbox"></div>',function(t,e){t.html([" <label"+(e.id?' for="'+e.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(e.id?' id="'+e.id+'"':""),e.checked?" checked":"",' aria-checked="'+(e.checked?"true":"false")+'"/>',e.text?e.text:"","</label>"].join(""))}),he=function(t,e){return"<"+(e=e||"i")+' class="'+t+'"/>'},fe={editor:Xt,toolbar:Qt,editingArea:Jt,codable:Zt,editable:te,statusbar:ee,airEditor:ne,airEditable:ie,buttonGroup:re,dropdown:oe,dropdownButtonContents:se,dropdownCheck:ae,palette:ue,dialog:le,popover:ce,checkbox:de,icon:he,options:{},button:function(t,e){return Gt.create('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',function(t,e){e&&e.tooltip&&t.attr({title:e.tooltip,"aria-label":e.tooltip}).tooltip({container:e.container,trigger:"hover",placement:"bottom"})})(t,e)},toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var n=(e.airMode?fe.airEditor([fe.editingArea([fe.airEditable()])]):fe.editor([fe.toolbar(),fe.editingArea([fe.codable(),fe.editable()]),fe.statusbar()])).render();return n.insertAfter(t),{note:t,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}},pe=0,me={eq:t,eq2:e,peq2:n,ok:i,fail:r,self:a,not:o,and:s,invoke:u,uniqueId:l,rect2bnd:c,invertObject:d,namespaceToCamel:h,debounce:f},ge={head:p,last:m,initial:g,tail:v,prev:A,next:D,find:b,contains:_,all:y,sum:x,from:C,isEmpty:k,clusterBy:S,compact:E,unique:N},ve="function"==typeof define&&define.amd,be=navigator.userAgent,ye=/MSIE|Trident/i.test(be);if(ye){var we=/MSIE (\d+[.]\d+)/.exec(be);we&&(Yt=parseFloat(we[1])),(we=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(be))&&(Yt=parseFloat(we[1]))}var _e=/Edge\/\d+/.test(be),xe=!!window.CodeMirror;if(!xe&&ve)if("function"==typeof __webpack_require__)try{require.resolve("codemirror"),xe=!0}catch(Sn){}else if("undefined"!=typeof require)if("undefined"!=typeof require.resolve)try{require.resolve("codemirror"),xe=!0}catch(Sn){}else"undefined"!=typeof require.specified&&(xe=require.specified("codemirror"));var Ce="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints,ke=ye||_e?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",Se={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:ye,isEdge:_e,isFF:!_e&&/firefox/i.test(be),isPhantom:/PhantomJS/i.test(be),isWebkit:!_e&&/webkit/i.test(be),isChrome:!_e&&/chrome/i.test(be),isSafari:!_e&&/safari/i.test(be),browserVersion:Yt,jqueryVersion:parseFloat(T.fn.jquery),isSupportAmd:ve,isSupportTouch:Ce,hasCodeMirror:xe,isFontInstalled:I,isW3CRangeSupport:!!document.createRange,inputEventName:ke},Te=String.fromCharCode(160),Ee="\ufeff",Ne=O("PRE"),De=O("LI"),Ae=O("TABLE"),Ie=O("DATA"),Pe=O("HR"),Re=O("BLOCKQUOTE"),Oe=O("A"),Me=O("BODY"),Fe=Se.isMSIE&&Se.browserVersion<11?"&nbsp;":"<br>",$e=O("TEXTAREA"),Le={NBSP_CHAR:Te,ZERO_WIDTH_NBSP_CHAR:Ee,blank:Fe,emptyPara:"<p>"+Fe+"</p>",makePredByNodeName:O,isEditable:P,isControlSizing:R,isText:M,isElement:F,isVoid:L,isPara:H,isPurePara:z,isHeading:B,isInline:j,isBlock:me.not(j),isBodyInline:Y,isBody:Me,isParaInline:V,isPre:Ne,isList:U,isTable:Ae,isData:Ie,isCell:q,isBlockquote:Re,isBodyContainer:W,isAnchor:Oe,isDiv:O("DIV"),isLi:De,isBR:O("BR"),isSpan:O("SPAN"),isB:O("B"),isU:O("U"),isS:O("S"),isI:O("I"),isImg:O("IMG"),isTextarea:$e,isEmpty:Q,isEmptyAnchor:me.and(Oe,Q),isClosestSibling:K,withClosestSiblings:G,nodeLength:X,isLeftEdgePoint:ct,isRightEdgePoint:dt,isEdgePoint:ht,isLeftEdgeOf:ft,isRightEdgeOf:pt,isLeftEdgePointOf:mt,isRightEdgePointOf:gt,prevPoint:yt,nextPoint:wt,isSamePoint:_t,isVisiblePoint:xt,prevPointUntil:Ct,nextPointUntil:kt,isCharPoint:St,walkPoint:Tt,ancestor:Z,singleChildAncestor:tt,listAncestor:et,lastAncestor:nt,listNext:ot,listPrev:rt,listDescendant:st,commonAncestor:it,wrap:at,insertAfter:ut,appendChildNodes:lt,position:vt,hasChildren:bt,makeOffsetPath:Et,fromOffsetPath:Nt,splitTree:At,splitPoint:It,create:Pt,createText:Rt,remove:Ot,removeWhile:Mt,replace:Ft,html:Lt,value:$t,posFromPlaceholder:Ht,attachEvents:Bt,detachEvents:zt,isCustomStyleTag:jt};T.summernote=T.summernote||{lang:{}},T.extend(T.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var He={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},Be={isEdit:function(t){return ge.contains([He.BACKSPACE,He.TAB,He.ENTER,He.SPACE,He.DELETE],t)},isMove:function(t){return ge.contains([He.LEFT,He.UP,He.RIGHT,He.DOWN],t)},nameFromCode:me.invertObject(He),code:He},ze=function(){function o(t,e,n,i){this.sc=t,this.so=e,this.ec=n,this.eo=i,this.isOnEditable=this.makeIsOn(Le.isEditable),this.isOnList=this.makeIsOn(Le.isList),this.isOnAnchor=this.makeIsOn(Le.isAnchor),this.isOnCell=this.makeIsOn(Le.isCell),this.isOnData=this.makeIsOn(Le.isData)}return o.prototype.nativeRange=function(){if(Se.isW3CRangeSupport){var t=document.createRange();return t.setStart(this.sc,this.so),t.setEnd(this.ec,this.eo),t}var e=qt({node:this.sc,offset:this.so});return e.setEndPoint("EndToEnd",qt({node:this.ec,offset:this.eo})),e},o.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},o.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},o.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},o.prototype.select=function(){var t=this.nativeRange();if(Se.isW3CRangeSupport){var e=document.getSelection();0<e.rangeCount&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},o.prototype.scrollIntoView=function(t){var e=T(t).height();return t.scrollTop+e<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+e-this.sc.offsetTop)),this},o.prototype.normalize=function(){var t=function(t,e){if(Le.isVisiblePoint(t)&&!Le.isEdgePoint(t)||Le.isVisiblePoint(t)&&Le.isRightEdgePoint(t)&&!e||Le.isVisiblePoint(t)&&Le.isLeftEdgePoint(t)&&e||Le.isVisiblePoint(t)&&Le.isBlock(t.node)&&Le.isEmpty(t.node))return t;var n=Le.ancestor(t.node,Le.isBlock);if((Le.isLeftEdgePointOf(t,n)||Le.isVoid(Le.prevPoint(t).node))&&!e||(Le.isRightEdgePointOf(t,n)||Le.isVoid(Le.nextPoint(t).node))&&e){if(Le.isVisiblePoint(t))return t;e=!e}return(e?Le.nextPointUntil(Le.nextPoint(t),Le.isVisiblePoint):Le.prevPointUntil(Le.prevPoint(t),Le.isVisiblePoint))||t},e=t(this.getEndPoint(),!1),n=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new o(n.node,n.offset,e.node,e.offset)},o.prototype.nodes=function(n,t){n=n||me.ok;var i=t&&t.includeAncestor,r=t&&t.fullyContains,e=this.getStartPoint(),o=this.getEndPoint(),s=[],a=[];return Le.walkPoint(e,o,function(t){var e;Le.isEditable(t.node)||(r?(Le.isLeftEdgePoint(t)&&a.push(t.node),Le.isRightEdgePoint(t)&&ge.contains(a,t.node)&&(e=t.node)):e=i?Le.ancestor(t.node,n):t.node,e&&n(e)&&s.push(e))},!0),ge.unique(s)},o.prototype.commonAncestor=function(){return Le.commonAncestor(this.sc,this.ec)},o.prototype.expand=function(t){var e=Le.ancestor(this.sc,t),n=Le.ancestor(this.ec,t);if(!e&&!n)return new o(this.sc,this.so,this.ec,this.eo);var i=this.getPoints();return e&&(i.sc=e,i.so=0),n&&(i.ec=n,i.eo=Le.nodeLength(n)),new o(i.sc,i.so,i.ec,i.eo)},o.prototype.collapse=function(t){return t?new o(this.sc,this.so,this.sc,this.so):new o(this.ec,this.eo,this.ec,this.eo)},o.prototype.splitText=function(){var t=this.sc===this.ec,e=this.getPoints();return Le.isText(this.ec)&&!Le.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),Le.isText(this.sc)&&!Le.isEdgePoint(this.getStartPoint())&&(e.sc=this.sc.splitText(this.so),e.so=0,t&&(e.ec=e.sc,e.eo=this.eo-this.so)),new o(e.sc,e.so,e.ec,e.eo)},o.prototype.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),e=t.nodes(null,{fullyContains:!0}),i=Le.prevPointUntil(t.getStartPoint(),function(t){return!ge.contains(e,t.node)}),r=[];return T.each(e,function(t,e){var n=e.parentNode;i.node!==n&&1===Le.nodeLength(n)&&r.push(n),Le.remove(e,!1)}),T.each(r,function(t,e){Le.remove(e,!1)}),new o(i.node,i.offset,i.node,i.offset).normalize()},o.prototype.makeIsOn=function(e){return function(){var t=Le.ancestor(this.sc,e);return!!t&&t===Le.ancestor(this.ec,e)}},o.prototype.isLeftEdgeOf=function(t){if(!Le.isLeftEdgePoint(this.getStartPoint()))return!1;var e=Le.ancestor(this.sc,t);return e&&Le.isLeftEdgeOf(this.sc,e)},o.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},o.prototype.wrapBodyInlineWithPara=function(){if(Le.isBodyContainer(this.sc)&&Le.isEmpty(this.sc))return this.sc.innerHTML=Le.emptyPara,new o(this.sc.firstChild,0,this.sc.firstChild,0);var t,e=this.normalize();if(Le.isParaInline(this.sc)||Le.isPara(this.sc))return e;if(Le.isInline(e.sc)){var n=Le.listAncestor(e.sc,me.not(Le.isInline));t=ge.last(n),Le.isInline(t)||(t=n[n.length-2]||e.sc.childNodes[e.so])}else t=e.sc.childNodes[0<e.so?e.so-1:0];var i=Le.listPrev(t,Le.isParaInline).reverse();if((i=i.concat(Le.listNext(t.nextSibling,Le.isParaInline))).length){var r=Le.wrap(ge.head(i),"p");Le.appendChildNodes(r,ge.tail(i))}return this.normalize()},o.prototype.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=Le.splitPoint(e.getStartPoint(),Le.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},o.prototype.pasteHTML=function(t){var e=T("<div></div>").html(t)[0],n=ge.from(e.childNodes),i=this.wrapBodyInlineWithPara().deleteContents();return n.reverse().map(function(t){return i.insertNode(t)}).reverse()},o.prototype.toString=function(){var t=this.nativeRange();return Se.isW3CRangeSupport?t.toString():t.text},o.prototype.getWordRange=function(t){var e=this.getEndPoint();if(!Le.isCharPoint(e))return this;var n=Le.prevPointUntil(e,function(t){return!Le.isCharPoint(t)});return t&&(e=Le.nextPointUntil(e,function(t){return!Le.isCharPoint(t)})),new o(n.node,n.offset,e.node,e.offset)},o.prototype.bookmark=function(t){return{s:{path:Le.makeOffsetPath(t,this.sc),offset:this.so},e:{path:Le.makeOffsetPath(t,this.ec),offset:this.eo}}},o.prototype.paraBookmark=function(t){return{s:{path:ge.tail(Le.makeOffsetPath(ge.head(t),this.sc)),offset:this.so},e:{path:ge.tail(Le.makeOffsetPath(ge.last(t),this.ec)),offset:this.eo}}},o.prototype.getClientRects=function(){return this.nativeRange().getClientRects()},o}(),je={create:function(t,e,n,i){if(4===arguments.length)return new ze(t,e,n,i);if(2===arguments.length)return new ze(n=t,i=e,n,i);var r=this.createFromSelection();return r||1!==arguments.length?r:(r=this.createFromNode(arguments[0])).collapse(Le.emptyPara===arguments[0].innerHTML)},createFromSelection:function(){var t,e,n,i;if(Se.isW3CRangeSupport){var r=document.getSelection();if(!r||0===r.rangeCount)return null;if(Le.isBody(r.anchorNode))return null;var o=r.getRangeAt(0);t=o.startContainer,e=o.startOffset,n=o.endContainer,i=o.endOffset}else{var s=document.selection.createRange(),
a=s.duplicate();a.collapse(!1);var u=s;u.collapse(!0);var l=Ut(u,!0),c=Ut(a,!1);Le.isText(l.node)&&Le.isLeftEdgePoint(l)&&Le.isTextNode(c.node)&&Le.isRightEdgePoint(c)&&c.node.nextSibling===l.node&&(l=c),t=l.cont,e=l.offset,n=c.cont,i=c.offset}return new ze(t,e,n,i)},createFromNode:function(t){var e=t,n=0,i=t,r=Le.nodeLength(i);return Le.isVoid(e)&&(n=Le.listPrev(e).length-1,e=e.parentNode),Le.isBR(i)?(r=Le.listPrev(i).length-1,i=i.parentNode):Le.isVoid(i)&&(r=Le.listPrev(i).length,i=i.parentNode),this.create(e,n,i,r)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=Le.fromOffsetPath(t,e.s.path),i=e.s.offset,r=Le.fromOffsetPath(t,e.e.path),o=e.e.offset;return new ze(n,i,r,o)},createFromParaBookmark:function(t,e){var n=t.s.offset,i=t.e.offset,r=Le.fromOffsetPath(ge.head(e),t.s.path),o=Le.fromOffsetPath(ge.last(e),t.e.path);return new ze(r,n,o,i)}},Ue=function(){function t(t){this.stack=[],this.stackOffset=-1,this.$editable=t,this.editable=t[0]}return t.prototype.makeSnapshot=function(){var t=je.create(this.editable),e={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:t?t.bookmark(this.editable):e}},t.prototype.applySnapshot=function(t){null!==t.contents&&this.$editable.html(t.contents),null!==t.bookmark&&je.createFromBookmark(this.editable,t.bookmark).select()},t.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},t.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},t.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),0<this.stackOffset&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},t}(),qe=function(){function t(){}return t.prototype.jQueryCSS=function(n,t){if(Se.jqueryVersion<1.9){var i={};return T.each(t,function(t,e){i[e]=n.css(e)}),i}return n.css(t)},t.prototype.fromNode=function(t){var e=["font-family","font-size","text-align","list-style-type","line-height"],n=this.jQueryCSS(t,e)||{};return n["font-size"]=parseInt(n["font-size"],10),n},t.prototype.stylePara=function(t,n){T.each(t.nodes(Le.isPara,{includeAncestor:!0}),function(t,e){T(e).css(n)})},t.prototype.styleNodes=function(t,e){t=t.splitText();var n=e&&e.nodeName||"SPAN",i=!(!e||!e.expandClosestSibling),r=!(!e||!e.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(Le.create(n))];var o=Le.makePredByNodeName(n),s=t.nodes(Le.isText,{fullyContains:!0}).map(function(t){return Le.singleChildAncestor(t,o)||Le.wrap(t,n)});if(i){if(r){var a=t.nodes();o=me.and(o,function(t){return ge.contains(a,t)})}return s.map(function(t){var e=Le.withClosestSiblings(t,o),n=ge.head(e),i=ge.tail(e);return T.each(i,function(t,e){Le.appendChildNodes(n,e.childNodes),Le.remove(e)}),ge.head(e)})}return s},t.prototype.current=function(t){var e=T(Le.isElement(t.sc)?t.sc:t.sc.parentNode),n=this.fromNode(e);try{n=T.extend(n,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||n["font-family"]})}catch(Sn){}if(t.isOnList()){var i=["circle","disc","disc-leading-zero","square"],r=-1<T.inArray(n["list-style-type"],i);n["list-style"]=r?"unordered":"ordered"}else n["list-style"]="none";var o=Le.ancestor(t.sc,Le.isPara);if(o&&o.style["line-height"])n["line-height"]=o.style.lineHeight;else{var s=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=s.toFixed(1)}return n.anchor=t.isOnAnchor()&&Le.ancestor(t.sc,Le.isAnchor),n.ancestors=Le.listAncestor(t.sc,Le.isEditable),n.range=t,n},t}(),We=function(){function t(){}return t.prototype.insertOrderedList=function(t){this.toggleList("OL",t)},t.prototype.insertUnorderedList=function(t){this.toggleList("UL",t)},t.prototype.indent=function(t){var i=this,e=je.create(t).wrapBodyInlineWithPara(),n=e.nodes(Le.isPara,{includeAncestor:!0}),r=ge.clusterBy(n,me.peq2("parentNode"));T.each(r,function(t,e){var n=ge.head(e);Le.isLi(n)?i.wrapList(e,n.parentNode.nodeName):T.each(e,function(t,e){T(e).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),e.select()},t.prototype.outdent=function(t){var i=this,e=je.create(t).wrapBodyInlineWithPara(),n=e.nodes(Le.isPara,{includeAncestor:!0}),r=ge.clusterBy(n,me.peq2("parentNode"));T.each(r,function(t,e){var n=ge.head(e);Le.isLi(n)?i.releaseList([e]):T.each(e,function(t,e){T(e).css("marginLeft",function(t,e){return 25<(e=parseInt(e,10)||0)?e-25:""})})}),e.select()},t.prototype.toggleList=function(n,t){var i=this,e=je.create(t).wrapBodyInlineWithPara(),r=e.nodes(Le.isPara,{includeAncestor:!0}),o=e.paraBookmark(r),s=ge.clusterBy(r,me.peq2("parentNode"));if(ge.find(r,Le.isPurePara)){var a=[];T.each(s,function(t,e){a=a.concat(i.wrapList(e,n))}),r=a}else{var u=e.nodes(Le.isList,{includeAncestor:!0}).filter(function(t){return!T.nodeName(t,n)});u.length?T.each(u,function(t,e){Le.replace(e,n)}):r=this.releaseList(s,!0)}je.createFromParaBookmark(o,r).select()},t.prototype.wrapList=function(t,e){var n=ge.head(t),i=ge.last(t),r=Le.isList(n.previousSibling)&&n.previousSibling,o=Le.isList(i.nextSibling)&&i.nextSibling,s=r||Le.insertAfter(Le.create(e||"UL"),i);return t=t.map(function(t){return Le.isPurePara(t)?Le.replace(t,"LI"):t}),Le.appendChildNodes(s,t),o&&(Le.appendChildNodes(s,ge.from(o.childNodes)),Le.remove(o)),t},t.prototype.releaseList=function(t,u){var l=[];return T.each(t,function(t,e){var n=ge.head(e),i=ge.last(e),r=u?Le.lastAncestor(n,Le.isList):n.parentNode,o=1<r.childNodes.length?Le.splitTree(r,{node:i.parentNode,offset:Le.position(i)+1},{isSkipPaddingBlankHTML:!0}):null,s=Le.splitTree(r,{node:n.parentNode,offset:Le.position(n)},{isSkipPaddingBlankHTML:!0});e=u?Le.listDescendant(s,Le.isLi):ge.from(s.childNodes).filter(Le.isLi),!u&&Le.isList(r.parentNode)||(e=e.map(function(t){return Le.replace(t,"P")})),T.each(ge.from(e).reverse(),function(t,e){Le.insertAfter(e,r)});var a=ge.compact([r,s,o]);T.each(a,function(t,e){var n=[e].concat(Le.listDescendant(e,Le.isList));T.each(n.reverse(),function(t,e){Le.nodeLength(e)||Le.remove(e,!0)})}),l=l.concat(e)}),l},t}(),Ve=function(){function t(){this.bullet=new We}return t.prototype.insertTab=function(t,e){var n=Le.createText(new Array(e+1).join(Le.NBSP_CHAR));(t=t.deleteContents()).insertNode(n,!0),(t=je.create(n,e)).select()},t.prototype.insertParagraph=function(t){var e=je.create(t);e=(e=e.deleteContents()).wrapBodyInlineWithPara();var n,i=Le.ancestor(e.sc,Le.isPara);if(i){if(Le.isEmpty(i)&&Le.isLi(i))return void this.bullet.toggleList(i.parentNode.nodeName);if(Le.isEmpty(i)&&Le.isPara(i)&&Le.isBlockquote(i.parentNode))Le.insertAfter(i,i.parentNode),n=i;else{n=Le.splitTree(i,e.getStartPoint());var r=Le.listDescendant(i,Le.isEmptyAnchor);r=r.concat(Le.listDescendant(n,Le.isEmptyAnchor)),T.each(r,function(t,e){Le.remove(e)}),(Le.isHeading(n)||Le.isPre(n)||Le.isCustomStyleTag(n))&&Le.isEmpty(n)&&(n=Le.replace(n,"p"))}}else{var o=e.sc.childNodes[e.so];n=T(Le.emptyPara)[0],o?e.sc.insertBefore(n,o):e.sc.appendChild(n)}je.create(n,0).normalize().select().scrollIntoView(t)},t}(),Ye=function(t,l,c,r){function e(){t&&t.tagName&&("td"===t.tagName.toLowerCase()||"th"===t.tagName.toLowerCase())?(v.colPos=t.cellIndex,t.parentElement&&t.parentElement.tagName&&"tr"===t.parentElement.tagName.toLowerCase()?v.rowPos=t.parentElement.rowIndex:console.error("Impossible to identify start Row point.",t)):console.error("Impossible to identify start Cell point.",t)}function h(t,e,n,i,r,o,s){var a={baseRow:n,baseCell:i,isRowSpan:r,isColSpan:o,isVirtual:s};b[t]||(b[t]=[]),b[t][e]=a}function d(t,e,n,i){return{baseCell:t.baseCell,action:e,virtualTable:{rowIndex:n,cellIndex:i}}}function f(t,e){if(!b[t])return e;if(!b[t][e])return e;for(var n=e;b[t][n];)if(n++,!b[t][n])return n}function o(t,e){var n=f(t.rowIndex,e.cellIndex),i=1<e.colSpan,r=1<e.rowSpan,o=t.rowIndex===v.rowPos&&e.cellIndex===v.colPos;h(t.rowIndex,n,t,e,r,i,!1);var s=e.attributes.rowSpan?parseInt(e.attributes.rowSpan.value,10):0;if(1<s)for(var a=1;a<s;a++){var u=t.rowIndex+a;p(u,n,e,o),h(u,n,t,e,!0,i,!0)}var l=e.attributes.colSpan?parseInt(e.attributes.colSpan.value,10):0;if(1<l)for(var c=1;c<l;c++){var d=f(t.rowIndex,n+c);p(t.rowIndex,d,e,o),h(t.rowIndex,d,t,e,r,!0,!0)}}function p(t,e,n,i){t===v.rowPos&&v.colPos>=n.cellIndex&&n.cellIndex<=e&&!i&&v.colPos++}function n(){for(var t=r.rows,e=0;e<t.length;e++)for(var n=t[e].cells,i=0;i<n.length;i++)o(t[e],n[i])}function m(t){switch(l){case Ye.where.Column:if(t.isColSpan)return Ye.resultAction.SubtractSpanCount;break;case Ye.where.Row:if(!t.isVirtual&&t.isRowSpan)return Ye.resultAction.AddCell;if(t.isRowSpan)return Ye.resultAction.SubtractSpanCount}return Ye.resultAction.RemoveCell}function g(t){switch(l){case Ye.where.Column:if(t.isColSpan)return Ye.resultAction.SumSpanCount;if(t.isRowSpan&&t.isVirtual)return Ye.resultAction.Ignore;break;case Ye.where.Row:if(t.isRowSpan)return Ye.resultAction.SumSpanCount;if(t.isColSpan&&t.isVirtual)return Ye.resultAction.Ignore}return Ye.resultAction.AddCell}function i(){e(),n()}var v={colPos:0,rowPos:0},b=[],y=[];this.getActionList=function(){for(var t=l===Ye.where.Row?v.rowPos:-1,e=l===Ye.where.Column?v.colPos:-1,n=0,i=!0;i;){var r=0<=t?t:n,o=0<=e?e:n,s=b[r];if(!s)return i=!1,y;var a=s[o];if(!a)return i=!1,y;var u=Ye.resultAction.Ignore;switch(c){case Ye.requestAction.Add:u=g(a);break;case Ye.requestAction.Delete:u=m(a)}y.push(d(a,u,r,o)),n++}return y},i()};Ye.where={Row:0,Column:1},Ye.requestAction={Add:0,Delete:1},Ye.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Ke,Ge=function(){function t(){}return t.prototype.tab=function(t,e){var n=Le.ancestor(t.commonAncestor(),Le.isCell),i=Le.ancestor(n,Le.isTable),r=Le.listDescendant(i,Le.isCell),o=ge[e?"prev":"next"](r,n);o&&je.create(o,0).select()},t.prototype.addRow=function(t,e){for(var n=Le.ancestor(t.commonAncestor(),Le.isCell),i=T(n).closest("tr"),r=this.recoverAttributes(i),o=T("<tr"+r+"></tr>"),s=new Ye(n,Ye.where.Row,Ye.requestAction.Add,T(i).closest("table")[0]).getActionList(),a=0;a<s.length;a++){var u=s[a],l=this.recoverAttributes(u.baseCell);switch(u.action){case Ye.resultAction.AddCell:o.append("<td"+l+">"+Le.blank+"</td>");break;case Ye.resultAction.SumSpanCount:if("top"===e)if((u.baseCell.parent?u.baseCell.closest("tr").rowIndex:0)<=i[0].rowIndex){var c=T("<div></div>").append(T("<td"+l+">"+Le.blank+"</td>").removeAttr("rowspan")).html();o.append(c);break}var d=parseInt(u.baseCell.rowSpan,10);d++,u.baseCell.setAttribute("rowSpan",d)}}if("top"===e)i.before(o);else{if(1<n.rowSpan){var h=i[0].rowIndex+(n.rowSpan-2);return void T(T(i).parent().find("tr")[h]).after(T(o))}i.after(o)}},t.prototype.addCol=function(t,e){var n=Le.ancestor(t.commonAncestor(),Le.isCell),i=T(n).closest("tr");T(i).siblings().push(i);for(var r=new Ye(n,Ye.where.Column,Ye.requestAction.Add,T(i).closest("table")[0]).getActionList(),o=0;o<r.length;o++){var s=r[o],a=this.recoverAttributes(s.baseCell);switch(s.action){case Ye.resultAction.AddCell:"right"===e?T(s.baseCell).after("<td"+a+">"+Le.blank+"</td>"):T(s.baseCell).before("<td"+a+">"+Le.blank+"</td>");break;case Ye.resultAction.SumSpanCount:if("right"===e){var u=parseInt(s.baseCell.colSpan,10);u++,s.baseCell.setAttribute("colSpan",u)}else T(s.baseCell).before("<td"+a+">"+Le.blank+"</td>")}}},t.prototype.recoverAttributes=function(t){var e="";if(!t)return e;for(var n=t.attributes||[],i=0;i<n.length;i++)"id"!==n[i].name.toLowerCase()&&n[i].specified&&(e+=" "+n[i].name+"='"+n[i].value+"'");return e},t.prototype.deleteRow=function(t){for(var e=Le.ancestor(t.commonAncestor(),Le.isCell),n=T(e).closest("tr"),i=n.children("td, th").index(T(e)),r=n[0].rowIndex,o=new Ye(e,Ye.where.Row,Ye.requestAction.Delete,T(n).closest("table")[0]).getActionList(),s=0;s<o.length;s++)if(o[s]){var a=o[s].baseCell,u=o[s].virtualTable,l=a.rowSpan&&1<a.rowSpan,c=l?parseInt(a.rowSpan,10):0;switch(o[s].action){case Ye.resultAction.Ignore:continue;case Ye.resultAction.AddCell:var d=n.next("tr")[0];if(!d)continue;var h=n[0].cells[i];l&&(2<c?(c--,d.insertBefore(h,d.cells[i]),d.cells[i].setAttribute("rowSpan",c),d.cells[i].innerHTML=""):2===c&&(d.insertBefore(h,d.cells[i]),d.cells[i].removeAttribute("rowSpan"),d.cells[i].innerHTML=""));continue;case Ye.resultAction.SubtractSpanCount:l&&(2<c?(c--,a.setAttribute("rowSpan",c),u.rowIndex!==r&&a.cellIndex===i&&(a.innerHTML="")):2===c&&(a.removeAttribute("rowSpan"),u.rowIndex!==r&&a.cellIndex===i&&(a.innerHTML="")));continue;case Ye.resultAction.RemoveCell:continue}}n.remove()},t.prototype.deleteCol=function(t){for(var e=Le.ancestor(t.commonAncestor(),Le.isCell),n=T(e).closest("tr"),i=n.children("td, th").index(T(e)),r=new Ye(e,Ye.where.Column,Ye.requestAction.Delete,T(n).closest("table")[0]).getActionList(),o=0;o<r.length;o++)if(r[o])switch(r[o].action){case Ye.resultAction.Ignore:continue;case Ye.resultAction.SubtractSpanCount:var s=r[o].baseCell;if(s.colSpan&&1<s.colSpan){var a=s.colSpan?parseInt(s.colSpan,10):0;2<a?(a--,s.setAttribute("colSpan",a),s.cellIndex===i&&(s.innerHTML="")):2===a&&(s.removeAttribute("colSpan"),s.cellIndex===i&&(s.innerHTML=""))}continue;case Ye.resultAction.RemoveCell:Le.remove(r[o].baseCell,!0);continue}},t.prototype.createTable=function(t,e,n){for(var i,r=[],o=0;o<t;o++)r.push("<td>"+Le.blank+"</td>");i=r.join("");for(var s,a=[],u=0;u<e;u++)a.push("<tr>"+i+"</tr>");s=a.join("");var l=T("<table>"+s+"</table>");return n&&n.tableClassName&&l.addClass(n.tableClassName),l[0]},t.prototype.deleteTable=function(t){var e=Le.ancestor(t.commonAncestor(),Le.isCell);T(e).closest("table").remove()},t}(),Xe="bogus",Qe=function(){function t(t){var c=this;this.context=t,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new qe,this.table=new Ge,this.typing=new Ve,this.bullet=new We,this.history=new Ue(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var e=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],n=0,i=e.length;n<i;n++)this[e[n]]=function(e){return function(t){c.beforeCommand(),document.execCommand(e,!1,t),c.afterCommand(!0)}}(e[n]),this.context.memo("help."+e[n],this.lang.help[e[n]]);this.fontName=this.wrapCommand(function(t){return c.fontStyling("font-family","'"+t+"'")}),this.fontSize=this.wrapCommand(function(t){return c.fontStyling("font-size",t+"px")});for(n=1;n<=6;n++)this["formatH"+n]=function(t){return function(){c.formatBlock("H"+t)}}(n),this.context.memo("help.formatH"+n,this.lang.help["formatH"+n]);this.insertParagraph=this.wrapCommand(function(){c.typing.insertParagraph(c.editable)}),this.insertOrderedList=this.wrapCommand(function(){c.bullet.insertOrderedList(c.editable)}),this.insertUnorderedList=this.wrapCommand(function(){c.bullet.insertUnorderedList(c.editable)}),this.indent=this.wrapCommand(function(){c.bullet.indent(c.editable)}),this.outdent=this.wrapCommand(function(){c.bullet.outdent(c.editable)}),this.insertNode=this.wrapCommand(function(t){c.isLimited(T(t).text().length)||(c.createRange().insertNode(t),je.createFromNodeAfter(t).select())}),this.insertText=this.wrapCommand(function(t){if(!c.isLimited(t.length)){var e=c.createRange().insertNode(Le.createText(t));je.create(e,Le.nodeLength(e)).select()}}),this.pasteHTML=this.wrapCommand(function(t){if(!c.isLimited(t.length)){var e=c.createRange().pasteHTML(t);je.createFromNodeAfter(ge.last(e)).select()}}),this.formatBlock=this.wrapCommand(function(t,e){var n=c.options.callbacks.onApplyCustomStyle;n?n.call(c,e,c.context,c.onFormatBlock):c.onFormatBlock(t,e)}),this.insertHorizontalRule=this.wrapCommand(function(){var t=c.createRange().insertNode(Le.create("HR"));t.nextSibling&&je.create(t.nextSibling,0).normalize().select()}),this.lineHeight=this.wrapCommand(function(t){c.style.stylePara(c.createRange(),{lineHeight:t})}),this.createLink=this.wrapCommand(function(t){var n=t.url,e=t.text,i=t.isNewWindow,r=t.range||c.createRange(),o=r.toString()!==e;"string"==typeof n&&(n=n.trim()),n=c.options.onCreateLink?c.options.onCreateLink(n):/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(n)?n:"http://"+n;var s=[];if(o){var a=(r=r.deleteContents()).insertNode(T("<A>"+e+"</A>")[0]);s.push(a)}else s=c.style.styleNodes(r,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});T.each(s,function(t,e){T(e).attr("href",n),i?T(e).attr("target","_blank"):T(e).removeAttr("target")});var u=je.createFromNodeBefore(ge.head(s)).getStartPoint(),l=je.createFromNodeAfter(ge.last(s)).getEndPoint();je.create(u.node,u.offset,l.node,l.offset).select()}),this.color=this.wrapCommand(function(t){var e=t.foreColor,n=t.backColor;e&&document.execCommand("foreColor",!1,e),n&&document.execCommand("backColor",!1,n)}),this.foreColor=this.wrapCommand(function(t){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,t)}),this.insertTable=this.wrapCommand(function(t){var e=t.split("x");c.createRange().deleteContents().insertNode(c.table.createTable(e[0],e[1],c.options))}),this.removeMedia=this.wrapCommand(function(){var t=T(c.restoreTarget()).parent();t.parent("figure").length?t.parent("figure").remove():t=T(c.restoreTarget()).detach(),c.context.triggerEvent("media.delete",t,c.$editable)}),this.floatMe=this.wrapCommand(function(t){var e=T(c.restoreTarget());e.toggleClass("note-float-left","left"===t),e.toggleClass("note-float-right","right"===t),e.css("float",t)}),this.resize=this.wrapCommand(function(t){T(c.restoreTarget()).css({width:100*t+"%",height:""})})}return t.prototype.initialize=function(){var e=this;this.$editable.on("keydown",function(t){if(t.keyCode===Be.code.ENTER&&e.context.triggerEvent("enter",t),e.context.triggerEvent("keydown",t),t.isDefaultPrevented()||(e.options.shortcuts?e.handleKeyMap(t):e.preventDefaultEditableShortCuts(t)),e.isLimited(1,t))return!1}).on("keyup",function(t){e.context.triggerEvent("keyup",t)}).on("focus",function(t){e.context.triggerEvent("focus",t)}).on("blur",function(t){e.context.triggerEvent("blur",t)}).on("mousedown",function(t){e.context.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.context.triggerEvent("mouseup",t)}).on("scroll",function(t){e.context.triggerEvent("scroll",t)}).on("paste",function(t){e.context.triggerEvent("paste",t)}),this.$editable.html(Le.html(this.$note)||Le.emptyPara),this.$editable.on(Se.inputEventName,me.debounce(function(){e.context.triggerEvent("change",e.$editable.html())},100)),this.$editor.on("focusin",function(t){e.context.triggerEvent("focusin",t)}).on("focusout",function(t){e.context.triggerEvent("focusout",t)}),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo()},t.prototype.destroy=function(){this.$editable.off()},t.prototype.handleKeyMap=function(t){var e=this.options.keyMap[Se.isMac?"mac":"pc"],n=[];t.metaKey&&n.push("CMD"),t.ctrlKey&&!t.altKey&&n.push("CTRL"),t.shiftKey&&n.push("SHIFT");var i=Be.nameFromCode[t.keyCode];i&&n.push(i);var r=e[n.join("+")];r?!1!==this.context.invoke(r)&&t.preventDefault():Be.isEdit(t.keyCode)&&this.afterCommand()},t.prototype.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&ge.contains([66,73,85],t.keyCode)&&t.preventDefault()},t.prototype.isLimited=function(t,e){return t=t||0,(void 0===e||!(Be.isMove(e.keyCode)||e.ctrlKey||e.metaKey||ge.contains([Be.code.BACKSPACE,Be.code.DELETE],e.keyCode)))&&(0<this.options.maxTextLength&&this.$editable.text().length+t>=this.options.maxTextLength)},t.prototype.createRange=function(){return this.focus(),je.create(this.editable)},t.prototype.saveRange=function(t){this.lastRange=this.createRange(),t&&this.lastRange.collapse().select()},t.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},t.prototype.saveTarget=function(t){this.$editable.data("target",t)},t.prototype.clearTarget=function(){this.$editable.removeData("target")},t.prototype.restoreTarget=function(){return this.$editable.data("target")},t.prototype.currentStyle=function(){var t=je.create();return t&&(t=t.normalize()),t?this.style.current(t):this.style.fromNode(this.$editable)},t.prototype.styleFromNode=function(t){return this.style.fromNode(t)},t.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},t.prototype.afterCommand=function(t){this.normalizeContent(),this.history.recordUndo(),t||this.context.triggerEvent("change",this.$editable.html())},t.prototype.tab=function(){var t=this.createRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(t,this.options.tabSize),this.afterCommand())}},t.prototype.untab=function(){var t=this.createRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t,!0);else if(0===this.options.tabSize)return!1},t.prototype.wrapCommand=function(t){var e=this;return function(){e.beforeCommand(),t.apply(e,arguments),e.afterCommand()}},t.prototype.insertImage=function(t,e){var n=this;return Vt(t,e).then(function(t){n.beforeCommand(),"function"==typeof e?e(t):("string"==typeof e&&t.attr("data-filename",e),t.css("width",Math.min(n.$editable.width(),t.width()))),t.show(),je.create(n.editable).insertNode(t[0]),je.createFromNodeAfter(t[0]).select(),n.afterCommand()}).fail(function(t){n.context.triggerEvent("image.upload.error",t)})},t.prototype.insertImages=function(t){var i=this;T.each(t,function(t,e){var n=e.name;i.options.maximumImageFileSize&&i.options.maximumImageFileSize<e.size?i.context.triggerEvent("image.upload.error",i.lang.image.maximumFileSizeError):Wt(e).then(function(t){return i.insertImage(t,n)}).fail(function(){i.context.triggerEvent("image.upload.error")})})},t.prototype.insertImagesOrCallback=function(t){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",t):this.insertImages(t)},t.prototype.getSelectedText=function(){var t=this.createRange();return t.isOnAnchor()&&(t=je.createFromNode(Le.ancestor(t.sc,Le.isAnchor))),t.toString()},t.prototype.onFormatBlock=function(t,e){if(t=Se.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t),e&&e.length){var n=e[0].className||"";if(n){var i=this.createRange();T([i.sc,i.ec]).closest(t).addClass(n)}}},t.prototype.formatPara=function(){this.formatBlock("P")},t.prototype.fontStyling=function(t,e){var n=this.createRange();if(n){var i=this.style.styleNodes(n);if(T(i).css(t,e),n.isCollapsed()){var r=ge.head(i);r&&!Le.nodeLength(r)&&(r.innerHTML=Le.ZERO_WIDTH_NBSP_CHAR,je.createFromNodeAfter(r.firstChild).select(),this.$editable.data(Xe,r))}}},t.prototype.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=Le.ancestor(t.sc,Le.isAnchor);(t=je.createFromNode(e)).select(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},t.prototype.getLinkInfo=function(){var t=this.createRange().expand(Le.isAnchor),e=T(ge.head(t.nodes(Le.isAnchor))),n={range:t,text:t.toString(),url:e.length?e.attr("href"):""};return e.length&&(n.isNewWindow="_blank"===e.attr("target")),n},t.prototype.addRow=function(t){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addRow(e,t),this.afterCommand())},t.prototype.addCol=function(t){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addCol(e,t),this.afterCommand())},t.prototype.deleteRow=function(){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(t),this.afterCommand())},t.prototype.deleteCol=function(){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(t),this.afterCommand())},t.prototype.deleteTable=function(){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(t),this.afterCommand())},t.prototype.resizeTo=function(t,e,n){var i;if(n){var r=t.y/t.x,o=e.data("ratio");i={width:r<o?t.x:t.y/o,height:r<o?t.x*o:t.y}}else i={width:t.x,height:t.y};e.css(i)},t.prototype.hasFocus=function(){return this.$editable.is(":focus")},t.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},t.prototype.isEmpty=function(){return Le.isEmpty(this.$editable[0])||Le.emptyPara===this.$editable.html()},t.prototype.empty=function(){this.context.invoke("code",Le.emptyPara)},t.prototype.normalizeContent=function(){this.$editable[0].normalize()},t}(),Je=function(){function t(t){this.context=t,this.$editable=t.layoutInfo.editable}return t.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},t.prototype.pasteByEvent=function(t){var e=t.originalEvent.clipboardData;if(e&&e.items&&e.items.length){var n=ge.head(e.items);"file"===n.kind&&-1!==n.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[n.getAsFile()]),this.context.invoke("editor.afterCommand")}},t}(),Ze=function(){function t(t){this.context=t,this.$eventListener=T(document),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=T(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return t.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(t){t.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},t.prototype.attachDragAndDropEvent=function(){var r=this,i=T(),o=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(t){var e=r.context.invoke("codeview.isActivated"),n=0<r.$editor.width()&&0<r.$editor.height();e||i.length||!n||(r.$editor.addClass("dragover"),r.$dropzone.width(r.$editor.width()),r.$dropzone.height(r.$editor.height()),o.text(r.lang.image.dragImageHere)),i=i.add(t.target)},this.documentEventHandlers.onDragleave=function(t){(i=i.not(t.target)).length||r.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){i=T(),r.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){r.$dropzone.addClass("hover"),o.text(r.lang.image.dropImage)}).on("dragleave",function(){r.$dropzone.removeClass("hover"),o.text(r.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(t){var i=t.originalEvent.dataTransfer;t.preventDefault(),i&&i.files&&i.files.length?(r.$editable.focus(),r.context.invoke("editor.insertImagesOrCallback",i.files)):T.each(i.types,function(t,e){var n=i.getData(e);-1<e.toLowerCase().indexOf("text")?r.context.invoke("editor.pasteHTML",n):T(n).each(function(t,e){r.context.invoke("editor.insertNode",e)})})}).on("dragover",!1)},t.prototype.destroy=function(){var e=this;Object.keys(this.documentEventHandlers).forEach(function(t){e.$eventListener.off(t.substr(2).toLowerCase(),e.documentEventHandlers[t])}),this.documentEventHandlers={}},t}();Se.hasCodeMirror&&(Se.isSupportAmd?require(["codemirror"],function(t){Ke=t}):Ke=window.CodeMirror);var tn=function(){function t(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options}return t.prototype.sync=function(){this.isActivated()&&Se.hasCodeMirror&&this.$codable.data("cmEditor").save()},t.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},t.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},t.prototype.activate=function(){var e=this;if(this.$codable.val(Le.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),Se.hasCodeMirror){var n=Ke.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var i=new Ke.TernServer(this.options.codemirror.tern);n.ternServer=i,n.on("cursorActivity",function(t){i.updateArgHints(t)})}n.on("blur",function(t){e.context.triggerEvent("blur.codeview",n.getValue(),t)}),n.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",n)}else this.$codable.on("blur",function(t){e.context.triggerEvent("blur.codeview",e.$codable.val(),t)})},t.prototype.deactivate=function(){if(Se.hasCodeMirror){var t=this.$codable.data("cmEditor");this.$codable.val(t.getValue()),t.toTextArea()}var e=Le.value(this.$codable,this.options.prettifyHtml)||Le.emptyPara,n=this.$editable.html()!==e;this.$editable.html(e),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),n&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},t.prototype.destroy=function(){this.isActivated()&&this.deactivate()},t}(),en=24,nn=function(){function t(t){this.$document=T(document),this.$statusbar=t.layoutInfo.statusbar,this.$editable=t.layoutInfo.editable,this.options=t.options}return t.prototype.initialize=function(){var i=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var n=i.$editable.offset().top-i.$document.scrollTop(),e=function(t){var e=t.clientY-(n+en);e=0<i.options.minheight?Math.max(e,i.options.minheight):e,e=0<i.options.maxHeight?Math.min(e,i.options.maxHeight):e,i.$editable.height(e)};i.$document.on("mousemove",e).one("mouseup",function(){i.$document.off("mousemove",e)})})},t.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},t}(),rn=function(){function t(t){var e=this;this.context=t,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.$window=T(window),this.$scrollbar=T("html, body"),this.onResize=function(){e.resizeTo({h:e.$window.height()-e.$toolbar.outerHeight()})}}return t.prototype.resizeTo=function(t){this.$editable.css("height",t.h),this.$codable.css("height",t.h),
this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,t.h)},t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},t}(),on=function(){function t(t){var n=this;this.context=t,this.$document=T(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(t,e){n.update(e.target)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()},"summernote.disable":function(){n.hide()},"summernote.codeview.toggled":function(){n.update()}}}return t.prototype.initialize=function(){var o=this;this.$handle=T(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(t){if(Le.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();var e=o.$handle.find(".note-control-selection").data("target"),n=e.offset(),i=o.$document.scrollTop(),r=function(t){o.context.invoke("editor.resizeTo",{x:t.clientX-n.left,y:t.clientY-(n.top-i)},e,!t.shiftKey),o.update(e[0])};o.$document.on("mousemove",r).one("mouseup",function(t){t.preventDefault(),o.$document.off("mousemove",r),o.context.invoke("editor.afterCommand")}),e.data("ratio")||e.data("ratio",e.height()/e.width())}}),this.$handle.on("wheel",function(t){t.preventDefault(),o.update()})},t.prototype.destroy=function(){this.$handle.remove()},t.prototype.update=function(t){if(this.context.isDisabled())return!1;var e=Le.isImg(t),n=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",t),e){var i=T(t),r=i.position(),o={left:r.left+parseInt(i.css("marginLeft"),10),top:r.top+parseInt(i.css("marginTop"),10)},s={w:i.outerWidth(!1),h:i.outerHeight(!1)};n.css({display:"block",left:o.left,top:o.top,width:s.w,height:s.h}).data("target",i);var a=new Image;a.src=i.attr("src");var u=s.w+"x"+s.h+" ("+this.lang.image.original+": "+a.width+"x"+a.height+")";n.find(".note-control-selection-info").text(u),this.context.invoke("editor.saveTarget",t)}else this.hide();return e},t.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},t}(),sn="http://",an=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,un=function(){function t(t){var n=this;this.context=t,this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||n.handleKeyup(e)},"summernote.keydown":function(t,e){n.handleKeydown(e)}}}return t.prototype.initialize=function(){this.lastWordRange=null},t.prototype.destroy=function(){this.lastWordRange=null},t.prototype.replace=function(){if(this.lastWordRange){var t=this.lastWordRange.toString(),e=t.match(an);if(e&&(e[1]||e[2])){var n=e[1]?t:sn+t,i=T("<a />").html(t).attr("href",n)[0];this.lastWordRange.insertNode(i),this.lastWordRange=null,this.context.invoke("editor.focus")}}},t.prototype.handleKeydown=function(t){if(ge.contains([Be.code.ENTER,Be.code.SPACE],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=e}},t.prototype.handleKeyup=function(t){ge.contains([Be.code.ENTER,Be.code.SPACE],t.keyCode)&&this.replace()},t}(),ln=function(){function t(t){var e=this;this.$note=t.layoutInfo.note,this.events={"summernote.change":function(){e.$note.val(t.invoke("code"))}}}return t.prototype.shouldInitialize=function(){return Le.isTextarea(this.$note[0])},t}(),cn=function(){function t(t){var e=this;this.context=t,this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.events={"summernote.init summernote.change":function(){e.update()},"summernote.codeview.toggled":function(){e.update()}}}return t.prototype.shouldInitialize=function(){return!!this.options.placeholder},t.prototype.initialize=function(){var t=this;this.$placeholder=T('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.context.invoke("focus")}).text(this.options.placeholder).prependTo(this.$editingArea),this.update()},t.prototype.destroy=function(){this.$placeholder.remove()},t.prototype.update=function(){var t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)},t}(),dn=function(){function t(t){this.ui=T.summernote.ui,this.context=t,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.invertedKeyMap=me.invertObject(this.options.keyMap[Se.isMac?"mac":"pc"])}return t.prototype.representShortcut=function(t){var e=this.invertedKeyMap[t];return this.options.shortcuts&&e?(Se.isMac&&(e=e.replace("CMD","\u2318").replace("SHIFT","\u21e7"))," ("+(e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""},t.prototype.button=function(t){return!this.options.tooltip&&t.tooltip&&delete t.tooltip,t.container=this.options.container,this.ui.button(t)},t.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},t.prototype.destroy=function(){delete this.fontInstalledMap},t.prototype.isFontInstalled=function(t){return this.fontInstalledMap.hasOwnProperty(t)||(this.fontInstalledMap[t]=Se.isFontInstalled(t)||ge.contains(this.options.fontNamesIgnoreCheck,t)),this.fontInstalledMap[t]},t.prototype.isFontDeservedToAdd=function(t){var e=["sans-serif","serif","monospace","cursive","fantasy"];return""!==(t=t.toLowerCase())&&this.isFontInstalled(t)&&-1===T.inArray(t,e)},t.prototype.addToolbarButtons=function(){var a=this;this.context.memo("button.style",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.magic),a.options),tooltip:a.lang.style.style,data:{toggle:"dropdown"}}),a.ui.dropdown({className:"dropdown-style",items:a.options.styleTags,title:a.lang.style.style,template:function(t){"string"==typeof t&&(t={tag:t,title:a.lang.style.hasOwnProperty(t)?a.lang.style[t]:t});var e=t.tag,n=t.title;return"<"+e+(t.style?' style="'+t.style+'" ':"")+(t.className?' class="'+t.className+'"':"")+">"+n+"</"+e+">"},click:a.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var t=function(t){var e=n.options.styleTags[t];n.context.memo("button.style."+e,function(){return a.button({className:"note-btn-style-"+e,contents:'<div data-value="'+e+'">'+e.toUpperCase()+"</div>",tooltip:a.lang.style[e],click:a.context.createInvokeHandler("editor.formatBlock")}).render()})},n=this,e=0,i=this.options.styleTags.length;e<i;e++)t(e,i);this.context.memo("button.bold",function(){return a.button({className:"note-btn-bold",contents:a.ui.icon(a.options.icons.bold),tooltip:a.lang.font.bold+a.representShortcut("bold"),click:a.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return a.button({className:"note-btn-italic",contents:a.ui.icon(a.options.icons.italic),tooltip:a.lang.font.italic+a.representShortcut("italic"),click:a.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return a.button({className:"note-btn-underline",contents:a.ui.icon(a.options.icons.underline),tooltip:a.lang.font.underline+a.representShortcut("underline"),click:a.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return a.button({contents:a.ui.icon(a.options.icons.eraser),tooltip:a.lang.font.clear+a.representShortcut("removeFormat"),click:a.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return a.button({className:"note-btn-strikethrough",contents:a.ui.icon(a.options.icons.strikethrough),tooltip:a.lang.font.strikethrough+a.representShortcut("strikethrough"),click:a.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return a.button({className:"note-btn-superscript",contents:a.ui.icon(a.options.icons.superscript),tooltip:a.lang.font.superscript,click:a.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return a.button({className:"note-btn-subscript",contents:a.ui.icon(a.options.icons.subscript),tooltip:a.lang.font.subscript,click:a.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var t=a.context.invoke("editor.currentStyle");return T.each(t["font-family"].split(","),function(t,e){e=e.trim().replace(/['"]+/g,""),a.isFontDeservedToAdd(e)&&-1===T.inArray(e,a.options.fontNames)&&a.options.fontNames.push(e)}),a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('<span class="note-current-fontname"/>',a.options),tooltip:a.lang.font.name,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:a.options.icons.menuCheck,items:a.options.fontNames.filter(a.isFontInstalled.bind(a)),title:a.lang.font.name,template:function(t){return"<span style=\"font-family: '"+t+"'\">"+t+"</span>"},click:a.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',a.options),tooltip:a.lang.font.size,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:a.options.icons.menuCheck,items:a.options.fontSizes,title:a.lang.font.size,click:a.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.color",function(){return a.ui.buttonGroup({className:"note-color",children:[a.button({className:"note-current-color-button",contents:a.ui.icon(a.options.icons.font+" note-recent-color"),tooltip:a.lang.color.recent,click:function(t){var e=T(t.currentTarget);a.context.invoke("editor.color",{backColor:e.attr("data-backColor"),foreColor:e.attr("data-foreColor")})},callback:function(t){t.find(".note-recent-color").css("background-color","#FFFF00"),t.attr("data-backColor","#FFFF00")}}),a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents("",a.options),tooltip:a.lang.color.more,data:{toggle:"dropdown"}}),a.ui.dropdown({items:['<div class="note-palette">','  <div class="note-palette-title">'+a.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',a.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="note-palette">','  <div class="note-palette-title">'+a.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',a.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>"].join(""),callback:function(t){t.find(".note-holder").each(function(t,e){var n=T(e);n.append(a.ui.palette({colors:a.options.colors,colorsName:a.options.colorsName,eventName:n.data("event"),container:a.options.container,tooltip:a.options.tooltip}).render())})},click:function(t){var e=T(t.target),n=e.data("event"),i=e.data("value");if(n&&i){var r="backColor"===n?"background-color":"color",o=e.closest(".note-color").find(".note-recent-color"),s=e.closest(".note-color").find(".note-current-color-button");o.css(r,i),s.attr("data-"+n,i),a.context.invoke("editor."+n,i)}}})]}).render()}),this.context.memo("button.ul",function(){return a.button({contents:a.ui.icon(a.options.icons.unorderedlist),tooltip:a.lang.lists.unordered+a.representShortcut("insertUnorderedList"),click:a.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return a.button({contents:a.ui.icon(a.options.icons.orderedlist),tooltip:a.lang.lists.ordered+a.representShortcut("insertOrderedList"),click:a.context.createInvokeHandler("editor.insertOrderedList")}).render()});var r=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),o=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),s=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),u=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),l=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),c=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",me.invoke(r,"render")),this.context.memo("button.justifyCenter",me.invoke(o,"render")),this.context.memo("button.justifyRight",me.invoke(s,"render")),this.context.memo("button.justifyFull",me.invoke(u,"render")),this.context.memo("button.outdent",me.invoke(l,"render")),this.context.memo("button.indent",me.invoke(c,"render")),this.context.memo("button.paragraph",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.alignLeft),a.options),tooltip:a.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),a.ui.dropdown([a.ui.buttonGroup({className:"note-align",children:[r,o,s,u]}),a.ui.buttonGroup({className:"note-list",children:[l,c]})])]).render()}),this.context.memo("button.height",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.textHeight),a.options),tooltip:a.lang.font.height,data:{toggle:"dropdown"}}),a.ui.dropdownCheck({items:a.options.lineHeights,checkClassName:a.options.icons.menuCheck,className:"dropdown-line-height",title:a.lang.font.height,click:a.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return a.ui.buttonGroup([a.button({className:"dropdown-toggle",contents:a.ui.dropdownButtonContents(a.ui.icon(a.options.icons.table),a.options),tooltip:a.lang.table.table,data:{toggle:"dropdown"}}),a.ui.dropdown({title:a.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){t.find(".note-dimension-picker-mousecatcher").css({width:a.options.insertTableMaxSize.col+"em",height:a.options.insertTableMaxSize.row+"em"}).mousedown(a.context.createInvokeHandler("editor.insertTable")).on("mousemove",a.tableMoveHandler.bind(a))}}).render()}),this.context.memo("button.link",function(){return a.button({contents:a.ui.icon(a.options.icons.link),tooltip:a.lang.link.link+a.representShortcut("linkDialog.show"),click:a.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return a.button({contents:a.ui.icon(a.options.icons.picture),tooltip:a.lang.image.image,click:a.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return a.button({contents:a.ui.icon(a.options.icons.video),tooltip:a.lang.video.video,click:a.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return a.button({contents:a.ui.icon(a.options.icons.minus),tooltip:a.lang.hr.insert+a.representShortcut("insertHorizontalRule"),click:a.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return a.button({className:"btn-fullscreen",contents:a.ui.icon(a.options.icons.arrowsAlt),tooltip:a.lang.options.fullscreen,click:a.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return a.button({className:"btn-codeview",contents:a.ui.icon(a.options.icons.code),tooltip:a.lang.options.codeview,click:a.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return a.button({contents:a.ui.icon(a.options.icons.redo),tooltip:a.lang.history.redo+a.representShortcut("redo"),click:a.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return a.button({contents:a.ui.icon(a.options.icons.undo),tooltip:a.lang.history.undo+a.representShortcut("undo"),click:a.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return a.button({contents:a.ui.icon(a.options.icons.question),tooltip:a.lang.options.help,click:a.context.createInvokeHandler("helpDialog.show")}).render()})},t.prototype.addImagePopoverButtons=function(){var t=this;this.context.memo("button.imageSize100",function(){return t.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:t.lang.image.resizeFull,click:t.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.imageSize50",function(){return t.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:t.lang.image.resizeHalf,click:t.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.imageSize25",function(){return t.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:t.lang.image.resizeQuarter,click:t.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.floatLeft",function(){return t.button({contents:t.ui.icon(t.options.icons.alignLeft),tooltip:t.lang.image.floatLeft,click:t.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return t.button({contents:t.ui.icon(t.options.icons.alignRight),tooltip:t.lang.image.floatRight,click:t.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return t.button({contents:t.ui.icon(t.options.icons.alignJustify),tooltip:t.lang.image.floatNone,click:t.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return t.button({contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.image.remove,click:t.context.createInvokeHandler("editor.removeMedia")}).render()})},t.prototype.addLinkPopoverButtons=function(){var t=this;this.context.memo("button.linkDialogShow",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.edit,click:t.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return t.button({contents:t.ui.icon(t.options.icons.unlink),tooltip:t.lang.link.unlink,click:t.context.createInvokeHandler("editor.unlink")}).render()})},t.prototype.addTablePopoverButtons=function(){var t=this;this.context.memo("button.addRowUp",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowAbove),tooltip:t.lang.table.addRowAbove,click:t.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowBelow),tooltip:t.lang.table.addRowBelow,click:t.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colBefore),tooltip:t.lang.table.addColLeft,click:t.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colAfter),tooltip:t.lang.table.addColRight,click:t.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowRemove),tooltip:t.lang.table.delRow,click:t.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colRemove),tooltip:t.lang.table.delCol,click:t.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.table.delTable,click:t.context.createInvokeHandler("editor.deleteTable")}).render()})},t.prototype.build=function(t,e){for(var n=0,i=e.length;n<i;n++){for(var r=e[n],o=T.isArray(r)?r[0]:r,s=T.isArray(r)?1===r.length?[r[0]]:r[1]:[r],a=this.ui.buttonGroup({className:"note-"+o}).render(),u=0,l=s.length;u<l;u++){var c=this.context.memo("button."+s[u]);c&&a.append("function"==typeof c?c(this.context):c)}a.appendTo(t)}},t.prototype.updateCurrentStyle=function(t){var i=this,e=t||this.$toolbar,n=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(e,{".note-btn-bold":function(){return"bold"===n["font-bold"]},".note-btn-italic":function(){return"italic"===n["font-italic"]},".note-btn-underline":function(){return"underline"===n["font-underline"]},".note-btn-subscript":function(){return"subscript"===n["font-subscript"]},".note-btn-superscript":function(){return"superscript"===n["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===n["font-strikethrough"]}}),n["font-family"]){var r=n["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),o=ge.find(r,this.isFontInstalled.bind(this));e.find(".dropdown-fontname a").each(function(t,e){var n=T(e),i=n.data("value")+""==o+"";n.toggleClass("checked",i)}),e.find(".note-current-fontname").text(o).css("font-family",o)}if(n["font-size"]){var s=n["font-size"];e.find(".dropdown-fontsize a").each(function(t,e){var n=T(e),i=n.data("value")+""==s+"";n.toggleClass("checked",i)}),e.find(".note-current-fontsize").text(s)}if(n["line-height"]){var a=n["line-height"];e.find(".dropdown-line-height li a").each(function(t,e){var n=T(e).data("value")+""==a+"";i.className=n?"checked":""})}},t.prototype.updateBtnStates=function(n,t){var i=this;T.each(t,function(t,e){i.ui.toggleBtnActive(n.find(t),e())})},t.prototype.tableMoveHandler=function(t){var e,n=18,i=T(t.target.parentNode),r=i.next(),o=i.find(".note-dimension-picker-mousecatcher"),s=i.find(".note-dimension-picker-highlighted"),a=i.find(".note-dimension-picker-unhighlighted");if(t.offsetX===undefined){var u=T(t.target).offset();e={x:t.pageX-u.left,y:t.pageY-u.top}}else e={x:t.offsetX,y:t.offsetY};var l={c:Math.ceil(e.x/n)||1,r:Math.ceil(e.y/n)||1};s.css({width:l.c+"em",height:l.r+"em"}),o.data("value",l.c+"x"+l.r),3<l.c&&l.c<this.options.insertTableMaxSize.col&&a.css({width:l.c+1+"em"}),3<l.r&&l.r<this.options.insertTableMaxSize.row&&a.css({height:l.r+1+"em"}),r.html(l.c+" x "+l.r)},t}(),hn=function(){function t(t){this.context=t,this.$window=T(window),this.$document=T(document),this.ui=T.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.followScroll=this.followScroll.bind(this)}return t.prototype.shouldInitialize=function(){return!this.options.airMode},t.prototype.initialize=function(){var t=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){t.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},t.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},t.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var t=this.$toolbar.parent(".note-toolbar-wrapper"),e=this.$editor.outerHeight(),n=this.$editor.width(),i=this.$toolbar.height();t.css({height:i});var r=0;this.options.otherStaticBar&&(r=T(this.options.otherStaticBar).outerHeight());var o=this.$document.scrollTop(),s=this.$editor.offset().top;s-r<o&&o<s+e-r-i?this.$toolbar.css({position:"fixed",top:r,width:n}):this.$toolbar.css({position:"relative",top:0,width:"100%"})},t.prototype.changeContainer=function(t){t?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer)},t.prototype.updateFullscreen=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t),this.changeContainer(t)},t.prototype.updateCodeview=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t),t?this.deactivate():this.activate()},t.prototype.activate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!0)},t.prototype.deactivate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!1)},t}(),fn=function(){function t(t){this.context=t,this.ui=T.summernote.ui,this.$body=T(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control  note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":T("<div/>").append(this.ui.checkbox({id:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),n='<button type="submit" href="#" class="'+"btn btn-primary note-btn note-btn-primary note-link-btn"+'" disabled>'+this.lang.link.insert+"</button>";this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Be.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},t.prototype.toggleLinkBtn=function(t,e,n){this.ui.toggleBtn(t,e.val()&&n.val())},t.prototype.showLinkDialog=function(u){var l=this;return T.Deferred(function(i){var r=l.$dialog.find(".note-link-text"),o=l.$dialog.find(".note-link-url"),s=l.$dialog.find(".note-link-btn"),a=l.$dialog.find("input[type=checkbox]");l.ui.onDialogShown(l.$dialog,function(){l.context.triggerEvent("dialog.shown"),u.url||(u.url=u.text),r.val(u.text);var t=function(){l.toggleLinkBtn(s,r,o),u.text=r.val()};r.on("input",t).on("paste",function(){setTimeout(t,0)});var e=function(){l.toggleLinkBtn(s,r,o),u.text||r.val(o.val())};o.on("input",e).on("paste",function(){setTimeout(e,0)}).val(u.url),Se.isSupportTouch||o.trigger("focus"),l.toggleLinkBtn(s,r,o),l.bindEnterKey(o,s),l.bindEnterKey(r,s);var n=u.isNewWindow!==undefined?u.isNewWindow:l.context.options.linkTargetBlank;a.prop("checked",n),s.one("click",function(t){t.preventDefault(),i.resolve({range:u.range,url:o.val(),text:r.val(),isNewWindow:a.is(":checked")}),l.ui.hideDialog(l.$dialog)})}),l.ui.onDialogHidden(l.$dialog,function(){r.off("input paste keypress"),o.off("input paste keypress"),s.off("click"),"pending"===i.state()&&i.reject()}),l.ui.showDialog(l.$dialog)}).promise()},t.prototype.show=function(){var e=this,t=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(t).then(function(t){e.context.invoke("editor.restoreRange"),e.context.invoke("editor.createLink",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t}(),pn=function(){function t(t){var e=this;this.context=t,this.ui=T.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){e.update()},"summernote.disable summernote.dialog.shown":function(){e.hide()}}}return t.prototype.shouldInitialize=function(){return!ge.isEmpty(this.options.popover.link)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(t){t.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var t=this.context.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var e=Le.ancestor(t.sc,Le.isAnchor),n=T(e).attr("href");this.$popover.find("a").attr("href",n).html(n);var i=Le.posFromPlaceholder(e);this.$popover.css({display:"block",left:i.left,top:i.top})}else this.hide()}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),mn=function(){function t(t){this.context=t,this.ui=T.summernote.ui,this.$body=T(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e="";if(this.options.maximumImageFileSize){var n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),i=1*(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)+" "+" KMGTP"[n]+"B";e="<small>"+this.lang.image.maximumFileSize+" : "+i+"</small>"}var r=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',e,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join(""),o='<button type="submit" href="#" class="'+"btn btn-primary note-btn note-btn-primary note-image-btn"+'" disabled>'+this.lang.image.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:r,footer:o}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(t,e){t.on("keypress",
function(t){t.keyCode===Be.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(t){e.ui.hideDialog(e.$dialog),e.context.invoke("editor.restoreRange"),"string"==typeof t?e.context.invoke("editor.insertImage",t):e.context.invoke("editor.insertImagesOrCallback",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t.prototype.showImageDialog=function(){var r=this;return T.Deferred(function(e){var t=r.$dialog.find(".note-image-input"),n=r.$dialog.find(".note-image-url"),i=r.$dialog.find(".note-image-btn");r.ui.onDialogShown(r.$dialog,function(){r.context.triggerEvent("dialog.shown"),t.replaceWith(t.clone().on("change",function(t){e.resolve(t.target.files||t.target.value)}).val("")),i.click(function(t){t.preventDefault(),e.resolve(n.val())}),n.on("keyup paste",function(){var t=n.val();r.ui.toggleBtn(i,t)}).val(""),Se.isSupportTouch||n.trigger("focus"),r.bindEnterKey(n,i)}),r.ui.onDialogHidden(r.$dialog,function(){t.off("change"),n.off("keyup paste keypress"),i.off("click"),"pending"===e.state()&&e.reject()}),r.ui.showDialog(r.$dialog)})},t}(),gn=function(){function t(t){var e=this;this.context=t,this.ui=T.summernote.ui,this.editable=t.layoutInfo.editable[0],this.options=t.options,this.events={"summernote.disable":function(){e.hide()}}}return t.prototype.shouldInitialize=function(){return!ge.isEmpty(this.options.popover.image)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(t){if(Le.isImg(t)){var e=Le.posFromPlaceholder(t),n=Le.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:e.left,top:this.options.popatmouse?event.pageY:Math.min(e.top,n.top)})}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),vn=function(){function t(t){var n=this;this.context=t,this.ui=T.summernote.ui,this.options=t.options,this.events={"summernote.mousedown":function(t,e){n.update(e.target)},"summernote.keyup summernote.scroll summernote.change":function(){n.update()},"summernote.disable":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return!ge.isEmpty(this.options.popover.table)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table),Se.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(t){if(this.context.isDisabled())return!1;var e=Le.isCell(t);if(e){var n=Le.posFromPlaceholder(t);this.$popover.css({display:"block",left:n.left,top:n.top})}else this.hide();return e},t.prototype.hide=function(){this.$popover.hide()},t}(),bn=function(){function t(t){this.context=t,this.ui=T.summernote.ui,this.$body=T(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join(""),n='<button type="submit" href="#" class="'+"btn btn-primary note-btn note-btn-primary note-video-btn"+'" disabled>'+this.lang.video.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===Be.code.ENTER&&(t.preventDefault(),e.trigger("click"))})},t.prototype.createVideoNode=function(t){var e,n=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,i=t.match(n),r=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,o=t.match(r),s=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,a=t.match(s),u=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/,l=t.match(u),c=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,d=t.match(c),h=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,f=t.match(h),p=/\/\/v\.qq\.com.*?vid=(.+)/,m=t.match(p),g=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/,v=t.match(g),b=/^.+.(mp4|m4v)$/,y=t.match(b),w=/^.+.(ogg|ogv)$/,_=t.match(w),x=/^.+.(webm)$/,C=t.match(x);if(i&&11===i[1].length){var k=i[1];e=T("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+k).attr("width","640").attr("height","360")}else if(o&&o[0].length)e=T("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+o[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(a&&a[0].length)e=T("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(l&&l[3].length)e=T("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+l[3]).attr("width","640").attr("height","360");else if(d&&d[2].length)e=T("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+d[2]).attr("width","640").attr("height","360");else if(f&&f[1].length)e=T("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1]);else if(m&&m[1].length||v&&v[2].length){var S=m&&m[1].length?m[1]:v[2];e=T("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+S+"&amp;auto=0")}else{if(!(y||_||C))return!1;e=T("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return e.addClass("note-video-clip"),e[0]},t.prototype.show=function(){var n=this,t=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(t).then(function(t){n.ui.hideDialog(n.$dialog),n.context.invoke("editor.restoreRange");var e=n.createVideoNode(t);e&&n.context.invoke("editor.insertNode",e)}).fail(function(){n.context.invoke("editor.restoreRange")})},t.prototype.showVideoDialog=function(i){var r=this;return T.Deferred(function(e){var n=r.$dialog.find(".note-video-url"),t=r.$dialog.find(".note-video-btn");r.ui.onDialogShown(r.$dialog,function(){r.context.triggerEvent("dialog.shown"),n.val(i).on("input",function(){r.ui.toggleBtn(t,n.val())}),Se.isSupportTouch||n.trigger("focus"),t.click(function(t){t.preventDefault(),e.resolve(n.val())}),r.bindEnterKey(n,t)}),r.ui.onDialogHidden(r.$dialog,function(){n.off("input"),t.off("click"),"pending"===e.state()&&e.reject()}),r.ui.showDialog(r.$dialog)})},t}(),yn=function(){function t(t){this.context=t,this.ui=T.summernote.ui,this.$body=T(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.10</a> \xb7 ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> \xb7 ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:function(t){t.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.createShortcutList=function(){var i=this,r=this.options.keyMap[Se.isMac?"mac":"pc"];return Object.keys(r).map(function(t){var e=r[t],n=T('<div><div class="help-list-item"/></div>');return n.append(T("<label><kbd>"+t+"</kdb></label>").css({width:180,"margin-right":10})).append(T("<span/>").html(i.context.memo("help."+e)||e)),n.html()}).join("")},t.prototype.showHelpDialog=function(){var e=this;return T.Deferred(function(t){e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown"),t.resolve()}),e.ui.showDialog(e.$dialog)}).promise()},t.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){t.context.invoke("editor.restoreRange")})},t}(),wn=20,_n=function(){function t(t){var n=this;this.context=t,this.ui=T.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){n.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){n.hide()},"summernote.focusout":function(t,e){Se.isFF||e.relatedTarget&&Le.ancestor(e.relatedTarget,me.eq(n.$popover[0]))||n.hide()}}}return t.prototype.shouldInitialize=function(){return this.options.airMode&&!ge.isEmpty(this.options.popover.air)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content");this.context.invoke("buttons.build",t,this.options.popover.air)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){var t=this.context.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var e=ge.last(t.range.getClientRects());if(e){var n=me.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-wn,top:n.top+n.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),xn=5,Cn=function(){function t(t){var n=this;this.context=t,this.ui=T.summernote.ui,this.$editable=t.layoutInfo.editable,this.options=t.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=T.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||n.handleKeyup(e)},"summernote.keydown":function(t,e){n.handleKeydown(e)},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}return t.prototype.shouldInitialize=function(){return 0<this.hints.length},t.prototype.initialize=function(){var t=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(){t.$content.find(".active").removeClass("active"),T(t).addClass("active"),t.replace()})},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},t.prototype.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var n=t.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},t.prototype.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var n=t.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},t.prototype.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);this.lastWordRange.insertNode(e),je.createFromNode(e).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},t.prototype.nodeFromItem=function(t){var e=this.hints[t.data("index")],n=t.data("item"),i=e.content?e.content(n):n;return"string"==typeof i&&(i=Le.createText(i)),i},t.prototype.createItemTemplates=function(n,t){var i=this.hints[n];return t.map(function(t){var e=T('<div class="note-hint-item"/>');return e.append(i.template?i.template(t):t+""),e.data({index:n,item:t}),e})},t.prototype.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===Be.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===Be.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===Be.code.DOWN&&(t.preventDefault(),this.moveDown()))},t.prototype.searchKeyword=function(t,e,n){var i=this.hints[t];if(i&&i.match.test(e)&&i.search){var r=i.match.exec(e);i.search(r[1],n)}else n()},t.prototype.createGroup=function(e,t){var n=this,i=T('<div class="note-hint-group note-hint-group-'+e+'"/>');return this.searchKeyword(e,t,function(t){(t=t||[]).length&&(i.html(n.createItemTemplates(e,t)),n.show())}),i},t.prototype.handleKeyup=function(t){var n=this;if(!ge.contains([Be.code.ENTER,Be.code.UP,Be.code.DOWN],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange(),i=e.toString();if(this.hints.length&&i){this.$content.empty();var r=me.rect2bnd(ge.last(e.getClientRects()));r&&(this.$popover.hide(),this.lastWordRange=e,this.hints.forEach(function(t,e){t.match.test(i)&&n.createGroup(e,i).appendTo(n.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),"top"===this.direction?this.$popover.css({left:r.left,top:r.top-this.$popover.outerHeight()-xn}):this.$popover.css({left:r.left,top:r.top+r.height+xn}))}else this.hide()}},t.prototype.show=function(){this.$popover.show()},t.prototype.hide=function(){this.$popover.hide()},t}(),kn=function(){function t(t,e){this.ui=T.summernote.ui,this.$note=t,this.memos={},this.modules={},this.layoutInfo={},this.options=e,this.initialize()}return t.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},t.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},t.prototype.reset=function(){var t=this.isDisabled();this.code(Le.emptyPara),this._destroy(),this._initialize(),t&&this.disable()},t.prototype._initialize=function(){var e=this,n=T.extend({},this.options.buttons);Object.keys(n).forEach(function(t){e.memo("button."+t,n[t])});var i=T.extend({},this.options.modules,T.summernote.plugins||{});Object.keys(i).forEach(function(t){e.module(t,i[t],!0)}),Object.keys(this.modules).forEach(function(t){e.initializeModule(t)})},t.prototype._destroy=function(){var e=this;Object.keys(this.modules).reverse().forEach(function(t){e.removeModule(t)}),Object.keys(this.memos).forEach(function(t){e.removeMemo(t)}),this.triggerEvent("destroy",this)},t.prototype.code=function(t){var e=this.invoke("codeview.isActivated");if(t===undefined)return this.invoke("codeview.sync"),e?this.layoutInfo.codable.val():this.layoutInfo.editable.html();e?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t),this.$note.val(t),this.triggerEvent("change",t)},t.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},t.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},t.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},t.prototype.triggerEvent=function(){var t=ge.head(arguments),e=ge.tail(ge.from(arguments)),n=this.options.callbacks[me.namespaceToCamel(t,"on")];n&&n.apply(this.$note[0],e),this.$note.trigger("summernote."+t,e)},t.prototype.initializeModule=function(t){var e=this.modules[t];e.shouldInitialize=e.shouldInitialize||me.ok,e.shouldInitialize()&&(e.initialize&&e.initialize(),e.events&&Le.attachEvents(this.$note,e.events))},t.prototype.module=function(t,e,n){if(1===arguments.length)return this.modules[t];this.modules[t]=new e(this),n||this.initializeModule(t)},t.prototype.removeModule=function(t){var e=this.modules[t];e.shouldInitialize()&&(e.events&&Le.detachEvents(this.$note,e.events),e.destroy&&e.destroy()),delete this.modules[t]},t.prototype.memo=function(t,e){if(1===arguments.length)return this.memos[t];this.memos[t]=e},t.prototype.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},t.prototype.createInvokeHandlerAndUpdateState=function(e,n){var i=this;return function(t){i.createInvokeHandler(e,n)(t),i.invoke("buttons.updateCurrentStyle")}},t.prototype.createInvokeHandler=function(n,i){var r=this;return function(t){t.preventDefault();var e=T(t.target);r.invoke(n,i||e.closest("[data-value]").data("value"),e)}},t.prototype.invoke=function(){var t=ge.head(arguments),e=ge.tail(ge.from(arguments)),n=t.split("."),i=1<n.length,r=i&&ge.head(n),o=i?ge.last(n):ge.head(n),s=this.modules[r||"editor"];return!r&&this[o]?this[o].apply(this,e):s&&s[o]&&s.shouldInitialize()?s[o].apply(s,e):void 0},t}();T.fn.extend({summernote:function(){var t=T.type(ge.head(arguments)),e="string"===t,n="object"===t,r=T.extend({},T.summernote.options,n?ge.head(arguments):{});r.langInfo=T.extend(!0,{},T.summernote.lang["en-US"],T.summernote.lang[r.lang]),r.icons=T.extend(!0,{},T.summernote.options.icons,r.icons),r.tooltip="auto"===r.tooltip?!Se.isSupportTouch:r.tooltip,this.each(function(t,e){var n=T(e);if(!n.data("summernote")){var i=new kn(n,r);n.data("summernote",i),n.data("summernote").triggerEvent("init",i.layoutInfo)}});var i=this.first();if(i.length){var o=i.data("summernote");if(e)return o.invoke.apply(o,ge.from(arguments));r.focus&&o.invoke("editor.focus")}return this}}),T.summernote=T.extend(T.summernote,{version:"0.8.10",ui:fe,dom:Le,plugins:{},options:{modules:{editor:Qe,clipboard:Je,dropzone:Ze,codeview:tn,statusbar:nn,fullscreen:rn,handle:on,hintPopover:Cn,autoLink:un,autoSync:ln,placeholder:cn,buttons:dn,toolbar:hn,linkDialog:fn,linkPopover:pn,imageDialog:mn,imagePopover:gn,tablePopover:vn,videoDialog:bn,helpDialog:yn,airPopover:_n},buttons:{},lang:"en-US",followingToolbar:!0,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(l){l.extend(!0,l.summernote.lang,{"en-US":{cleaner:{tooltip:"Cleaner",not:"Text has been Cleaned!!!",limitText:"Text",limitHTML:"HTML"}}}),l.extend(l.summernote.options,{cleaner:{action:"both",newline:"<br>",notStyle:"position:absolute;top:0;left:0;right:0",icon:'<i class="note-icon"><svg xmlns="http://www.w3.org/2000/svg" id="libre-paintbrush" viewBox="0 0 14 14" width="14" height="14"><path d="m 11.821425,1 q 0.46875,0 0.82031,0.311384 0.35157,0.311384 0.35157,0.780134 0,0.421875 -0.30134,1.01116 -2.22322,4.212054 -3.11384,5.035715 -0.64956,0.609375 -1.45982,0.609375 -0.84375,0 -1.44978,-0.61942 -0.60603,-0.61942 -0.60603,-1.469866 0,-0.857143 0.61608,-1.419643 l 4.27232,-3.877232 Q 11.345985,1 11.821425,1 z m -6.08705,6.924107 q 0.26116,0.508928 0.71317,0.870536 0.45201,0.361607 1.00781,0.508928 l 0.007,0.475447 q 0.0268,1.426339 -0.86719,2.32366 Q 5.700895,13 4.261155,13 q -0.82366,0 -1.45982,-0.311384 -0.63616,-0.311384 -1.0212,-0.853795 -0.38505,-0.54241 -0.57924,-1.225446 -0.1942,-0.683036 -0.1942,-1.473214 0.0469,0.03348 0.27455,0.200893 0.22768,0.16741 0.41518,0.29799 0.1875,0.130581 0.39509,0.24442 0.20759,0.113839 0.30804,0.113839 0.27455,0 0.3683,-0.247767 0.16741,-0.441965 0.38505,-0.753349 0.21763,-0.311383 0.4654,-0.508928 0.24776,-0.197545 0.58928,-0.31808 0.34152,-0.120536 0.68974,-0.170759 0.34821,-0.05022 0.83705,-0.07031 z"/></svg></i>',keepHtml:!0,keepOnlyTags:[],keepClasses:!1,badTags:["style","script","applet","embed","noframes","noscript","html"],badAttributes:["style","start"],limitChars:520,limitDisplay:"both",limitStop:!1}}),l.extend(l.summernote.plugins,{cleaner:function(t){var e=l.summernote.ui,o=t.layoutInfo.note,s=t.layoutInfo.editor,p=t.options,a=p.langInfo,u=function(t,e){var n=t;if(!p.cleaner.keepClasses){var i=/(\n|\r| class=(")?Mso[a-zA-Z]+(")?)/g;n=t.replace(i," ")}var r=/(\n)+/g;if(n=n.replace(r,e),p.cleaner.keepHtml){var o=new RegExp("<!--(.*?)-->","gi");n=n.replace(o,"");var s=new RegExp("<(/)*(meta|link|\\?xml:|st1:|o:|font)(.*?)>","gi");n=n.replace(s,"");for(var a=p.cleaner.badTags,u=0;u<a.length;u++)s=new RegExp("<"+a[u]+"\\b.*>.*</"+a[u]+">","gi"),n=n.replace(s,"");var l=p.cleaner.keepOnlyTags;if(void 0===l&&(l=[]),0<l.length){l=(((l||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;n=n.replace(c,function(t,e){return-1<l.indexOf("<"+e.toLowerCase()+">")?t:""})}for(var d=p.cleaner.badAttributes,h=0;h<d.length;h++){var f=new RegExp(" "+d[h]+"=['|\"](.*?)['|\"]","gi");n=n.replace(f,"")}}return n};"both"!=p.cleaner.action&&"button"!=p.cleaner.action||t.memo("button.cleaner",function(){return e.button({contents:p.cleaner.icon,tooltip:a.cleaner.tooltip,click:function(){o.summernote("createRange").toString()?o.summernote("pasteHTML",o.summernote("createRange").toString()):o.summernote("code",u(o.summernote("code"))),0<l(".note-status-output").length?l(".note-status-output").html('<div class="alert alert-success">'+a.cleaner.not+"</div>"):s.find(".note-editing-area").append('<div class="alert alert-success" style="'+p.cleaner.notStyle+'">'+a.cleaner.not+"</div>")}}).render()}),this.events={"summernote.init":function(){if(l(".note-status-output").length<1&&(l(".note-statusbar").prepend('<output class="note-status-output"></output>'),l("head").append("<style>.note-statusbar .note-status-output{display:block;padding-top:7px;width:100%;font-size:14px;line-height:1.42857143;height:25px;color:#000}.note-statusbar .pull-right{float:right!important}.note-statusbar .note-status-output .text-muted{color:#777}.note-statusbar .note-status-output .text-primary{color:#286090}.note-statusbar .note-status-output .text-success{color:#3c763d}.note-statusbar .note-status-output .text-info{color:#31708f}.note-statusbar .note-status-output .text-warning{color:#8a6d3b}.note-statusbar .note-status-output .text-danger{color:#a94442}.note-statusbar .alert{margin:-7px 0 0 0;padding:2px 10px;border:1px solid transparent;border-radius:0}.note-statusbar .alert .note-icon{margin-right:5px}.note-statusbar .alert-success{color:#3c763d!important;background-color: #dff0d8 !important;border-color:#d6e9c6}.note-statusbar .alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.note-statusbar .alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.note-statusbar .alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}</style>")),0!=p.cleaner.limitChars||"none"!=p.cleaner.limitDisplay){var t=l(".note-editable").text().replace(/(<([^>]+)>)/gi,"").replace(/( )/," "),e=l(".note-editable").html(),n="";t.length>p.cleaner.limitChars&&0<p.cleaner.limitChars?n+='text-danger">':n+='">',"text"!=p.cleaner.limitDisplay&&"both"!=p.cleaner.limitDisplay||(n+=a.cleaner.limitText+": "+t.length),"both"==p.cleaner.limitDisplay&&(n+=" / "),"html"!=p.cleaner.limitDisplay&&"both"!=p.cleaner.limitDisplay||(n+=a.cleaner.limitHTML+": "+e.length),l(".note-status-output").html('<small class="pull-right '+n+"&nbsp;</small>")}},"summernote.keydown":function(t,e){if(0!=p.cleaner.limitChars||"none"!=p.cleaner.limitDisplay){var n=l(".note-editable").text().replace(/(<([^>]+)>)/gi,"").replace(/( )/," "),i=l(".note-editable").html(),r="";if(1==p.cleaner.limitStop&&n.length>=p.cleaner.limitChars){var o=e.keyCode;if(allowed_keys=[8,37,38,39,40,46],-1!=l.inArray(o,allowed_keys))return l(".cleanerLimit").removeClass("text-danger"),!0;l(".cleanerLimit").addClass("text-danger"),e.preventDefault(),e.stopPropagation()}else n.length>p.cleaner.limitChars&&0<p.cleaner.limitChars?r+='text-danger">':r+='">',"text"!=p.cleaner.limitDisplay&&"both"!=p.cleaner.limitDisplay||(r+=a.cleaner.limitText+": "+n.length),"both"==p.cleaner.limitDisplay&&(r+=" / "),"html"!=p.cleaner.limitDisplay&&"both"!=p.cleaner.limitDisplay||(r+=a.cleaner.limitHTML+": "+i.length),l(".note-status-output").html('<small class="cleanerLimit pull-right '+r+"&nbsp;</small>")}},"summernote.paste":function(t,e){if("both"==p.cleaner.action||"paste"==p.cleaner.action){e.preventDefault();var n=window.navigator.userAgent.indexOf("MSIE ");n=0<n||!!navigator.userAgent.match(/Trident.*rv\:11\./);var i=-1<navigator.userAgent.toLowerCase().indexOf("firefox");if(n)var r=window.clipboardData.getData("Text");else r=e.originalEvent.clipboardData.getData(p.cleaner.keepHtml?"Text":"text/plain");r&&(n||i?setTimeout(o.summernote("pasteHTML",u(r,p.cleaner.newline)),1):o.summernote("pasteHTML",u(r,p.cleaner.newline)),0<l(".note-status-output").length?l(".note-status-output").html('<div class="summernote-cleanerAlert alert alert-success">'+a.cleaner.not+"</div>"):s.find(".note-resizebar").append('<div class="summernote-cleanerAlert alert alert-success" style="'+p.cleaner.notStyle+'">'+a.cleaner.not+"</div>"))}}}}})});var Showdown={},JSON;Showdown.converter=function(){var p,m,a,n=0;this.makeHtml=function(t){return p=new Array,m=new Array,a=new Array,t===undefined&&(t=""),t=(t=(t=(t=t.replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"),t=(t=I(t="\n\n"+t+"\n\n")).replace(/^[ \t]+$/gm,""),t=i(t),t=e(t),t=s(t),t=(t=(t=D(t)).replace(/~D/g,"$$")).replace(/~T/g,"~")};var u,e=function(t){return t=t.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(t,e,n,i,r){return e=e.toLowerCase(),p[e]=S(n),i?i+r:(r&&(m[e]=r.replace(/"/g,"&quot;")),"")})},i=function(t){return t=(t=(t=(t=(t=(t=(t=t.replace(/\n/g,"\n\n")).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,r)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,r)).replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r)).replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,r)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r)).replace(/\n\n/g,"\n")},r=function(t,e){var n=e;return n=(n=(n=n.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),n="\n\n~K"+(a.push(n)-1)+"K\n\n"},s=function(t){t=g(t);var e=y("<hr />");return t=(t=(
t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,e)).replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,e)).replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,e),t=v(t),t=b(t),t=C(t),t=i(t),t=k(t)},l=function(t){return t=w(t),t=o(t),t=T(t),t=h(t),t=c(t),t=E(t),t=S(t),t=(t=x(t)).replace(/  +\n/g," <br />\n")},o=function(t){var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=P(e,"\\`*_")})},c=function(t){return t=(t=(t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,d)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,d)).replace(/(\[([^\[\]]+)\])()()()()()/g,d)},d=function(t,e,n,i,r,o,s,a){a==undefined&&(a="");var u=e,l=n,c=i.toLowerCase(),d=r,h=a;if(""==d)if(""==c&&(c=l.toLowerCase().replace(/ ?\n/g," ")),d="#"+c,p[c]!=undefined)d=p[c],m[c]!=undefined&&(h=m[c]);else{if(!(-1<u.search(/\(\s*\)$/m)))return u;d=""}var f='<a href="'+(d=P(d,"*_"))+'"';return""!=h&&(h=h.replace(/"/g,"&quot;"),f+=' title="'+(h=P(h,"*_"))+'"'),f+=">"+l+"</a>"},h=function(t){return t=(t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,f)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,f)},f=function(t,e,n,i,r,o,s,a){var u=e,l=n,c=i.toLowerCase(),d=r,h=a;if(h||(h=""),""==d){if(""==c&&(c=l.toLowerCase().replace(/ ?\n/g," ")),d="#"+c,p[c]==undefined)return u;d=p[c],m[c]!=undefined&&(h=m[c])}l=l.replace(/"/g,"&quot;");var f='<img src="'+(d=P(d,"*_"))+'" alt="'+l+'"';return h=h.replace(/"/g,"&quot;"),f+=' title="'+(h=P(h,"*_"))+'"',f+=" />"},g=function(t){return t=(t=(t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,e){return y("<h1>"+l(e)+"</h1>")})).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(t,e){return y("<h2>"+l(e)+"</h2>")})).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(t,e,n){var i=e.length;return y("<h"+i+">"+l(n)+"</h"+i+">")})},v=function(t){t+="~0";var e=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return n?t=t.replace(e,function(t,e,n){var i=e,r=-1<n.search(/[*+-]/g)?"ul":"ol";i=i.replace(/\n{2,}/g,"\n\n\n");var o=u(i);return o="<"+r+">"+(o=o.replace(/\s+$/,""))+"</"+r+">\n"}):(e=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(e,function(t,e,n,i){var r=e,o=n,s=-1<i.search(/[*+-]/g)?"ul":"ol",a=(o=o.replace(/\n{2,}/g,"\n\n\n"),u(o));return a=r+"<"+s+">\n"+a+"</"+s+">\n"})),t=t.replace(/~0/,"")};u=function(t){return n++,t=t.replace(/\n{2,}$/,"\n"),t=(t=(t+="~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(t,e,n,i,r){var o=r;return e||-1<o.search(/\n{2,}/)?o=s(A(o)):(o=(o=v(A(o))).replace(/\n$/,""),o=l(o)),"<li>"+o+"</li>\n"})).replace(/~0/g,""),n--,t};var b=function(t){return t=(t=(t+="~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,e,n){var i=e,r=n;return i=_(A(i)),i=(i=(i=I(i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),y(i="<pre><code>"+i+"\n</code></pre>")+r})).replace(/~0/,"")},y=function(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(a.push(t)-1)+"K\n\n"},w=function(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,n,i){var r=i;return r=(r=r.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),e+"<code>"+(r=_(r))+"</code>"})},_=function(t){return t=(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),t=P(t,"*_{}[]\\",!1)},x=function(t){return t=(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},C=function(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,e){var n=e;return n=(n=(n=n.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""),n=(n=(n=s(n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var n=e;return n=(n=n.replace(/^  /gm,"~0")).replace(/~0/g,"")}),y("<blockquote>\n"+n+"\n</blockquote>")})},k=function(t){for(var e=(t=(t=t.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),n=new Array,i=e.length,r=0;r<i;r++){var o=e[r];0<=o.search(/~K(\d+)K/g)?n.push(o):0<=o.search(/\S/)&&(o=(o=l(o)).replace(/^([ \t]*)/g,"<p>"),o+="</p>",n.push(o))}i=n.length;for(r=0;r<i;r++)for(;0<=n[r].search(/~K(\d+)K/);){var s=a[RegExp.$1];s=s.replace(/\$/g,"$$$$"),n[r]=n[r].replace(/~K\d+K/,s)}return n.join("\n\n")},S=function(t){return t=(t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?\$!])/gi,"&lt;")},T=function(t){return t=(t=t.replace(/\\(\\)/g,R)).replace(/\\([`*_{}\[\]()>#+-.!])/g,R)},E=function(t){return t=(t=t.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>')).replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(t,e){return N(D(e))})},N=function(t){function e(t){var e="0123456789ABCDEF",n=t.charCodeAt(0);return e.charAt(n>>4)+e.charAt(15&n)}var n=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+e(t)+";"},function(t){return t}];return t=(t='<a href="'+(t=(t="mailto:"+t).replace(/./g,function(t){if("@"==t)t=n[Math.floor(2*Math.random())](t);else if(":"!=t){var e=Math.random();t=.9<e?n[2](t):.45<e?n[1](t):n[0](t)}return t}))+'">'+t+"</a>").replace(/">.+:/g,'">')},D=function(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})},A=function(t){return t=(t=t.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")},I=function(t){return t=(t=(t=(t=(t=t.replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"~A~B")).replace(/~B(.+?)~A/g,function(t,e){for(var n=e,i=4-n.length%4,r=0;r<i;r++)n+=" ";return n})).replace(/~A/g,"    ")).replace(/~B/g,"")},P=function(t,e,n){var i="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(i="\\\\"+i);var r=new RegExp(i,"g");return t=t.replace(r,R)},R=function(t,e){return"~E"+e.charCodeAt(0)+"E"}},Gettext=function(t){this.domain="messages",this.locale_data=undefined;var e=["domain","locale_data"];if(this.isValidObject(t))for(var n in t)for(var i=0;i<e.length;i++)n==e[i]&&this.isValidObject(t[n])&&(this[n]=t[n]);return this.try_load_lang(),this},Gettext.context_glue="\x04",Gettext._locale_data={},Gettext.prototype.try_load_lang=function(){if("undefined"!=typeof this.locale_data){var t=this.locale_data;if(this.locale_data=undefined,this.parse_locale_data(t),"undefined"==typeof Gettext._locale_data[this.domain])throw new Error("Error: Gettext 'locale_data' does not contain the domain '"+this.domain+"'")}var e=this.get_lang_refs();if("object"==typeof e&&0<e.length)for(var n=0;n<e.length;n++){var i=e[n];if("application/json"==i.type){if(!this.try_load_lang_json(i.href))throw new Error("Error: Gettext 'try_load_lang_json' failed. Unable to exec xmlhttprequest for link ["+i.href+"]")}else{if("application/x-po"!=i.type)throw new Error("TODO: link type ["+i.type+"] found, and support is planned, but not implemented at this time.");if(!this.try_load_lang_po(i.href))throw new Error("Error: Gettext 'try_load_lang_po' failed. Unable to exec xmlhttprequest for link ["+i.href+"]")}}},Gettext.prototype.parse_locale_data=function(t){for(var e in"undefined"==typeof Gettext._locale_data&&(Gettext._locale_data={}),t)if(t.hasOwnProperty(e)&&this.isValidObject(t[e])){var n=!1;for(var i in t[e]){n=!0;break}if(n){var r=t[e];for(var o in""==e&&(e="messages"),this.isValidObject(Gettext._locale_data[e])||(Gettext._locale_data[e]={}),this.isValidObject(Gettext._locale_data[e].head)||(Gettext._locale_data[e].head={}),this.isValidObject(Gettext._locale_data[e].msgs)||(Gettext._locale_data[e].msgs={}),r)if(""==o){var s=r[o];for(var a in s){var u=a.toLowerCase();Gettext._locale_data[e].head[u]=s[a]}}else Gettext._locale_data[e].msgs[o]=r[o]}}for(var e in Gettext._locale_data)if(this.isValidObject(Gettext._locale_data[e].head["plural-forms"])&&"undefined"==typeof Gettext._locale_data[e].head.plural_func){var l=Gettext._locale_data[e].head["plural-forms"];if(!new RegExp("^(\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;a-zA-Z0-9_()])+)","m").test(l))throw new Error("Syntax error in language file. Plural-Forms header is invalid ["+l+"]");var c=Gettext._locale_data[e].head["plural-forms"];/;\s*$/.test(c)||(c=c.concat(";"));var d="var plural; var nplurals; "+c+' return { "nplural" : nplurals, "plural" : (plural === true ? 1 : plural ? plural : 0) };';Gettext._locale_data[e].head.plural_func=new Function("n",d)}else"undefined"==typeof Gettext._locale_data[e].head.plural_func&&(Gettext._locale_data[e].head.plural_func=function(t){return{nplural:2,plural:1!=t?1:0}})},Gettext.prototype.try_load_lang_po=function(t){var e=this.sjax(t);if(e){var n=this.uri_basename(t),i=this.parse_po(e),r={};return i&&(i[""]||(i[""]={}),i[""].domain||(i[""].domain=n),r[n=i[""].domain]=i,this.parse_locale_data(r)),1}},Gettext.prototype.uri_basename=function(t){var e,n;return(e=t.match(/^(.*\/)?(.*)/))?(n=e[2].match(/^(.*)\..+$/))?n[1]:e[2]:""},Gettext.prototype.parse_po=function(t){for(var e={},n={},i="",r=[],o=t.split("\n"),s=0;s<o.length;s++){if(o[s]=o[s].replace(/(\n|\r)+$/,""),/^$/.test(o[s])){if("undefined"!=typeof n.msgid){var a="undefined"!=typeof n.msgctxt&&n.msgctxt.length?n.msgctxt+Gettext.context_glue+n.msgid:n.msgid,u="undefined"!=typeof n.msgid_plural&&n.msgid_plural.length?n.msgid_plural:null,l=[];for(var c in n){(d=c.match(/^msgstr_(\d+)/))&&(l[parseInt(d[1])]=n[c])}l.unshift(u),1<l.length&&(e[a]=l),n={},i=""}}else{if(/^#/.test(o[s]))continue;(d=o[s].match(/^msgctxt\s+(.*)/))?n[i="msgctxt"]=this.parse_po_dequote(d[1]):(d=o[s].match(/^msgid\s+(.*)/))?n[i="msgid"]=this.parse_po_dequote(d[1]):(d=o[s].match(/^msgid_plural\s+(.*)/))?n[i="msgid_plural"]=this.parse_po_dequote(d[1]):(d=o[s].match(/^msgstr\s+(.*)/))?n[i="msgstr_0"]=this.parse_po_dequote(d[1]):(d=o[s].match(/^msgstr\[0\]\s+(.*)/))?n[i="msgstr_0"]=this.parse_po_dequote(d[1]):(d=o[s].match(/^msgstr\[(\d+)\]\s+(.*)/))?n[i="msgstr_"+d[1]]=this.parse_po_dequote(d[2]):/^"/.test(o[s])?n[i]+=this.parse_po_dequote(o[s]):r.push("Strange line ["+s+"] : "+o[s])}}if("undefined"!=typeof n.msgid){a="undefined"!=typeof n.msgctxt&&n.msgctxt.length?n.msgctxt+Gettext.context_glue+n.msgid:n.msgid,u="undefined"!=typeof n.msgid_plural&&n.msgid_plural.length?n.msgid_plural:null,l=[];for(var c in n){var d;(d=c.match(/^msgstr_(\d+)/))&&(l[parseInt(d[1])]=n[c])}l.unshift(u),1<l.length&&(e[a]=l),n={},i=""}if(e[""]&&e[""][1]){var h={},f=e[""][1].split(/\\n/);for(s=0;s<f.length;s++)if(f.length){var p=f[s].indexOf(":",0);if(-1!=p){var m=f[s].substring(0,p),g=f[s].substring(p+1),v=m.toLowerCase();h[v]&&h[v].length?r.push("SKIPPING DUPLICATE HEADER LINE: "+f[s]):/#-#-#-#-#/.test(v)?r.push("SKIPPING ERROR MARKER IN HEADER: "+f[s]):(g=g.replace(/^\s+/,""),h[v]=g)}else r.push("PROBLEM LINE IN HEADER: "+f[s]),h[f[s]]=""}e[""]=h}else e[""]={};return e},Gettext.prototype.parse_po_dequote=function(t){var e;return(e=t.match(/^"(.*)"/))&&(t=e[1]),t=t.replace(/\\"/g,'"')},Gettext.prototype.try_load_lang_json=function(t){var e=this.sjax(t);if(e){var n=this.JSON(e);return this.parse_locale_data(n),1}},Gettext.prototype.get_lang_refs=function(){for(var t=new Array,e=document.getElementsByTagName("link"),n=0;n<e.length;n++)if("gettext"==e[n].rel&&e[n].href){if("undefined"==typeof e[n].type||""==e[n].type)if(/\.json$/i.test(e[n].href))e[n].type="application/json";else if(/\.js$/i.test(e[n].href))e[n].type="application/json";else if(/\.po$/i.test(e[n].href))e[n].type="application/x-po";else{if(!/\.mo$/i.test(e[n].href))throw new Error("LINK tag with rel=gettext found, but the type and extension are unrecognized.");e[n].type="application/x-mo"}if(e[n].type=e[n].type.toLowerCase(),"application/json"==e[n].type)e[n].type="application/json";else if("text/javascript"==e[n].type)e[n].type="application/json";else if("application/x-po"==e[n].type)e[n].type="application/x-po";else{if("application/x-mo"!=e[n].type)throw new Error("LINK tag with rel=gettext found, but the type attribute ["+e[n].type+"] is unrecognized.");e[n].type="application/x-mo"}t.push(e[n])}return t},Gettext.prototype.textdomain=function(t){return t&&t.length&&(this.domain=t),this.domain},Gettext.prototype.gettext=function(t){var e,n,i,r;return this.dcnpgettext(null,e,t,n,i,r)},Gettext.prototype.dgettext=function(t,e){var n,i,r,o;return this.dcnpgettext(t,n,e,i,r,o)},Gettext.prototype.dcgettext=function(t,e,n){var i,r,o;return this.dcnpgettext(t,i,e,r,o,n)},Gettext.prototype.ngettext=function(t,e,n){var i,r;return this.dcnpgettext(null,i,t,e,n,r)},Gettext.prototype.dngettext=function(t,e,n,i){var r,o;return this.dcnpgettext(t,r,e,n,i,o)},Gettext.prototype.dcngettext=function(t,e,n,i,r){var o;return this.dcnpgettext(t,o,e,n,i,r,r)},Gettext.prototype.pgettext=function(t,e){var n,i,r;return this.dcnpgettext(null,t,e,n,i,r)},Gettext.prototype.dpgettext=function(t,e,n){var i,r,o;return this.dcnpgettext(t,e,n,i,r,o)},Gettext.prototype.dcpgettext=function(t,e,n,i){var r,o;return this.dcnpgettext(t,e,n,r,o,i)},Gettext.prototype.npgettext=function(t,e,n,i){var r;return this.dcnpgettext(null,t,e,n,i,r)},Gettext.prototype.dnpgettext=function(t,e,n,i,r){var o;return this.dcnpgettext(t,e,n,i,r,o)},Gettext.prototype.dcnpgettext=function(t,e,n,i,r){if(!this.isValidObject(n))return"";var o=this.isValidObject(i),s=this.isValidObject(e)?e+Gettext.context_glue+n:n,a=this.isValidObject(t)?t:this.isValidObject(this.domain)?this.domain:"messages",u=new Array;if("undefined"!=typeof Gettext._locale_data&&this.isValidObject(Gettext._locale_data[a]))u.push(Gettext._locale_data[a]);else if("undefined"!=typeof Gettext._locale_data)for(var l in Gettext._locale_data)u.push(Gettext._locale_data[l]);var c,d=[],h=!1;if(u.length)for(var f=0;f<u.length;f++){var p=u[f];if(this.isValidObject(p.msgs[s])){for(var m=0;m<p.msgs[s].length;m++)d[m]=p.msgs[s][m];if(d.shift(),c=p,h=!0,0<d.length&&0!=d[0].length)break}}0!=d.length&&0!=d[0].length||(d=[n,i]);var g=d[0];if(o){var v;if(h&&this.isValidObject(c.head.plural_func)){var b=c.head.plural_func(r);b.plural||(b.plural=0),b.nplural||(b.nplural=0),b.nplural<=b.plural&&(b.plural=0),v=b.plural}else v=1!=r?1:0;this.isValidObject(d[v])&&(g=d[v])}return g},Gettext.strargs=function(t,e){null==e||void 0===e?e=[]:e.constructor!=Array&&(e=[e]);for(var n="";;){var i,r=t.indexOf("%");if(-1==r){n+=t;break}if(n+=t.substr(0,r),"%%"==t.substr(r,2))n+="%",t=t.substr(r+2);else if(i=t.substr(r).match(/^%(\d+)/)){var o=parseInt(i[1]),s=i[1].length;0<o&&null!=e[o-1]&&"undefined"!=typeof e[o-1]&&(n+=e[o-1]),t=t.substr(r+1+s)}else n+="%",t=t.substr(r+1)}return n},Gettext.prototype.strargs=function(t,e){return Gettext.strargs(t,e)},Gettext.prototype.isArray=function(t){return this.isValidObject(t)&&t.constructor==Array},Gettext.prototype.isValidObject=function(t){return null!=t&&void 0!==t},Gettext.prototype.sjax=function(t){var e;if(!(e=window.XMLHttpRequest?new XMLHttpRequest:-1!=navigator.userAgent.toLowerCase().indexOf("msie 5")?new ActiveXObject("Microsoft.XMLHTTP"):new ActiveXObject("Msxml2.XMLHTTP")))throw new Error("Your browser doesn't do Ajax. Unable to support external language files.");e.open("GET",t,!1);try{e.send(null)}catch(r){return}var n=e.status;if(200==n||0==n)return e.responseText;var i=e.statusText+" (Error "+e.status+")";return e.responseText.length&&(i+="\n"+e.responseText),void alert(i)},Gettext.prototype.JSON=function(data){return eval("("+data+")")},function(t,e,n){function s(t){return this.e=t,this.i=0,this.js=["with(XPath){return ","}"],this.expression(1,1)||this.error(),new Function("n","nsr",this.js.join(""))}function i(t){if(this==t)return 0;if(2==this.nodeType&&2==t.nodeType)return this.ownerElement&&this.ownerElement==t.ownerElement?32:0;var e=this.ownerElement||this,n=t.ownerElement||t;if(0<=e.sourceIndex&&0<=n.sourceIndex&&e.contains&&n.contains)return(e.contains(n)?16:n.contains(e)&&8)|(e.sourceIndex<n.sourceIndex?4:n.sourceIndex<e.sourceIndex&&2)||1;for(var i=e,r=n,o=0,s=0;i=i.parentNode;)o++;for(;r=r.parentNode;)s++;if(s<o){for(;o--!=s;)e=e.parentNode;if(e==n)return 10}else if(o<s){for(;s--!=o;)n=n.parentNode;if(n==e)return 20}for(;(i=e.parentNode)!=(r=n.parentNode);)if(!(e=i)||!(n=r))return 1;for(;e=e.nextSibling;)if(e==n)return 4;return 2}function r(t,e){this.name="XPathException",this.code=t,this.message=e}function o(t){this.ns={};for(var e,n,i=t.attributes.length;0<=--i;)(e=/xmlns:(.+)/.exec((n=t.attributes[i]).nodeName))&&(this.ns[e[1]]=n.nodeValue);this.ns[""]=t.getAttribute("targetNamespace")}function a(t,e){this.fn=s.cache[t]||(s.cache[t]=new s(t)),this.nsr=e}function u(t,e){if(0==e)switch(typeof t){default:e++;case"boolean":e++;case"string":e++;case"number":e++}switch(this.resultType=e){case 1:return void(this.numberValue=s.number(t));case 2:return void(this.stringValue=s.string(t));case 3:return void(this.booleanValue=s.bool(t));case 4:case 5:if(t instanceof Array)return this.value=t,this.index=0,void(this.invalidIteratorState=!1);break;case 6:case 7:if(t instanceof Array)return this.value=t,void(this.snapshotLength=t.length);break;case 8:case 9:if(t instanceof Array)return void(this.singleNodeValue=t[0])}throw new r(52)}function l(){}if(s.ie=/MSIE/.test(navigator.userAgent),s.prototype={match:function(t,e){var n,i;return!(!(n=t.exec(this.e.substr(this.i)))||"number"==typeof e&&!(i=n[e])||"object"==typeof e&&!(i=e[n[1]]))&&(this.m=n,this.i+=n[0].length,i||n)},error:function(t){var e;t=(t||"Syntax error")+" at index "+this.i+": "+this.e.substr(this.i);try{e=new r(51,t)}catch(n){e=new Error(t)}throw e},step:function(t,e,n,i){var r,o=3;if(this.match(/^(\/\/?|\.\.?|@)\s*/,1))switch(this.m[1]){case"/":if(n&&this.error(),!i)return this.step(t,e,1);this.js.splice(t,0,' axis(axes["',"document-root",'"],'),o+=this.nodeTypes.node.call(this,t+o),n=1;break;case"//":n&&this.error(),this.js.splice(t,0,' axis(axes["',"descendant-or-self",'"],'),o+=this.nodeTypes.node.call(this,t+o),n=1;break;case".":n||i||this.error(),this.js.splice(t,0,' axis(axes["',"self",'"],'),o+=this.nodeTypes.node.call(this,t+o),n=0;break;case"..":n||i||this.error(),this.js.splice(t,0,' axis(axes["',"parent",'"],'),o+=this.nodeTypes.node.call(this,t+o),n=0;break;case"@":n||i||this.error(),this.js.splice(t,0,' axis(axes["',"attribute",'"],'),o+=this.nodeTest(t+o,"node")||this.error("Missing nodeTest after @"),n=0}else{if(!n&&!i)return n?this.error():0;if(this.match(/^([a-z]+(?:-[a-z]+)*)\s*::\s*/,s.axes))this.js.splice(t,0,' axis(axes["',this.m[1],'"],'),o+=this.nodeTest(t+o,"attribute"==this.m[1]?"node":"element")||this.error("Missing nodeTest after ::"),n=0;else{if(!(o=this.nodeTest(t,"element")))return 0;this.js.splice(t,0,' axis(axes["',"child",'"],'),o+=3,n=0}}for(;r=this.predicate(t+o);o+=r);return i&&this.js.splice(e+o++,0,i),o+=this.step(t,e+o,n),this.js.splice(e+o++,0,")"),o},expression:function(t,e,n){for(var i,r=this.operand(t);i=this.match(/^(or|and|!?=|[<>]=?|[|*+-]|div|mod)\s*/,this.operators);){if(n&&n[0]>=i[0]){this.i-=this.m[0].length;break}this.js.splice(t,0,i[1]),r++,this.js.splice(t+r++,0,i[2]),r+=this.expression(t+r,e,i)||this.error("Missing operand"),this.js.splice(t+r++,0,i[3])}return r},operand:function(t){if(this.match(/^(-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)|"[^"]*"|'[^']*')\s*/,1))return this.js.splice(t,0,this.m[1]),1;var e;if(e=this.match(/^([a-z]+(?:-[a-z]+)*)\s*\(\s*/,this.functions)){var n,i=1;for(this.js.splice(t,0,e[1]);n&&this.js.splice(t+i++,0,","),i+=n=this.expression(t+i,t+i),n&&this.match(/^,\s*/););return this.match(/^\)\s*/)||this.error("Missing ("),e[0]&&(n&&this.js.splice(t+i++,0,","),this.js.splice(t+i++,0,e[0])),e[2]?this.js.splice(t+i++,0,e[2]):1<n&&this.error("Function has arguments"),i+=this.step(t,t+i)}if(this.match(/^\(\s*/)){i=1;return this.js.splice(t,0,"("),i+=this.expression(t+i,t+i),this.match(/^\)\s*/)||this.error("Missing )"),this.js.splice(t+i++,")"),i}return this.step(t,t,0,"[n]")},operators:{"|":[1,"union(",",",")"],or:[1,"bool(",")||bool(",")"],and:[2,"bool(",")&&bool(",")"],"=":[3,"compare(eq,",",",")"],"!=":[3,"compare(ne,",",",")"],"<":[4,"compare(lt,",",",")"],">":[4,"compare(gt,",",",")"],"<=":[4,"compare(le,",",",")"],">=":[4,"compare(ge,",",",")"],"+":[5,"number(",")+number(",")"],"-":[5,"number(",")-number(",")"],"*":[6,"number(",")*number(",")"],div:[6,"number(",")/number(",")"],mod:[6,"number(",")%number(",")"]},functions:{last:[0,"nl.length"],position:[0,"(i+1)"],count:["nl","(",".length||0)"],id:["n","id(",")"],"local-name":["nl","localName(",")"],"namespace-uri":["nl","namespaceURI(",")"],name:["nl","qName(",")"],string:["n","string(",")"],concat:[0,"concat(",")"],"starts-with":[0,"startsWith(",")"],contains:[0,"contains(",")"],"substring-before":[0,"substringBefore(",")"],"substring-after":[0,"substringAfter(",")"],substring:[0,"substring(",")"],"string-length":["n","string(",").length"],"normalize-space":["n","normalizeSpace(",")"],translate:[0,"translate(",")"],"boolean":[0,"bool(",")"],not:[0,"!bool(",")"],"true":[0,"true "],"false":[0,"false "],number:["n","number(",")"],floor:[0,"Math.floor(number(","))"],ceiling:[0,"Math.ceil(number(","))"],round:[0,"Math.round(number(","))"],sum:[0,"sum(",")"]},predicate:function(t){var e=0;return this.match(/^\[\s*/)&&((e=this.expression(t,t))&&(this.js.splice(t,0,"function(n,i,nl){with(XPath){var r="),e++,this.js.splice(t+e++,0,';return typeof r=="number"?Math.round(r)==i+1:bool(r)}},')),this.match(/^\]\s*/)||this.error("Missing ]")),e},nodeTest:function(t,e){var n;return(n=this.match(/^([a-z]+(?:-[a-z]+)*)\(([^)]*)\)\s*/,this.nodeTypes))?n.call(this,t,this.m[2]):this.match(/^\*\s*/)?this.nodeTypes[e].call(this,t):this.nodeName(t)},nodeType:function(t,e){return this.js.splice(t,0,"function(n){return n.nodeType==",e,"},"),3},nodeTypes:{node:function(t){return this.js.splice(t,0,"null,"),1},element:function(t){return this.nodeType(t,1)},attribute:function(t){return this.nodeType(t,2)},text:function(t){return this.nodeType(t,3)},"processing-instruction":function(t,e){return e?(this.js.splice(t,0,"function(n){return n.nodeType==7&&n.target==",e,"},"),3):this.nodeType(t,7)},comment:function(t){return this.nodeType(t,8)}},nodeName:function(t){return this.match(/^([a-zA-Z_]+(?:-?[a-zA-Z0-9]+)*)(?::([a-zA-Z_]+(?:-?[a-zA-Z0-9]+)*))?\s*/,1)?this.m[2]?(this.js.splice(t,0,'function(n){if(!nsr)throw new XPathException(14);return "',this.m[2],'"==',s.ie?"n.baseName":"n.localName",'&&nsr.lookupNamespaceURI("',this.m[1],'")==n.namespaceURI},'),7):(this.js.splice(t,0,"function(n){return/^",this.m[1],"$/i.test(n.nodeName)},"),3):0}},s.order=function(t,e){var n=t.compareDocumentPosition?t.compareDocumentPosition(e):s.compareDocumentPosition.call(t,e);return 32&n?(t=Array.prototype.indexOf.call(t.attributes,t))<(e=Array.prototype.indexOf.call(e.attributes,e))?-1:e<t?1:0:n?3-(6&n||3):t==e?0:(t=t.ownerElement)&&(e=e.ownerElement)?s.order(t,e):s.ie?1:0},s.compare=function(t,e,n){if(e instanceof Array&&n instanceof Array){var i=e.map(this.string),r=n.map(this.string);for(e=i.length;0<=--e;)for(n=r.length;0<=--n;)if(!t(i[e],r[n]))return!1;return!0}if(e instanceof Array){for(var o=e.length;0<=--o;)if(!t(this[typeof n](e[o]),n))return!1;return 0<e.length}if(n instanceof Array){for(o=n.length;0<=--o;)if(!t(e,this[typeof e](n[o])))return!1;return 0<n.length}return"boolean"==typeof e||"boolean"==typeof n?t(this.bool(e),this.bool(n)):"number"==typeof e||"number"==typeof n?t(this.number(e),this.number(n)):t(this.string(e),this.string(n))},s.eq=function(t,e){return t==e},s.ne=function(t,e){return t!=e},s.lt=function(t,e){return t<e},s.gt=function(t,e){return e<t},s.le=function(t,e){return t<=e},s.ge=function(t,e){return e<=t},s.id=function(t,e){1==arguments.length&&(e=t);for(var n=[],i=this.string(t).split(/\s+/),r=i.length;0<=--r;)(t=(e.ownerDocument||e).getElementById(i[r]))&&n.push(t);return n.sort(this.order)},s.localName=new Function("nl","return (nl.length&&nl[0]."+(s.ie?"baseName":"localName")+')||""'),s.namespaceURI=function(t){return t.length&&t[0].namespaceURI||""},s.qName=function(t){return t.length&&t[0].nodeName||""},s.union=function(t,e){if(!t.length)return e;if(!e.length)return t;for(var n=[],i=t.length-1,r=e.length-1;;){switch(this.order(t[i],e[r])){case-1:n.unshift(e[r--]);break;case 0:r--;case 1:n.unshift(t[i--]);break;default:throw new Error("Invalid order")}if(i<0){0<++r&&n.unshift.apply(n,n.slice.call(e,0,r));break}if(r<0){0<++i&&n.unshift.apply(n,n.slice.call(t,0,i));break}}return n},s.string=s.object=function(t){if(t instanceof Array&&void 0===(t=t[0]))return"";if("string"==typeof t)return t;switch(t.nodeType){case 1:case 9:case 11:return Array.prototype.map.call(t.childNodes,this.string,this).join("");default:return t.nodeValue||""}return String(t)},s.concat=function(){return Array.prototype.map.call(arguments,this.string,this).join("")},s.startsWith=function(t,e){return this.string(t).substr(0,(e=this.string(e)).length)==e},s.contains=function(t,e){return-1!=this.string(t).indexOf(this.string(e))},s.substringBefore=function(t,e){return-1!=(e=(t=this.string(t)).indexOf(this.string(e)))?t.substr(0,e):""},s.substringAfter=function(t,e){t=this.string(t),e=this.string(e);var n=t.indexOf(e);return-1!=n?t.substr(n+e.length):""},s.substring=function(t,e,n){return t=this.string(t),e=Math.round(this.number(e))-1,2==arguments.length?t.substr(e<0?0:e):t.substr(e<0?0:e,Math.round(this.number(n))-Math.max(0,-e))},s.normalizeSpace=function(t){return this.string(t).replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")},s.translate=function(t,e,n){t=this.string(t),e=this.string(e),n=this.string(n);for(var i,r,o=[],s=t.length,a=0;0<=--s;)(-1==(i=e.indexOf(r=t.charAt(a++)))||(r=n.charAt(i)))&&o.push(r);return o.join("")},s.bool=s["boolean"]=function(t){return"boolean"==typeof t?t:t instanceof Array||"string"==typeof t?0<t.length:Boolean(t)},s.number=function(t){return t instanceof Array&&void 0===(t=t[0])?0:"number"==typeof t?t:"boolean"==typeof t?t?1:0:Number(this.string(t))},s.sum=function(t){for(var e=0,n=t.length;0<=--n;)e+=this.number(t[n]);return e},s.walk=function(t,e){for(var n,i=t.firstChild;i;)if(e.push(i),n=i.firstChild)i=n;else for(n=i;!(i=n.nextSibling)&&(n=n.parentNode)&&n!=t;);return e},s.axes={ancestor:function(t){for(var e=[];t=t.parentNode;)e.unshift(t);return e},"ancestor-or-self":function(t){for(var e=[];e.unshift(t),t=t.parentNode;);return e},attribute:new Function("n","var nl = [], a = n.attributes;if(a){attr:for(var x,i=a.length;--i>=0;){if(!(x=a[i]).specified){"+(s.ie?'switch(x.nodeName){case"selected":case"value":if(x.nodeValue)break;default:continue attr;}':"continue;")+"}nl.unshift(x);}}return nl;"),child:function(t){return t.childNodes||[]},descendant:function(t){return this.walk(t,[])},"descendant-or-self":function(t){return this.walk(t,[t])},following:function(t){for(var e,n=[];t;)(e=t.nextSibling)?(n.push(t=e),(e=t.firstChild)&&n.push(t=e)):t=t.parentNode;return n},"following-sibling":function(t){for(var e=[];t=t.nextSibling;)e.push(t);return e},parent:function(t){return t.parentNode?[t.parentNode]:[]},preceding:function(t){for(var e,n=[],i=t.parentNode;t;)if(e=t.previousSibling){for(t=e;e=t.lastChild;t=e);n.unshift(t)}else(t=t.parentNode)&&(t==i?i=i.parentNode:n.unshift(t));return n},"preceding-sibling":function(t){for(var e=[];t=t.previousSibling;)e.unshift(t);return e},self:function(t){return[t]},"document-root":function(t){return[t.ownerDocument||t]}},s.axis=function(t,e){for(var n,i,r,o=arguments.length-1,s=arguments[o],a=Array.prototype,u=0,l=s.length;0<=--l;){for(i=t.call(this,s[u++]),e&&i.length&&(i=a.filter.call(i,e,this)),r=2;r<o&&i.length;i=a.filter.call(i,arguments[r++],this));n=n?this.union(n,i):i}return n||[]},s.cache={},t.Node){var c=t.Node.prototype;!n&&c.compareDocumentPosition||(c.compareDocumentPosition=i),!n&&c.contains||(c.contains=function(t){return Boolean(16&this.compareDocumentPosition(t))})}else s.compareDocumentPosition=i;if(n||!t.XPathException){var d=r,h=new Error;h.toString=function(){return this.name+":"+this.message},d.prototype=h,d.NAMESPACE_ERR=14,d.INVALID_EXPRESSION_ERR=51,d.TYPE_ERR=52,t.XPathException=d}if(!n&&t.XPathNSResolver||(o.prototype={lookupNamespaceURI:function(t){return this.ns[t||""]}},t.XPathNSResolver=o),!n&&t.XPathExpression||(a.prototype={evaluate:function(t,e){return new u(this.fn(t,this.nsr),e)}},t.XPathExpression=a),n||!t.XPathResult){var f=u;f.ANY_TYPE=0,f.NUMBER_TYPE=1,f.STRING_TYPE=2,f.BOOLEAN_TYPE=3,f.UNORDERED_NODE_ITERATOR_TYPE=4,f.ORDERED_NODE_ITERATOR_TYPE=5,f.UNORDERED_NODE_SNAPSHOT_TYPE=6,f.ORDERED_NODE_SNAPSHOT_TYPE=7,f.ANY_UNORDERED_NODE_TYPE=8,f.FIRST_ORDERED_NODE_TYPE=9,f.prototype={iterateNext:function(){switch(this.resultType){case 4:case 5:return this.value[this.index++]}throw new r(52)},snapshotItem:function(t){switch(this.resultType){case 6:case 7:return this.value[t]}throw new r(52)}},t.XPathResult=f}!n&&t.XPathEvaluator||((d=l).prototype={createExpression:function(t,e){return new a(t,e)},createNSResolver:function(t){return new o(t)},evaluate:function(t,e,n,i){return new a(t,n).evaluate(e,i)}},d.install=function(t,e){for(var n in l.prototype)!e&&t[n]||(t[n]=l.prototype[n])},t.XPathEvaluator=d,t.Document?d.install(t.Document.prototype,n):d.install(document,n),t.XPath=s)}(window,document,/WebKit/.test(navigator.userAgent)||/Node\.js/.test(navigator.userAgent)),JSON||(JSON={}),function(){function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,s,a=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;n<o;n+=1)s[n]=str(n,u)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&((r=str(i=rep[n],u))&&s.push(quote(i)+(gap?": ":":")+r));else for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&((r=str(i,u))&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(indent=gap="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(!(rep=e)||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&((i=walk(r,n))!==undefined?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(t,e){var n,i,r=s,o=[];if(e=e||r.length,t)for(n=0;n<t;n++)o[n]=r[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(i=0|16*Math.random(),o[n]=r[19==n?3&i|8:i]);return o.join("")},Math.uuidFast=function(){for(var t,e=s,n=new Array(36),i=0,r=0;r<36;r++)8==r||13==r||18==r||23==r?n[r]="-":14==r?n[r]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,n[r]=e[19==r?3&t|8:t])
;return n.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}}(),function(i){function e(e,n){return function(t){return r(e.call(this,t),n)}}function t(e,n){return function(t){return this.lang().ordinal(e.call(this,t),n)}}function n(){}function a(t){l(this,t)}function u(t){var e=t.years||t.year||t.y||0,n=t.months||t.month||t.M||0,i=t.weeks||t.week||t.w||0,r=t.days||t.day||t.d||0,o=t.hours||t.hour||t.h||0,s=t.minutes||t.minute||t.m||0,a=t.seconds||t.second||t.s||0,u=t.milliseconds||t.millisecond||t.ms||0;this._input=t,this._milliseconds=u+1e3*a+6e4*s+36e5*o,this._days=r+7*i,this._months=n+12*e,this._data={},this._bubble()}function l(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function c(t){return t<0?Math.ceil(t):Math.floor(t)}function r(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function o(t,e,n,i){var r,o,s=e._milliseconds,a=e._days,u=e._months;s&&t._d.setTime(+t._d+s*n),(a||u)&&(r=t.minute(),o=t.hour()),a&&t.date(t.date()+a*n),u&&t.month(t.month()+u*n),s&&!i&&R.updateOffset(t),(a||u)&&(t.minute(r),t.hour(o))}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){var n,i=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;n<i;n++)~~t[n]!=~~e[n]&&o++;return o+r}function h(t){return t?rt[t]||t.toLowerCase().replace(/(.)s$/,"$1"):t}function f(t,e){return e.abbr=t,$[t]||($[t]=new n),$[t].set(e),$[t]}function p(t){if(!t)return R.fn._lang;if(!$[t]&&L)try{require("./lang/"+t)}catch(e){return R.fn._lang}return $[t]}function m(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function g(n){var i,r,o=n.match(z);for(i=0,r=o.length;i<r;i++)o[i]=ut[o[i]]?ut[o[i]]:m(o[i]);return function(t){var e="";for(i=0;i<r;i++)e+=o[i]instanceof Function?o[i].call(t,n):o[i];return e}}function v(e,t){function n(t){return e.lang().longDateFormat(t)||t}for(var i=5;i--&&j.test(t);)t=t.replace(j,n);return ot[t]||(ot[t]=g(t)),ot[t](e)}function b(t,e){switch(t){case"DDDD":return W;case"YYYY":return V;case"YYYYY":return Y;case"S":case"SS":case"SSS":case"DDD":return q;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return K;case"a":case"A":return p(e._l)._meridiemParse;case"X":return Q;case"Z":case"ZZ":return G;case"T":return X;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return U;default:return new RegExp(t.replace("\\",""))}}function y(t){var e=((G.exec(t)||[])[0]+"").match(et)||["-",0,0],n=60*e[1]+~~e[2];return"+"===e[0]?-n:n}function w(t,e,n){var i,r=n._a;switch(t){case"M":case"MM":r[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":null!=(i=p(n._l).monthsParse(e))?r[1]=i:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(r[2]=~~e);break;case"YY":r[0]=~~e+(68<~~e?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~e;break;case"a":case"A":n._isPm=p(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":r[3]=~~e;break;case"m":case"mm":r[4]=~~e;break;case"s":case"ss":r[5]=~~e;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=y(e)}null==e&&(n._isValid=!1)}function _(t){var e,n,i=[];if(!t._d){for(e=0;e<7;e++)t._a[e]=i[e]=null==t._a[e]?2===e?1:0:t._a[e];i[3]+=~~((t._tzm||0)/60),i[4]+=~~((t._tzm||0)%60),n=new Date(0),t._useUTC?(n.setUTCFullYear(i[0],i[1],i[2]),n.setUTCHours(i[3],i[4],i[5],i[6])):(n.setFullYear(i[0],i[1],i[2]),n.setHours(i[3],i[4],i[5],i[6])),t._d=n}}function x(t){var e,n,i=t._f.match(z),r=t._i;for(t._a=[],e=0;e<i.length;e++)(n=(b(i[e],t).exec(r)||[])[0])&&(r=r.slice(r.indexOf(n)+n.length)),ut[i[e]]&&w(i[e],n,t);r&&(t._il=r),t._isPm&&t._a[3]<12&&(t._a[3]+=12),!1===t._isPm&&12===t._a[3]&&(t._a[3]=0),_(t)}function C(t){var e,n,i,r,o,s=99;for(r=0;r<t._f.length;r++)(e=l({},t))._f=t._f[r],x(e),n=new a(e),o=d(e._a,n.toArray()),n._il&&(o+=n._il.length),o<s&&(s=o,i=n);l(t,i)}function k(t){var e,n=t._i,i=J.exec(n);if(i){for(t._f="YYYY-MM-DD"+(i[2]||" "),e=0;e<4;e++)if(tt[e][1].exec(n)){t._f+=tt[e][0];break}G.exec(n)&&(t._f+=" Z"),x(t)}else t._d=new Date(n)}function S(t){var e=t._i,n=H.exec(e);e===i?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof e?k(t):s(e)?(t._a=e.slice(0),_(t)):t._d=e instanceof Date?new Date(+e):new Date(e)}function T(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function E(t,e,n){var i=F(Math.abs(t)/1e3),r=F(i/60),o=F(r/60),s=F(o/24),a=F(s/365),u=i<45&&["s",i]||1===r&&["m"]||r<45&&["mm",r]||1===o&&["h"]||o<22&&["hh",o]||1===s&&["d"]||s<=25&&["dd",s]||s<=45&&["M"]||s<345&&["MM",F(s/30)]||1===a&&["y"]||["yy",a];return u[2]=e,u[3]=0<t,u[4]=n,T.apply({},u)}function N(t,e,n){var i,r=n-e,o=n-t.day();return r<o&&(o-=7),o<r-7&&(o+=7),i=R(t).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function D(t){var e=t._i,n=t._f;return null===e||""===e?null:("string"==typeof e&&(t._i=e=p().preparse(e)),R.isMoment(e)?(t=l({},e))._d=new Date(+e._d):n?s(n)?C(t):x(t):S(t),new a(t))}function A(t,n){R.fn[t]=R.fn[t+"s"]=function(t){var e=this._isUTC?"UTC":"";return null!=t?(this._d["set"+e+n](t),R.updateOffset(this),this):this._d["get"+e+n]()}}function I(t){R.duration.fn[t]=function(){return this._data[t]}}function P(t,e){R.duration.fn["as"+t]=function(){return+this/e}}for(var R,O,M="2.1.0",F=Math.round,$={},L="undefined"!=typeof module&&module.exports,H=/^\/?Date\((\-?\d+)/i,B=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,z=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,U=/\d\d?/,q=/\d{1,3}/,W=/\d{3}/,V=/\d{1,4}/,Y=/[+\-]?\d{1,6}/,K=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,G=/Z|[\+\-]\d\d:?\d\d/i,X=/T/i,Q=/[\+\-]?\d+(\.\d{1,3})?/,J=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Z="YYYY-MM-DDTHH:mm:ssZ",tt=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],et=/([\+\-]|\d\d)/gi,nt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),it={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},rt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},ot={},st="DDD w W M D d".split(" "),at="M D H h m s w W".split(" "),ut={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return r(~~(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return t<0&&(t=-t,e="-"),e+r(~~(t/60),2)+":"+r(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return t<0&&(t=-t,e="-"),e+r(~~(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};st.length;)O=st.pop(),ut[O+"o"]=t(ut[O],O);for(;at.length;)O=at.pop(),ut[O+O]=e(ut[O],2);for(ut.DDDD=e(ut.DDD,3),n.prototype={set:function(t){var e,n;for(n in t)"function"==typeof(e=t[n])?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;e<12;e++)if(this._monthsParse[e]||(n=R([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;e<7;e++)if(this._weekdaysParse[e]||(n=R([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[0<t?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return N(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},(R=function(t,e,n){return D({_i:t,_f:e,_l:n,_isUTC:!1})}).utc=function(t,e,n){return D({_useUTC:!0,_isUTC:!0,_l:n,_i:t,_f:e})},R.unix=function(t){return R(1e3*t)},R.duration=function(t,e){var n,i,r=R.isDuration(t),o="number"==typeof t,s=r?t._input:o?{}:t,a=B.exec(t);return o?e?s[e]=t:s.milliseconds=t:a&&(n="-"===a[1]?-1:1,s={y:0,d:~~a[2]*n,h:~~a[3]*n,m:~~a[4]*n,s:~~a[5]*n,ms:~~a[6]*n}),i=new u(s),r&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},R.version=M,R.defaultFormat=Z,R.updateOffset=function(){},R.lang=function(t,e){return t?(e?f(t,e):$[t]||p(t),void(R.duration.fn._lang=R.fn._lang=p(t))):R.fn._lang._abbr},R.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),p(t)},R.isMoment=function(t){return t instanceof a},R.isDuration=function(t){return t instanceof u},R.fn=a.prototype={clone:function(){return R(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return v(R(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?R.utc(this._a):R(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=v(this,t||R.defaultFormat);return this.lang().postformat(e)},add:function(t,e){return o(this,"string"==typeof t?R.duration(+e,t):R.duration(t,e),1),this},subtract:function(t,e){return o(this,"string"==typeof t?R.duration(+e,t):R.duration(t,e),-1),this},diff:function(t,e,n){var i,r,o=this._isUTC?R(t).zone(this._offset||0):R(t).local(),s=6e4*(this.zone()-o.zone());return"year"===(e=h(e))||"month"===e?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-R(this).startOf("month")-(o-R(o).startOf("month")))/i,r-=6e4*(this.zone()-R(this).startOf("month").zone()-(o.zone()-R(o).startOf("month").zone()))/i,"year"===e&&(r/=12)):(i=this-o,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-s)/864e5:"week"===e?(i-s)/6048e5:i),n?r:c(r)},from:function(t,e){return R.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(R(),t)},calendar:function(){var t=this.diff(R().startOf("day"),"days",!0),e=t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){var t=this.year();return 0==t%4&&0!=t%100||0==t%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?"string"==typeof t&&"number"!=typeof(t=this.lang().weekdaysParse(t))?this:this.add({d:t-e}):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?("string"==typeof t&&"number"!=typeof(t=this.lang().monthsParse(t))||(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),R.updateOffset(this)),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=h(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),this},endOf:function(t){return this.startOf(t).add(t,1).subtract("ms",1)},isAfter:function(t,e){return e=void 0!==e?e:"millisecond",+this.clone().startOf(e)>+R(t).startOf(e)},isBefore:function(t,e){return e=void 0!==e?e:"millisecond",+this.clone().startOf(e)<+R(t).startOf(e)},isSame:function(t,e){return e=void 0!==e?e:"millisecond",+this.clone().startOf(e)==+R(t).startOf(e)},min:function(t){return(t=R.apply(null,arguments))<this?this:t},max:function(t){return this<(t=R.apply(null,arguments))?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=y(t)),Math.abs(t)<16&&(t*=60),this._offset=t,this._isUTC=!0,e!==t&&o(this,R.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return R.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var e=F((R(this).startOf("day")-R(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=N(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=N(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=N(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},lang:function(t){return t===i?this._lang:(this._lang=p(t),this)}},O=0;O<nt.length;O++)A(nt[O].toLowerCase().replace(/s$/,""),nt[O]);for(O in A("year","FullYear"),R.fn.days=R.fn.day,R.fn.months=R.fn.month,R.fn.weeks=R.fn.week,R.fn.isoWeeks=R.fn.isoWeek,R.fn.toJSON=R.fn.toISOString,R.duration.fn=u.prototype={_bubble:function(){var t,e,n,i,r=this._milliseconds,o=this._days,s=this._months,a=this._data;a.milliseconds=r%1e3,t=c(r/1e3),a.seconds=t%60,e=c(t/60),a.minutes=e%60,n=c(e/60),a.hours=n%24,o+=c(n/24),a.days=o%30,s+=c(o/30),a.months=s%12,i=c(s/12),a.years=i},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*~~(this._months/12)},humanize:function(t){var e=+this,n=E(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=R.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=R.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return this[(t=h(t)).toLowerCase()+"s"]()},as:function(t){return this["as"+(t=h(t)).charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:R.fn.lang},it)it.hasOwnProperty(O)&&(P(O,it[O]),I(O.toLowerCase()));P("Weeks",6048e5),R.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},R.lang("en",{ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),L&&(module.exports=R),"undefined"==typeof ender&&(this.moment=R),"function"==typeof define&&define.amd&&define("moment",[],function(){return R})}.call(this),window.TinyMCERails={configuration:{"default":{}},initialize:function(t,e){if("undefined"!=typeof tinyMCE){var n=TinyMCERails.configuration[t||"default"];n=TinyMCERails._merge(n,e),tinyMCE.init(n)}else setTimeout(function(){TinyMCERails.initialize(t,e)},50)},setupTurbolinks:function(){document.addEventListener("turbolinks:before-render",function(){tinymce.remove()})},_merge:function(){for(var t={},e=0;e<arguments.length;++e){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&("[object Object]"===Object.prototype.toString.call(n[i])?t[i]=TinyMCERails._merge(t[i],n[i]):t[i]=n[i])}return t}},"undefined"!=typeof Turbolinks&&Turbolinks.supported&&TinyMCERails.setupTurbolinks(),window.tinymce=window.tinymce||{base:"/assets/tinymce",suffix:""},function(){"use strict";function m(i){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r.concat(t);return i.apply(null,n)}}function f(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function l(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function i(t,e,n,i,r){return t(n,i)?at.some(n):q(r)&&r(n)?at.none():e(n,i,r)}function t(){function n(t,e){return i.push(t+" ")>lo.cacheLength&&delete n[i.shift()],n[t+" "]=e}var i=[];return n}function n(t){return t[tu]=!0,t}function c(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||lu)-(~t.sourceIndex||lu);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function e(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function r(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function o(s){return n(function(o){return o=+o,n(function(t,e){for(var n,i=s([],t.length,o),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}function g(t){return t&&typeof t.getElementsByTagName!==uu&&t}function s(){}function v(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(s,t,e){var a=t.dir,u=e&&"parentNode"===a,l=iu++;return t.first?function(t,e,n){for(;t=t[a];)if(1===t.nodeType||u)return s(t,e,n)}:function(t,e,n){var i,r,o=[nu,l];if(n){for(;t=t[a];)if((1===t.nodeType||u)&&s(t,e,n))return!0}else for(;t=t[a];)if(1===t.nodeType||u){if((i=(r=t[tu]||(t[tu]={}))[a])&&i[0]===nu&&i[1]===l)return o[2]=i[2];if((r[a]=o)[2]=s(t,e,n))return!0}}}function h(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function b(t,e,n){for(var i=0,r=e.length;i<r;i++)$u(t,e[i],n);return n}function w(t,e,n,i,r){for(var o,s=[],a=0,u=t.length,l=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),l&&e.push(a)));return s}function y(f,p,m,g,v,t){return g&&!g[tu]&&(g=y(g)),v&&!v[tu]&&(v=y(v,t)),n(function(t,e,n,i){var r,o,s,a=[],u=[],l=e.length,c=t||b(p||"*",n.nodeType?[n]:n,[]),d=!f||!t&&p?c:w(c,a,f,n,i),h=m?v||(t?f:l||g)?[]:e:d;if(m&&m(d,h,n,i),g)for(r=w(h,u),g(r,[],n,i),o=r.length;o--;)(s=r[o])&&(h[u[o]]=!(d[u[o]]=s));if(t){if(v||f){if(v){for(r=[],o=h.length;o--;)(s=h[o])&&r.push(d[o]=s);v(null,h=[],r,i)}for(o=h.length;o--;)(s=h[o])&&-1<(r=v?gu.call(t,s):a[o])&&(t[r]=!(e[r]=s))}}else h=w(h===e?h.splice(l,h.length):h),v?v(null,e,h,i):pu.apply(e,h)})}function p(t){for(var r,e,n,i=t.length,o=lo.relative[t[0].type],s=o||lo.relative[" "],a=o?1:0,u=d(function(t){return t===r},s,!0),l=d(function(t){return-1<gu.call(r,t)},s,!0),c=[function(t,e,n){var i=!o&&(n||e!==go)||((r=e).nodeType?u(t,e,n):l(t,e,n));return r=null,i}];a<i;a++)if(e=lo.relative[t[a].type])c=[d(h(c),e)];else{if((e=lo.filter[t[a].type].apply(null,t[a].matches))[tu]){for(n=++a;n<i&&!lo.relative[t[n].type];n++);return y(1<a&&h(c),1<a&&v(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(xu,"$1"),e,a<n&&p(t.slice(a,n)),n<i&&p(t=t.slice(n)),n<i&&v(t))}c.push(e)}return h(c)}function a(g,v){var b=0<v.length,y=0<g.length,t=function(t,e,n,i,r){var o,s,a,u=0,l="0",c=t&&[],d=[],h=go,f=t||y&&lo.find.TAG("*",r),p=nu+=null==h?1:Math.random()||.1,m=f.length;for(r&&(go=e!==wo&&e);l!==m&&null!=(o=f[l]);l++){if(y&&o){for(s=0;a=g[s++];)if(a(o,e,n)){i.push(o);break}r&&(nu=p)}b&&((o=!a&&o)&&u--,t&&c.push(o))}if(u+=l,b&&l!==u){for(s=0;a=v[s++];)a(c,d,e,n);if(t){if(0<u)for(;l--;)c[l]||d[l]||(d[l]=hu.call(i));d=w(d)}pu.apply(i,d),r&&!t&&0<d.length&&1<u+v.length&&$u.uniqueSort(i)}return r&&(nu=p,go=h),c};return b?n(t):t}function A(n,i){var o,s,a=function(e,t){return Et(t,function(t){return n.is(t,e)})},u=function(t){return n.getParents(t,null,n.getRoot())};return{selectorChangedWithUnbind:function(t,e){return o||(o={},s={},i.on("NodeChange",function(t){var n=t.element,i=u(n),r={};Sn.each(o,function(t,n){a(n,i).each(function(e){s[n]||(kt(t,function(t){t(!0,{node:e,selector:n,parents:i})}),s[n]=t),r[n]=t})}),Sn.each(s,function(t,e){r[e]||(delete s[e],Sn.each(t,function(t){t(!1,{node:n,selector:e,parents:i})}))})})),o[t]||(o[t]=[]),o[t].push(e),a(t,u(i.selection.getStart())).each(function(){s[t]=o[t]}),{unbind:function(){LT(o,t,e),LT(s,t,e)}}}}}function x(){var t=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t}}var u,C,k=function(t){if(null===t)return"null";if(t===undefined)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},S=function(t){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(t)},T=function(t,e){return Array.prototype.slice.call(t).sort(e)},E=function(n,i){return N(function(t,e){return n.eq(i(t),i(e))})},N=function(t){return{eq:t}},D=N(function(t,e){return t===e}),I=function(r){return N(function(t,e){if(t.length!==e.length)return!1;for(var n=t.length,i=0;i<n;i++)if(!r.eq(t[i],e[i]))return!1;return!0})},P=function(t,e){return E(I(t),function(t){return T(t,e)})},R=function(a){return N(function(t,e){var n=Object.keys(t),i=Object.keys(e);if(!P(D).eq(n,i))return!1;for(var r=n.length,o=0;o<r;o++){var s=n[o];if(!a.eq(t[s],e[s]))return!1}return!0})},O=N(function(t,e){if(t===e)return!0;var n=k(t);return n===k(e)&&(S(n)?t===e:"array"===n?I(O).eq(t,e):"object"===n&&R(O).eq(t,e))}),M=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},F=function(e){return function(t){return M(t)===e}},$=function(e){return function(t){return typeof t===e}},L=function(e){return function(t){return e===t}},wt=F("string"),H=F("object"),B=F("array"),z=L(null),j=$("boolean"),U=L(undefined),_t=function(t){return null===t||t===undefined},Y=function(t){return!_t(t)},q=$("function"),W=$("number"),xt=function(){},V=function(n,i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(i.apply(null,t))}},K=function(e,n){return function(t){return e(n(t))}},Ct=function(t){return function(){return t}},G=function(t){return t},X=function(t,e){return t===e},Q=function(e){return function(t){return!e(t)}},J=function(t){return function(){throw new Error(t)}},Z=function(t){return t()},tt=function(t){t()},et=Ct(!1),nt=Ct(!0),it=function(){return rt},rt={fold:function(t){return t()},isSome:et,isNone:nt,getOr:C=G,getOrThunk:u=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:Ct(null),getOrUndefined:Ct(undefined),or:C,orThunk:u,map:it,each:xt,bind:it,exists:et,forall:nt,filter:function(){return it()},toArray:function(){return[]},toString:Ct("none()")},ot=function(n){var t=Ct(n),e=function(){return r},i=function(t){return t(n)},r={fold:function(t,e){return e(n)},isSome:nt,isNone:et,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return ot(t(n))},each:function(t){t(n)},bind:i,exists:i,forall:i,filter:function(t){return t(n)?r:rt},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},st=function(t){return null===t||t===undefined?rt:ot(t)},at={some:ot,none:it,from:st},ut=Array.prototype.slice,lt=Array.prototype.indexOf,ct=Array.prototype.push,dt=function(t,e){return lt.call(t,e)},ht=function(t,e){var n=dt(t,e);return-1===n?at.none():at.some(n)},ft=function(t,e){return-1<dt(t,e)},pt=function(t,e){for(var n=0,i=t.length;n<i;n++){if(e(t[n],n))return!0}return!1},mt=function(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;r++){var o=t[r];i[r]=e(o,r)}return i},kt=function(t,e){for(var n=0,i=t.length;n<i;n++){e(t[n],n)}},gt=function(t,e){for(var n=t.length-1;0<=n;n--){e(t[n],n)}},vt=function(t,e){for(var n=[],i=[],r=0,o=t.length;r<o;r++){var s=t[r];(e(s,r)?n:i).push(s)}return{pass:n,fail:i}},bt=function(t,e){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];e(o,i)&&n.push(o)}return n},yt=function(t,n,i){return gt(t,function(t,e){i=n(i,t,e)}),i},St=function(t,n,i){return kt(t,function(t,e){i=n(i,t,e)}),i},Tt=function(t,e,n){for(var i=0,r=t.length;i<r;i++){var o=t[i];if(e(o,i))return at.some(o);if(n(o,i))break}return at.none()},Et=function(t,e){return Tt(t,e,et)},Nt=function(t,e){for(var n=0,i=t.length;n<i;n++){if(e(t[n],n))return at.some(n)}return at.none()},Dt=function(t){for(var e=[],n=0,i=t.length;n<i;++n){if(!B(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);ct.apply(e,t[n])}return e},At=function(t,e){return Dt(mt(t,e))},It=function(t,e){for(var n=0,i=t.length;n<i;++n){if(!0!==e(t[n],n))return!1}return!0},Pt=function(t){var e=ut.call(t,0);return e.reverse(),e},Rt=function(t,e){return bt(t,function(t){return!ft(e,t)})},Ot=function(t,e){for(var n={},i=0,r=t.length;i<r;i++){var o=t[i];n[String(o)]=e(o,i)}return n},Mt=function(t,e){var n=ut.call(t,0);return n.sort(e),n},Ft=function(t,e){return 0<=e&&e<t.length?at.some(t[e]):at.none()},$t=function(t){return Ft(t,0)},Lt=function(t){return Ft(t,t.length-1)},Ht=q(Array.from)?Array.from:function(t){return ut.call(t)},Bt=function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n],n);if(i.isSome())return i}return at.none()},zt=Object.keys,jt=Object.hasOwnProperty,Ut=function(t,e){for(var n=zt(t),i=0,r=n.length;i<r;i++){var o=n[i];e(t[o],o)}},qt=function(t,n){return Wt(t,function(t,e){return{k:e,v:n(t,e)}})},Wt=function(t,i){var r={};return Ut(t,function(t,e){var n=i(t,e);r[n.k]=n.v}),r},Vt=function(n){return function(t,e){n[e]=t}},Yt=function(t,n,i,r){var e={};return Ut(t,function(t,e){(n(t,e)?i:r)(t,e)}),e},Kt=function(t,e){var n={},i={};return Yt(t,e,Vt(n),Vt(i)),{t:n,f:i}},Gt=function(t,e){var n={};return Yt(t,e,Vt(n),xt),n},Xt=function(t,n){var i=[];return Ut(t,function(t,e){i.push(n(t,e))}),i},Qt=function(t){return Xt(t,G)},Jt=function(t,e){return Zt(t,e)?at.from(t[e]):at.none()},Zt=function(t,e){return jt.call(t,e)},te=function(t,e){return Zt(t,e)&&t[e]!==undefined&&null!==t[e]},ee=function(t,e,n){return void 0===n&&(n=O),R(n).eq(t,e)},ne=Array.isArray,ie=function(t){if(ne(t))return t;for(var e=[],n=0,i=t.length;n<i;n++)e[n]=t[n];return e},re=function(t,e,n){var i,r;if(!t)return!1;if(n=n||t,t.length!==undefined){for(i=0,r=t.length;i<r;i++)if(!1===e.call(n,t[i],i,t))return!1}else for(i in t)if(Zt(t,i)&&!1===e.call(n,t[i],i,t))return!1;return!0},oe=function(n,i){var r=[];return re(n,function(t,e){r.push(i(t,e,n))}),r},se=function(n,i){var r=[];return re(n,function(t,e){i&&!i(t,e,n)||r.push(t)}),r},ae=function(t,e){if(t)for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},ue=function(t,e,n,i){for(var r=U(n)?t[0]:n,o=0;o<t.length;o++)r=e.call(i,r,t[o],o);return r},le=function(t,e,n){var i,r;for(i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return i;return-1},ce=function(t){return t[t.length-1]},de=function(){return(de=Object.assign||function o(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},he=function(n){var i,r=!1;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r||(r=!0,i=n.apply(null,t)),i}},fe=function(t,e,n,i){var r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,s=t.isiOS()||t.isAndroid(),a=s||i("(pointer:coarse)"),u=r||!o&&s&&i("(min-device-width:768px)"),l=o||s&&!u,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),d=!l&&!u&&!c;return{isiPad:Ct(r),isiPhone:Ct(o),isTablet:Ct(u),isPhone:Ct(l),isTouch:Ct(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Ct(c),isDesktop:Ct(d)}},pe=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.test(e))return i}return undefined},me=function(t,e){var n=pe(t,e);if(!n)return{major:0,minor:0};var i=function(t){return Number(e.replace(n,"$"+t))};return be(i(1),i(2))},ge=function(t,e){var n=String(e).toLowerCase();return 0===t.length?ve():me(t,n)},ve=function(){return be(0,0)},be=function(t,e){return{major:t,minor:e}},ye={nu:be,detect:ge,unknown:ve},we=function(t,e){return Bt(e.brands,function(e){var n=e.brand.toLowerCase();return Et(t,function(t){var e;return n===(null===(e=t.brand)||void 0===e?void 0:e.toLowerCase())}).map(function(t){return{current:t.name,version:ye.nu(parseInt(e.version,10),0)}})})},_e=function(t,e){var n=String(e).toLowerCase();return Et(t,function(t){return t.search(n)})},xe=function(t,n){return _e(t,n).map(function(t){var e=ye.detect(t.versionRegexes,n);return{current:t.name,version:e}})},Ce=function(t,n){return _e(t,n).map(function(t){var e=ye.detect(t.versionRegexes,n);return{current:t.name,version:e}})},ke=function(t,e){return t.substring(e)},Se=function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e},Te=function(t,e){return Ne(t,e)?ke(t,e.length):t},Ee=function(t,e){return-1!==t.indexOf(e)},Ne=function(t,e){return Se(t,e,0)},De=function(e){return function(t){return t.replace(e,"")}},Ae=De(/^\s+|\s+$/g),Ie=De(/^\s+/g),Pe=De(/\s+$/g),Re=function(t){return 0<t.length},Oe=function(t){return!Re(t)},Me=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Fe=function(e){return function(t){return Ee(t,e)}},$e=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Ee(t,"edge/")&&Ee(t,"chrome")&&Ee(t,"safari")&&Ee(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[
/.*?chrome\/([0-9]+)\.([0-9]+).*/,Me],search:function(t){return Ee(t,"chrome")&&!Ee(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Ee(t,"msie")||Ee(t,"trident")}},{name:"Opera",versionRegexes:[Me,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Fe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Fe("firefox")},{name:"Safari",versionRegexes:[Me,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Ee(t,"safari")||Ee(t,"mobile/"))&&Ee(t,"applewebkit")}}],Le=[{name:"Windows",search:Fe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Ee(t,"iphone")||Ee(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Fe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Fe("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Fe("linux"),versionRegexes:[]},{name:"Solaris",search:Fe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Fe("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Fe("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],He={browsers:Ct($e),oses:Ct(Le)},Be="Edge",ze="Chrome",je="IE",Ue="Opera",qe="Firefox",We="Safari",Ve=function(){return Ye({current:undefined,version:ye.unknown()})},Ye=function(t){var e=t.current,n=t.version,i=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:i(Be),isChrome:i(ze),isIE:i(je),isOpera:i(Ue),isFirefox:i(qe),isSafari:i(We)}},Ke={unknown:Ve,nu:Ye,edge:Ct(Be),chrome:Ct(ze),ie:Ct(je),opera:Ct(Ue),firefox:Ct(qe),safari:Ct(We)},Ge="Windows",Xe="iOS",Qe="Android",Je="Linux",Ze="OSX",tn="Solaris",en="FreeBSD",nn="ChromeOS",rn=function(){return on({current:undefined,version:ye.unknown()})},on=function(t){var e=t.current,n=t.version,i=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:i(Ge),isiOS:i(Xe),isAndroid:i(Qe),isOSX:i(Ze),isLinux:i(Je),isSolaris:i(tn),isFreeBSD:i(en),isChromeOS:i(nn)}},sn={unknown:rn,nu:on,windows:Ct(Ge),ios:Ct(Xe),android:Ct(Qe),linux:Ct(Je),osx:Ct(Ze),solaris:Ct(tn),freebsd:Ct(en),chromeos:Ct(nn)},an={detect:function(t,e,n){var i=He.browsers(),r=He.oses(),o=e.bind(function(t){return we(i,t)}).orThunk(function(){return xe(i,t)}).fold(Ke.unknown,Ke.nu),s=Ce(r,t).fold(sn.unknown,sn.nu);return{browser:o,os:s,deviceType:fe(s,o,t,n)}}},un=function(t){return window.matchMedia(t).matches},ln=he(function(){return an.detect(navigator.userAgent,at.from(navigator.userAgentData),un)}),cn=function(){return ln()},dn=navigator.userAgent,hn=cn(),fn=hn.browser,pn=hn.os,mn=hn.deviceType,gn=/WebKit/.test(dn)&&!fn.isEdge(),vn="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,bn=-1!==dn.indexOf("Windows Phone"),yn={opera:fn.isOpera(),webkit:gn,ie:!(!fn.isIE()&&!fn.isEdge())&&fn.version.major,gecko:fn.isFirefox(),mac:pn.isOSX()||pn.isiOS(),iOS:mn.isiPad()||mn.isiPhone(),android:pn.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:fn.isIE()?document.documentMode||7:10,fileApi:vn,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!fn.isIE(),desktop:mn.isDesktop(),windowsPhone:bn,browser:{current:fn.current,version:fn.version,isChrome:fn.isChrome,isEdge:fn.isEdge,isFirefox:fn.isFirefox,isIE:fn.isIE,isOpera:fn.isOpera,isSafari:fn.isSafari},os:{current:pn.current,version:pn.version,isAndroid:pn.isAndroid,isChromeOS:pn.isChromeOS,isFreeBSD:pn.isFreeBSD,isiOS:pn.isiOS,isLinux:pn.isLinux,isOSX:pn.isOSX,isSolaris:pn.isSolaris,isWindows:pn.isWindows},deviceType:{isDesktop:mn.isDesktop,isiPad:mn.isiPad,isiPhone:mn.isiPhone,isPhone:mn.isPhone,isTablet:mn.isTablet,isTouch:mn.isTouch,isWebView:mn.isWebView}},wn=/^\s*|\s*$/g,_n=function(t){return null===t||t===undefined?"":(""+t).replace(wn,"")},xn=function(t,e){return e?!("array"!==e||!ne(t))||typeof t===e:t!==undefined},Cn=function(t,n,i,r){r=r||this,t&&(i&&(t=t[i]),re(t,function(t,e){if(!1===n.call(r,t,e,i))return!1;Cn(t,n,i,r)}))},kn=function(t,e){return!t||xn(t,"array")?t:oe(t.split(e||","),_n)},Sn={trim:_n,isArray:ne,is:xn,toArray:ie,makeMap:function(t,e,n){var i;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},i=t.length;i--;)n[t[i]]={};return n},each:re,map:oe,grep:se,inArray:ae,hasOwn:Zt,extend:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++){var r=e[i];for(var o in r)if(Zt(r,o)){var s=r[o];s!==undefined&&(t[o]=s)}}return t},create:function(t,e,n){var i,r,o,s=this,a=0,u=(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t))[3].match(/(^|\.)(\w+)$/i)[2],l=s.createNS(t[3].replace(/\.\w+$/,""),n);if(!l[u]){if("static"===t[2])return l[u]=e,void(this.onCreate&&this.onCreate(t[2],t[3],l[u]));e[u]||(e[u]=function(){},a=1),l[u]=e[u],s.extend(l[u].prototype,e),t[5]&&(i=s.resolve(t[5]).prototype,r=t[5].match(/\.(\w+)$/i)[1],o=l[u],l[u]=a?function(){return i[r].apply(this,arguments)}:function(){return this.parent=i[r],o.apply(this,arguments)},l[u].prototype[u]=l[u],s.each(i,function(t,e){l[u].prototype[e]=i[e]}),s.each(e,function(t,e){i[e]?l[u].prototype[e]=function(){return this.parent=i[e],t.apply(this,arguments)}:e!==u&&(l[u].prototype[e]=t)})),s.each(e["static"],function(t,e){l[u][e]=t})}},walk:Cn,createNS:function(t,e){var n,i;for(e=e||window,t=t.split("."),n=0;n<t.length;n++)e[i=t[n]]||(e[i]={}),e=e[i];return e},resolve:function(t,e){var n,i;for(e=e||window,n=0,i=(t=t.split(".")).length;n<i&&(e=e[t[n]]);n++);return e},explode:kn,_addCacheSuffix:function(t){var e=yn.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Tn=function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Dn(n.childNodes[0])},En=function(t,e){var n=(e||document).createElement(t);return Dn(n)},Nn=function(t,e){var n=(e||document).createTextNode(t);return Dn(n)},Dn=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:t}},An={fromHtml:Tn,fromTag:En,fromText:Nn,fromDom:Dn,fromPoint:function(t,e,n){return at.from(t.dom.elementFromPoint(e,n)).map(Dn)}},In=function(t,e){for(var n=[],i=function(t){return n.push(t),e(t)},r=e(t);(r=r.bind(i)).isSome(););return n},Pn=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},Rn=function(t,e){return Pn(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},On=8,Mn=9,Fn=11,$n=1,Ln=3,Hn=function(t,e){var n=t.dom;if(n.nodeType!==$n)return!1;var i=n;if(i.matches!==undefined)return i.matches(e);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(e);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(e);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Bn=function(t){return t.nodeType!==$n&&t.nodeType!==Mn&&t.nodeType!==Fn||0===t.childElementCount},zn=function(t,e){var n=e===undefined?document:e.dom;return Bn(n)?[]:mt(n.querySelectorAll(t),An.fromDom)},jn=function(t,e){var n=e===undefined?document:e.dom;return Bn(n)?at.none():at.from(n.querySelector(t)).map(An.fromDom)},Un=function(t,e){return t.dom===e.dom},qn=function(t,e){var n=t.dom,i=e.dom;return n!==i&&n.contains(i)},Wn=function(t,e){return Rn(t.dom,e.dom)},Vn=function(t,e){return cn().browser.isIE()?Wn(t,e):qn(t,e)};"undefined"!=typeof window?window:Function("return this;")();var Yn=function(t){return t.dom.nodeName.toLowerCase()},Kn=function(t){return t.dom.nodeType},Gn=function(e){return function(t){return Kn(t)===e}},Xn=function(t){return Kn(t)===On||"#comment"===Yn(t)},Qn=Gn($n),Jn=Gn(Ln),Zn=Gn(Mn),ti=Gn(Fn),ei=function(e){return function(t){return Qn(t)&&Yn(t)===e}},ni=function(t){return An.fromDom(t.dom.ownerDocument)},ii=function(t){return Zn(t)?t:ni(t)},ri=function(t){return An.fromDom(ii(t).dom.documentElement)},oi=function(t){return An.fromDom(ii(t).dom.defaultView)},si=function(t){return at.from(t.dom.parentNode).map(An.fromDom)},ai=function(t,e){for(var n=q(e)?e:et,i=t.dom,r=[];null!==i.parentNode&&i.parentNode!==undefined;){var o=i.parentNode,s=An.fromDom(o);if(r.push(s),!0===n(s))break;i=o}return r},ui=function(e){var t=function(t){return bt(t,function(t){return!Un(e,t)})};return si(e).map(fi).map(t).getOr([])},li=function(t){return at.from(t.dom.previousSibling).map(An.fromDom)},ci=function(t){return at.from(t.dom.nextSibling).map(An.fromDom)},di=function(t){return Pt(In(t,li))},hi=function(t){return In(t,ci)},fi=function(t){return mt(t.dom.childNodes,An.fromDom)},pi=function(t,e){var n=t.dom.childNodes;return at.from(n[e]).map(An.fromDom)},mi=function(t){return pi(t,0)},gi=function(t){return pi(t,t.dom.childNodes.length-1)},vi=function(t){return t.dom.childNodes.length},bi=function(t){var e=t.dom.head;if(null===e||e===undefined)throw new Error("Head is not available yet");return An.fromDom(e)},yi=function(t){return ti(t)&&Y(t.dom.host)},wi=q(Element.prototype.attachShadow)&&q(Node.prototype.getRootNode),_i=Ct(wi),xi=wi?function(t){return An.fromDom(t.dom.getRootNode())}:ii,Ci=function(t){return yi(t)?t:bi(ii(t))},ki=function(t){var e=xi(t);return yi(e)?at.some(e):at.none()},Si=function(t){return An.fromDom(t.dom.host)},Ti=function(t){if(_i()&&Y(t.target)){var e=An.fromDom(t.target);if(Qn(e)&&Ei(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return $t(n)}}return at.from(t.target)},Ei=function(t){return Y(t.dom.shadowRoot)},Ni=function(e,n){si(e).each(function(t){t.dom.insertBefore(n.dom,e.dom)})},Di=function(t,e){ci(t).fold(function(){si(t).each(function(t){Ii(t,e)})},function(t){Ni(t,e)})},Ai=function(e,n){mi(e).fold(function(){Ii(e,n)},function(t){e.dom.insertBefore(n.dom,t.dom)})},Ii=function(t,e){t.dom.appendChild(e.dom)},Pi=function(t,e){Ni(t,e),Ii(e,t)},Ri=function(e,t){kt(t,function(t){Ni(e,t)})},Oi=function(e,t){kt(t,function(t){Ii(e,t)})},Mi=function(t){t.dom.textContent="",kt(fi(t),function(t){Fi(t)})},Fi=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},$i=function(t){var e=fi(t);0<e.length&&Ri(t,e),Fi(t)},Li=function(t){var e=Jn(t)?t.dom.parentNode:t.dom;if(e===undefined||null===e||null===e.ownerDocument)return!1;var n=e.ownerDocument;return ki(An.fromDom(e)).fold(function(){return n.body.contains(e)},K(Li,Si))},Hi=function(n,i){return{left:n,top:i,translate:function(t,e){return Hi(n+t,i+e)}}},Bi=Hi,zi=function(t){var e=t.getBoundingClientRect();return Bi(e.left,e.top)},ji=function(t,e){return t!==undefined?t:e!==undefined?e:0},Ui=function(t){var e=t.dom.ownerDocument,n=e.body,i=e.defaultView,r=e.documentElement;if(n===t.dom)return Bi(n.offsetLeft,n.offsetTop);var o=ji(null==i?void 0:i.pageYOffset,r.scrollTop),s=ji(null==i?void 0:i.pageXOffset,r.scrollLeft),a=ji(r.clientTop,n.clientTop),u=ji(r.clientLeft,n.clientLeft);return qi(t).translate(s-u,o-a)},qi=function(t){var e=t.dom,n=e.ownerDocument.body;return n===e?Bi(n.offsetLeft,n.offsetTop):Li(t)?zi(e):Bi(0,0)},Wi=function(t){var e=t!==undefined?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,i=e.body.scrollTop||e.documentElement.scrollTop;return Bi(n,i)},Vi=function(t,e,n){var i=(n!==undefined?n.dom:document).defaultView;i&&i.scrollTo(t,e)},Yi=function(t,e){cn().browser.isSafari()&&q(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Ki=function(t){var e=t===undefined?window:t;return cn().browser.isFirefox()?at.none():at.from(e.visualViewport)},Gi=function(t,e,n,i){return{x:t,y:e,width:n,height:i,right:t+n,bottom:e+i}},Xi=function(t){var i=t===undefined?window:t,e=i.document,r=Wi(An.fromDom(e));return Ki(i).fold(function(){var t=i.document.documentElement,e=t.clientWidth,n=t.clientHeight;return Gi(r.left,r.top,e,n)},function(t){return Gi(Math.max(t.pageLeft,r.left),Math.max(t.pageTop,r.top),t.width,t.height)})},Qi=function(e){return function(t){return!!t&&t.nodeType===e}},Ji=function(t){return!!t&&!Object.getPrototypeOf(t)},Zi=Qi(1),tr=function(t){var n=t.map(function(t){return t.toLowerCase()});return function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();return ft(n,e)}return!1}},er=function(i,t){var r=t.toLowerCase().split(" ");return function(t){if(Zi(t))for(var e=0;e<r.length;e++){var n=t.ownerDocument.defaultView.getComputedStyle(t,null);if((n?n.getPropertyValue(i):null)===r[e])return!0}return!1}},nr=function(e){return function(t){return Zi(t)&&t.hasAttribute(e)}},ir=function(e,n){return function(t){return Zi(t)&&t.getAttribute(e)===n}},rr=function(t){return Zi(t)&&t.hasAttribute("data-mce-bogus")},or=function(t){return Zi(t)&&"all"===t.getAttribute("data-mce-bogus")},sr=function(t){return Zi(t)&&"TABLE"===t.tagName},ar=function(e){return function(t){if(Zi(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},ur=tr(["textarea","input"]),lr=Qi(3),cr=Qi(8),dr=Qi(9),hr=Qi(11),fr=tr(["br"]),pr=tr(["img"]),mr=ar("true"),gr=ar("false"),vr=tr(["td","th"]),br=tr(["video","audio","object","embed"]),yr=function(t,e,n){return void 0===n&&(n=X),t.exists(function(t){return n(t,e)})},wr=function(t){for(var e=[],n=function(t){e.push(t)},i=0;i<t.length;i++)t[i].each(n);return e},_r=function(t,e,n){return t.isSome()&&e.isSome()?at.some(n(t.getOrDie(),e.getOrDie())):at.none()},xr=function(t,e,n,i){return t.isSome()&&e.isSome()&&n.isSome()?at.some(i(t.getOrDie(),e.getOrDie(),n.getOrDie())):at.none()},Cr=function(t,e){return t?at.some(e):at.none()},kr=function(t){return t.style!==undefined&&q(t.style.getPropertyValue)},Sr=function(t,e,n){if(!(wt(n)||j(n)||W(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Tr=function(t,e,n){Sr(t.dom,e,n)},Er=function(t,e){var n=t.dom;Ut(e,function(t,e){Sr(n,e,t)})},Nr=function(t,e){var n=t.dom.getAttribute(e);return null===n?undefined:n},Dr=function(t,e){return at.from(Nr(t,e))},Ar=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Ir=function(t,e){t.dom.removeAttribute(e)},Pr=function(t){return St(t.dom.attributes,function(t,e){return t[e.name]=e.value,t},{})},Rr=function(t,e,n){if(!wt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);kr(t)&&t.style.setProperty(e,n)},Or=function(t,e){var n=t.dom;Ut(e,function(t,e){Rr(n,e,t)})},Mr=function(t,e){var n=t.dom,i=window.getComputedStyle(n).getPropertyValue(e);return""!==i||Li(t)?i:Fr(n,e)},Fr=function(t,e){return kr(t)?t.style.getPropertyValue(e):""},$r=function(t,e){var n=t.dom,i=Fr(n,e);return at.from(i).filter(function(t){return 0<t.length})},Lr=function(t){var e={},n=t.dom;if(kr(n))for(var i=0;i<n.style.length;i++){var r=n.style.item(i);e[r]=n.style[r]}return e},Hr=function(t){return t.dom.offsetWidth},Br=cn().browser,zr=function(t){return Et(t,Qn)},jr=function(t){return Br.isFirefox()&&"table"===Yn(t)?zr(fi(t)).filter(function(t){return"caption"===Yn(t)}).bind(function(r){return zr(hi(r)).map(function(t){var e=t.dom.offsetTop,n=r.dom.offsetTop,i=r.dom.offsetHeight;return e<=n?-i:0})}).getOr(0):0},Ur=function(t,e){return t.children&&ft(t.children,e)},qr=function(t,e,n){var i=0,r=0,o=t.ownerDocument;if(n=n||t,e){if(n===t&&e.getBoundingClientRect&&"static"===Mr(An.fromDom(t),"position")){var s=e.getBoundingClientRect();return{x:i=s.left+(o.documentElement.scrollLeft||t.scrollLeft)-o.documentElement.clientLeft,y:r=s.top+(o.documentElement.scrollTop||t.scrollTop)-o.documentElement.clientTop}}for(var a=e;a&&a!==n&&a.nodeType&&!Ur(a,n);){var u=a;i+=u.offsetLeft||0,r+=u.offsetTop||0,a=u.offsetParent}for(a=e.parentNode;a&&a!==n&&a.nodeType&&!Ur(a,n);)i-=a.scrollLeft||0,r-=a.scrollTop||0,a=a.parentNode;r+=jr(An.fromDom(e))}return{x:i,y:r}},Wr={},Vr={exports:Wr};!function(t){var e,n;e=this,n=function(){var p,t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};p=e,function(t){function i(){}function r(t,e){return function(){t.apply(e,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],d(t,this)}function s(i,r){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,o._immediateFn(function(){var t=1===i._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(i._value)}catch(n){return void u(r.promise,n)}a(r.promise,e)}else(1===i._state?a:u)(r.promise,i._value)})):i._deferreds.push(r)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void d(r(n,e),t)}t._state=1,t._value=e,l(t)}catch(i){u(t,i)}}function u(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,u(e,t))})}catch(i){if(n)return;n=!0,u(e,i)}}var e=setTimeout;o.prototype["catch"]=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return s(this,new c(t,e,n)),n},o.all=function(t){var u=Array.prototype.slice.call(t);return new o(function(r,o){function s(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){s(e,t)},o)}u[e]=t,0==--a&&r(u)}catch(i){o(i)}}if(0===u.length)return r([]);for(var a=u.length,t=0;t<u.length;t++)s(t,u[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(r){return new o(function(t,e){for(var n=0,i=r.length;n<i;n++)r[n].then(t,e)})},o._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){e(t,0)},o._unhandledRejectionFn=function n(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function h(t){o._immediateFn=t},o._setUnhandledRejectionFn=function f(t){o._unhandledRejectionFn=t},p.exports?p.exports=o:t.Promise||(t.Promise=o)}(t);var n=e.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||n}},"object"==typeof Wr&&void 0!==Vr?Vr.exports=n():"function"==typeof t&&t.amd?t(n):(e="undefined"!=typeof globalThis?globalThis:e||self).EphoxContactWrapper=n()}(undefined);var Yr=Vr.exports.boltExport,Kr=function(t){var n=at.none(),e=[],i=function(n){return Kr(function(e){r(function(t){e(n(t))})})},r=function(t){s()?u(t):e.push(t)},o=function(t){s()||(n=at.some(t),a(e),e=[])},s=function(){return n.isSome()},a=function(t){kt(t,u)},u=function(e){n.each(function(t){setTimeout(function(){e(t)},0)})};return t(o),{get:r,map:i,isReady:s}},Gr=function(e){return Kr(function(t){t(e)})},Xr={nu:Kr,pure:Gr},Qr=function(t){setTimeout(function(){throw t},0)},Jr=function(n){var t=function(t){n().then(t,Qr)};return{map:function(t){return Jr(function(){return n().then(t)})},bind:function(e){return Jr(function(){return n().then(function(t){return e(t).toPromise()})})},anonBind:function(t){return Jr(function(){return n().then(function(){return t.toPromise()})})},toLazy:function(){return Xr.nu(t)},toCached:function(){var t=null;return Jr(function(){return null===t&&(t=n()),t})},toPromise:n,get:t}},Zr={nu:function(t){return Jr(function(){return new Yr(t)})},pure:function(t){return Jr(function(){return Yr.resolve(t)})}},to=function(s,t){return t(function(n){var i=[],r=0,o=function(e){return function(t){i[e]=t,++r>=s.length&&n(i)}};0===s.length?n([]):kt(s,function(t,e){t.get(o(e))})})},eo=function(t){return to(t,Zr.nu)},no=function(n){var t=function(){return no(n)},e=function(){return no(n)},i=function(t){return no(t(n))},r=function(){return no(n)},o=function(t){t(n)},s=function(t){return t(n)},a=function(t,e){return e(n)},u=function(t){return t(n)},l=function(t){return t(n)},c=function(){return at.some(n)};return{isValue:nt,isError:et,getOr:Ct(n),getOrThunk:Ct(n),getOrDie:Ct(n),or:t,orThunk:e,fold:a,map:i,mapError:r,each:o,bind:s,exists:u,forall:l,toOptional:c}},io=function(e){return{isValue:et,isError:nt,getOr:G,getOrThunk:function(t){return t()},getOrDie:function(){return J(String(e))()},or:G,orThunk:function(t){return t()},fold:function(t){return t(e)},map:function(){return io(e)},mapError:function(t){return io(t(e))},each:xt,bind:function(){return io(e)},exists:et,forall:nt,toOptional:at.none}},ro=function(t,e){return t.fold(function(){return io(e)},no)},oo={value:no,error:io,fromOption:ro},so={generate:function(s){if(!B(s))throw new Error("cases must be an array");if(0===s.length)throw new Error("there must be at least one case");var a=[],n={};return kt(s,function(t,i){var e=zt(t);if(1!==e.length)throw new Error("one and only one name per case");var r=e[0],o=t[r];if(n[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!B(o))throw new Error("case arguments must be an array");a.push(r),n[r]=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.length;if(e!==o.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+o.length+" ("+o+"), got "+e);return{fold:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length!==s.length)throw new Error("Wrong number of arguments to fold. Expected "+s.length+", got "+t.length);return t[i].apply(null,n)},match:function(t){var e=zt(t);if(a.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+e.join(","));if(!It(a,function(t){return ft(e,t)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+a.join(", "));return t[r].apply(null,n)},log:function(t){console.log(t,{constructors:a,constructor:r,params:n})}}}}),n}};so.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var ao,uo,lo,co,ho,fo,po,mo,go,vo,bo,yo,wo,_o,xo,Co,ko,So,To,Eo=function(t){return t.fold(G,G)},No=function(t,e,n){for(var i=t.dom,r=q(n)?n:et;i.parentNode;){i=i.parentNode;var o=An.fromDom(i);if(e(o))return at.some(o);if(r(o))break}return at.none()},Do=function(t,e,n){return i(function(t,e){return e(t)},No,t,e,n)},Ao=function(e,n){var t=e.dom;return t.parentNode?Io(An.fromDom(t.parentNode),function(t){return!Un(e,t)&&n(t)}):at.none()},Io=function(t,e){var n=function(t){return e(An.fromDom(t))};return Et(t.dom.childNodes,n).map(An.fromDom)},Po=function(t,e,n){return No(t,function(t){return Hn(t,e)},n)},Ro=function(t,e){return jn(e,t)},Oo=function(t,e,n){return i(function(t,e){return Hn(t,e)},Po,t,e,n)},Mo=window.Promise?window.Promise:Yr,Fo=function(t,e){for(var n=window.requestAnimationFrame,i=["ms","moz","webkit"],r=function(t){window.setTimeout(t,0)},o=0;o<i.length&&!n;o++)n=window[i[o]+"RequestAnimationFrame"];n||(n=r),n(t,e)},$o=function(t,e){return"number"!=typeof e&&(e=0),setTimeout(t,e)},Lo=function(t,e){return"number"!=typeof e&&(e=1),setInterval(t,e)},Ho=function(n,i){var r,t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(r),r=$o(function(){n.apply(this,t)},i)};return t.stop=function(){clearTimeout(r)},t},Bo={requestAnimationFrame:function(t,e){ao?ao.then(t):ao=new Mo(function(t){e||(e=document.body),Fo(t,e)}).then(t)},setTimeout:$o,setInterval:Lo,setEditorTimeout:function(t,e,n){return $o(function(){t.removed||e()},n)},setEditorInterval:function(t,e,n){var i=Lo(function(){t.removed?clearInterval(i):e()},n);return i},debounce:Ho,throttle:Ho,clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)}},zo=function(f,p){void 0===p&&(p={});var e=0,m={},n=An.fromDom(f),g=ii(n),v=p.maxLoadTime||5e3,b=function(t){Ii(Ci(n),t)},i=function(t){var e=Ci(n);Ro(e,"#"+t).each(Fi)},y=function(t){return Jt(m,t).getOrThunk(function(){return{id:"mce-u"+e++,passed:[],failed:[],count:0}})},r=function(t,e,n){var i,r=Sn._addCacheSuffix(t),o=y(r);(m[r]=o).count++;var s=function(t,e){for(var n=t.length;n--;)t[n]();o.status=e,o.passed=[],o.failed=[],i&&(i.onload=null,i.onerror=null,i=null)},a=function(){return s(o.passed,2)},u=function(){return s(o.failed,3)},l=function(t,e){t()||(Date.now()-h<v?Bo.setTimeout(e):u())},c=function(){l(function(){for(var t=f.styleSheets,e=t.length;e--;){var n=t[e].ownerNode;if(n&&n.id===i.id)return a(),!0}return!1},c)};if(e&&o.passed.push(e),n&&o.failed.push(n),1!==o.status)if(2!==o.status)if(3!==o.status){o.status=1;var d=An.fromTag("link",g.dom);Er(d,{rel:"stylesheet",type:"text/css",id:o.id});var h=Date.now();p.contentCssCors&&Tr(d,"crossOrigin","anonymous"),p.referrerPolicy&&Tr(d,"referrerpolicy",p.referrerPolicy),(i=d.dom).onload=c,i.onerror=u,b(d),Tr(d,"href",r)}else u();else a()},o=function(e){return Zr.nu(function(t){r(e,V(t,Ct(oo.value(e))),V(t,Ct(oo.error(e))))})},s=function(t){var e=Sn._addCacheSuffix(t);Jt(m,e).each(function(t){0===--t.count&&(delete m[e],i(t.id))})},t=function(t){kt(t,function(t){s(t)})};return{load:r,loadAll:function(t,n,i){eo(mt(t,o)).get(function(t){var e=vt(t,function(t){return t.isValue()});0<e.fail.length?i(e.fail.map(Eo)):n(e.pass.map(Eo))})},unload:s,unloadAll:t,_setReferrerPolicy:function(t){p.referrerPolicy=t}}},jo=function(){var i=new WeakMap;return{forElement:function(t,e){var n=xi(t).dom;return at.from(i.get(n)).getOrThunk(function(){var t=zo(n,e);return i.set(n,t),t})}}}(),Uo=function(){function t(t,e){this.node=t,this.rootNode=e,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return t.prototype.current=function(){return this.node},t.prototype.next=function(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node},t.prototype.prev=function(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node},t.prototype.prev2=function(t){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",t),this.node},t.prototype.findSibling=function(t,e,n,i){var r,o;if(t){if(!i&&t[e])return t[e];if(t!==this.rootNode){if(r=t[n])return r;for(o=t.parentNode;o&&o!==this.rootNode;o=o.parentNode)if(r=o[n])return r}}},t.prototype.findPreviousNode=function(t,e,n,i){var r,o,s;if(t){if(r=t[n],this.rootNode&&r===this.rootNode)return;if(r){if(!i)for(s=r[e];s;s=s[e])if(!s[e])return s;return r}if((o=t.parentNode)&&o!==this.rootNode)return o}},t}(),qo=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Wo=["td","th"],Vo=["thead","tbody","tfoot"],Yo=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Ko=["li","dd","dt"],Go=["ul","ol","dl"],Xo=["pre","script","textarea","style"],Qo=function(e){var n;return function(t){return n=n||Ot(e,nt),Zt(n,Yn(t))}},Jo=Qo(["h1","h2","h3","h4","h5","h6"]),Zo=Qo(qo),ts=function(t){return"table"===Yn(t)},es=function(t){return Qn(t)&&!Zo(t)},ns=function(t){return Qn(t)&&"br"===Yn(t)},is=Qo(Yo),rs=Qo(Go),os=Qo(Ko),ss=Qo(Vo),as=Qo(Wo),us=Qo(Xo),ls=function(t,e,n){return Po(t,e,n).isSome()},cs="\ufeff",ds="\xa0",hs=cs,fs=function(t){return t===cs},ps=function(t){return t.replace(/\uFEFF/g,"")},ms=Zi,gs=lr,vs=function(t){return gs(t)&&(t=t.parentNode),ms(t)&&t.hasAttribute("data-mce-caret")},bs=function(t){return gs(t)&&fs(t.data)},ys=function(t){return vs(t)||bs(t)},ws=function(t){return t.firstChild!==t.lastChild||!fr(t.firstChild)},_s=function(t,e){var n=t.ownerDocument.createTextNode(hs),i=t.parentNode;if(e){r=t.previousSibling;if(gs(r)){if(ys(r))return r;if(Es(r))return r.splitText(r.data.length-1)}i.insertBefore(n,t)}else{var r=t.nextSibling;if(gs(r)){if(ys(r))return r;if(Ts(r))return r.splitText(1),r}t.nextSibling?i.insertBefore(n,t.nextSibling):i.appendChild(n)}return n},xs=function(t){var e=t.container();return!!lr(e)&&(e.data.charAt(t.offset())===hs||t.isAtStart()&&bs(e.previousSibling))},Cs=function(t){var e=t.container();return!!lr(e)&&(e.data.charAt(t.offset()-1)===hs||t.isAtEnd()&&bs(e.nextSibling))},ks=function(){var t=document.createElement("br");return t.setAttribute("data-mce-bogus","1"),t},Ss=function(t,e,n){var i=e.ownerDocument.createElement(t);i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(ks());var r=e.parentNode;return n?r.insertBefore(i,e):e.nextSibling?r.insertBefore(i,e.nextSibling):r.appendChild(i),i},Ts=function(t){return gs(t)&&t.data[0]===hs},Es=function(t){return gs(t)&&t.data[t.data.length-1]===hs},Ns=function(t){var e=t.getElementsByTagName("br"),n=e[e.length-1];rr(n)&&n.parentNode.removeChild(n)},Ds=function(t){return t&&t.hasAttribute("data-mce-caret")?(Ns(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("_moz_abspos"),t):null},As=function(t){return vs(t.startContainer)},Is=mr,Ps=gr,Rs=fr,Os=lr,Ms=tr(["script","style","textarea"]),Fs=tr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),$s=tr(["table"]),Ls=ys,Hs=function(t){return!Ls(t)&&(Os(t)?!Ms(t.parentNode):Fs(t)||Rs(t)||$s(t)||zs(t))},Bs=function(t){return Zi(t)&&"true"===t.getAttribute("unselectable")},zs=function(t){return!1===Bs(t)&&Ps(t)},js=function(t,e){for(t=t.parentNode;t&&t!==e;t=t.parentNode){if(zs(t))return!1;if(Is(t))return!0}return!0},Us=function(t){return!!zs(t)&&!0!==St(Ht(t.getElementsByTagName("*")),function(t,e){return t||Is(e)},!1)},qs=function(t){return Fs(t)||Us(t)},Ws=function(t,e){return Hs(t)&&js(t,e)},Vs=/^[ \t\r\n]*$/,Ys=function(t){return Vs.test(t)},Ks=function(t,e){var n=An.fromDom(e),i=An.fromDom(t);return ls(i,"pre,code",m(Un,n))},Gs=function(t,e){return lr(t)&&Ys(t.data)&&!1===Ks(t,e)},Xs=function(t){return Zi(t)&&"A"===t.nodeName&&!t.hasAttribute("href")&&(t.hasAttribute("name")||t.hasAttribute("id"))},Qs=function(t,e){return Hs(t)&&!1===Gs(t,e)||Xs(t)||Js(t)},Js=nr("data-mce-bookmark"),Zs=nr("data-mce-bogus"),ta=ir("data-mce-bogus","all"),ea=function(t,e){var n=0;if(Qs(t,t))return!1;var i=t.firstChild;if(!i)return!0;var r=new Uo(i,t);do{if(e){if(ta(i)){i=r.next(!0);continue}if(Zs(i)){i=r.next();continue}}if(fr(i))n++,i=r.next();else{if(Qs(i,t))return!1;i=r.next()}}while(i);return n<=1},na=function(t,e){return void 0===e&&(e=!0),ea(t.dom,e)},ia=function(t){return"span"===t.nodeName.toLowerCase()},ra=function(t,e){return Y(t)&&(Qs(t,e)||es(An.fromDom(t)))},oa=function(t,e){var n=new Uo(t,e).prev(!1),i=new Uo(t,e).next(!1),r=U(n)||ra(n,e),o=U(i)||ra(i,e);return r&&o},sa=function(t){return ia(t)&&"bookmark"===t.getAttribute("data-mce-type")},aa=function(t,e){return lr(t)&&0<t.data.length&&oa(t,e)},ua=function(t){return!!Zi(t)&&0<t.childNodes.length},la=function(t){return hr(t)||dr(t)},ca=function(t,e,n){var i=n||e;if(Zi(e)&&sa(e))return e;for(var r=e.childNodes,o=r.length-1;0<=o;o--)ca(t,r[o],i);if(Zi(e)){var s=e.childNodes;1===s.length&&sa(s[0])&&e.parentNode.insertBefore(s[0],e)}return la(e)||Qs(e,i)||ua(e)||aa(e,i)||t.remove(e),e},da=Sn.makeMap,ha=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fa=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pa=/[<>&\"\']/g,ma=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,ga={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},
va={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ba={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ya=function(t){var e=An.fromTag("div").dom;return e.innerHTML=t,e.textContent||e.innerText||t},wa=function(t,e){var n,i,r,o={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)i=String.fromCharCode(parseInt(t[n],e)),va[i]||(r="&"+t[n+1]+";",o[i]=r,o[r]=i);return o}},_a=wa("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),xa=function(t,e){return t.replace(e?ha:fa,function(t){return va[t]||t})},Ca=function(t,e){return t.replace(e?ha:fa,function(t){return 1<t.length?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":va[t]||"&#"+t.charCodeAt(0)+";"})},ka=function(t,e,n){return n=n||_a,t.replace(e?ha:fa,function(t){return va[t]||n[t]||t})},Sa=function(t,e){var n=wa(e)||_a,i=function(t,e){return t.replace(e?ha:fa,function(t){return va[t]!==undefined?va[t]:n[t]!==undefined?n[t]:1<t.length?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";"})},r=function(t,e){return ka(t,e,n)},o=da(t.replace(/\+/g,","));return o.named&&o.numeric?i:o.named?e?r:ka:o.numeric?Ca:xa},Ta={encodeRaw:xa,encodeAllRaw:function(t){return(""+t).replace(pa,function(t){return va[t]||t})},encodeNumeric:Ca,encodeNamed:ka,getEncodeFunc:Sa,decode:function(t){return t.replace(ma,function(t,e){return e?65535<(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10))?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):ga[e]||String.fromCharCode(e):ba[t]||_a[t]||ya(t)})}},Ea={},Na={},Da=Sn.makeMap,Aa=Sn.each,Ia=Sn.extend,Pa=Sn.explode,Ra=Sn.inArray,Oa=function(t,e){return(t=Sn.trim(t))?t.split(e||" "):[]},Ma=function(t){var u,e,n,i,r,o,l={},s=function(t,e,n){var i,r,o,s=function(t,e){var n,i,r={};for(n=0,i=t.length;n<i;n++)r[t[n]]=e||{};return r};e=e||"","string"==typeof(n=n||[])&&(n=Oa(n));var a=Oa(t);for(i=a.length;i--;)o={attributes:s(r=Oa([u,e].join(" "))),attributesOrder:r,children:s(n,Na)},l[a[i]]=o},a=function(t,e){var n,i,r,o,s=Oa(t);n=s.length;for(var a=Oa(e);n--;)for(i=l[s[n]],r=0,o=a.length;r<o;r++)i.attributes[a[r]]={},i.attributesOrder.push(a[r])};return Ea[t]?Ea[t]:(u="id accesskey class dir lang style tabindex title role",e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(u+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",e+=" article aside details dialog figure main header footer hgroup section nav",n+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t&&(u+=" xml:lang",n=[n,o="acronym applet basefont big font strike tt"].join(" "),Aa(Oa(o),function(t){s(t,"",n)}),e=[e,r="center dir isindex noframes"].join(" "),i=[e,n].join(" "),Aa(Oa(r),function(t){s(t,"",i)})),i=i||[e,n].join(" "),s("html","manifest","head body"),s("head","","base command link meta noscript script style title"),s("title hr noscript br"),s("base","href target"),s("link","href rel media hreflang type sizes hreflang"),s("meta","name http-equiv content charset"),s("style","media type scoped"),s("script","src async defer type charset"),s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),s("address dt dd div caption","",i),s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),s("blockquote","cite",i),s("ol","reversed start type","li"),s("ul","","li"),s("li","value",i),s("dl","","dt dd"),s("a","href target rel media hreflang type",n),s("q","cite",n),s("ins del","cite datetime",i),s("img","src sizes srcset alt usemap ismap width height"),s("iframe","src name width height",i),s("embed","src type width height"),s("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),s("param","name value"),s("map","name",[i,"area"].join(" ")),s("area","alt coords shape href target rel media hreflang type"),s("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),s("colgroup","span","col"),s("col","span"),s("tbody thead tfoot","","tr"),s("tr","","td th"),s("td","colspan rowspan headers",i),s("th","colspan rowspan headers scope abbr",i),s("form","accept-charset action autocomplete enctype method name novalidate target",i),s("fieldset","disabled form name",[i,"legend"].join(" ")),s("label","form for",n),s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?i:n),s("select","disabled form multiple name required size","option optgroup"),s("optgroup","disabled label","option"),s("option","disabled label selected value"),s("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),s("menu","type label",[i,"li"].join(" ")),s("noscript","",i),"html4"!==t&&(s("wbr"),s("ruby","",[n,"rt rp"].join(" ")),s("figcaption","",i),s("mark rt rp summary bdi","",n),s("canvas","width height",i),s("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),s("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),s("picture","","img source"),s("source","src srcset type media sizes"),s("track","kind src srclang label default"),s("datalist","",[n,"option"].join(" ")),s("article section nav aside main header footer","",i),s("hgroup","","h1 h2 h3 h4 h5 h6"),s("figure","",[i,"figcaption"].join(" ")),s("time","datetime",n),s("dialog","open",i),s("command","type label icon disabled checked radiogroup command"),s("output","for form name",n),s("progress","value max",n),s("meter","value min max low high optimum",n),s("details","open",[i,"summary"].join(" ")),s("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),"html4"!==t&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allowfullscreen loading")),Aa(Oa("a form meter progress dfn"),function(t){l[t]&&delete l[t].children[t]}),delete l.caption.children.table,delete l.script,Ea[t]=l)},Fa=function(t,n){var i;return t&&(i={},"string"==typeof t&&(t={"*":t}),Aa(t,function(t,e){i[e]=i[e.toUpperCase()]="map"===n?Da(t,/[, ]/):Pa(t,/[, ]/)})),i},$a=function(o){var C={},a={},k=[],u={},e={},t=function(t,e,n){var i=o[t];return i?i=Da(i,/[, ]/,Da(i.toUpperCase(),/[, ]/)):(i=Ea[t])||(i=Da(e," ",Da(e.toUpperCase()," ")),i=Ia(i,n),Ea[t]=i),i},n=Ma((o=o||{}).schema);!1===o.verify_html&&(o.valid_elements="*[*]");var i=Fa(o.valid_styles),r=Fa(o.invalid_styles,"map"),s=Fa(o.valid_classes,"map"),l=t("whitespace_elements","pre script noscript style textarea video audio iframe object code"),c=t("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),d=t("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=t("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),f="td th iframe video audio object script code",p=t("non_empty_elements",f+" pre",d),m=t("move_caret_before_on_enter_elements",f+" table",d),g=t("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),v=t("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",g),b=t("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");Aa((o.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(t){e[t]=new RegExp("</"+t+"[^>]*>","gi")});var S=function(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")},y=function(t){var e,n,i,r,o,s,a,u,l,c,d,h,f,p,m,g,v,b,y=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,w=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,_=/[*?+]/;if(t){var x=Oa(t,",");for(C["@"]&&(g=C["@"].attributes,v=C["@"].attributesOrder),e=0,n=x.length;e<n;e++)if(o=y.exec(x[e])){if(p=o[1],l=o[2],m=o[3],u=o[5],s={attributes:h={},attributesOrder:f=[]},"#"===p&&(s.paddEmpty=!0),"-"===p&&(s.removeEmpty=!0),"!"===o[4]&&(s.removeEmptyAttrs=!0),g&&(Ut(g,function(t,e){h[e]=t}),f.push.apply(f,v)),u)for(i=0,r=(u=Oa(u,"|")).length;i<r;i++)if(o=w.exec(u[i])){if(a={},d=o[1],c=o[2].replace(/[\\:]:/g,":"),p=o[3],b=o[4],"!"===d&&(s.attributesRequired=s.attributesRequired||[],s.attributesRequired.push(c),a.required=!0),"-"===d){delete h[c],f.splice(Ra(f,c),1);continue}p&&("="===p&&(s.attributesDefault=s.attributesDefault||[],s.attributesDefault.push({name:c,value:b}),a.defaultValue=b),":"===p&&(s.attributesForced=s.attributesForced||[],s.attributesForced.push({name:c,value:b}),a.forcedValue=b),"<"===p&&(a.validValues=Da(b,"?"))),_.test(c)?(s.attributePatterns=s.attributePatterns||[],a.pattern=S(c),s.attributePatterns.push(a)):(h[c]||f.push(c),h[c]=a)}g||"@"!==l||(g=h,v=f),m&&(s.outputName=l,C[m]=s),_.test(l)?(s.pattern=S(l),k.push(s)):C[l]=s}}},w=function(t){C={},k=[],y(t),Aa(n,function(t,e){a[e]=t.children})},_=function(t){var s=/^(~)?(.+)$/;t&&(Ea.text_block_elements=Ea.block_elements=null,Aa(Oa(t,","),function(t){var e=s.exec(t),n="~"===e[1],i=n?"span":"div",r=e[2];if(a[r]=a[i],u[r]=i,n||(v[r.toUpperCase()]={},v[r]={}),!C[r]){var o=C[i];delete(o=Ia({},o)).removeEmptyAttrs,delete o.removeEmpty,C[r]=o}Aa(a,function(t,e){t[i]&&(a[e]=t=Ia({},a[e]),t[r]=t[i])})}))},x=function(t){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Ea[o.schema]=null,t&&Aa(Oa(t,","),function(t){var e,n,i=r.exec(t);i&&(n=i[1],e=n?a[i[2]]:a[i[2]]={"#comment":{}},e=a[i[2]],Aa(Oa(i[3],"|"),function(t){"-"===n?delete e[t]:e[t]={}}))})},T=function(t){var e,n=C[t];if(n)return n;for(e=k.length;e--;)if((n=k[e]).pattern.test(t))return n};o.valid_elements?w(o.valid_elements):(Aa(n,function(t,e){C[e]={attributes:t.attributes,attributesOrder:t.attributesOrder},a[e]=t.children}),"html5"!==o.schema&&Aa(Oa("strong/b em/i"),function(t){var e=Oa(t,"/");C[e[1]].outputName=e[0]}),Aa(Oa("ol ul sub sup blockquote span font a table tbody strong em b i"),function(t){C[t]&&(C[t].removeEmpty=!0)}),Aa(Oa("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(t){C[t].paddEmpty=!0}),Aa(Oa("span"),function(t){C[t].removeEmptyAttrs=!0})),_(o.custom_elements),x(o.valid_children),y(o.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),Aa({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(t,e){C[e]&&(C[e].parentsRequired=Oa(t))}),o.invalid_elements&&Aa(Pa(o.invalid_elements),function(t){C[t]&&delete C[t]}),T("span")||y("span[!data-mce-type|*]");var E=Ct(i),N=Ct(r),D=Ct(s),A=Ct(h),I=Ct(v),P=Ct(g),R=Ct(b),O=Ct(d),M=Ct(c),F=Ct(p),$=Ct(m),L=Ct(l),H=Ct(e),B=function(t,e){var n=a[t.toLowerCase()];return!(!n||!n[e.toLowerCase()])},z=function(t,e){var n,i,r=T(t);if(r){if(!e)return!0;if(r.attributes[e])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(t))return!0}return!1},j=Ct(u);return{children:a,elements:C,getValidStyles:E,getValidClasses:D,getBlockElements:I,getInvalidStyles:N,getShortEndedElements:O,getTextBlockElements:P,getTextInlineElements:R,getBoolAttrs:A,getElementRule:T,getSelfClosingElements:M,getNonEmptyElements:F,getMoveCaretBeforeOnEnterElements:$,getWhiteSpaceElements:L,getSpecialElements:H,isValidChild:B,isValid:z,getCustomElements:j,addValidElements:y,setValidElements:w,addCustomElements:_,addValidChildren:x}},La=function(t,e,n,i){var r=function(t){return 1<(t=parseInt(t,10).toString(16)).length?t:"0"+t};return"#"+r(e)+r(n)+r(i)},Ha=function(g,t){var v,a,r,b=this,y=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,w=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,_=/\s*([^:]+):\s*([^;]+);?/g,x=/\s+$/,C={},k=cs;g=g||{},t&&(a=t.getValidStyles(),r=t.getInvalidStyles());var e=("\\\" \\' \\; \\: ; : "+k).split(" ");for(v=0;v<e.length;v++)C[e[v]]=k+v,C[k+v]=e[v];return{toHex:function(t){return t.replace(y,La)},parse:function(t){var e,n,i,r,u={},a=g.url_converter,l=g.url_converter_scope||b,o=function(t,e,n){var i=u[t+"-top"+e];if(i){var r=u[t+"-right"+e];if(r){var o=u[t+"-bottom"+e];if(o){var s=u[t+"-left"+e];if(s){var a=[i,r,o,s];for(v=a.length-1;v--&&a[v]===a[v+1];);-1<v&&n||(u[t+e]=-1===v?a[0]:a.join(" "),delete u[t+"-top"+e],delete u[t+"-right"+e],delete u[t+"-bottom"+e],delete u[t+"-left"+e])}}}}},s=function(t){var e,n=u[t];if(n){for(e=(n=n.split(" ")).length;e--;)if(n[e]!==n[0])return!1;return u[t]=n[0],!0}},c=function(t,e,n,i){s(e)&&s(n)&&s(i)&&(u[t]=u[e]+" "+u[n]+" "+u[i],delete u[e],delete u[n],delete u[i])},d=function(t){return r=!0,C[t]},h=function(t,e){return r&&(t=t.replace(/\uFEFF[0-9]/g,function(t){return C[t]})),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t},f=function(t){return String.fromCharCode(parseInt(t.slice(1),16))},p=function(t){return t.replace(/\\[0-9a-f]+/gi,f)},m=function(t,e,n,i,r,o){if(r=r||o)return"'"+(r=h(r)).replace(/\'/g,"\\'")+"'";if(e=h(e||n||i),!g.allow_script_urls){var s=e.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!g.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return a&&(e=a.call(l,e,"style")),"url('"+e.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,d).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(t){return t.replace(/[;:]/g,d)});e=_.exec(t);)if(_.lastIndex=e.index+e[0].length,n=e[1].replace(x,"").toLowerCase(),i=e[2].replace(x,""),n&&i){if(n=p(n),i=p(i),-1!==n.indexOf(k)||-1!==n.indexOf('"'))continue;if(!g.allow_script_urls&&("behavior"===n||/expression\s*\(|\/\*|\*\//.test(i)))continue;"font-weight"===n&&"700"===i?i="bold":"color"!==n&&"background-color"!==n||(i=i.toLowerCase()),i=(i=i.replace(y,La)).replace(w,m),u[n]=r?h(i,!0):i}o("border","",!0),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),c("border","border-width","border-style","border-color"),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}return u},serialize:function(o,n){var s="",t=function(t){var e,n=a[t];if(n)for(var i=0,r=n.length;i<r;i++)t=n[i],(e=o[t])&&(s+=(0<s.length?" ":"")+t+": "+e+";")},i=function(t,e){var n=r["*"];return(!n||!n[t])&&!((n=r[e])&&n[t])};return n&&a?(t("*"),t(n)):Ut(o,function(t,e){!t||r&&!i(e,n)||(s+=(0<s.length?" ":"")+e+": "+t+";")}),s}}},Ba={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},za=function(t){return t instanceof Event||q(t.initEvent)},ja=function(t){return t.isDefaultPrevented===nt||t.isDefaultPrevented===et},Ua=function(t){return _t(t.preventDefault)||za(t)},qa=function(t,e){var n=null!=e?e:{};for(var i in t)Zt(Ba,i)||(n[i]=t[i]);return Y(n.composedPath)&&(n.composedPath=function(){return t.composedPath()}),n},Wa=function(t,e,n,i){var r,o=qa(e,i);return o.type=t,_t(o.target)&&(o.target=null!==(r=o.srcElement)&&void 0!==r?r:n),Ua(e)&&(o.preventDefault=function(){o.defaultPrevented=!0,o.isDefaultPrevented=nt,q(e.preventDefault)?e.preventDefault():za(e)&&(e.returnValue=!1)},o.stopPropagation=function(){o.cancelBubble=!0,o.isPropagationStopped=nt,q(e.stopPropagation)?e.stopPropagation():za(e)&&(e.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=nt,o.stopPropagation()},ja(o)||(o.isDefaultPrevented=!0===o.defaultPrevented?nt:et,o.isPropagationStopped=!0===o.cancelBubble?nt:et,o.isImmediatePropagationStopped=et)),o},Va="mce-data-",Ya=/^(?:mouse|contextmenu)|click/,Ka=function(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent&&t.attachEvent("on"+e,n)},Ga=function(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i||!1):t.detachEvent&&t.detachEvent("on"+e,n)},Xa=function(t){return Y(t)&&Ya.test(t.type)},Qa=function(t,e){var n=Wa(t.type,t,document,e);if(Xa(t)&&U(t.pageX)&&!U(t.clientX)){var i=n.target.ownerDocument||document,r=i.documentElement,o=i.body,s=n;s.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),s.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)}return U(n.metaKey)&&(n.metaKey=!1),n},Ja=function(t,e,n){var i=t.document,r={type:"ready"};if(n.domLoaded)e(r);else{var o=function(){Ga(t,"DOMContentLoaded",o),Ga(t,"load",o),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};(function(){return"complete"===i.readyState||"interactive"===i.readyState&&i.body})()?o():Ka(t,"DOMContentLoaded",o),n.domLoaded||Ka(t,"load",o)}},Za=function(){function t(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Va+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return t.prototype.bind=function(t,e,n,i){var r,o,s,a,u,l,c,d=this,h=window,f=function(t){d.executeHandlers(Qa(t||h.event),r)};if(t&&3!==t.nodeType&&8!==t.nodeType){t[d.expando]?r=t[d.expando]:(r=d.count++,t[d.expando]=r,d.events[r]={}),i=i||t;var p=e.split(" ");for(s=p.length;s--;)l=f,u=c=!1,"DOMContentLoaded"===(a=p[s])&&(a="ready"),d.domLoaded&&"ready"===a&&"complete"===t.readyState?n.call(i,Qa({type:a})):(d.hasMouseEnterLeave||(u=d.mouseEnterLeave[a])&&(l=function(t){var e=t.currentTarget,n=t.relatedTarget;if(n&&e.contains)n=e.contains(n);else for(;n&&n!==e;)n=n.parentNode;n||((t=Qa(t||h.event)).type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=e,d.executeHandlers(t,r))}),d.hasFocusIn||"focusin"!==a&&"focusout"!==a||(c=!0,u="focusin"===a?"focus":"blur",l=function(t){(t=Qa(t||h.event)).type="focus"===t.type?"focusin":"focusout",d.executeHandlers(t,r)}),(o=d.events[r][a])?"ready"===a&&d.domLoaded?n(Qa({type:a})):o.push({func:n,scope:i}):(d.events[r][a]=o=[{func:n,scope:i}],o.fakeName=u,o.capture=c,o.nativeHandler=l,"ready"===a?Ja(t,l,d):Ka(t,u||a,l,c)));return t=o=null,n}},t.prototype.unbind=function(n,t,e){var i,r,o,s,a;if(!n||3===n.nodeType||8===n.nodeType)return this;var u=n[this.expando];if(u){if(a=this.events[u],t){var l=t.split(" ");for(r=l.length;r--;)if(i=a[s=l[r]]){if(e)for(o=i.length;o--;)if(i[o].func===e){var c=i.nativeHandler,d=i.fakeName,h=i.capture;(i=i.slice(0,o).concat(i.slice(o+1))).nativeHandler=c,i.fakeName=d,i.capture=h,a[s]=i}e&&0!==i.length||(delete a[s],Ga(n,i.fakeName||s,i.nativeHandler,i.capture))}}else Ut(a,function(t,e){Ga(n,t.fakeName||e,t.nativeHandler,t.capture)}),a={};for(s in a)if(Zt(a,s))return this;delete this.events[u];try{delete n[this.expando]}catch(f){n[this.expando]=null}}return this},t.prototype.fire=function(t,e,n){var i;if(!t||3===t.nodeType||8===t.nodeType)return this;for(var r=Qa({type:e,target:t},n);(i=t[this.expando])&&this.executeHandlers(r,i),(t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow)&&!r.isPropagationStopped(););return this},t.prototype.clean=function(t){var e,n;if(!t||3===t.nodeType||8===t.nodeType)return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(this.unbind(t),e=(n=t.getElementsByTagName("*")).length;e--;)(t=n[e])[this.expando]&&this.unbind(t);return this},t.prototype.destroy=function(){this.events={}},t.prototype.cancel=function(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1},t.prototype.executeHandlers=function(t,e){var n=this.events[e],i=n&&n[t.type];if(i)for(var r=0,o=i.length;r<o;r++){var s=i[r];if(s&&!1===s.func.call(s.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}},t.Event=new t,t}(),tu="sizzle"+-new Date,eu=window.document,nu=0,iu=0,ru=t(),ou=t(),su=t(),au=function(t,e){return t===e&&(bo=!0),0},uu=typeof undefined,lu=1<<31,cu={}.hasOwnProperty,du=[],hu=du.pop,fu=du.push,pu=du.push,mu=du.slice,gu=du.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},vu="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",bu="[\\x20\\t\\r\\n\\f]",yu="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",wu="\\["+bu+"*("+yu+")(?:"+bu+"*([*^$|!~]?=)"+bu+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+yu+"))|)"+bu+"*\\]",_u=":("+yu+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+wu+")*)|.*)\\)|)",xu=new RegExp("^"+bu+"+|((?:^|[^\\\\])(?:\\\\.)*)"+bu+"+$","g"),Cu=new RegExp("^"+bu+"*,"+bu+"*"),ku=new RegExp("^"+bu+"*([>+~]|"+bu+")"+bu+"*"),Su=new RegExp("="+bu+"*([^\\]'\"]*?)"+bu+"*\\]","g"),Tu=new RegExp(_u),Eu=new RegExp("^"+yu+"$"),Nu={ID:new RegExp("^#("+yu+")"),CLASS:new RegExp("^\\.("+yu+")"),TAG:new RegExp("^("+yu+"|[*])"),ATTR:new RegExp("^"+wu),PSEUDO:new RegExp("^"+_u),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+bu+"*(even|odd|(([+-]|)(\\d*)n|)"+bu+"*(?:([+-]|)"+bu+"*(\\d+)|))"+bu+"*\\)|)","i"),bool:new RegExp("^(?:"+vu+")$","i"),needsContext:new RegExp("^"+bu+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+bu+"*((?:-\\d)?\\d*)"+bu+"*\\)|)(?=[^-]|$)","i")},Du=/^(?:input|select|textarea|button)$/i,Au=/^h\d$/i,Iu=/^[^{]+\{\s*\[native \w/,Pu=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ru=/[+~]/,Ou=/'|\\/g,Mu=new RegExp("\\\\([\\da-f]{1,6}"+bu+"?|("+bu+")|.)","ig"),Fu=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{pu.apply(du=mu.call(eu.childNodes),eu.childNodes),du[eu.childNodes.length].nodeType}catch(_B){pu={apply:du.length?function(t,e){fu.apply(t,mu.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}var $u=function(t,e,n,i){var r,o,s,a,u,l,c,d,h,f;if((e?e.ownerDocument||e:eu)!==wo&&yo(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=(e=e||wo).nodeType)&&9!==a)return[];if(xo&&!i){if(r=Pu.exec(t))if(s=r[1]){if(9===a){if(!(o=e.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&To(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return pu.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&uo.getElementsByClassName)return pu.apply(n,e.getElementsByClassName(s)),n}if(uo.qsa&&(!Co||!Co.test(t))){if(d=c=tu,h=e,f=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=fo(t),(c=e.getAttribute("id"))?d=c.replace(Ou,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+v(l[u]);h=Ru.test(t)&&g(e.parentNode)||e,f=l.join(",")}if(f)try{return pu.apply(n,h.querySelectorAll(f)),n}catch(p){}finally{c||e.removeAttribute("id")}}}return mo(t.replace(xu,"$1"),e,n,i)};uo=$u.support={},ho=$u.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},yo=$u.setDocument=function(t){function e(t){try{return t.top}catch(e){}return null}var n,u=t?t.ownerDocument||t:eu,i=u.defaultView;return u!==wo&&9===u.nodeType&&u.documentElement?(_o=(wo=u).documentElement,xo=!ho(u),i&&i!==e(i)&&(i.addEventListener?i.addEventListener("unload",function(){yo()},!1):i.attachEvent&&i.attachEvent("onunload",function(){yo()})),uo.attributes=!0,uo.getElementsByTagName=!0,uo.getElementsByClassName=Iu.test(u.getElementsByClassName),uo.getById=!0,lo.find.ID=function(t,e){if(typeof e.getElementById!==uu&&xo){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},lo.filter.ID=function(t){var e=t.replace(Mu,Fu);return function(t){return t.getAttribute("id")===e}},lo.find.TAG=uo.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==uu)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},lo.find.CLASS=uo.getElementsByClassName&&function(t,e){if(xo)return e.getElementsByClassName(t)},ko=[],Co=[],uo.disconnectedMatch=!0,Co=Co.length&&new RegExp(Co.join("|")),ko=ko.length&&new RegExp(ko.join("|")),n=Iu.test(_o.compareDocumentPosition),To=n||Iu.test(_o.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},au=n?function(t,e){if(t===e)return bo=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!uo.sortDetached&&e.compareDocumentPosition(t)===n?t===u||t.ownerDocument===eu&&To(eu,t)?-1:e===u||e.ownerDocument===eu&&To(eu,e)?1:vo?gu.call(vo,t)-gu.call(vo,e):0:4&n?-1:1)}:function(t,e){if(t===e)return bo=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!r||!o)return t===u?-1:e===u?1:r?-1:o?1:vo?gu.call(vo,t)-gu.call(vo,e):0;if(r===o)return c(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?c(s[i],a[i]):s[i]===eu?-1:a[i]===eu?1:0},u):wo},$u.matches=function(t,e){return $u(t,null,null,e)},$u.matchesSelector=function(t,e){if((t.ownerDocument||t)!==wo&&yo(t),e=e.replace(Su,"='$1']"),uo.matchesSelector&&xo&&(!ko||!ko.test(e))&&(!Co||!Co.test(e)))try{var n=So.call(t,e);if(n||uo.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(_B){}return 0<$u(e,wo,null,[t]).length},$u.contains=function(t,e){return(t.ownerDocument||t)!==wo&&yo(t),To(t,e)},$u.attr=function(t,e){(t.ownerDocument||t)!==wo&&yo(t);var n=lo.attrHandle[e.toLowerCase()],i=n&&cu.call(lo.attrHandle,e.toLowerCase())?n(t,e,!xo):undefined;return i!==undefined?i:uo.attributes||!xo?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},$u.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},$u.uniqueSort=function(t){var e,n=[],i=0,r=0;if(bo=!uo.detectDuplicates,vo=!uo.sortStable&&t.slice(0),t.sort(au),bo){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return vo=null,t},co=$u.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=co(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=co(e);return n},(lo=$u.selectors={cacheLength:50,createPseudo:n,match:Nu,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Mu,Fu),t[3]=(t[3]||t[4]||t[5]||"").replace(Mu,Fu),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||$u.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&$u.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Nu.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Tu.test(n)&&(e=fo(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Mu,Fu).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=ru[t+" "];return e||(e=new RegExp("(^|"+bu+")"+t+"("+bu+"|$)"))&&ru(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==uu&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=$u.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(f,t,e,p,m){var g="nth"!==f.slice(0,3),v="last"!==f.slice(-4),b="of-type"===t;return 1===p&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,o,s,a,u,l=g!==v?"nextSibling":"previousSibling",c=t.parentNode,d=b&&t.nodeName.toLowerCase(),h=!n&&!b;if(c){if(g){for(;l;){for(o=t;o=o[l];)if(b?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;u=l="only"===f&&!u&&"nextSibling"}return!0}if(u=[v?c.firstChild:c.lastChild],v&&h){for(a=(i=(r=c[tu]||(c[tu]={}))[f]||[])[0]===nu&&i[1],s=i[0]===nu&&i[2],o=a&&c.childNodes[a];o=++a&&o&&o[l]||(s=a=0)||u.pop();)if(1===o.nodeType&&++s&&o===t){r[f]=[nu,a,s];break}}else if(h&&(i=(t[tu]||(t[tu]={}
))[f])&&i[0]===nu)s=i[1];else for(;(o=++a&&o&&o[l]||(s=a=0)||u.pop())&&((b?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++s||(h&&((o[tu]||(o[tu]={}))[f]=[nu,s]),o!==t)););return(s-=m)===p||s%p==0&&0<=s/p}}},PSEUDO:function(t,o){var e,s=lo.pseudos[t]||lo.setFilters[t.toLowerCase()]||$u.error("unsupported pseudo: "+t);return s[tu]?s(o):1<s.length?(e=[t,t,"",o],lo.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,i=s(t,o),r=i.length;r--;)t[n=gu.call(t,i[r])]=!(e[n]=i[r])}):function(t){return s(t,0,e)}):s}},pseudos:{not:n(function(t){var i=[],r=[],a=po(t.replace(xu,"$1"));return a[tu]?n(function(t,e,n,i){for(var r,o=a(t,null,i,[]),s=t.length;s--;)(r=o[s])&&(t[s]=!(e[s]=r))}):function(t,e,n){return i[0]=t,a(i,null,n,r),i[0]=null,!r.pop()}}),has:n(function(e){return function(t){return 0<$u(e,t).length}}),contains:n(function(e){return e=e.replace(Mu,Fu),function(t){return-1<(t.textContent||t.innerText||co(t)).indexOf(e)}}),lang:n(function(n){return Eu.test(n||"")||$u.error("unsupported lang: "+n),n=n.replace(Mu,Fu).toLowerCase(),function(t){var e;do{if(e=xo?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=window.location&&window.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===_o},focus:function(t){return t===wo.activeElement&&(!wo.hasFocus||wo.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!lo.pseudos.empty(t)},header:function(t){return Au.test(t.nodeName)},input:function(t){return Du.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:o(function(){return[0]}),last:o(function(t,e){return[e-1]}),eq:o(function(t,e,n){return[n<0?n+e:n]}),even:o(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:o(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:o(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:o(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=lo.pseudos.eq,kt(["radio","checkbox","file","password","image"],function(t){lo.pseudos[t]=e(t)}),kt(["submit","reset"],function(t){lo.pseudos[t]=r(t)}),s.prototype=lo.filters=lo.pseudos,lo.setFilters=new s,fo=$u.tokenize=function(t,e){var n,i,r,o,s,a,u,l=ou[t+" "];if(l)return e?0:l.slice(0);for(s=t,a=[],u=lo.preFilter;s;){for(o in n&&!(i=Cu.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(r=[])),n=!1,(i=ku.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(xu," ")}),s=s.slice(n.length)),lo.filter)lo.filter.hasOwnProperty(o)&&(!(i=Nu[o].exec(s))||u[o]&&!(i=u[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length)));if(!n)break}return e?s.length:s?$u.error(t):ou(t,a).slice(0)},po=$u.compile=function(t,e){var n,i=[],r=[],o=su[t+" "];if(!o){for(e||(e=fo(t)),n=e.length;n--;)(o=p(e[n]))[tu]?i.push(o):r.push(o);(o=su(t,a(r,i))).selector=t}return o},mo=$u.select=function(t,e,n,i){var r,o,s,a,u,l="function"==typeof t&&t,c=!i&&fo(t=l.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&uo.getById&&9===e.nodeType&&xo&&lo.relative[o[1].type]){if(!(e=(lo.find.ID(s.matches[0].replace(Mu,Fu),e)||[])[0]))return n;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=Nu.needsContext.test(t)?0:o.length;r--&&(s=o[r],!lo.relative[a=s.type]);)if((u=lo.find[a])&&(i=u(s.matches[0].replace(Mu,Fu),Ru.test(o[0].type)&&g(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&v(o)))return pu.apply(n,i),n;break}}return(l||po(t,c))(i,e,!xo,n,Ru.test(t)&&g(e.parentNode)||e),n},uo.sortStable=tu.split("").sort(au).join("")===tu,uo.detectDuplicates=!!bo,yo(),uo.sortDetached=!0;var Lu=document,Hu=Array.prototype.push,Bu=Array.prototype.slice,zu=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ju=Za.Event,Uu=Sn.makeMap("children,contents,next,prev"),qu=function(t){return void 0!==t},Wu=function(t){return"string"==typeof t},Vu=function(t){return t&&t===t.window},Yu=function(t,e){var n,i=(e=e||Lu).createElement("div"),r=e.createDocumentFragment();for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return r},Ku=function(t,e,n,i){var r;if(Wu(e))e=Yu(e,ll(t[0]));else if(e.length&&!e.nodeType){if(e=fl.makeArray(e),i)for(r=e.length-1;0<=r;r--)Ku(t,e[r],n,i);else for(r=0;r<e.length;r++)Ku(t,e[r],n,i);return t}if(e.nodeType)for(r=t.length;r--;)n.call(t[r],e);return t},Gu=function(t,e){return t&&e&&-1!==(" "+t.className+" ").indexOf(" "+e+" ")},Xu=function(t,e,n){var i,r;return e=fl(e)[0],t.each(function(){var t=this;n&&i===t.parentNode||(i=t.parentNode,r=e.cloneNode(!1),t.parentNode.insertBefore(r,t)),r.appendChild(t)}),t},Qu=Sn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Ju=Sn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Zu={"for":"htmlFor","class":"className",readonly:"readOnly"},tl={"float":"cssFloat"},el={},nl={},il=function(t,e){return new fl.fn.init(t,e)},rl=function(t,e){var n;if(e.indexOf)return e.indexOf(t);for(n=e.length;n--;)if(e[n]===t)return n;return-1},ol=/^\s*|\s*$/g,sl=function(t){return null===t||t===undefined?"":(""+t).replace(ol,"")},al=function(t,e){var n,i,r,o;if(t)if((n=t.length)===undefined){for(i in t)if(t.hasOwnProperty(i)&&(o=t[i],!1===e.call(o,i,o)))break}else for(r=0;r<n&&(o=t[r],!1!==e.call(o,r,o));r++);return t},ul=function(t,n){var i=[];return al(t,function(t,e){n(e,t)&&i.push(e)}),i},ll=function(t){return t?9===t.nodeType?t:t.ownerDocument:Lu};il.fn=il.prototype={constructor:il,selector:"",context:null,length:0,init:function(t,e){var n,i,r=this;if(!t)return r;if(t.nodeType)return r.context=r[0]=t,r.length=1,r;if(e&&e.nodeType)r.context=e;else{if(e)return fl(t).attr(e);r.context=e=document}if(Wu(t)){if(!(n="<"===(r.selector=t).charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:zu.exec(t)))return fl(e).find(t);if(n[1])for(i=Yu(t,ll(e)).firstChild;i;)Hu.call(r,i),i=i.nextSibling;else{if(!(i=ll(e).getElementById(n[2])))return r;if(i.id!==n[2])return r.find(t);r.length=1,r[0]=i}}else this.add(t,!1);return r},toArray:function(){return Sn.toArray(this)},add:function(t,e){var n,i,r=this;if(Wu(t))return r.add(fl(t));if(!1!==e)for(n=fl.unique(r.toArray().concat(fl.makeArray(t))),r.length=n.length,i=0;i<n.length;i++)r[i]=n[i];else Hu.apply(r,fl.makeArray(t));return r},attr:function(e,n){var t,i=this;if("object"==typeof e)al(e,function(t,e){i.attr(t,e)});else{if(!qu(n)){if(i[0]&&1===i[0].nodeType){if((t=el[e])&&t.get)return t.get(i[0],e);if(Ju[e])return i.prop(e)?e:undefined;null===(n=i[0].getAttribute(e,2))&&(n=undefined)}return n}this.each(function(){var t;if(1===this.nodeType){if((t=el[e])&&t.set)return void t.set(this,n);null===n?this.removeAttribute(e,2):this.setAttribute(e,n,2)}})}return i},removeAttr:function(t){return this.attr(t,null)},prop:function(t,e){var n=this;if("object"==typeof(t=Zu[t]||t))al(t,function(t,e){n.prop(t,e)});else{if(!qu(e))return n[0]&&n[0].nodeType&&t in n[0]?n[0][t]:e;this.each(function(){1===this.nodeType&&(this[t]=e)})}return n},css:function(n,i){var t,r,o=this,e=function(t){return t.replace(/-(\D)/g,function(t,e){return e.toUpperCase()})},s=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t})};if("object"==typeof n)al(n,function(t,e){o.css(t,e)});else if(qu(i))n=e(n),"number"!=typeof i||Qu[n]||(i=i.toString()+"px"),o.each(function(){var t=this.style;if((r=nl[n])&&r.set)r.set(this,i);else{try{this.style[tl[n]||n]=i}catch(e){}null!==i&&""!==i||(t.removeProperty?t.removeProperty(s(n)):t.removeAttribute(n))}});else{if(t=o[0],(r=nl[n])&&r.get)return r.get(t);if(!t.ownerDocument.defaultView)return t.currentStyle?t.currentStyle[e(n)]:"";try{return t.ownerDocument.defaultView.getComputedStyle(t,null).getPropertyValue(s(n))}catch(a){return undefined}}return o},remove:function(){for(var t,e=this,n=this.length;n--;)t=e[n],ju.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var t,e=this,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(t){var e,n=this;if(qu(t)){e=n.length;try{for(;e--;)n[e].innerHTML=t}catch(i){fl(n[e]).empty().append(t)}return n}return n[0]?n[0].innerHTML:""},text:function(t){var e,n=this;if(qu(t)){for(e=n.length;e--;)"innerText"in n[e]?n[e].innerText=t:n[0].textContent=t;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Ku(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(t)})},prepend:function(){return Ku(this,arguments,function(t){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(t,this.firstChild)},!0)},before:function(){var t=this;return t[0]&&t[0].parentNode?Ku(t,arguments,function(t){this.parentNode.insertBefore(t,this)}):t},after:function(){var t=this;return t[0]&&t[0].parentNode?Ku(t,arguments,function(t){this.parentNode.insertBefore(t,this.nextSibling)},!0):t},appendTo:function(t){return fl(t).append(this),this},prependTo:function(t){return fl(t).prepend(this),this},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){return Xu(this,t)},wrapAll:function(t){return Xu(this,t,!0)},wrapInner:function(t){return this.each(function(){fl(this).contents().wrapAll(t)}),this},unwrap:function(){return this.parent().each(function(){fl(this).replaceWith(this.childNodes)})},clone:function(){var t=[];return this.each(function(){t.push(this.cloneNode(!0))}),fl(t)},addClass:function(t){return this.toggleClass(t,!0)},removeClass:function(t){return this.toggleClass(t,!1)},toggleClass:function(r,o){var t=this;return"string"!=typeof r||(-1!==r.indexOf(" ")?al(r.split(" "),function(){t.toggleClass(this,o)}):t.each(function(t,e){var n=Gu(e,r);if(n!==o){var i=e.className;n?e.className=sl((" "+i+" ").replace(" "+r+" "," ")):e.className+=i?" "+r:r}})),t},hasClass:function(t){return Gu(this[0],t)},each:function(t){return al(this,t)},on:function(t,e){return this.each(function(){ju.bind(this,t,e)})},off:function(t,e){return this.each(function(){ju.unbind(this,t,e)})},trigger:function(t){return this.each(function(){"object"==typeof t?ju.fire(this,t.type,t):ju.fire(this,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return fl(Bu.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(t){var e,n,i=[];for(e=0,n=this.length;e<n;e++)fl.find(t,this[e],i);return fl(i)},filter:function(n){return fl("function"==typeof n?ul(this.toArray(),function(t,e){return n(e,t)}):fl.filter(n,this.toArray()))},closest:function(n){var i=[];return n instanceof fl&&(n=n[0]),this.each(function(t,e){for(;e;){if("string"==typeof n&&fl(e).is(n)){i.push(e);break}if(e===n){i.push(e);break}e=e.parentNode}}),fl(i)},offset:function(t){var e,n,i,r,o=0,s=0;return t?this.css(t):((e=this[0])&&(i=(n=e.ownerDocument).documentElement,e.getBoundingClientRect&&(o=(r=e.getBoundingClientRect()).left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,s=r.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:o,top:s})},push:Hu,sort:Array.prototype.sort,splice:Array.prototype.splice},Sn.extend(il,{extend:Sn.extend,makeArray:function(t){return Vu(t)||t.nodeType?[t]:Sn.toArray(t)},inArray:rl,isArray:Sn.isArray,each:al,trim:sl,grep:ul,find:$u,expr:$u.selectors,unique:$u.uniqueSort,text:$u.getText,contains:$u.contains,filter:function(t,e,n){var i=e.length;for(n&&(t=":not("+t+")");i--;)1!==e[i].nodeType&&e.splice(i,1);return e=1===e.length?fl.find.matchesSelector(e[0],t)?[e[0]]:[]:fl.find.matches(t,e)}});var cl=function(t,e,n){var i=[],r=t[e];for("string"!=typeof n&&n instanceof fl&&(n=n[0]);r&&9!==r.nodeType;){if(n!==undefined){if(r===n)break;if("string"==typeof n&&fl(r).is(n))break}1===r.nodeType&&i.push(r),r=r[e]}return i},dl=function(t,e,n,i){var r=[];for(i instanceof fl&&(i=i[0]);t;t=t[e])if(!n||t.nodeType===n){if(i!==undefined){if(t===i)break;if("string"==typeof i&&fl(t).is(i))break}r.push(t)}return r},hl=function(t,e,n){for(t=t[e];t;t=t[e])if(t.nodeType===n)return t;return null};al({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return cl(t,"parentNode")},next:function(t){return hl(t,"nextSibling",1)},prev:function(t){return hl(t,"previousSibling",1)},children:function(t){return dl(t.firstChild,"nextSibling",1)},contents:function(t){return Sn.toArray(("iframe"===t.nodeName?t.contentDocument||t.contentWindow.document:t).childNodes)}},function(i,r){il.fn[i]=function(e){var n=[];this.each(function(){var t=r.call(n,this,e,n);t&&(fl.isArray(t)?n.push.apply(n,t):n.push(t))}),1<this.length&&(Uu[i]||(n=fl.unique(n)),0===i.indexOf("parents")&&(n=n.reverse()));var t=fl(n);return e?t.filter(e):t}}),al({parentsUntil:function(t,e){return cl(t,"parentNode",e)},nextUntil:function(t,e){return dl(t,"nextSibling",1,e).slice(1)},prevUntil:function(t,e){return dl(t,"previousSibling",1,e).slice(1)}},function(r,o){il.fn[r]=function(e,t){var n=[];this.each(function(){var t=o.call(n,this,e,n);t&&(fl.isArray(t)?n.push.apply(n,t):n.push(t))}),1<this.length&&(n=fl.unique(n),0!==r.indexOf("parents")&&"prevUntil"!==r||(n=n.reverse()));var i=fl(n);return t?i.filter(t):i}}),il.fn.is=function(t){return!!t&&0<this.filter(t).length},il.fn.init.prototype=il.fn,il.overrideDefaults=function(n){var i,r=function(t,e){return i=i||n(),0===arguments.length&&(t=i.element),e||(e=i.context),new r.fn.init(t,e)};return fl.extend(r,this),r},il.attrHooks=el,il.cssHooks=nl;var fl=il,pl=Sn.each,ml=Sn.grep,gl=yn.ie,vl=/^([a-z0-9],?)+$/i,bl=function(n,i,r){var o=i.keep_values,t={set:function(t,e,n){i.url_converter&&null!==e&&(e=i.url_converter.call(i.url_converter_scope||r(),e,n,t[0])),t.attr("data-mce-"+n,e).attr(n,e)},get:function(t,e){return t.attr("data-mce-"+e)||t.attr(e)}},e={style:{set:function(t,e){null===e||"object"!=typeof e?(o&&t.attr("data-mce-style",e),null!==e&&"string"==typeof e?(t.removeAttr("style"),t.css(n.parse(e))):t.attr("style",e)):t.css(e)},get:function(t){var e=t.attr("data-mce-style")||t.attr("style");return e=n.serialize(n.parse(e),t[0].nodeName)}}};return o&&(e.href=e.src=t),e},yl=function(t,e){var n=e.attr("style"),i=t.serialize(t.parse(n),e[0].nodeName);i||(i=null),e.attr("data-mce-style",i)},wl=function(t,e){var n,i,r=0;if(t)for(n=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)i=t.nodeType,(!e||3!==i||i!==n&&t.nodeValue.length)&&(r++,n=i);return r},_l=function(s,a){void 0===a&&(a={});var i={},u=window,n={},e=0,t=!0,r=!0,o=jo.forElement(An.fromDom(s),{contentCssCors:a.contentCssCors,referrerPolicy:a.referrerPolicy}),l=[],c=a.schema?a.schema:$a({}),d=Ha({url_converter:a.url_converter,url_converter_scope:a.url_converter_scope},a.schema),h=a.ownEvents?new Za:Za.Event,f=c.getBlockElements(),p=fl.overrideDefaults(function(){return{context:s,element:bt.getRoot()}}),m=function(t){if("string"==typeof t)return!!f[t];if(t){var e=t.nodeType;if(e)return!(1!==e||!f[t.nodeName])}return!1},g=function(t){return t&&s&&wt(t)?s.getElementById(t):t},v=function(t){return p("string"==typeof t?g(t):t)},b=function(t,e,n){var i,r,o=v(t);return o.length&&(r=(i=yt[e])&&i.get?i.get(o,e):o.attr(e)),void 0===r&&(r=n||""),r},y=function(t){var e=g(t);return e?e.attributes:[]},w=function(t,e,n){""===n&&(n=null);var i=v(t),r=i.attr(e);if(i.length){var o=yt[e];o&&o.set?o.set(i,n,e):i.attr(e,n),r!==n&&a.onSetAttrib&&a.onSetAttrib({attrElm:i,attrName:e,attrValue:n})}},_=function(e,t){if(!gl||1!==e.nodeType||t)return e.cloneNode(t);var n=s.createElement(e.nodeName);return pl(y(e),function(t){w(n,t.nodeName,b(e,t.nodeName))}),n},x=function(){return a.root_element||s.body},C=function(t){var e=Xi(t);return{x:e.x,y:e.y,w:e.width,h:e.height}},k=function(t,e){return qr(s.body,g(t),e)},S=function(t,e,n){var i=wt(e)?v(t).css(e,n):v(t).css(e);a.update_styles&&yl(d,i)},T=function(t,e){var n=v(t).css(e);a.update_styles&&yl(d,n)},E=function(t,e,n){var i=v(t);return n?i.css(e):("float"===(e=e.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}))&&(e=yn.browser.isIE()?"styleFloat":"cssFloat"),i[0]&&i[0].style?i[0].style[e]:undefined)},N=function(t){var e,n;return t=g(t),e=E(t,"width"),n=E(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},D=function(t){t=g(t);var e=k(t),n=N(t);return{x:e.x,y:e.y,w:n.w,h:n.h}},A=function(t,e){var n;if(!t)return!1;if(!Array.isArray(t)){if("*"===e)return 1===t.nodeType;if(vl.test(e)){var i=e.toLowerCase().split(/,/),r=t.nodeName.toLowerCase();for(n=i.length-1;0<=n;n--)if(i[n]===r)return!0;return!1}if(t.nodeType&&1!==t.nodeType)return!1}var o=Array.isArray(t)?t:[t];return 0<$u(e,o[0].ownerDocument||o[0],null,o).length},I=function(t,e,n,i){var r,o=[],s=g(t);for(i=i===undefined,n=n||("BODY"!==x().nodeName?x().parentNode:null),Sn.is(e,"string")&&(e="*"===(r=e)?function(t){return 1===t.nodeType}:function(t){return A(t,r)});s&&!(s===n||_t(s.nodeType)||dr(s)||hr(s));){if(!e||"function"==typeof e&&e(s)){if(!i)return[s];o.push(s)}s=s.parentNode}return i?o:null},P=function(t,e,n){var i=I(t,e,n,!1);return i&&0<i.length?i[0]:null},R=function(t,e,n){var i=e;if(t)for("string"==typeof e&&(i=function(t){return A(t,e)}),t=t[n];t;t=t[n])if("function"==typeof i&&i(t))return t;return null},O=function(t,e){return R(t,e,"nextSibling")},M=function(t,e){return R(t,e,"previousSibling")},F=function(t,e){return $u(t,g(e)||a.root_element||s,[])},$=function(t,n,i){var r,e="string"==typeof t?g(t):t;if(!e)return!1;if(Sn.isArray(e)&&(e.length||0===e.length))return r=[],pl(e,function(t,e){t&&r.push(n.call(i,"string"==typeof t?g(t):t,e))}),r;var o=i||this;return n.call(o,e)},L=function(t,e){v(t).each(function(t,n){pl(e,function(t,e){w(n,e,t)})})},H=function(t,i){var e=v(t);gl?e.each(function(t,e){if(!1!==e.canHaveHTML){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br>"+i,e.removeChild(e.firstChild)}catch(n){fl("<div></div>").html("<br>"+i).contents().slice(1).appendTo(e)}return i}}):e.html(i)},B=function(t,n,i,r,o){return $(t,function(t){var e="string"==typeof n?s.createElement(n):n;return L(e,i),r&&("string"!=typeof r&&r.nodeType?e.appendChild(r):"string"==typeof r&&H(e,r)),o?e:t.appendChild(e)})},z=function(t,e,n){return B(s.createElement(t),t,e,n,!0)},j=Ta.decode,U=Ta.encodeAllRaw,q=function(t){var e,n=s.createElement("div"),i=s.createDocumentFragment();for(i.appendChild(n),t&&(n.innerHTML=t);e=n.firstChild;)i.appendChild(e);return i.removeChild(n),i},W=function(t,e){var n=v(t);return e?n.each(function(){for(var t;t=this.firstChild;)3===t.nodeType&&0===t.data.length?this.removeChild(t):this.parentNode.insertBefore(t,this)}).remove():n.remove(),1<n.length?n.toArray():n[0]},V=function(t){return d.parse(t)},Y=function(t,e){return d.serialize(t,e)},K=function(t){var e,n;if(bt!==_l.DOM&&s===document){if(i[t])return;i[t]=!0}(n=s.getElementById("mceDefaultStyles"))||((n=s.createElement("style")).id="mceDefaultStyles",n.type="text/css",(e=s.getElementsByTagName("head")[0]).firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=t:n.appendChild(s.createTextNode(t))},G=function(t){t||(t=""),kt(t.split(","),function(t){n[t]=!0,o.load(t,xt)})},X=function(t,e,n){v(t).toggleClass(e,n).each(function(){""===this.className&&fl(this).attr("class",null)})},Q=function(t,e){v(t).addClass(e)},J=function(t,e){return v(t).hasClass(e)},Z=function(t){v(t).show()},tt=function(t){v(t).hide()},et=function(t){return"none"===v(t).css("display")},nt=function(t){var e="string"==typeof t?g(t):t;return Zi(e)?e.outerHTML:fl("<div></div>").append(fl(e).clone()).html()},it=function(t,e){v(t).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=e)}catch(t){}W(fl(this).html(e),!0)})},rt=function(t,e){var i=g(e);return $(t,function(t){var e=i.parentNode,n=i.nextSibling;return n?e.insertBefore(t,n):e.appendChild(t),t})},ot=function(e,t,n){return $(t,function(t){return Sn.is(t,"array")&&(e=e.cloneNode(!0)),n&&pl(ml(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},st=function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=z(t),pl(y(e),function(t){w(n,t.nodeName,b(e,t.nodeName))}),ot(n,e,!0)),n||e},at=function(t){return d.toHex(Sn.trim(t))},ut=function(t){if(Zi(t)){var e="a"===t.nodeName.toLowerCase()&&!b(t,"href")&&b(t,"id");if(b(t,"name")||b(t,"data-mce-bookmark")||e)return!0}return!1},lt=function(t,e){var n,i,r=0;if(ut(t))return!1;if(t=t.firstChild){var o=new Uo(t,t.parentNode),s=c?c.getWhiteSpaceElements():{};e=e||(c?c.getNonEmptyElements():null);do{if(n=t.nodeType,Zi(t)){var a=t.getAttribute("data-mce-bogus");if(a){t=o.next("all"===a);continue}if(i=t.nodeName.toLowerCase(),e&&e[i]){if("br"!==i)return!1;r++,t=o.next();continue}if(ut(t))return!1}if(8===n)return!1;if(3===n&&!Ys(t.nodeValue))return!1;if(3===n&&t.parentNode&&s[t.parentNode.nodeName]&&Ys(t.nodeValue))return!1;t=o.next()}while(t)}return r<=1},ct=function(){return s.createRange()},dt=function(t,e,n){var i,r,o,s=ct();if(t&&e)return s.setStart(t.parentNode,wl(t)),s.setEnd(e.parentNode,wl(e)),i=s.extractContents(),(s=ct()).setStart(e.parentNode,wl(e)+1),s.setEnd(t.parentNode,wl(t)+1),r=s.extractContents(),(o=t.parentNode).insertBefore(ca(bt,i),t),n?o.insertBefore(n,t):o.insertBefore(e,t),o.insertBefore(ca(bt,r),t),W(t),n||e},ht=function(t,e,n,i){if(Sn.isArray(t)){for(var r=t.length,o=[];r--;)o[r]=ht(t[r],e,n,i);return o}return!a.collect||t!==s&&t!==u||l.push([t,e,n,i]),h.bind(t,e,n,i||bt)},ft=function(t,e,n){if(Sn.isArray(t)){for(var i=t.length,r=[];i--;)r[i]=ft(t[i],e,n);return r}if(0<l.length&&(t===s||t===u))for(i=l.length;i--;){var o=l[i];t!==o[0]||e&&e!==o[1]||n&&n!==o[2]||h.unbind(o[0],o[1],o[2])}return h.unbind(t,e,n)},pt=function(t,e,n){return h.fire(t,e,n)},mt=function(t){if(t&&Zi(t)){var e=t.getAttribute("data-mce-contenteditable");return e&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null}return null},gt=function(t){for(var e=x(),n=null;t&&t!==e&&null===(n=mt(t));t=t.parentNode);return n},vt=function(){if(0<l.length)for(var t=l.length;t--;){var e=l[t];h.unbind(e[0],e[1],e[2])}Ut(n,function(t,e){o.unload(e),delete n[e]}),$u.setDocument&&$u.setDocument()},bt={doc:s,settings:a,win:u,files:n,stdMode:t,boxModel:r,styleSheetLoader:o,boundEvents:l,styles:d,schema:c,events:h,isBlock:m,$:p,$$:v,root:null,clone:_,getRoot:x,getViewPort:C,getRect:D,getSize:N,getParent:P,getParents:I,get:g,getNext:O,getPrev:M,select:F,is:A,add:B,create:z,createHTML:function(t,e,n){var i,r="";for(i in r+="<"+t,e)te(e,i)&&(r+=" "+i+'="'+U(e[i])+'"');return void 0!==n?r+">"+n+"</"+t+">":r+" />"},createFragment:q,remove:W,setStyle:S,getStyle:E,setStyles:T,removeAllAttribs:function(t){return $(t,function(t){var e,n=t.attributes;for(e=n.length-1;0<=e;e--)t.removeAttributeNode(n.item(e))})},setAttrib:w,setAttribs:L,getAttrib:b,getPos:k,parseStyle:V,serializeStyle:Y,addStyle:K,loadCSS:G,addClass:Q,removeClass:function(t,e){X(t,e,!1)},hasClass:J,toggleClass:X,show:Z,hide:tt,isHidden:et,uniqueId:function(t){return(t||"mce_")+e++},setHTML:H,getOuterHTML:nt,setOuterHTML:it,decode:j,encode:U,insertAfter:rt,replace:ot,rename:st,findCommonAncestor:function(t,e){for(var n,i=t;i;){for(n=e;n&&i!==n;)n=n.parentNode;if(i===n)break;i=i.parentNode}return!i&&t.ownerDocument?t.ownerDocument.documentElement:i},toHex:at,run:$,getAttribs:y,isEmpty:lt,createRng:ct,nodeIndex:wl,split:dt,bind:ht,unbind:ft,fire:pt,getContentEditable:mt,getContentEditableParent:gt,destroy:vt,isChildOf:function(t,e){if(gl){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}return t===e||e.contains(t)},dumpRng:function(t){return"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset}},yt=bl(d,a,Ct(bt));return bt};_l.DOM=_l(document),_l.nodeIndex=wl;var xl=_l.DOM,Cl=Sn.each,kl=Sn.grep,Sl=0,Tl=1,El=2,Nl=3,Dl=function(){function t(t){void 0===t&&(t={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=t}return t.prototype._setReferrerPolicy=function(t){this.settings.referrerPolicy=t},t.prototype.loadScript=function(t,e,n){var i,r=xl,o=function(){r.remove(u),i&&(i.onerror=i.onload=i=null)},s=function(){o(),e()},a=function(){o(),q(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+t)},u=r.uniqueId();(i=document.createElement("script")).id=u,i.type="text/javascript",i.src=Sn._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(i,"referrerpolicy",this.settings.referrerPolicy),i.onload=s,i.onerror=a,(document.getElementsByTagName("head")[0]||document.body).appendChild(i)},t.prototype.isDone=function(t){return this.states[t]===El},t.prototype.markDone=function(t){this.states[t]=El},t.prototype.add=function(t,e,n,i){var r=this.states[t];this.queue.push(t),r===undefined&&(this.states[t]=Sl),e&&(this.scriptLoadedCallbacks[t]||(this.scriptLoadedCallbacks[t]=[]),this.scriptLoadedCallbacks[t].push({success:e,failure:i,scope:n||this}))},t.prototype.load=function(t,e,n,i){return this.add(t,e,n,i)},t.prototype.remove=function(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]},t.prototype.loadQueue=function(t,e,n){this.loadScripts(this.queue,t,e,n)},t.prototype.loadScripts=function(n,t,e,i){var r=this,o=[],s=function(e,t){Cl(r.scriptLoadedCallbacks[t],function(t){q(t[e])&&t[e].call(t.scope)}),r.scriptLoadedCallbacks[t]=undefined};r.queueLoadedCallbacks.push({success:t,failure:i,scope:e||this});var a=function(){var t=kl(n);if(n.length=0,Cl(t,function(t){r.states[t]!==El?r.states[t]!==Nl?r.states[t]!==Tl&&(r.states[t]=Tl,r.loading++,r.loadScript(t,function(){r.states[t]=El,r.loading--,s("success",t),a()},function(){r.states[t]=Nl,r.loading--,o.push(t),s("failure",t),a()})):s("failure",t):s("success",t)}),!r.loading){var e=r.queueLoadedCallbacks.slice(0);r.queueLoadedCallbacks.length=0,Cl(e,function(t){0===o.length?q(t.success)&&t.success.call(t.scope):q(t.failure)&&t.failure.call(t.scope,o)})}};a()},t.ScriptLoader=new t,t}(),Al=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},Il=function(t){return H(t)&&Zt(t,"raw")},Pl=function(t){return B(t)&&1<t.length},Rl={},Ol=Al("en"),Ml=function(){return Jt(Rl,Ol.get())},Fl={getData:function(){return qt(Rl,function(t){return de({},t)})},setCode:function(t){t&&Ol.set(t)},getCode:function(){return Ol.get()},add:function(t,e){var n=Rl[t];n||(Rl[t]=n={}),Ut(e,function(t,e){n[e.toLowerCase()]=t})},translate:function(t){var n=Ml().getOr({}),i=function(t){return q(t)?Object.prototype.toString.call(t):e(t)?"":""+t},e=function(t){return""===t||null===t||t===undefined},r=function(t){var e=i(t);return Jt(n,e.toLowerCase()).map(i).getOr(e)},o=function(t){return t.replace(/{context:\w+}$/,"")};if(e(t))return"";if(Il(t))return i(t.raw);if(Pl(t)){var s=t.slice(1);return o(r(t[0]).replace(/\{([0-9]+)\}/g,function(t,e){return Zt(s,e)?i(s[e]):t}))}return o(r(t))},isRtl:function(){return Ml().bind(function(t){return Jt(t,"_dir")}).exists(function(t){return"rtl"===t})},hasCode:function(t){return Zt(Rl,t)}},$l=function(){var r=[],a={},u={},i=[],l=function(e,n){var t=bt(i,function(t){return t.name===e&&t.state===n});kt(t,function(t){return t.callback()})},o=function(t){var e;return u[t]&&(e=u[t].dependencies),e||[]},t=function(e,n){!1!==$l.languageLoad&&h(e,function(){var t=Fl.getCode();!t||n&&-1===(","+(n||"")+",").indexOf(","+t+",")||Dl.ScriptLoader.add(a[e]+"/langs/"+t+".js")},"loaded")},e=function(t,e,n){var i=e;return r.push(i),u[t]={instance:i,dependencies:n},l(t,"added"),i},n=function(t){delete a[t],delete u[t]},s=function(t,e){return"object"==typeof e?e:"string"==typeof t?{prefix:"",resource:e,suffix:""}:{prefix:t.prefix,resource:e,suffix:t.suffix}},c=function(t,n,e,i){var r=o(t);kt(r,function(t){var e=s(n,t);d(e.resource,e,undefined,undefined)}),e&&(i?e.call(i):e.call(Dl))},d=function(t,e,n,i,r){if(!a[t]){var o="string"==typeof e?e:e.prefix+e.resource+e.suffix;0!==o.indexOf("/")&&-1===o.indexOf("://")&&(o=$l.baseURL+"/"+o),a[t]=o.substring(0,o.lastIndexOf("/"));var s=function(){l(t,"loaded"),c(t,e,n,i)};u[t]?s():Dl.ScriptLoader.add(o,s,i,r)}},h=function(t,e,n){void 0===n&&(n="added"),Zt(u,t)&&"added"===n?e():Zt(a,t)&&"loaded"===n?e():i.push({name:t,state:n,callback:e})};return{items:r,urls:a,lookup:u,_listeners:i,get:function(t){return u[t]?u[t].instance:undefined},dependencies:o,requireLangPack:t,add:e,remove:n,createUrl:s,addComponents:function(t,e){var n=a[t];kt(e,function(t){Dl.ScriptLoader.add(n+"/"+t)})},load:d,waitFor:h}};$l.languageLoad=!0,$l.baseURL="",$l.PluginManager=$l(),$l.ThemeManager=$l();var Ll=function(t){var e=Al(at.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(at.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(t){n(),e.set(at.some(t))}}},Hl=function(){var e=Ll(xt),t=function(t){return e.get().each(t)};return de(de({},e),{on:t})},Bl=function(n,i){var r=null;return{cancel:function(){z(r)||(clearTimeout(r),r=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];z(r)&&(r=setTimeout(function(){r=null,n.apply(null,t)},i))}}},zl=function(n,i){var r=null,o=function(){z(r)||(clearTimeout(r),r=null)},t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o(),r=setTimeout(function(){r=null,n.apply(null,t)},i)};return{cancel:o,throttle:t}},jl=function(t,e){var n=Nr(t,e);return n===undefined||""===n?[]:n.split(" ")},Ul=function(t,e,n){var i=jl(t,e).concat([n]);return Tr(t,e,i.join(" ")),!0},ql=function(t,e,n){var i=bt(jl(t,e),function(t){return t!==n});return 0<i.length?Tr(t,e,i.join(" ")):Ir(t,e),!1},Wl=function(t){return t.dom.classList!==undefined},Vl=function(t){return jl(t,"class")},Yl=function(t,e){return Ul(t,"class",e)},Kl=function(t,e){return ql(t,"class",e)},Gl=function(t,e){Wl(t)?t.dom.classList.add(e):Yl(t,e)},Xl=function(t){0===(Wl(t)?t.dom.classList:Vl(t)).length&&Ir(t,"class")},Ql=function(t,e){Wl(t)?t.dom.classList.remove(e):Kl(t,e);Xl(t)},Jl=function(t,e){return Wl(t)&&t.dom.classList.contains(e)},Zl=function(t,e){var n=[];return kt(fi(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(Zl(t,e))}),n},tc=function(t,e){return zn(e,t)},ec=Ct("mce-annotation"),nc=Ct("data-mce-annotation"),ic=Ct("data-mce-annotation-uid"),rc=function(i,t){var e=i.selection.getRng(),n=An.fromDom(e.startContainer),r=An.fromDom(i.getBody()),o=t.fold(function(){return"."+ec()},function(t){return"["+nc()+'="'+t+'"]'}),s=pi(n,e.startOffset).getOr(n),a=Oo(s,o,function(t){return Un(t,r)}),u=function(t,e){return Ar(t,e)?at.some(Nr(t,e)):at.none()};return a.bind(function(t){return u(t,""+ic()).bind(function(n){return u(t,""+nc()).map(function(t){var e=sc(i,n);return{uid:n,name:t,elements:e}})})})},oc=function(t){return Qn(t)&&Jl(t,ec())},sc=function(t,e){var n=An.fromDom(t.getBody());return tc(n,"["+ic()+'="'+e+'"]')},ac=function(t,e){var n=An.fromDom(t.getBody()),i=tc(n,"["+nc()+'="'+e+'"]'),r={};return kt(i,function(t){var e=Nr(t,ic()),n=Jt(r,e).getOr([]);r[e]=n.concat([t])}),r},uc=function(n){var r=Al({}),o=function(){return{listeners:[],previous:Hl()}},t=function(t,e){i(t,function(t){return e(t),t})},i=function(t,e){var n=r.get(),i=e(Jt(n,t).getOrThunk(o));n[t]=i,r.set(n)},s=function(e,n,i){t(e,function(t){kt(t.listeners,function(t){return t(!0,e,{uid:n,nodes:mt(i,function(t){return t.dom})})})})},a=function(e){t(e,function(t){kt(t.listeners,function(t){return t(!1,e)})})},e=zl(function(){var t=r.get(),e=Mt(zt(t));kt(e,function(t){i(t,function(r){var o=r.previous.get();return rc(n,at.some(t)).fold(function(){o.isSome()&&(a(t),r.previous.clear())},function(t){var e=t.uid,n=t.name,i=t.elements;yr(o,e)||(s(n,e,i),r.previous.set(e))}),{previous:r.previous,listeners:r.listeners}})})},30);return n.on("remove",function(){e.cancel()}),n.on("NodeChange",function(){e.throttle()}),{addListener:function(t,e){i(t,function(t){return{previous:t.previous,listeners:t.listeners.concat([e])}})}}},lc=function(t,e){var n=function(t){return at.from(t.attr(nc())).bind(e.lookup)};t.on("init",function(){
t.serializer.addNodeFilter("span",function(t){kt(t,function(e){n(e).each(function(t){!1===t.persistent&&e.unwrap()})})})})},cc=function(){var n={};return{register:function(t,e){n[t]={name:t,settings:e}},lookup:function(t){return Jt(n,t).map(function(t){return t.settings})}}},dc=0,hc=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++dc+String(e)},fc=function(e,t){kt(t,function(t){Gl(e,t)})},pc=function(t,e){var n=(e||document).createElement("div");return n.innerHTML=t,fi(An.fromDom(n))},mc=function(t){return mt(t,An.fromDom)},gc=function(t){return t.dom.innerHTML},vc=function(t,e){var n=ni(t).dom,i=An.fromDom(n.createDocumentFragment()),r=pc(e,n);Oi(i,r),Mi(t),Ii(t,i)},bc=function(t,e){return An.fromDom(t.dom.cloneNode(e))},yc=function(t){return bc(t,!1)},wc=function(t){return bc(t,!0)},_c=function(t,e,n){void 0===n&&(n=et);var i=new Uo(t,e),r=function(t){for(var e;(e=i[t]())&&!lr(e)&&!n(e););return at.from(e).filter(lr)};return{current:function(){return at.from(i.current()).filter(lr)},next:function(){return r("next")},prev:function(){return r("prev")},prev2:function(){return r("prev2")}}},xc=function(e,t){var o=t||function(t){return e.isBlock(t)||fr(t)||gr(t)},s=function(t,e,n,i){if(lr(t)){var r=i(t,e,t.data);if(-1!==r)return at.some({container:t,offset:r})}return n().bind(function(t){return s(t.container,t.offset,n,i)})};return{backwards:function(t,e,n,i){var r=_c(t,i,o);return s(t,e,function(){return r.prev().map(function(t){return{container:t,offset:t.length}})},n).getOrNull()},forwards:function(t,e,n,i){var r=_c(t,i,o);return s(t,e,function(){return r.next().map(function(t){return{container:t,offset:0}})},n).getOrNull()}}},Cc=Math.round,kc=function(t){return t?{left:Cc(t.left),top:Cc(t.top),bottom:Cc(t.bottom),right:Cc(t.right),width:Cc(t.width),height:Cc(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Sc=function(t,e){return t=kc(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t},Tc=function(t,e){return t.left===e.left&&t.top===e.top&&t.bottom===e.bottom&&t.right===e.right},Ec=function(t,e,n){return 0<=t&&t<=Math.min(e.height,n.height)/2},Nc=function(t,e){var n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Ec(e.top-t.bottom,t,e)},Dc=function(t,e){return t.top>e.bottom||!(t.bottom<e.top)&&Ec(e.bottom-t.top,t,e)},Ac=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},Ic=function(t,e,n){return Math.min(Math.max(t,e),n)},Pc=function(t){var e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},Rc=function(t,e){if(Zi(t)&&t.hasChildNodes()){var n=t.childNodes;return n[Ic(e,0,n.length-1)]}return t},Oc=function(t,e){return e<0&&Zi(t)&&t.hasChildNodes()?undefined:Rc(t,e)},Mc=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Fc=function(t){return"string"==typeof t&&768<=t.charCodeAt(0)&&Mc.test(t)},$c=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){for(var e=0;e<n.length;e++)if(n[e](t))return!0;return!1}},Lc=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){for(var e=0;e<n.length;e++)if(!n[e](t))return!1;return!0}},Hc=Zi,Bc=Hs,zc=er("display","block table"),jc=er("float","left right"),Uc=Lc(Hc,Bc,Q(jc)),qc=Q(er("white-space","pre pre-line pre-wrap")),Wc=lr,Vc=fr,Yc=_l.nodeIndex,Kc=Oc,Gc=function(t){return"createRange"in t?t.createRange():_l.DOM.createRng()},Xc=function(t){return t&&/[\r\n\t ]/.test(t)},Qc=function(t){return!!t.setStart&&!!t.setEnd},Jc=function(t){var e=t.startContainer,n=t.startOffset;if(Xc(t.toString())&&qc(e.parentNode)&&lr(e)){var i=e.data;if(Xc(i[n-1])||Xc(i[n+1]))return!0}return!1},Zc=function(t){var e=t.ownerDocument,n=Gc(e),i=e.createTextNode(ds),r=t.parentNode;r.insertBefore(i,t),n.setStart(i,0),n.setEnd(i,1);var o=kc(n.getBoundingClientRect());return r.removeChild(i),o},td=function(t){var e=t.startContainer,n=t.endContainer,i=t.startOffset,r=t.endOffset;if(e===n&&lr(n)&&0===i&&1===r){var o=t.cloneRange();return o.setEndAfter(n),nd(o)}return null},ed=function(t){return 0===t.left&&0===t.right&&0===t.top&&0===t.bottom},nd=function(t){var e,n=t.getClientRects();return e=0<n.length?kc(n[0]):kc(t.getBoundingClientRect()),!Qc(t)&&Vc(t)&&ed(e)?Zc(t):ed(e)&&Qc(t)?td(t):e},id=function(t,e){var n=Sc(t,e);return n.width=1,n.right=n.left+1,n},rd=function(t){var i=[],r=function(t){0!==t.height&&(0<i.length&&Tc(t,i[i.length-1])||i.push(t))},e=function(t,e){var n=Gc(t.ownerDocument);if(e<t.data.length){if(Fc(t.data[e]))return i;if(Fc(t.data[e-1])&&(n.setStart(t,e),n.setEnd(t,e+1),!Jc(n)))return r(id(nd(n),!1)),i}0<e&&(n.setStart(t,e-1),n.setEnd(t,e),Jc(n)||r(id(nd(n),!1))),e<t.data.length&&(n.setStart(t,e),n.setEnd(t,e+1),Jc(n)||r(id(nd(n),!0)))},n=t.container(),o=t.offset();if(Wc(n))return e(n,o),i;if(Hc(n))if(t.isAtEnd()){var s=Kc(n,o);Wc(s)&&e(s,s.data.length),Uc(s)&&!Vc(s)&&r(id(nd(s),!1))}else{s=Kc(n,o);if(Wc(s)&&e(s,0),Uc(s)&&t.isAtEnd())return r(id(nd(s),!1)),i;var a=Kc(t.container(),t.offset()-1);Uc(a)&&!Vc(a)&&(zc(a)||zc(s)||!Uc(s))&&r(id(nd(a),!1)),Uc(s)&&r(id(nd(s),!0))}return i},od=function(e,n,t){var i=function(){return Wc(e),0===n},r=function(){return Wc(e)?n>=e.data.length:n>=e.childNodes.length},o=function(){var t=Gc(e.ownerDocument);return t.setStart(e,n),t.setEnd(e,n),t},s=function(){return t||(t=rd(od(e,n))),t},a=function(){return 0<s().length},u=function(t){return t&&e===t.container()&&n===t.offset()},l=function(t){return Kc(e,t?n-1:n)};return{container:Ct(e),offset:Ct(n),toRange:o,getClientRects:s,isVisible:a,isAtStart:i,isAtEnd:r,isEqual:u,getNode:l}};od.fromRangeStart=function(t){return od(t.startContainer,t.startOffset)},od.fromRangeEnd=function(t){return od(t.endContainer,t.endOffset)},od.after=function(t){return od(t.parentNode,Yc(t)+1)},od.before=function(t){return od(t.parentNode,Yc(t))},od.isAbove=function(t,e){return _r($t(e.getClientRects()),Lt(t.getClientRects()),Nc).getOr(!1)},od.isBelow=function(t,e){return _r(Lt(e.getClientRects()),$t(t.getClientRects()),Dc).getOr(!1)},od.isAtStart=function(t){return!!t&&t.isAtStart()},od.isAtEnd=function(t){return!!t&&t.isAtEnd()},od.isTextPosition=function(t){return!!t&&lr(t.container())},od.isElementPosition=function(t){return!1===od.isTextPosition(t)};var sd,ad,ud=function(t,e){lr(e)&&0===e.data.length&&t.remove(e)},ld=function(t,e,n){e.insertNode(n),ud(t,n.previousSibling),ud(t,n.nextSibling)},cd=function(e,t,n){var i=at.from(n.firstChild),r=at.from(n.lastChild);t.insertNode(n),i.each(function(t){return ud(e,t.previousSibling)}),r.each(function(t){return ud(e,t.nextSibling)})},dd=function(t,e,n){hr(n)?cd(t,e,n):ld(t,e,n)},hd=lr,fd=rr,pd=_l.nodeIndex,md=function(t){var e=t.parentNode;return fd(e)?md(e):e},gd=function(t){return t?ue(t.childNodes,function(t,e){return fd(e)&&"BR"!==e.nodeName?t=t.concat(gd(e)):t.push(e),t},[]):[]},vd=function(t,e){for(;(t=t.previousSibling)&&hd(t);)e+=t.data.length;return e},bd=function(e){return function(t){return e===t}},yd=function(t){var i,e;i=gd(md(t)),e=le(i,bd(t),t),i=i.slice(0,e+1);var n=ue(i,function(t,e,n){return hd(e)&&hd(i[n-1])&&t++,t},0);return i=se(i,tr([t.nodeName])),(e=le(i,bd(t),t))-n},wd=function(t){return(hd(t)?"text()":t.nodeName.toLowerCase())+"["+yd(t)+"]"},_d=function(t,e,n){var i=[];for(e=e.parentNode;e!==t&&(!n||!n(e));e=e.parentNode)i.push(e);return i},xd=function(t,e){var n,i,r,o,s,a=[];return n=e.container(),i=e.offset(),hd(n)?r=vd(n,i):(i>=(o=n.childNodes).length?(r="after",i=o.length-1):r="before",n=o[i]),a.push(wd(n)),s=_d(t,n),s=se(s,Q(rr)),(a=a.concat(oe(s,function(t){return wd(t)}))).reverse().join("/")+","+r},Cd=function(t,e,n){var i=gd(t);return i=se(i,function(t,e){return!hd(t)||!hd(i[e-1])}),(i=se(i,tr([e])))[n]},kd=function(t,e){for(var n,i=t,r=0;hd(i);){if(n=i.data.length,r<=e&&e<=r+n){t=i,e-=r;break}if(!hd(i.nextSibling)){t=i,e=n;break}r+=n,i=i.nextSibling}return hd(t)&&e>t.data.length&&(e=t.data.length),od(t,e)},Sd=function(t,e){var n;if(!e)return null;var i=e.split(","),r=i[0].split("/");n=1<i.length?i[1]:"before";var o=ue(r,function(t,e){var n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e);return n?("text()"===n[1]&&(n[1]="#text"),Cd(t,n[1],parseInt(n[2],10))):null},t);return o?hd(o)?kd(o,parseInt(n,10)):(n="after"===n?pd(o)+1:pd(o),od(o.parentNode,n)):null},Td=gr,Ed=function(t,e,n){var i,r;for(r=t(e.data.slice(0,n)).length,i=e.previousSibling;i&&lr(i);i=i.previousSibling)r+=t(i.data).length;return r},Nd=function(t,e,n,i,r){var o,s=i[r?"startContainer":"endContainer"],a=i[r?"startOffset":"endOffset"],u=[],l=0,c=t.getRoot();for(lr(s)?u.push(n?Ed(e,s,a):a):(a>=(o=s.childNodes).length&&o.length&&(l=1,a=Math.max(0,o.length-1)),u.push(t.nodeIndex(o[a],n)+l));s&&s!==c;s=s.parentNode)u.push(t.nodeIndex(s,n));return u},Dd=function(t,e,n,i){var r=e.dom,o={};return o.start=Nd(r,t,n,i,!0),e.isCollapsed()||(o.end=Nd(r,t,n,i,!1)),As(i)&&(o.isFakeCaret=!0),o},Ad=function(t,e,n){var i=0;return Sn.each(t.select(e),function(t){if("all"!==t.getAttribute("data-mce-bogus"))return t!==n&&void i++}),i},Id=function(t,e){var n,i,r,o=e?"start":"end";n=t[o+"Container"],i=t[o+"Offset"],Zi(n)&&"TR"===n.nodeName&&(n=(r=n.childNodes)[Math.min(e?i:i-1,r.length-1)])&&(i=e?0:n.childNodes.length,t["set"+(e?"Start":"End")](n,i))},Pd=function(t){return Id(t,!0),Id(t,!1),t},Rd=function(t,e){var n;if(Zi(t)&&(t=Rc(t,e),Td(t)))return t;if(ys(t)){if(lr(t)&&vs(t)&&(t=t.parentNode),n=t.previousSibling,Td(n))return n;if(n=t.nextSibling,Td(n))return n}},Od=function(t){return Rd(t.startContainer,t.startOffset)||Rd(t.endContainer,t.endOffset)},Md=function(t,e,n){var i=n.getNode(),r=i?i.nodeName:null,o=n.getRng();if(Td(i)||"IMG"===r)return{name:r,index:Ad(n.dom,r,i)};var s=Od(o);return s?{name:r=s.tagName,index:Ad(n.dom,r,s)}:Dd(t,n,e,o)},Fd=function(t){var e=t.getRng();return{start:xd(t.dom.getRoot(),od.fromRangeStart(e)),end:xd(t.dom.getRoot(),od.fromRangeEnd(e))}},$d=function(t){return{rng:t.getRng()}},Ld=function(t,e,n){var i={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",i,"&#xFEFF;"):t.create("span",i)},Hd=function(t,e){var n=t.dom,i=t.getRng(),r=n.uniqueId(),o=t.isCollapsed(),s=t.getNode(),a=s.nodeName;if("IMG"===a)return{name:a,index:Ad(n,a,s)};var u=Pd(i.cloneRange());if(!o){u.collapse(!1);var l=Ld(n,r+"_end",e);dd(n,u,l)}(i=Pd(i)).collapse(!0);var c=Ld(n,r+"_start",e);return dd(n,i,c),t.moveToBookmark({id:r,keep:!0}),{id:r}},Bd=function(t,e,n){return 2===e?Md(ps,n,t):3===e?Fd(t):e?$d(t):Hd(t,!1)},zd=m(Md,G,!0),jd=_l.DOM,Ud="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow",qd=function(t,e,n){var i=t.getParam(e,n);if(-1===i.indexOf("="))return i;var r=t.getParam(e,"","hash");return Jt(r,t.id).getOr(n)},Wd=function(t){return t.getParam("iframe_attrs",{})},Vd=function(t){return t.getParam("doctype","<!DOCTYPE html>")},Yd=function(t){return t.getParam("document_base_url","")},Kd=function(t){return qd(t,"body_id","tinymce")},Gd=function(t){return qd(t,"body_class","")},Xd=function(t){return t.getParam("content_security_policy","")},Qd=function(t){return t.getParam("br_in_pre",!0)},Jd=function(t){if(t.getParam("force_p_newlines",!1))return"p";var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Zd=function(t){return t.getParam("forced_root_block_attrs",{})},th=function(t){return t.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},eh=function(t){return t.getParam("no_newline_selector","")},nh=function(t){return t.getParam("keep_styles",!0)},ih=function(t){return t.getParam("end_container_on_empty_block",!1)},rh=function(t){return Sn.explode(t.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large"))},oh=function(t){return Sn.explode(t.getParam("font_size_classes",""))},sh=function(t){return t.getParam("images_dataimg_filter",nt,"function")},ah=function(t){return t.getParam("automatic_uploads",!0,"boolean")},uh=function(t){return t.getParam("images_reuse_filename",!1,"boolean")},lh=function(t){return t.getParam("images_replace_blob_uris",!0,"boolean")},ch=function(t){return t.getParam("icons","","string")},dh=function(t){return t.getParam("icons_url","","string")},hh=function(t){return t.getParam("images_upload_url","","string")},fh=function(t){return t.getParam("images_upload_base_path","","string")},ph=function(t){return t.getParam("images_upload_credentials",!1,"boolean")},mh=function(t){return t.getParam("images_upload_handler",null,"function")},gh=function(t){return t.getParam("content_css_cors",!1,"boolean")},vh=function(t){return t.getParam("referrer_policy","","string")},bh=function(t){return t.getParam("language","en","string")},yh=function(t){return t.getParam("language_url","","string")},wh=function(t){return t.getParam("indent_use_margin",!1)},_h=function(t){return t.getParam("indentation","40px","string")},xh=function(t){var e=t.getParam("content_css");return wt(e)?mt(e.split(","),Ae):B(e)?e:!1===e||t.inline?[]:["default"]},Ch=function(t){var e=t.getParam("font_css",[]);return B(e)?e:mt(e.split(","),Ae)},kh=function(t){return t.getParam("directionality",Fl.isRtl()?"rtl":undefined)},Sh=function(t){return t.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string")},Th=function(t){var e=t.getParam("object_resizing");return!1!==e&&!yn.iOS&&(wt(e)?e:"table,img,figure.image,div,video,iframe")},Eh=function(t){return t.getParam("resize_img_proportional",!0,"boolean")},Nh=function(t){return t.getParam("placeholder",jd.getAttrib(t.getElement(),"placeholder"),"string")},Dh=function(t){return t.getParam("event_root")},Ah=function(t){return t.getParam("service_message")},Ih=function(t){return t.getParam("theme")},Ph=function(t){return t.getParam("validate")},Rh=function(t){return!1!==t.getParam("inline_boundaries")},Oh=function(t){return t.getParam("formats")},Mh=function(t){var e=t.getParam("preview_styles",Ud);return wt(e)?e:""},Fh=function(t){return t.getParam("format_empty_lines",!1,"boolean")},$h=function(t){return t.getParam("custom_ui_selector","","string")},Lh=function(t){return t.getParam("theme_url")},Hh=function(t){return t.getParam("inline")},Bh=function(t){return t.getParam("hidden_input")},zh=function(t){return t.getParam("submit_patch")},jh=function(t){return"xml"===t.getParam("encoding")},Uh=function(t){return t.getParam("add_form_submit_trigger")},qh=function(t){return t.getParam("add_unload_trigger")},Wh=function(t){return""!==Jd(t)},Vh=function(t){return t.getParam("custom_undo_redo_levels",0,"number")},Yh=function(t){return t.getParam("disable_nodechange")},Kh=function(t){return t.getParam("readonly")},Gh=function(t){return t.getParam("content_css_cors")},Xh=function(t){return t.getParam("plugins","","string")},Qh=function(t){return t.getParam("external_plugins")},Jh=function(t){return t.getParam("block_unsupported_drop",!0,"boolean")},Zh=function(t){return t.getParam("visual",!0,"boolean")},tf=function(t){return t.getParam("visual_table_class","mce-item-table","string")},ef=function(t){return t.getParam("visual_anchor_class","mce-item-anchor","string")},nf=function(t){return t.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string")},rf=Zi,of=lr,sf=function(t){var e=t.parentNode;e&&e.removeChild(t)},af=function(t){var e=ps(t);return{count:t.length-e.length,text:e}},uf=function(t){for(var e;-1!==(e=t.data.lastIndexOf(hs));)t.deleteData(e,1)},lf=function(t,e){return mf(t),e},cf=function(t,e){var n=af(t.data.substr(0,e.offset())),i=af(t.data.substr(e.offset()));return 0<(n.text+i.text).length?(uf(t),od(t,e.offset()-n.count)):e},df=function(t,e){var n=e.container(),i=ht(Ht(n.childNodes),t).map(function(t){return t<e.offset()?od(n,e.offset()-1):e}).getOr(e);return mf(t),i},hf=function(t,e){return of(t)&&e.container()===t?cf(t,e):lf(t,e)},ff=function(t,e){return e.container()===t.parentNode?df(t,e):lf(t,e)},pf=function(t,e){return od.isTextPosition(e)?hf(t,e):ff(t,e)},mf=function(t){rf(t)&&ys(t)&&(ws(t)?t.removeAttribute("data-mce-caret"):sf(t)),of(t)&&(uf(t),0===t.data.length&&sf(t))},gf=cn().browser,vf=gr,bf=br,yf=vr,wf="*[contentEditable=false],video,audio,embed,object",_f=function(t,e,n){var i,r,o=Sc(e.getBoundingClientRect(),n);if("BODY"===t.tagName){var s=t.ownerDocument.documentElement;i=t.scrollLeft||s.scrollLeft,r=t.scrollTop||s.scrollTop}else{var a=t.getBoundingClientRect();i=t.scrollLeft-a.left,r=t.scrollTop-a.top}o.left+=i,o.right+=i,o.top+=r,o.bottom+=r,o.width=1;var u=e.offsetWidth-e.clientWidth;return 0<u&&(n&&(u*=-1),o.left+=u,o.right+=u),o},xf=function(t){for(var e=tc(An.fromDom(t),wf),n=0;n<e.length;n++){var i,r=e[n].dom,o=r.previousSibling;if(Es(o))1===(i=o.data).length?o.parentNode.removeChild(o):o.deleteData(i.length-1,1);if(o=r.nextSibling,Ts(o))1===(i=o.data).length?o.parentNode.removeChild(o):o.deleteData(0,1)}},Cf=function(t,o,s,e){var n,a,u=Hl(),i=Jd(t),l=0<i.length?i:"p",r=function(t,e){var n;if(c(),yf(e))return null;if(!s(e))return a=_s(e,t),n=e.ownerDocument.createRange(),Sf(a.nextSibling)?(n.setStart(a,0),n.setEnd(a,0)):(n.setStart(a,1),n.setEnd(a,1)),n;a=Ss(l,e,t);var i=_f(o,e,t);fl(a).css("top",i.top);var r=fl('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(de({},i)).appendTo(o)[0];return u.set({caret:r,element:e,before:t}),t&&fl(r).addClass("mce-visual-caret-before"),d(),(n=e.ownerDocument.createRange()).setStart(a,0),n.setEnd(a,0),n},c=function(){xf(o),a&&(mf(a),a=null),u.on(function(t){fl(t.caret).remove(),u.clear()}),n&&(Bo.clearInterval(n),n=undefined)},d=function(){n=Bo.setInterval(function(){e()?fl("div.mce-visual-caret",o).toggleClass("mce-visual-caret-hidden"):fl("div.mce-visual-caret",o).addClass("mce-visual-caret-hidden")},500)};return{show:r,hide:c,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){u.on(function(t){var e=_f(o,t.element,t.before);fl(t.caret).css(de({},e))})},destroy:function(){return Bo.clearInterval(n)}}},kf=function(){return gf.isIE()||gf.isEdge()||gf.isFirefox()},Sf=function(t){return vf(t)||bf(t)},Tf=function(t){return Sf(t)||sr(t)&&kf()},Ef=gr,Nf=br,Df=er("display","block table table-cell table-caption list-item"),Af=ys,If=vs,Pf=Zi,Rf=Hs,Of=function(t){return 0<t},Mf=function(t){return t<0},Ff=function(t,e){for(var n;n=t(e);)if(!If(n))return n;return null},$f=function(t,e,n,i,r){var o=new Uo(t,i),s=Ef(t)||If(t);if(Mf(e)){if(s&&n(t=Ff(o.prev.bind(o),!0)))return t;for(;t=Ff(o.prev.bind(o),r);)if(n(t))return t}if(Of(e)){if(s&&n(t=Ff(o.next.bind(o),!0)))return t;for(;t=Ff(o.next.bind(o),r);)if(n(t))return t}return null},Lf=function(t,e){for(;t&&t!==e;){if(Df(t))return t;t=t.parentNode}return null},Hf=function(t,e,n){return Lf(t.container(),n)===Lf(e.container(),n)},Bf=function(t,e){if(!e)return null;var n=e.container(),i=e.offset();return Pf(n)?n.childNodes[i+t]:null},zf=function(t,e){var n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n},jf=function(t,e,n){return Lf(e,t)===Lf(n,t)},Uf=function(t,e,n){for(var i=t?"previousSibling":"nextSibling";n&&n!==e;){var r=n[i];if(Af(r)&&(r=r[i]),Ef(r)||Nf(r)){if(jf(e,r,n))return r;break}if(Rf(r))break;n=n.parentNode}return null},qf=m(zf,!0),Wf=m(zf,!1),Vf=function(t,e,n){var i,r=m(Uf,!0,e),o=m(Uf,!1,e),s=n.startContainer,a=n.startOffset;if(vs(s)){Pf(s)||(s=s.parentNode);var u=s.getAttribute("data-mce-caret");if("before"===u&&(i=s.nextSibling,Tf(i)))return qf(i);if("after"===u&&(i=s.previousSibling,Tf(i)))return Wf(i)}if(!n.collapsed)return n;if(lr(s)){if(Af(s)){if(1===t){if(i=o(s))return qf(i);if(i=r(s))return Wf(i)}if(-1===t){if(i=r(s))return Wf(i);if(i=o(s))return qf(i)}return n}if(Es(s)&&a>=s.data.length-1)return 1===t&&(i=o(s))?qf(i):n;if(Ts(s)&&a<=1)return-1===t&&(i=r(s))?Wf(i):n;if(a===s.data.length)return(i=o(s))?qf(i):n;if(0===a)return(i=r(s))?Wf(i):n}return n},Yf=function(t,e){return at.from(Bf(t?0:-1,e)).filter(Ef)},Kf=function(t,e,n){var i=Vf(t,e,n);return-1===t?od.fromRangeStart(i):od.fromRangeEnd(i)},Gf=function(t){return at.from(t.getNode()).map(An.fromDom)},Xf=function(t){return at.from(t.getNode(!0)).map(An.fromDom)},Qf=function(t,e){for(;e=t(e);)if(e.isVisible())return e;return e},Jf=function(t,e){var n=Hf(t,e);return!(n||!fr(t.getNode()))||n};(ad=sd||(sd={}))[ad.Backwards=-1]="Backwards",ad[ad.Forwards=1]="Forwards";var Zf=gr,tp=lr,ep=Zi,np=fr,ip=Hs,rp=qs,op=Ws,sp=function(t,e){for(var n=[];t&&t!==e;)n.push(t),t=t.parentNode;return n},ap=function(t,e){return t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null},up=function(t,e){if(Of(t)){if(ip(e.previousSibling)&&!tp(e.previousSibling))return od.before(e);if(tp(e))return od(e,0)}if(Mf(t)){if(ip(e.nextSibling)&&!tp(e.nextSibling))return od.after(e);if(tp(e))return od(e,e.data.length)}return Mf(t)?np(e)?od.before(e):od.after(e):od.before(e)},lp=function(t,e){var n=e.nextSibling;return n&&ip(n)?tp(n)?od(n,0):od.before(n):cp(sd.Forwards,od.after(e),t)},cp=function(t,e,n){var i,r,o,s;if(!ep(n)||!e)return null;if(e.isEqual(od.after(n))&&n.lastChild){if(s=od.after(n.lastChild),Mf(t)&&ip(n.lastChild)&&ep(n.lastChild))return np(n.lastChild)?od.before(n.lastChild):s}else s=e;var a=s.container(),u=s.offset();if(tp(a)){if(Mf(t)&&0<u)return od(a,--u);if(Of(t)&&u<a.length)return od(a,++u);i=a}else{if(Mf(t)&&0<u&&(r=ap(a,u-1),ip(r)))return!rp(r)&&(o=$f(r,t,op,r))?tp(o)?od(o,o.data.length):od.after(o):tp(r)?od(r,r.data.length):od.before(r);if(Of(t)&&u<a.childNodes.length&&(r=ap(a,u),ip(r)))return np(r)?lp(n,r):!rp(r)&&(o=$f(r,t,op,r))?tp(o)?od(o,0):od.before(o):tp(r)?od(r,0):od.after(r);i=r||s.getNode()}if((Of(t)&&s.isAtEnd()||Mf(t)&&s.isAtStart())&&(i=$f(i,t,nt,n,!0),op(i,n)))return up(t,i);r=$f(i,t,op,n);var l=ce(bt(sp(a,n),Zf));return!l||r&&l.contains(r)?r?up(t,r):null:s=Of(t)?od.after(l):od.before(l)},dp=function(e){return{next:function(t){return cp(sd.Forwards,t,e)},prev:function(t){return cp(sd.Backwards,t,e)}}},hp=function(t,e,n){var i=t?od.before(n):od.after(n);return yp(t,e,i)},fp=function(t){return fr(t)?od.before(t):od.after(t)},pp=function(t){return od.isTextPosition(t)?0===t.offset():Hs(t.getNode())},mp=function(t){if(od.isTextPosition(t)){var e=t.container();return t.offset()===e.data.length}return Hs(t.getNode(!0))},gp=function(t,e){return!od.isTextPosition(t)&&!od.isTextPosition(e)&&t.getNode()===e.getNode(!0)},vp=function(t){return!od.isTextPosition(t)&&fr(t.getNode())},bp=function(t,e,n){return t?!gp(e,n)&&!vp(e)&&mp(e)&&pp(n):!gp(n,e)&&pp(e)&&mp(n)},yp=function(t,e,n){var i=dp(e);return at.from(t?i.next(n):i.prev(n))},wp=function(e,n,i){return yp(e,n,i).bind(function(t){return Hf(i,t,n)&&bp(e,i,t)?yp(e,n,t):at.some(t)})},_p=function(e,n,t,i){return wp(e,n,t).bind(function(t){return i(t)?_p(e,n,t,i):at.some(t)})},xp=function(t,e){var n=t?e.firstChild:e.lastChild;return lr(n)?at.some(od(n,t?0:n.data.length)):n?Hs(n)?at.some(t?od.before(n):fp(n)):hp(t,e,n):at.none()},Cp=m(yp,!0),kp=m(yp,!1),Sp=m(xp,!0),Tp=m(xp,!1),Ep="_mce_caret",Np=function(t){return Zi(t)&&t.id===Ep},Dp=function(t,e){for(;e&&e!==t;){if(e.id===Ep)return e;e=e.parentNode}return null},Ap=function(t){return wt(t.start)},Ip=function(t){return Zt(t,"rng")},Pp=function(t){return Zt(t,"id")},Rp=function(t){return Zt(t,"name")},Op=function(t){return Sn.isArray(t.start)},Mp=function(t,e){return Zi(e)&&t.isBlock(e)&&!e.innerHTML&&!yn.ie&&(e.innerHTML='<br data-mce-bogus="1" />'),e},Fp=function(t,e){var n,i=t.createRng();return n=Sd(t.getRoot(),e.start),i.setStart(n.container(),n.offset()),n=Sd(t.getRoot(),e.end),i.setEnd(n.container(),n.offset()),i},$p=function(t,e){var n=t.ownerDocument.createTextNode(hs);t.appendChild(n),e.setStart(n,0),e.setEnd(n,0)},Lp=function(t){return!1===t.hasChildNodes()},Hp=function(t,e){return Tp(t).fold(et,function(t){return e.setStart(t.container(),t.offset()),e.setEnd(t.container(),t.offset()),!0})},Bp=function(t,e,n){return!(!Lp(e)||!Dp(t,e))&&($p(e,n),!0)},zp=function(t,e,n,i){var r,o,s,a,u=n[e?"start":"end"],l=t.getRoot();if(u){for(s=u[0],o=l,r=u.length-1;1<=r;r--){if(a=o.childNodes,Bp(l,o,i))return!0;if(u[r]>a.length-1)return!!Bp(l,o,i)||Hp(o,i);o=a[u[r]]}3===o.nodeType&&(s=Math.min(u[0],o.nodeValue.length)),1===o.nodeType&&(s=Math.min(u[0],o.childNodes.length)),e?i.setStart(o,s):i.setEnd(o,s)}return!0},jp=function(t){return lr(t)&&0<t.data.length},Up=function(t,e,n){var i,r,o,s,a,u,l=t.get(n.id+"_"+e),c=n.keep;if(l){if(i=l.parentNode,"start"===e?c?l.hasChildNodes()?(i=l.firstChild,r=1):jp(l.nextSibling)?(i=l.nextSibling,r=0):jp(l.previousSibling)?(i=l.previousSibling,r=l.previousSibling.data.length):(i=l.parentNode,r=t.nodeIndex(l)+1):r=t.nodeIndex(l):c?l.hasChildNodes()?(i=l.firstChild,r=1):jp(l.previousSibling)?(i=l.previousSibling,r=l.previousSibling.data.length):(i=l.parentNode,r=t.nodeIndex(l)):r=t.nodeIndex(l),a=i,u=r,!c){for(s=l.previousSibling,o=l.nextSibling,Sn.each(Sn.grep(l.childNodes),function(t){lr(t)&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))});l=t.get(n.id+"_"+e);)t.remove(l,!0);s&&o&&s.nodeType===o.nodeType&&lr(s)&&!yn.opera&&(r=s.nodeValue.length,s.appendData(o.nodeValue),t.remove(o),a=s,u=r)}return at.some(od(a,u))}return at.none()},qp=function(t,e){var n=t.createRng();return zp(t,!0,e,n)&&zp(t,!1,e,n)?at.some(n):at.none()},Wp=function(i,t){var e=Up(i,"start",t),n=Up(i,"end",t);return _r(e,n.or(e),function(t,e){var n=i.createRng();return n.setStart(Mp(i,t.container()),t.offset()),n.setEnd(Mp(i,e.container()),e.offset()),n})},Vp=function(n,t){return at.from(n.select(t.name)[t.index]).map(function(t){var e=n.createRng();return e.selectNode(t),e})},Yp=function(t,e){var n=t.dom;if(e){if(Op(e))return qp(n,e);if(Ap(e))return at.some(Fp(n,e));if(Pp(e))return Wp(n,e);if(Rp(e))return Vp(n,e);if(Ip(e))return at.some(e.rng)}return at.none()},Kp=function(t,e,n){return Bd(t,e,n)},Gp=function(e,t){Yp(e,t).each(function(t){e.setRng(t)})},Xp=function(t){return Zi(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type")},Qp=function(e){return function(t){return e===t}}(ds),Jp=function(t){return""!==t&&-1!==" \f\n\r\t\x0B".indexOf(t)},Zp=function(t){return!Jp(t)&&!Qp(t)},tm=function(t){return!!t.nodeType},em=function(t){return t&&/^(IMG)$/.test(t.nodeName)},nm=function(t,e,n){var i=n.startOffset,r=n.startContainer;if((r!==n.endContainer||!em(r.childNodes[i]))&&Zi(r)){var o=r.childNodes,s=void 0;i<o.length?(r=o[i],s=new Uo(r,t.getParent(r,t.isBlock))):(r=o[o.length-1],(s=new Uo(r,t.getParent(r,t.isBlock))).next(!0));for(var a=s.current();a;a=s.next())if(lr(a)&&!sm(a))return n.setStart(a,0),void e.setRng(n)}},im=function(t,e,n){if(t){var i=e?"nextSibling":"previousSibling";for(t=n?t:t[i];t;t=t[i])if(Zi(t)||!sm(t))return t}},rm=function(t,e){return tm(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]},om=function(t,e,n){return t.schema.isValidChild(e,n)},sm=function(t,e){if(void 0===e&&(e=!1),Y(t)&&lr(t)){var n=e?t.data.replace(/ /g,"\xa0"):t.data;return Ys(n)}return!1},am=function(t){return Y(t)&&lr(t)&&0===t.length},um=function(t,n){return q(t)?t=t(n):Y(n)&&(t=t.replace(/%(\w+)/g,function(t,e){return n[e]||t})),t},lm=function(t,e){return e=e||"",t=""+((t=t||"").nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()===e.toLowerCase()},cm=function(t,e,n){return"color"!==n&&"backgroundColor"!==n||(e=t.toHex(e)),"fontWeight"===n&&700===e&&(e="bold"),"fontFamily"===n&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e},dm=function(t,e,n){return cm(t,t.getStyle(e,n),n)},hm=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},fm=function(t,e,n){return t.getParents(e,n,t.getRoot())},pm=function(t,e){var n=function(e){var n=function(t){return 1<t.length&&"%"===t.charAt(0)};return pt(["styles","attributes"],function(t){return Jt(e,t).exists(function(t){var e=B(t)?t:Qt(t);return pt(e,n)})})};return pt(t.formatter.get(e),n)},mm=function(e,t,i){var n=["inline","block","selector","attributes","styles","classes"],r=function(t){return Gt(t,function(t,e){return pt(n,function(t){return t===e})})};return pt(e.formatter.get(t),function(t){var n=r(t);return pt(e.formatter.get(i),function(t){var e=r(t);return ee(n,e)})})},gm=function(t){return te(t,"block")},vm=function(t){return te(t,"selector")},bm=function(t){return te(t,"inline")},ym=function(t){return vm(t)&&bm(t)&&yr(Jt(t,"mixed"),!0)},wm=function(t){return vm(t)&&!1!==t.expand&&!bm(t)},_m=Xp,xm=fm,Cm=sm,km=rm,Sm=function(t){return fr(t)&&t.getAttribute("data-mce-bogus")&&!t.nextSibling},Tm=function(t,e){for(var n=e;n;){if(Zi(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Em=function(t,e,n,i){for(var r=e.data,o=n;t?0<=o:o<r.length;t?o--:o++)if(i(r.charAt(o)))return t?o+1:o;return-1},Nm=function(t,e,n){return Em(t,e,n,function(t){return Qp(t)||Jp(t)})},Dm=function(t,e,n){return Em(t,e,n,Zp)},Am=function(o,t,e,n,s,i){var a,u=o.getParent(e,o.isBlock)||t,r=function(t,e,n){var i=xc(o),r=s?i.backwards:i.forwards;return at.from(r(t,e,function(t,e){return _m(t.parentNode)?-1:n(s,a=t,e)},u))};return r(e,n,Nm).bind(function(t){return i?r(t.container,t.offset+(s?-1:0),Dm):at.some(t)}).orThunk(function(){return a?at.some({container:a,offset:s?0:a.length}):at.none()})},Im=function(t,e,n,i,r){lr(i)&&Oe(i.data)&&i[r]&&(i=i[r]);for(var o=xm(t,i),s=0;s<o.length;s++)for(var a=0;a<e.length;a++){var u=e[a];if((!Y(u.collapsed)||u.collapsed===n.collapsed)&&(vm(u)&&t.is(o[s],u.selector)))return o[s]}return i},Pm=function(e,t,n,i){var r=n,o=e.dom,s=o.getRoot(),a=t[0];if(gm(a)&&(r=a.wrapper?null:o.getParent(n,a.block,s)),!r){var u=o.getParent(n,"LI,TD,TH");r=o.getParent(lr(n)?n.parentNode:n,function(t){return t!==s&&km(e,t)},u)}if(r&&gm(a)&&a.wrapper&&(r=xm(o,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[i]&&!o.isBlock(r[i])&&(r=r[i],!lm(r,"br")););return r||n},Rm=function(t,e,n,i){var r=n.parentNode;return!Y(n[i])&&(!(r!==e&&!_t(r)&&!t.isBlock(r))||Rm(t,e,r,i))},Om=function(t,e,n,i,r){var o=n,s=r?"previousSibling":"nextSibling",a=t.getRoot();if(lr(n)&&!Cm(n)&&(r?0<i:i<n.data.length))return n;for(;;){if(!e[0].block_expand&&t.isBlock(o))return o;for(var u=o[s];u;u=u[s]){var l=lr(u)&&!Rm(t,a,u,s);if(!_m(u)&&!Sm(u)&&!Cm(u,l))return o}if(o===a||o.parentNode===a){n=o;break}o=o.parentNode}return n},Mm=function(t){return _m(t.parentNode)||_m(t)},Fm=function(t,e,n,i){void 0===i&&(i=!1);var r=e.startContainer,o=e.startOffset,s=e.endContainer,a=e.endOffset,u=t.dom,l=n[0];(
Zi(r)&&r.hasChildNodes()&&(r=Rc(r,o),lr(r)&&(o=0)),Zi(s)&&s.hasChildNodes()&&(s=Rc(s,e.collapsed?a:a-1),lr(s)&&(a=s.nodeValue.length)),r=Tm(u,r),s=Tm(u,s),Mm(r)&&(r=_m(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,lr(r)&&(o=e.collapsed?r.length:0)),Mm(s)&&(s=_m(s)?s:s.parentNode,s=e.collapsed?s.nextSibling||s:s.previousSibling||s,lr(s)&&(a=e.collapsed?0:s.length)),e.collapsed)&&(Am(u,t.getBody(),r,o,!0,i).each(function(t){var e=t.container,n=t.offset;r=e,o=n}),Am(u,t.getBody(),s,a,!1,i).each(function(t){var e=t.container,n=t.offset;s=e,a=n}));return(bm(l)||l.block_expand)&&(bm(l)&&lr(r)&&0!==o||(r=Om(u,n,r,o,!0)),bm(l)&&lr(s)&&a!==s.nodeValue.length||(s=Om(u,n,s,a,!1))),wm(l)&&(r=Im(u,n,e,r,"previousSibling"),s=Im(u,n,e,s,"nextSibling")),(gm(l)||vm(l))&&(r=Pm(t,n,r,"previousSibling"),s=Pm(t,n,s,"nextSibling"),gm(l)&&(u.isBlock(r)||(r=Om(u,n,r,o,!0)),u.isBlock(s)||(s=Om(u,n,s,a,!1)))),Zi(r)&&(o=u.nodeIndex(r),r=r.parentNode),Zi(s)&&(a=u.nodeIndex(s)+1,s=s.parentNode),{startContainer:r,startOffset:o,endContainer:s,endOffset:a}},$m=function(n,t,a){var i=t.startOffset,r=Rc(t.startContainer,i),o=t.endOffset,s=Rc(t.endContainer,o-1),u=function(t){var e=t[0];lr(e)&&e===r&&i>=e.data.length&&t.splice(0,1);var n=t[t.length-1];return 0===o&&0<t.length&&n===s&&lr(n)&&t.splice(t.length-1,1),t},l=function(t,e,n){for(var i=[];t&&t!==n;t=t[e])i.push(t);return i},e=function(t,e){return n.getParent(t,function(t){return t.parentNode===e},e)},c=function(t,e,n){for(var i=n?"nextSibling":"previousSibling",r=t,o=r.parentNode;r&&r!==e;r=o){o=r.parentNode;var s=l(r===t?r:r[i],i);s.length&&(n||s.reverse(),a(u(s)))}};if(r===s)return a(u([r]));var d=n.findCommonAncestor(r,s);if(n.isChildOf(r,s))return c(r,d,!0);if(n.isChildOf(s,r))return c(s,d);var h=e(r,d)||r,f=e(s,d)||s;c(r,h,!0);var p=l(h===r?h:h.nextSibling,"nextSibling",f===s?f.nextSibling:f);p.length&&a(u(p)),c(s,f)},Lm=function(t){var e=[];if(t)for(var n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Hm=function(t){return At(t,function(t){var e=Pc(t);return e?[An.fromDom(e)]:[]})},Bm=function(t){return 1<Lm(t).length},zm=function(t){return bt(Hm(t),as)},jm=function(t){return tc(t,"td[data-mce-selected],th[data-mce-selected]")},Um=function(t,e){var n=jm(e);return 0<n.length?n:zm(t)},qm=function(t){return Um(Lm(t.selection.getSel()),An.fromDom(t.getBody()))},Wm=function(t,e){return Po(t,"table",e)},Vm=function(t){var e=t.startContainer,n=t.startOffset;return lr(e)?0===n?at.some(An.fromDom(e)):at.none():at.from(e.childNodes[n]).map(An.fromDom)},Ym=function(t){var e=t.endContainer,n=t.endOffset;return lr(e)?n===e.data.length?at.some(An.fromDom(e)):at.none():at.from(e.childNodes[n-1]).map(An.fromDom)},Km=function(e){return mi(e).fold(Ct([e]),function(t){return[e].concat(Km(t))})},Gm=function(e){return gi(e).fold(Ct([e]),function(t){return"br"===Yn(t)?li(t).map(function(t){return[e].concat(Gm(t))}).getOr([]):[e].concat(Gm(t))})},Xm=function(r,t){return _r(Vm(t),Ym(t),function(t,e){var n=Et(Km(r),m(Un,t)),i=Et(Gm(r),m(Un,e));return n.isSome()&&i.isSome()}).getOr(!1)},Qm=function(t,e,n,i){var r=n,o=new Uo(n,r),s=Gt(t.schema.getMoveCaretBeforeOnEnterElements(),function(t,e){return!ft(["td","th","table"],e.toLowerCase())});do{if(lr(n)&&0!==Sn.trim(n.nodeValue).length)return void(i?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(s[n.nodeName])return void(i?e.setStartBefore(n):"BR"===n.nodeName?e.setEndBefore(n):e.setEndAfter(n))}while(n=i?o.next():o.prev());"BODY"===r.nodeName&&(i?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Jm=function(t){var e=t.selection.getSel();return e&&0<e.rangeCount},Zm=function(i,r){var t=qm(i);0<t.length?kt(t,function(t){var e=t.dom,n=i.dom.createRng();n.setStartBefore(e),n.setEndAfter(e),r(n,!0)}):r(i.selection.getRng(),!1)},tg=function(t,e,n){var i=Hd(t,e);n(i),t.moveToBookmark(i)},eg=function(n,i){var t=function(t){if(!n(t))throw new Error("Can only get "+i+" value of a "+i+" node");return e(t).getOr("")},e=function(t){return n(t)?at.from(t.dom.nodeValue):at.none()};return{get:t,getOption:e,set:function(t,e){if(!n(t))throw new Error("Can only set raw "+i+" value of a "+i+" node");t.dom.nodeValue=e}}}(Jn,"text"),ng=function(t){return eg.get(t)},ig=function(t){return Jn(t)&&ng(t)===hs},rg=function(e,n,i,r){return si(n).fold(function(){return"skipping"},function(t){return"br"===r||ig(n)?"valid":oc(n)?"existing":Np(n.dom)?"caret":om(e,i,r)&&om(e,Yn(t),i)?"valid":"invalid-child"})},og=function(t,e){var n=Fm(t,e,[{inline:"span"}]);e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),t.selection.setRng(e)},sg=function(t,e,n,i){var r=e.uid,o=void 0===r?hc("mce-annotation"):r,s=f(e,["uid"]),a=An.fromTag("span",t);Gl(a,ec()),Tr(a,""+ic(),o),Tr(a,""+nc(),n);var u=i(o,s),l=u.attributes,c=void 0===l?{}:l,d=u.classes,h=void 0===d?[]:d;return Er(a,c),fc(a,h),a},ag=function(i,t,e,n,r){var o=[],s=sg(i.getDoc(),r,e,n),a=Hl(),u=function(){a.clear()},l=function(){return a.get().getOrThunk(function(){var t=yc(s);return o.push(t),a.set(t),t})},c=function(t){kt(t,d)},d=function(t){switch(rg(i,t,"span",Yn(t))){case"invalid-child":u();var e=fi(t);c(e),u();break;case"valid":var n=l();Pi(t,n)}},h=function(t){var e=mt(t,An.fromDom);c(e)};return $m(i.dom,t,function(t){u(),h(t)}),o},ug=function(r,o,s,a){r.undoManager.transact(function(){var t=r.selection,e=t.getRng(),n=0<qm(r).length;if(e.collapsed&&!n&&og(r,e),t.getRng().collapsed&&!n){var i=sg(r.getDoc(),a,o,s.decorate);vc(i,ds),t.getRng().insertNode(i.dom),t.select(i.dom)}else tg(t,!1,function(){Zm(r,function(t){ag(r,t,o,s.decorate,a)})})})},lg=function(i){var r=cc();lc(i,r);var n=uc(i);return{register:function(t,e){r.register(t,e)},annotate:function(e,n){r.lookup(e).each(function(t){ug(i,e,t,n)})},annotationChanged:function(t,e){n.addListener(t,e)},remove:function(t){rc(i,at.some(t)).each(function(t){var e=t.elements;kt(e,$i)})},getAll:function(t){var e=ac(i,t);return qt(e,function(t){return mt(t,function(t){return t.dom})})}}},cg=function(t){return{getBookmark:m(Kp,t),moveToBookmark:m(Gp,t)}};cg.isBookmarkNode=Xp;var dg=function(t,e){for(;e&&e!==t;){if(mr(e)||gr(e))return e;e=e.parentNode}return null},hg=function(e,n,t){if(t.collapsed)return!1;if(yn.browser.isIE()&&t.startOffset===t.endOffset-1&&t.startContainer===t.endContainer){var i=t.startContainer.childNodes[t.startOffset];if(Zi(i))return pt(i.getClientRects(),function(t){return Ac(t,e,n)})}return pt(t.getClientRects(),function(t){return Ac(t,e,n)})},fg=function(t,e){return t.fire("PreProcess",e)},pg=function(t,e){return t.fire("PostProcess",e)},mg=function(t){return t.fire("remove")},gg=function(t){return t.fire("detach")},vg=function(t,e){return t.fire("SwitchMode",{mode:e})},bg=function(t,e,n,i,r){t.fire("ObjectResizeStart",{target:e,width:n,height:i,origin:r})},yg=function(t,e,n,i,r){t.fire("ObjectResized",{target:e,width:n,height:i,origin:r})},wg=function(t){return t.fire("PreInit")},_g=function(t){return t.fire("PostRender")},xg=function(t){return t.fire("Init")},Cg=function(t,e){return t.fire("PlaceholderToggle",{state:e})},kg=function(t,e,n){return t.fire(e,n)},Sg=function(t,e,n,i){return t.fire("FormatApply",{format:e,node:n,vars:i})},Tg=function(t,e,n,i){return t.fire("FormatRemove",{format:e,node:n,vars:i})},Eg={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey||Eg.metaKeyPressed(t)},metaKeyPressed:function(t){return yn.mac?t.metaKey:t.ctrlKey&&!t.altKey}},Ng=gr,Dg=function(i,l){var c,d,h,f,p,m,g,o,s,v,b,y,a,w,_,x,C,k="data-mce-selected",S=l.dom,T=Sn.each,E=l.getDoc(),N=document,u=Math.abs,D=Math.round,A=l.getBody(),I={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},P=function(t){return t&&("IMG"===t.nodeName||l.dom.is(t,"figure.image"))},R=function(t){return br(t)||S.hasClass(t,"mce-preview-object")},n=function(t,e){if("longpress"!==t.type&&0!==t.type.indexOf("touch"))return P(t.target)&&!hg(t.clientX,t.clientY,e);var n=t.touches[0];return P(t.target)&&!hg(n.clientX,n.clientY,e)},r=function(t){var e=t.target;n(t,l.selection.getRng())&&!t.isDefaultPrevented()&&l.selection.select(e)},O=function(t){return S.is(t,"figure.image")?[t.querySelector("img")]:S.hasClass(t,"mce-preview-object")&&Y(t.firstElementChild)?[t,t.firstElementChild]:[t]},M=function(t){var e=Th(l);return!!e&&("false"!==t.getAttribute("data-mce-resize")&&(t!==l.getBody()&&(S.hasClass(t,"mce-preview-object")?Hn(An.fromDom(t.firstElementChild),e):Hn(An.fromDom(t),e))))},F=function(t){return R(t)?S.create("img",{src:yn.transparentSrc}):t.cloneNode(!0)},$=function(t,e,n){if(Y(n)){var i=O(t);kt(i,function(t){t.style[e]||!l.schema.isValid(t.nodeName.toLowerCase(),e)?S.setStyle(t,e,n):S.setAttrib(t,e,""+n)})}},L=function(t,e,n){$(t,"width",e),$(t,"height",n)},H=function(t){var e,n,i,r;e=t.screenX-m,n=t.screenY-g,w=e*f[2]+v,_=n*f[3]+b,w=w<5?5:w,_=_<5?5:_,((P(c)||R(c))&&!1!==Eh(l)?!Eg.modifierPressed(t):Eg.modifierPressed(t))&&(u(e)>u(n)?(_=D(w*y),w=D(_/y)):(w=D(_/y),_=D(w*y))),L(d,w,_),i=0<(i=f.startPos.x+e)?i:0,r=0<(r=f.startPos.y+n)?r:0,S.setStyles(h,{left:i,top:r,display:"block"}),h.innerHTML=w+" &times; "+_,f[2]<0&&d.clientWidth<=w&&S.setStyle(d,"left",o+(v-w)),f[3]<0&&d.clientHeight<=_&&S.setStyle(d,"top",s+(b-_)),(e=A.scrollWidth-x)+(n=A.scrollHeight-C)!==0&&S.setStyles(h,{left:i-e,top:r-n}),a||(bg(l,c,v,b,"corner-"+f.name),a=!0)},B=function(){var t=a;a=!1,t&&($(c,"width",w),$(c,"height",_)),S.unbind(E,"mousemove",H),S.unbind(E,"mouseup",B),N!==E&&(S.unbind(N,"mousemove",H),S.unbind(N,"mouseup",B)),S.remove(d),S.remove(h),S.remove(p),z(c),t&&(yg(l,c,w,_,"corner-"+f.name),S.setAttrib(c,"style",S.getAttrib(c,"style"))),l.nodeChanged()},z=function(t){W();var e=S.getPos(t,A),r=e.x,o=e.y,n=t.getBoundingClientRect(),s=n.width||n.right-n.left,a=n.height||n.bottom-n.top;c!==t&&(j(),c=t,w=_=0);var i=l.fire("ObjectSelected",{target:t}),u=S.getAttrib(c,k,"1");M(t)&&!i.isDefaultPrevented()?T(I,function(n,i){var t,e=function(t){var e=O(c)[0];m=t.screenX,g=t.screenY,v=e.clientWidth,b=e.clientHeight,y=b/v,(f=n).name=i,f.startPos={x:s*n[0]+r,y:a*n[1]+o},x=A.scrollWidth,C=A.scrollHeight,p=S.add(A,"div",{"class":"mce-resize-backdrop","data-mce-bogus":"all"}),S.setStyles(p,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),d=F(c),S.addClass(d,"mce-clonedresizable"),S.setAttrib(d,"data-mce-bogus","all"),d.contentEditable="false",S.setStyles(d,{left:r,top:o,margin:0}),L(d,s,a),d.removeAttribute(k),A.appendChild(d),S.bind(E,"mousemove",H),S.bind(E,"mouseup",B),N!==E&&(S.bind(N,"mousemove",H),S.bind(N,"mouseup",B)),h=S.add(A,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},v+" &times; "+b)};(t=S.get("mceResizeHandle"+i))&&S.remove(t),t=S.add(A,"div",{id:"mceResizeHandle"+i,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+i+"-resize; margin:0; padding:0"}),11===yn.ie&&(t.contentEditable=!1),S.bind(t,"mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),e(t)}),n.elm=t,S.setStyles(t,{left:s*n[0]+r-t.offsetWidth/2,top:a*n[1]+o-t.offsetHeight/2})}):j(),S.getAttrib(c,k)||c.setAttribute(k,u)},j=function(){W(),c&&c.removeAttribute(k),Ut(I,function(t,e){var n=S.get("mceResizeHandle"+e);n&&(S.unbind(n),S.remove(n))})},U=function(t){var e,n=function(t,e){if(t)do{if(t===e)return!0}while(t=t.parentNode)};a||l.removed||(T(S.select("img[data-mce-selected],hr[data-mce-selected]"),function(t){t.removeAttribute(k)}),e="mousedown"===t.type?t.target:i.getNode(),n(e=S.$(e).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],A)&&(V(),n(i.getStart(!0),e)&&n(i.getEnd(!0),e))?z(e):j())},q=function(t){return Ng(dg(l.getBody(),t))},W=function(){Ut(I,function(t){t.elm&&(S.unbind(t.elm),delete t.elm)})},V=function(){try{l.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return l.on("init",function(){if(V(),yn.browser.isIE()||yn.browser.isEdge()){l.on("mousedown click",function(t){var e=t.target,n=e.nodeName;a||!/^(TABLE|IMG|HR)$/.test(n)||q(e)||(2!==t.button&&l.selection.select(e,"TABLE"===n),"mousedown"===t.type&&l.nodeChanged())});var t=function(t){var e=function(t){Bo.setEditorTimeout(l,function(){return l.selection.select(t)})};if(q(t.target)||br(t.target))return t.preventDefault(),void e(t.target);/^(TABLE|IMG|HR)$/.test(t.target.nodeName)&&(t.preventDefault(),"IMG"===t.target.tagName&&e(t.target))};S.bind(A,"mscontrolselect",t),l.on("remove",function(){return S.unbind(A,"mscontrolselect",t)})}var e=Bo.throttle(function(t){l.composing||U(t)});l.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",e),l.on("keyup compositionend",function(t){c&&"TABLE"===c.nodeName&&e(t)}),l.on("hide blur",j),l.on("contextmenu longpress",r,!0)}),l.on("remove",W),{isResizable:M,showResizeRect:z,hideResizeRect:j,updateResizeRect:U,destroy:function(){c=d=p=null}}},Ag=function(t){return mr(t)||gr(t)},Ig=function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null},Pg=function(t,n,e){var i,r=e.elementFromPoint(t,n),o=e.body.createTextRange();if(r&&"HTML"!==r.tagName||(r=e.body),o.moveToElementText(r),0<(i=(i=Sn.toArray(o.getClientRects())).sort(function(t,e){return(t=Math.abs(Math.max(t.top-n,t.bottom-n)))-(e=Math.abs(Math.max(e.top-n,e.bottom-n)))})).length){n=(i[0].bottom+i[0].top)/2;try{return o.moveToPoint(t,n),o.collapse(!0),o}catch(s){}}return null},Rg=function(t,e){var n=t&&t.parentElement?t.parentElement():null;return gr(Ig(n,e,Ag))?null:t},Og=function(t,e,n){var i,r,o=n;if(o.caretPositionFromPoint)(r=o.caretPositionFromPoint(t,e))&&((i=n.createRange()).setStart(r.offsetNode,r.offset),i.collapse(!0));else if(o.caretRangeFromPoint)i=o.caretRangeFromPoint(t,e);else if(o.body.createTextRange){i=o.body.createTextRange();try{i.moveToPoint(t,e),i.collapse(!0)}catch(s){i=Pg(t,e,n)}return Rg(i,n.body)}return i},Mg=function(t,e){return t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},Fg=function(t,e,n){for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null},$g=function(t,e,n){return null!==Fg(t,e,n)},Lg=function(t,e,n){return $g(t,e,function(t){return t.nodeName===n})},Hg=function(t){return t&&"TABLE"===t.nodeName},Bg=function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)},zg=function(t,e){return ys(t)&&!1===$g(t,e,Np)},jg=function(t,e,n){for(var i=new Uo(e,t.getParent(e.parentNode,t.isBlock)||t.getRoot());e=i[n?"prev":"next"]();)if(fr(e))return!0},Ug=function(t,e){return t.previousSibling&&t.previousSibling.nodeName===e},qg=function(t,e){for(;e&&e!==t;){if(gr(e))return!0;e=e.parentNode}return!1},Wg=function(t,e,n,i,r){var o,s,a=t.getRoot(),u=t.schema.getNonEmptyElements(),l=t.getParent(r.parentNode,t.isBlock)||a;if(i&&fr(r)&&e&&t.isEmpty(l))return at.some(od(r.parentNode,t.nodeIndex(r)));for(var c=new Uo(r,l);s=c[i?"prev":"next"]();){if("false"===t.getContentEditableParent(s)||zg(s,a))return at.none();if(lr(s)&&0<s.nodeValue.length)return!1===Lg(s,a,"A")?at.some(od(s,i?s.nodeValue.length:0)):at.none();if(t.isBlock(s)||u[s.nodeName.toLowerCase()])return at.none();o=s}return n&&o?at.some(od(o,0)):at.none()},Vg=function(t,e,n,i){var r,o,s,a,u=t.getRoot(),l=!1;r=i[(n?"start":"end")+"Container"],o=i[(n?"start":"end")+"Offset"];var c=Zi(r)&&o===r.childNodes.length,d=t.schema.getNonEmptyElements();if(a=n,ys(r))return at.none();if(Zi(r)&&o>r.childNodes.length-1&&(a=!1),dr(r)&&(r=u,o=0),r===u){if(a&&(s=r.childNodes[0<o?o-1:0])){if(ys(s))return at.none();if(d[s.nodeName]||Hg(s))return at.none()}if(r.hasChildNodes()){if(o=Math.min(!a&&0<o?o-1:o,r.childNodes.length-1),r=r.childNodes[o],o=lr(r)&&c?r.data.length:0,!e&&r===u.lastChild&&Hg(r))return at.none();if(qg(u,r)||ys(r))return at.none();if(r.hasChildNodes()&&!1===Hg(r)){var h=new Uo(s=r,u);do{if(gr(s)||ys(s)){l=!1;break}if(lr(s)&&0<s.nodeValue.length){o=a?0:s.nodeValue.length,r=s,l=!0;break}if(d[s.nodeName.toLowerCase()]&&!Bg(s)){o=t.nodeIndex(s),r=s.parentNode,a||o++,l=!0;break}}while(s=a?h.next():h.prev())}}}return e&&(lr(r)&&0===o&&Wg(t,c,e,!0,r).each(function(t){r=t.container(),o=t.offset(),l=!0}),Zi(r)&&((s=r.childNodes[o])||(s=r.childNodes[o-1]),!s||!fr(s)||Ug(s,"A")||jg(t,s,!1)||jg(t,s,!0)||Wg(t,c,e,!0,s).each(function(t){r=t.container(),o=t.offset(),l=!0}))),a&&!e&&lr(r)&&o===r.nodeValue.length&&Wg(t,c,e,!1,r).each(function(t){r=t.container(),o=t.offset(),l=!0}),l?at.some(od(r,o)):at.none()},Yg=function(t,e){var n=e.collapsed,i=e.cloneRange(),r=od.fromRangeStart(e);return Vg(t,n,!0,i).each(function(t){n&&od.isAbove(r,t)||i.setStart(t.container(),t.offset())}),n||Vg(t,n,!1,i).each(function(t){i.setEnd(t.container(),t.offset())}),n&&i.collapse(!0),Mg(e,i)?at.none():at.some(i)},Kg=function(t,e){return t.splitText(e)},Gg=function(t){var e=t.startContainer,n=t.startOffset,i=t.endContainer,r=t.endOffset;return e===i&&lr(e)?0<n&&n<e.nodeValue.length&&(e=(i=Kg(e,n)).previousSibling,n<r?(e=i=Kg(i,r-=n).previousSibling,r=i.nodeValue.length,n=0):r=0):(lr(e)&&0<n&&n<e.nodeValue.length&&(e=Kg(e,n),n=0),lr(i)&&0<r&&r<i.nodeValue.length&&(r=(i=Kg(i,r).previousSibling).nodeValue.length)),{startContainer:e,startOffset:n,endContainer:i,endOffset:r}},Xg=function(n){return{walk:function(t,e){return $m(n,t,e)},split:Gg,normalize:function(e){return Yg(n,e).fold(et,function(t){return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),!0})}}};Xg.compareRanges=Mg,Xg.getCaretRangeFromPoint=Og,Xg.getSelectedNode=Pc,Xg.getNode=Rc;var Qg,Jg=function(i,r){var t=function(t){var e=r(t);if(e<=0||null===e){var n=Mr(t,i);return parseFloat(n)||0}return e},o=function(r,t){return St(t,function(t,e){var n=Mr(r,e),i=n===undefined?0:parseInt(n,10);return isNaN(i)?t:t+i},0)},e=function(t,e,n){var i=o(t,n);return i<e?e-i:0};return{set:function(t,e){if(!W(e)&&!e.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+e);var n=t.dom;kr(n)&&(n.style[i]=e+"px")},get:t,getOuter:t,aggregate:o,max:e}}("height",function(t){var e=t.dom;return Li(t)?e.getBoundingClientRect().height:e.offsetHeight}),Zg=function(t){return Jg.get(t)},tv=function(i,t){return i.view(t).fold(Ct([]),function(t){var e=i.owner(t),n=tv(i,e);return[t].concat(n)})},ev=function(t,e){var n=e.owner(t);return tv(e,n)},nv=function(t){var e;return(t.dom===document?at.none():at.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(An.fromDom)},iv=function(t){return ii(t)},rv=Object.freeze({__proto__:null,view:nv,owner:iv}),ov=function(t){var e=An.fromDom(document),n=Wi(e),i=ev(t,rv),r=qi(t),o=yt(i,function(t,e){var n=qi(e);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return Bi(o.left+r.left+n.left,o.top+r.top+n.top)},sv=function(t){return"textarea"===Yn(t)},av=function(t,e){return t.fire("ScrollIntoView",e).isDefaultPrevented()},uv=function(t,e){t.fire("AfterScrollIntoView",e)},lv=function(t,e){var n=fi(t);if(0===n.length||sv(t))return{element:t,offset:e};if(e<n.length&&!sv(n[e]))return{element:n[e],offset:0};var i=n[n.length-1];return sv(i)?{element:t,offset:e}:"img"===Yn(i)?{element:i,offset:1}:Jn(i)?{element:i,offset:ng(i).length}:{element:i,offset:fi(i).length}},cv=function(t,e){var n=Ui(t),i=Zg(t);return{element:t,bottom:n.top+i,height:i,pos:n,cleanup:e}},dv=function(t,e){var n=lv(t,e),i=An.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+hs+"</span>");return Ni(n.element,i),cv(i,function(){return Fi(i)})},hv=function(t){return cv(An.fromDom(t),xt)},fv=function(t,e,n,i){vv(t,function(){return mv(t,e,n,i)},n)},pv=function(t,e,n,i,r){var o={elm:i.element.dom,alignToTop:r};av(t,o)||(n(e,Wi(e).top,i,r),uv(t,o))},mv=function(t,e,n,i){var r=An.fromDom(t.getBody()),o=An.fromDom(t.getDoc());Hr(r);var s=dv(An.fromDom(n.startContainer),n.startOffset);pv(t,o,e,s,i),s.cleanup()},gv=function(t,e,n,i){var r=An.fromDom(t.getDoc());pv(t,r,n,hv(e),i)},vv=function(t,e,n){var i=n.startContainer,r=n.startOffset,o=n.endContainer,s=n.endOffset;e(An.fromDom(i),An.fromDom(o));var a=t.dom.createRng();a.setStart(i,r),a.setEnd(o,s),t.selection.setRng(n)},bv=function(t,e,n,i){var r=t.pos;if(n)Vi(r.left,r.top,i);else{var o=r.top-e+t.height;Vi(r.left,o,i)}},yv=function(t,e,n,i,r){var o=n+e,s=i.pos.top,a=i.bottom,u=n<=a-s;if(s<e)bv(i,n,!1!==r,t);else if(o<s){bv(i,n,u?!1!==r:!0===r,t)}else o<a&&!u&&bv(i,n,!0===r,t)},wv=function(t,e,n,i){var r=t.dom.defaultView.innerHeight;yv(t,e,r,n,i)},_v=function(t,e,n,i){var r=t.dom.defaultView.innerHeight;yv(t,e,r,n,i);var o=ov(n.element),s=Xi(window);o.top<s.y?Yi(n.element,!1!==i):o.top>s.bottom&&Yi(n.element,!0===i)},xv=function(t,e,n){return fv(t,wv,e,n)},Cv=function(t,e,n){return gv(t,e,wv,n)},kv=function(t,e,n){return fv(t,_v,e,n)},Sv=function(t,e,n){return gv(t,e,_v,n)},Tv=function(t,e,n){(t.inline?Cv:Sv)(t,e,n)},Ev=function(t,e,n){(t.inline?xv:kv)(t,e,n)},Nv=function(){return An.fromDom(document)},Dv=function(t){return t.dom.focus()},Av=function(t){var e=xi(t).dom;return t.dom===e.activeElement},Iv=function(t){return void 0===t&&(t=Nv()),at.from(t.dom.activeElement).map(An.fromDom)},Pv=function(e){return Iv(xi(e)).filter(function(t){return e.dom.contains(t.dom)})},Rv={create:function(t,e,n,i){return{start:t,soffset:e,finish:n,foffset:i}}},Ov=so.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Mv=function(t,e,n,i){return t.fold(e,n,i)},Fv=function(t){return t.fold(G,G,G)},$v={before:Ov.before,on:Ov.on,after:Ov.after,cata:Mv,getStart:Fv},Lv=so.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Hv=function(t){return Lv.exact(t.start,t.soffset,t.finish,t.foffset)},Bv=function(t){return t.match({domRange:function(t){return An.fromDom(t.startContainer)},relative:function(t){return $v.getStart(t)},exact:function(t){return t}})},zv={domRange:Lv.domRange,relative:Lv.relative,exact:Lv.exact,exactFromRange:Hv,getWin:function(t){var e=Bv(t);return oi(e)},range:Rv.create},jv=cn().browser,Uv=function(t,e){var n=Jn(e)?ng(e).length:fi(e).length+1;return n<t?n:t<0?0:t},qv=function(t){return zv.range(t.start,Uv(t.soffset,t.start),t.finish,Uv(t.foffset,t.finish))},Wv=function(t,e){return!Ji(e.dom)&&(Vn(t,e)||Un(t,e))},Vv=function(e){return function(t){return Wv(e,t.start)&&Wv(e,t.finish)}},Yv=function(t){return!0===t.inline||jv.isIE()},Kv=function(t){return zv.range(An.fromDom(t.startContainer),t.startOffset,An.fromDom(t.endContainer),t.endOffset)},Gv=function(t){var e=t.getSelection();return(e&&0!==e.rangeCount?at.from(e.getRangeAt(0)):at.none()).map(Kv)},Xv=function(t){var e=oi(t);return Gv(e.dom).filter(Vv(t))},Qv=function(t,e){return at.from(e).filter(Vv(t)).map(qv)},Jv=function(t){var e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),at.some(e)}catch(_){return at.none()}},Zv=function(t){var e=Yv(t)?Xv(An.fromDom(t.getBody())):at.none();t.bookmark=e.isSome()?e:t.bookmark},tb=function(t,e){var n=An.fromDom(t.getBody()),i=(Yv(t)?at.from(e):at.none()).map(Kv).filter(Vv(n));t.bookmark=i.isSome()?i:t.bookmark},eb=function(e){return(e.bookmark?e.bookmark:at.none()).bind(function(t){return Qv(An.fromDom(e.getBody()),t)}).bind(Jv)},nb=function(e){eb(e).each(function(t){return e.selection.setRng(t)})},ib={isEditorUIElement:function(t){var e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},rb=function(t){return"nodechange"===t.type&&t.selectionChange},ob=function(t,e){var n=function(){e.throttle()};_l.DOM.bind(document,"mouseup",n),t.on("remove",function(){_l.DOM.unbind(document,"mouseup",n)})},sb=function(t){t.on("focusout",function(){Zv(t)})},ab=function(t,e){t.on("mouseup touchend",function(){e.throttle()})},ub=function(e,t){cn().browser.isIE()?sb(e):ab(e,t),e.on("keyup NodeChange",function(t){rb(t)||Zv(e)})},lb=function(t){var e=Bl(function(){Zv(t)},0);t.on("init",function(){t.inline&&ob(t,e),ub(t,e)}),t.on("remove",function(){e.cancel()})},cb=_l.DOM,db=function(t){return ib.isEditorUIElement(t)},hb=function(t){var e=t.classList;return e!==undefined&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},fb=function(e,t){var n=$h(e);return null!==cb.getParent(t,function(t){return db(t)||!!n&&e.dom.is(t,n)})},pb=function(t){try{var e=xi(An.fromDom(t.getElement()));return Iv(e).fold(function(){return document.body},function(t){return t.dom})}catch(n){return document.body}},mb=function(n,t){var e=t.editor;lb(e),e.on("focusin",function(){var t=n.focusedEditor;t!==e&&(t&&t.fire("blur",{focusedEditor:e}),n.setActive(e),(n.focusedEditor=e).fire("focus",{blurredEditor:t}),e.focus(!0))}),e.on("focusout",function(){Bo.setEditorTimeout(e,function(){var t=n.focusedEditor;fb(e,pb(e))||t!==e||(e.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})}),Qg||(Qg=function(t){var e=n.activeEditor;e&&Ti(t).each(function(t){t.ownerDocument===document&&(t===document.body||fb(e,t)||n.focusedEditor!==e||(e.fire("blur",{focusedEditor:null}),n.focusedEditor=null))})},cb.bind(document,"focusin",Qg))},gb=function(t,e){t.focusedEditor===e.editor&&(t.focusedEditor=null),t.activeEditor||(cb.unbind(document,"focusin",Qg),Qg=null)},vb=function(t){t.on("AddEditor",m(mb,t)),t.on("RemoveEditor",m(gb,t))},bb=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})},yb=function(t){return t.collapsed?at.from(Rc(t.startContainer,t.startOffset)).map(An.fromDom):at.none()},wb=function(e,t){return yb(t).bind(function(t){return ss(t)?at.some(t):!1===Vn(e,t)?at.some(e):at.none()})},_b=function(e,t){wb(An.fromDom(e.getBody()),t).bind(function(t){return Sp(t.dom)}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},xb=function(t){if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Cb=function(t){return Av(t)||Pv(t).isSome()},kb=function(t){return t.iframeElement&&Av(An.fromDom(t.iframeElement))},Sb=function(t){var e=t.getBody();return e&&Cb(An.fromDom(e))},Tb=function(e){var t=xi(An.fromDom(e.getElement()));return Iv(t).filter(function(t){return!hb(t.dom)&&fb(e,t.dom)}).isSome()},Eb=function(t){return t.inline?Sb(t):kb(t)},Nb=function(t){return Eb(t)||Tb(t)},Db=function(e){var t=e.selection,n=e.getBody(),i=t.getRng();e.quirks.refreshContentEditable(),e.bookmark!==undefined&&!1===Eb(e)&&eb(e).each(function(t){e.selection.setRng(t),i=t});var r=bb(e,t.getNode());if(e.$.contains(n,r))return xb(r),_b(e,i),void Ab(e);e.inline||(yn.opera||xb(n),e.getWin().focus()),(yn.gecko||e.inline)&&(xb(n),_b(e,i)),Ab(e)},Ab=function(t){return t.editorManager.setActive(t)},Ib=function(t,e){t.removed||(e?Ab(t):Db(t))},Pb=function(t,e,n,i,r){var o=n?e.startContainer:e.endContainer,s=n?e.startOffset:e.endOffset;return at.from(o).map(An.fromDom).map(function(t){return i&&e.collapsed?t:pi(t,r(t,s)).getOr(t)}).bind(function(t){return Qn(t)?at.some(t):si(t).filter(Qn)}).map(function(t){return t.dom}).getOr(t)},Rb=function(t,e,n){return Pb(t,e,!0,n,function(t,e){return Math.min(vi(t),e)})},Ob=function(t,e,n){return Pb(t,e,!1,n,function(t,e){return 0<e?e-1:e})},Mb=function(t,e){for(var n=t;t&&lr(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Fb=function(t,e){var n,i,r;if(!e)return t;i=e.startContainer,r=e.endContainer;var o=e.startOffset,s=e.endOffset;return n=e.commonAncestorContainer,!e.collapsed&&(i===r&&s-o<2&&i.hasChildNodes()&&(n=i.childNodes[o]),3===i.nodeType&&3===r.nodeType&&(i=i.length===o?Mb(i.nextSibling,!0):i.parentNode,r=0===s?Mb(r.previousSibling,!1):r.parentNode,i&&i===r))?i:n&&3===n.nodeType?n.parentNode:n},$b=function(t,e,n,i){var r,o=[],s=t.getRoot();if(n=t.getParent(n||Rb(s,e,e.collapsed),t.isBlock),i=t.getParent(i||Ob(s,e,e.collapsed),t.isBlock),n&&n!==s&&o.push(n),n&&i&&n!==i)for(var a=new Uo(r=n,s);(r=a.next())&&r!==i;)t.isBlock(r)&&o.push(r);return i&&n!==i&&i!==s&&o.push(i),o},Lb=function(i,t,r){return at.from(t).map(function(t){var e=i.nodeIndex(t),n=i.createRng();return n.setStart(t.parentNode,e),n.setEnd(t.parentNode,e+1),r&&(Qm(i,n,t,!0),Qm(i,n,t,!1)),n})},Hb=function(n,t){return mt(t,function(t){var e=n.fire("GetSelectionRange",{range:t});return e.range!==t?e.range:t})},Bb={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},zb=function(t,e,n){var i=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[i])return t[i];if(t!==e){var o=t[r];if(o)return o;for(var s=t.parent;s&&s!==e;s=s.parent)if(o=s[r])return o}},jb=function(t){if(!Ys(t.value))return!1;var e=t.parent;return!e||"span"===e.name&&!e.attr("style")||!/^[ ]+$/.test(t.value)},Ub=function(t){var e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e},qb=function(){function a(t,e){this.name=t,1===(this.type=e)&&(this.attributes=[],this.attributes.map={})}return a.create=function(t,e){var n=new a(t,Bb[t]||1);return e&&Ut(e,function(t,e){n.attr(e,t)}),n},a.prototype.replace=function(t){var e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e},a.prototype.attr=function(t,e){var n,i=this;if("string"!=typeof t)return t!==undefined&&null!==t&&Ut(t,function(t,e){i.attr(e,t)}),i;if(n=i.attributes){if(e===undefined)return n.map[t];if(null===e){if(t in n.map){delete n.map[t];for(var r=n.length;r--;)if(n[r].name===t)return n.splice(r,1),i}return i}if(t in n.map){for(r=n.length;r--;)if(n[r].name===t){n[r].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,i}},a.prototype.clone=function(){var t,e=this,n=new a(e.name,e.type);if(t=e.attributes){var i=[];i.map={};for(var r=0,o=t.length;r<o;r++){var s=t[r];"id"!==s.name&&(i[i.length]={name:s.name,value:s.value},i.map[s.name]=s.value)}n.attributes=i}return n.value=e.value,n.shortEnded=e.shortEnded,n},a.prototype.wrap=function(t){var e=this;return e.parent.insert(t,e),t.append(e),e},a.prototype.unwrap=function(){for(var t=this,e=t.firstChild;e;){var n=e.next;t.insert(e,t,!0),e=n}t.remove()},a.prototype.remove=function(){var t=this,e=t.parent,n=t.next,i=t.prev;return e&&(e.firstChild===t?(e.firstChild=n)&&(n.prev=null):i.next=n,e.lastChild===t?(e.lastChild=i)&&(i.next=null):n.prev=i,t.parent=t.next=t.prev=null),t},a.prototype.append=function(t){var e=this;t.parent&&t.remove();var n=e.lastChild;return n?((n.next=t).prev=n,e.lastChild=t):e.lastChild=e.firstChild=t,t.parent=e,t},a.prototype.insert=function(t,e,n){t.parent&&t.remove();var i=e.parent||this;return n?(e===i.firstChild?i.firstChild=t:e.prev.next=t,t.prev=e.prev,(t.next=e).prev=t):(e===i.lastChild?i.lastChild=t:e.next.prev=t,t.next=e.next,(t.prev=e).next=t),t.parent=i,t},a.prototype.getAll=function(t){for(var e=this,n=[],i=e.firstChild;i;i=zb(i,e))i.name===t&&n.push(i);return n},a.prototype.children=function(){for(var t=[],e=this.firstChild;e;e=e.next)t.push(e);return t},a.prototype.empty=function(){var t=this;if(t.firstChild){for(var e=[],n=t.firstChild;n;n=zb(n,t))e.push(n);for(var i=e.length;i--;){(n=e[i]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}}return t.firstChild=t.lastChild=null,t},a.prototype.isEmpty=function(t,e,n){void 0===e&&(e={});var i=this,r=i.firstChild;if(Ub(i))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(t[r.name])return!1;if(Ub(r))return!1}if(8===r.type)return!1;if(3===r.type&&!jb(r))return!1;if(3===r.type&&r.parent&&e[r.parent.name]&&Ys(r.value))return!1;if(n&&n(r))return!1}while(r=zb(r,i));return!0},a.prototype.walk=function(t){return zb(this,null,t)},a}(),Wb=function(t){for(var e,n=/data:[^;]+;base64,([a-z0-9\+\/=\s]+)/gi,i=[],r={},o=hc("img"),s=0,a=0;e=n.exec(t);){var u=e[0],l=o+"_"+a++;r[l]=u,s<e.index&&i.push(t.substr(s,e.index-s)),i.push(l),s=e.index+u.length}var c=new RegExp(o+"_[0-9]+","g");return 0===s?{prefix:o,uris:r,html:t,re:c}:(s<t.length&&i.push(t.substr(s)),{prefix:o,uris:r,html:i.join(""),re:c})},Vb=function(t,e){return t.replace(e.re,function(t){return Jt(e.uris,t).getOr(t)})},Yb=function(t){var e=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(t);return e?at.some({type:e[1],data:decodeURIComponent(e[2])}):at.none()},Kb=Sn.each,Gb=Sn.trim,Xb="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),Qb={ftp:21,http:80,https:443,mailto:25},Jb=["img","video"],Zb=function(t,e){return Y(t)?!t:!Y(e)||!ft(Jb,e)},ty=function(t,e,n){return!t.allow_html_data_urls&&(/^data:image\//i.test(e)?Zb(t.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(e):/^data:/i.test(e))},ey=function(){function u(t,e){t=Gb(t),this.settings=e||{};var n=this.settings.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))i.source=t;else{var r=0===t.indexOf("//");if(0!==t.indexOf("/")||r||(t=(n&&n.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){
var o=this.settings.base_uri?this.settings.base_uri.path:new u(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)t="//mce_host"+i.toAbsPath(o,t);else{var s=/([^#?]*)([#?]?.*)/.exec(t);t=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(o,s[1])+s[2]}}t=t.replace(/@@/g,"(mce_at)");var a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);Kb(Xb,function(t,e){var n=a[e];n&&(n=n.replace(/\(mce_at\)/g,"@@")),i[t]=n}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),r&&(i.protocol="")}}return u.parseDataUri=function(t){var e,n=decodeURIComponent(t).split(","),i=/data:([^;]+)/.exec(n[0]);return i&&(e=i[1]),{type:e,data:n[1]}},u.isDomSafe=function(t,e,n){if(void 0===n&&(n={}),n.allow_script_urls)return!0;var i=Ta.decode(t).replace(/[\s\u0000-\u001F]+/g,"");try{i=decodeURIComponent(i)}catch(r){i=unescape(i)}return!/((java|vb)script|mhtml):/i.test(i)&&!ty(n,i,e)},u.getDocumentBaseUrl=function(t){var e;return e=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?t.href:t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},u.prototype.setPath=function(t){var e=/^(.*?)\/?(\w+)?$/.exec(t);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},u.prototype.toRelative=function(t){var e;if("./"===t)return t;var n=new u(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();var i=this.getURI(),r=n.getURI();return i===r||"/"===i.charAt(i.length-1)&&i.substr(0,i.length-1)===r?i:(e=this.toRelPath(this.path,n.path),n.query&&(e+="?"+n.query),n.anchor&&(e+="#"+n.anchor),e)},u.prototype.toAbsolute=function(t,e){var n=new u(t,{base_uri:this});return n.getURI(e&&this.isSameOrigin(n))},u.prototype.isSameOrigin=function(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;var e=Qb[this.protocol];if(e&&(this.port||e)==(t.port||e))return!0}return!1},u.prototype.toRelPath=function(t,e){var n,i,r=0,o="",s=t.substring(0,t.lastIndexOf("/")).split("/"),a=e.split("/");if(s.length>=a.length)for(n=0,i=s.length;n<i;n++)if(n>=a.length||s[n]!==a[n]){r=n+1;break}if(s.length<a.length)for(n=0,i=a.length;n<i;n++)if(n>=s.length||s[n]!==a[n]){r=n+1;break}if(1===r)return e;for(n=0,i=s.length-(r-1);n<i;n++)o+="../";for(n=r-1,i=a.length;n<i;n++)o+=n!==r-1?"/"+a[n]:a[n];return o},u.prototype.toAbsPath=function(t,e){var n,i,r=0,o=[],s=/\/$/.test(e)?"/":"",a=t.split("/"),u=e.split("/");for(Kb(a,function(t){t&&o.push(t)}),a=o,n=u.length-1,o=[];0<=n;n--)0!==u[n].length&&"."!==u[n]&&(".."!==u[n]?0<r?r--:o.push(u[n]):r++);return 0!==(i=(n=a.length-r)<=0?Pt(o).join("/"):a.slice(0,n).join("/")+"/"+Pt(o).join("/")).indexOf("/")&&(i="/"+i),s&&i.lastIndexOf("/")!==i.length-1&&(i+=s),i},u.prototype.getURI=function(t){var e;return void 0===t&&(t=!1),this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source},u}(),ny=Sn.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),iy=function(t){return 0===t.indexOf("data-")||0===t.indexOf("aria-")},ry=function(t,e,n){for(var i=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,o=t.getShortEndedElements(),s=1,a=n;0!==s;)for(i.lastIndex=a;;){var u=i.exec(e);if(null===u)return a;if("!"===u[1]){a=Ne(u[2],"--")?sy(e,!1,u.index+"!--".length):sy(e,!0,u.index+1);break}r.lastIndex=i.lastIndex;var l=r.exec(e);if(!z(l)&&l.index===i.lastIndex){"/"===u[1]?s-=1:Zt(o,u[2])||(s+=1),a=i.lastIndex+l[0].length;break}}return a},oy=function(t,e){return/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(t.substr(e))},sy=function(t,e,n){void 0===n&&(n=0);var i=t.toLowerCase();if(-1!==i.indexOf("[if ",n)&&oy(i,n)){var r=i.indexOf("[endif]",n);return i.indexOf(">",r)}if(e){var o=i.indexOf(">",n);return-1!==o?o:i.length}var s=/--!?>/g;s.lastIndex=n;var a=s.exec(t);return a?a.index+a[0].length:i.length},ay=function(t,e){var n=t.exec(e);if(n){var i=n[1],r=n[2];return"string"==typeof i&&"data-mce-bogus"===i.toLowerCase()?r:null}return null},uy=function(V,Y){var t;void 0===Y&&(Y=$a());var K=null!==(t=(V=V||{}).document)&&void 0!==t?t:document,G=K.createElement("form");!1!==V.fix_self_closing&&(V.fix_self_closing=!0);var X=V.comment?V.comment:xt,Q=V.cdata?V.cdata:xt,J=V.text?V.text:xt,Z=V.start?V.start:xt,tt=V.end?V.end:xt,et=V.pi?V.pi:xt,nt=V.doctype?V.doctype:xt,n=function(n,t){void 0===t&&(t="html");for(var e,o,i,a,r,s,u,l,c,d,h,f,p,m,g,v,b,y,w,_=n.html,x=0,C=[],k=0,S=Ta.decode,T=Sn.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),E="html"===t?0:1,N=function(t){var e,n;for(e=C.length;e--&&C[e].name!==t;);if(0<=e){for(n=C.length-1;e<=n;n--)(t=C[n]).valid&&tt(t.name);C.length=e}},D=function(t,e){return J(Vb(t,n),e)},A=function(t){""!==t&&(">"===t.charAt(0)&&(t=" "+t),V.allow_conditional_comments||"[if"!==t.substr(0,3).toLowerCase()||(t=" "+t),X(Vb(t,n)))},I=function(t){return Vb(t,n)},P=function(t,e){var n=t||"",i=!Ne(n,"--"),r=sy(_,i,e);return t=_.substr(e,r-e),A(i?n+t:t),r+1},R=function(t,e,n,i,r){if(e=e.toLowerCase(),n=I(e in L?e:S(n||i||r||"")),H&&!l&&!1===iy(e)){var o=m[e];if(!o&&g){for(var s=g.length;s--&&!(o=g[s]).pattern.test(e););-1===s&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}("name"===e||"id"===e)&&t in ny&&(n in K||n in G)||T[e]&&!ey.isDomSafe(n,t,V)||l&&(e in T||0===e.indexOf("on"))||(a.map[e]=n,a.push({name:e,value:n}))},O=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),M=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,F=Y.getShortEndedElements(),$=V.self_closing_elements||Y.getSelfClosingElements(),L=Y.getBoolAttrs(),H=V.validate,B=V.remove_internals,z=V.fix_self_closing,j=Y.getSpecialElements(),U=_+">";e=O.exec(U);){var q=e[0];if(x<e.index&&D(S(_.substr(x,e.index-x))),o=e[7])":"===(o=o.toLowerCase()).charAt(0)&&(o=o.substr(1)),N(o);else if(o=e[8]){if(e.index+q.length>_.length){D(S(_.substr(e.index))),x=e.index+q.length;continue}":"===(o=o.toLowerCase()).charAt(0)&&(o=o.substr(1)),c=o in F,z&&$[o]&&0<C.length&&C[C.length-1].name===o&&N(o);var W=ay(M,e[9]);if(null!==W){if("all"===W){x=ry(Y,_,O.lastIndex),O.lastIndex=x;continue}h=!1}if(!H||(d=Y.getElementRule(o))){if(h=!0,H&&(m=d.attributes,g=d.attributePatterns),(p=e[9])?((l=-1!==p.indexOf("data-mce-type"))&&B&&(h=!1),(a=[]).map={},p.replace(M,function(t,e,n,i,r){return R(o,e,n,i,r),""})):(a=[]).map={},H&&!l){if(v=d.attributesRequired,b=d.attributesDefault,y=d.attributesForced,d.removeEmptyAttrs&&!a.length&&(h=!1),y)for(r=y.length;r--;)u=(f=y[r]).name,"{$uid}"===(w=f.value)&&(w="mce_"+k++),a.map[u]=w,a.push({name:u,value:w});if(b)for(r=b.length;r--;)(u=(f=b[r]).name)in a.map||("{$uid}"===(w=f.value)&&(w="mce_"+k++),a.map[u]=w,a.push({name:u,value:w}));if(v){for(r=v.length;r--&&!(v[r]in a.map););-1===r&&(h=!1)}if(f=a.map["data-mce-bogus"]){if("all"===f){x=ry(Y,_,O.lastIndex),O.lastIndex=x;continue}h=!1}}h&&Z(o,a,c)}else h=!1;if(i=j[o]){i.lastIndex=x=e.index+q.length,(e=i.exec(_))?(h&&(s=_.substr(x,e.index-x)),x=e.index+e[0].length):(s=_.substr(x),x=_.length),h&&(0<s.length&&D(s,!0),tt(o)),O.lastIndex=x;continue}c||(p&&p.indexOf("/")===p.length-1?h&&tt(o):C.push({name:o,valid:h}))}else if(o=e[1])A(o);else if(o=e[2]){if(!(1===E||V.preserve_cdata||0<C.length&&Y.isValidChild(C[C.length-1].name,"#cdata"))){x=P("",e.index+2),O.lastIndex=x;continue}Q(o)}else if(o=e[3])nt(o);else{if((o=e[4])||"<!"===q){x=P(o,e.index+q.length),O.lastIndex=x;continue}if(o=e[5]){if(1!==E){x=P("?",e.index+2),O.lastIndex=x;continue}et(o,e[6])}}x=e.index+q.length}for(x<_.length&&D(S(_.substr(x))),r=C.length-1;0<=r;r--)(o=C[r]).valid&&tt(o.name)};return{parse:function(t,e){void 0===e&&(e="html"),n(Wb(t),e)}}};uy.findEndTag=ry;var ly=function(t,e){var n=new RegExp(["\\s?("+t.join("|")+')="[^"]+"'].join("|"),"gi");return e.replace(n,"")},cy=function(t,e){for(var n,i=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=t.schema,o=ly(t.getTempAttrs(),e),s=r.getShortEndedElements();n=i.exec(o);){var a=i.lastIndex,u=n[0].length,l=void 0;l=s[n[1]]?a:uy.findEndTag(r,o,a),o=o.substring(0,a-u)+o.substring(l),i.lastIndex=a-u}return ps(o)},dy=cy,hy=function(t,e){var n=Jd(t),i=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return e.replace(i,"")},fy=function(t,e){return de(de({},t),{format:e,get:!0,getInner:!0})},py=function(t,e,n,i){var r,o=fy(e,n),s=e.no_events?o:t.fire("BeforeGetContent",o);return r="raw"===s.format?Sn.trim(dy(t.serializer,i.innerHTML)):"text"===s.format?t.dom.isEmpty(i)?"":ps(i.innerText||i.textContent):"tree"===s.format?t.serializer.serialize(i,s):hy(t,t.serializer.serialize(i,s)),ft(["text","tree"],s.format)||us(An.fromDom(i))?s.content=r:s.content=Sn.trim(r),s.no_events?s.content:t.fire("GetContent",s).content},my=function(e,n,i){return at.from(e.getBody()).fold(Ct("tree"===n.format?new qb("body",11):""),function(t){return py(e,n,i,t)})},gy=Sn.each,vy=function(r){return{compare:function(t,e){if(t.nodeName!==e.nodeName)return!1;var n=function(n){var i={};return gy(r.getAttribs(n),function(t){var e=t.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(i[e]=r.getAttrib(n,e))}),i},i=function(t,e){var n,i;for(i in t)if(Zt(t,i)){if(void 0===(n=e[i]))return!1;if(t[i]!==n)return!1;delete e[i]}for(i in e)if(Zt(e,i))return!1;return!0};return!!i(n(t),n(e))&&(!!i(r.parseStyle(r.getAttrib(t,"style")),r.parseStyle(r.getAttrib(e,"style")))&&(!Xp(t)&&!Xp(e)))}}},by=Sn.makeMap,yy=function(t){var a=[],u=(t=t||{}).indent,l=by(t.indent_before||""),c=by(t.indent_after||""),d=Ta.getEncodeFunc(t.entity_encoding||"raw",t.entities),h="html"===t.element_format;return{start:function(t,e,n){var i,r,o,s;if(u&&l[t]&&0<a.length&&0<(s=a[a.length-1]).length&&"\n"!==s&&a.push("\n"),a.push("<",t),e)for(i=0,r=e.length;i<r;i++)o=e[i],a.push(" ",o.name,'="',d(o.value,!0),'"');a[a.length]=!n||h?">":" />",n&&u&&c[t]&&0<a.length&&0<(s=a[a.length-1]).length&&"\n"!==s&&a.push("\n")},end:function(t){var e;a.push("</",t,">"),u&&c[t]&&0<a.length&&0<(e=a[a.length-1]).length&&"\n"!==e&&a.push("\n")},text:function(t,e){0<t.length&&(a[a.length]=e?t:d(t))},cdata:function(t){a.push("<![CDATA[",t,"]]>")},comment:function(t){a.push("<!--",t,"-->")},pi:function(t,e){e?a.push("<?",t," ",d(e),"?>"):a.push("<?",t,"?>"),u&&a.push("\n")},doctype:function(t){a.push("<!DOCTYPE",t,">",u?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}},wy=function(e,p){void 0===p&&(p=$a());var m=yy(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(t){var d=e.validate,h={3:function(t){m.text(t.value,t.raw)},8:function(t){m.comment(t.value)},7:function(t){m.pi(t.name,t.value)},10:function(t){m.doctype(t.value)},4:function(t){m.cdata(t.value)},11:function(t){if(t=t.firstChild)for(;f(t),t=t.next;);}};m.reset();var f=function(t){var e=h[t.type];if(e)e(t);else{var n=t.name,i=t.shortEnded,r=t.attributes;if(d&&r&&1<r.length){var o=[];o.map={};var s=p.getElementRule(t.name);if(s){for(var a=0,u=s.attributesOrder.length;a<u;a++){if((c=s.attributesOrder[a])in r.map){var l=r.map[c];o.map[c]=l,o.push({name:c,value:l})}}for(a=0,u=r.length;a<u;a++){var c;if(!((c=r[a].name)in o.map)){l=r.map[c];o.map[c]=l,o.push({name:c,value:l})}}r=o}}if(m.start(t.name,r,i),!i){if(t=t.firstChild)for(;f(t),t=t.next;);m.end(n)}}};return 1!==t.type||e.inner?h[11](t):f(t),m.getContent()}}},_y=new Set;kt(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(t){_y.add(t)});var xy=["font","text-decoration","text-emphasis"],Cy=function(t,e){return zt(t.parseStyle(t.getAttrib(e,"style")))},ky=function(t){return _y.has(t)},Sy=function(t,e){return It(Cy(t,e),function(t){return!ky(t)})},Ty=function(t){return bt(t,function(e){return pt(xy,function(t){return Ne(e,t)})})},Ey=function(i,r,o){var t=Cy(i,r),s=Cy(i,o),a=function(t){var e=i.getStyle(r,t),n=i.getStyle(o,t);return Re(e)&&Re(n)&&e!==n};return pt(t,function(e){var t=function(t){return pt(t,function(t){return t===e})};if(t(s)||!t(xy))return a(e);var n=Ty(s);return pt(n,a)})},Ny=function(n,i,r){return at.from(r.container()).filter(lr).exists(function(t){var e=n?0:-1;return i(t.data.charAt(r.offset()+e))})},Dy=m(Ny,!0,Jp),Ay=m(Ny,!1,Jp),Iy=function(t){var e=t.container();return lr(e)&&(0===e.data.length||fs(e.data)&&cg.isBookmarkNode(e.parentNode))},Py=function(e,n){return function(t){return at.from(Bf(e?0:-1,t)).filter(n).isSome()}},Ry=function(t){return pr(t)&&"block"===Mr(An.fromDom(t),"display")},Oy=function(t){return gr(t)&&!or(t)},My=Py(!0,Ry),Fy=Py(!1,Ry),$y=Py(!0,br),Ly=Py(!1,br),Hy=Py(!0,sr),By=Py(!1,sr),zy=Py(!0,Oy),jy=Py(!1,Oy),Uy=function(t){for(var e=[],n=t.dom;n;)e.push(An.fromDom(n)),n=n.lastChild;return e},qy=function(t){var e=tc(t,"br"),n=bt(Uy(t).slice(-1),ns);e.length===n.length&&kt(n,Fi)},Wy=function(t){Mi(t),Ii(t,An.fromHtml('<br data-mce-bogus="1">'))},Vy=function(n){gi(n).each(function(e){li(e).each(function(t){Zo(n)&&ns(e)&&Zo(t)&&Fi(e)})})},Yy=function(t){return t.slice(0,-1)},Ky=function(t,e,n){return Vn(e,t)?Yy(ai(t,function(t){return n(t)||Un(t,e)})):[]},Gy=function(t,e){return Ky(t,e,et)},Xy=function(t,e){return[t].concat(Gy(t,e))},Qy=function(t,e,n){return _p(t,e,n,Iy)},Jy=function(t,e){return Et(Xy(An.fromDom(e.container()),t),Zo)},Zy=function(t,n,i){return Qy(t,n.dom,i).forall(function(e){return Jy(n,i).fold(function(){return!1===Hf(e,i,n.dom)},function(t){return!1===Hf(e,i,n.dom)&&Vn(t,An.fromDom(e.container()))})})},tw=function(e,n,i){return Jy(n,i).fold(function(){return Qy(e,n.dom,i).forall(function(t){return!1===Hf(t,i,n.dom)})},function(t){return Qy(e,t.dom,i).isNone()})},ew=m(tw,!1),nw=m(tw,!0),iw=m(Zy,!1),rw=m(Zy,!0),ow=function(t){return Gf(t).exists(ns)},sw=function(t,e,n){var i=bt(Xy(An.fromDom(n.container()),e),Zo),r=$t(i).getOr(e);return yp(t,r.dom,n).filter(ow)},aw=function(t,e){return Gf(e).exists(ns)||sw(!0,t,e).isSome()},uw=function(t,e){return Xf(e).exists(ns)||sw(!1,t,e).isSome()},lw=m(sw,!1),cw=m(sw,!0),dw=function(t){return od.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd()},hw=function(t,e){var n=bt(Xy(An.fromDom(e.container()),t),Zo);return $t(n).getOr(t)},fw=function(t,e){return dw(e)?Ay(e):Ay(e)||kp(hw(t,e).dom,e).exists(Ay)},pw=function(t,e){return dw(e)?Dy(e):Dy(e)||Cp(hw(t,e).dom,e).exists(Dy)},mw=function(t){return ft(["pre","pre-wrap"],t)},gw=function(t){return Gf(t).bind(function(t){return Do(t,Qn)}).exists(function(t){return mw(Mr(t,"white-space"))})},vw=function(t,e){return kp(t.dom,e).isNone()},bw=function(t,e){return Cp(t.dom,e).isNone()},yw=function(t,e){return vw(t,e)||bw(t,e)||ew(t,e)||nw(t,e)||uw(t,e)||aw(t,e)},ww=function(t,e){return!gw(e)&&(yw(t,e)||fw(t,e)||pw(t,e))},_w=function(t,e){return!gw(e)&&(ew(t,e)||iw(t,e)||uw(t,e)||fw(t,e))},xw=function(t){var e=t.container(),n=t.offset();return lr(e)&&n<e.data.length?od(e,n+1):t},Cw=function(t,e){return!gw(e)&&(nw(t,e)||rw(t,e)||aw(t,e)||pw(t,e))},kw=function(t,e){return _w(t,e)||Cw(t,xw(e))},Sw=function(t,e){return Qp(t.charAt(e))},Tw=function(t){var e=t.container();return lr(e)&&Ee(e.data,ds)},Ew=function(t){var n=t.split("");return mt(n,function(t,e){return Qp(t)&&0<e&&e<n.length-1&&Zp(n[e-1])&&Zp(n[e+1])?" ":t}).join("")},Nw=function(t,e){var n=e.data,i=od(e,0);return!(!Sw(n,0)||kw(t,i))&&(e.data=" "+n.slice(1),!0)},Dw=function(t){var e=t.data,n=Ew(e);return n!==e&&(t.data=n,!0)},Aw=function(t,e){var n=e.data,i=od(e,n.length-1);return!(!Sw(n,n.length-1)||kw(t,i))&&(e.data=n.slice(0,-1)+" ",!0)},Iw=function(n,t){return at.some(t).filter(Tw).bind(function(t){var e=t.container();return Nw(n,e)||Dw(e)||Aw(n,e)?at.some(t):at.none()})},Pw=function(e){var t=An.fromDom(e.getBody());e.selection.isCollapsed()&&Iw(t,od.fromRangeStart(e.selection.getRng())).each(function(t){e.selection.setRng(t.toRange())})},Rw=function(n,i,r){return St(n,function(t,e){return Jp(e)||Qp(e)?t.previousCharIsSpace||""===t.str&&i||t.str.length===n.length-1&&r?{previousCharIsSpace:!1,str:t.str+ds}:{previousCharIsSpace:!0,str:t.str+" "}:{previousCharIsSpace:!1,str:t.str+e}},{previousCharIsSpace:!1,str:""}).str},Ow=function(t,e,n){if(0!==n){var i=An.fromDom(t),r=No(i,Zo).getOr(i),o=t.data.slice(e,e+n),s=e+n>=t.data.length&&Cw(r,od(t,t.data.length)),a=0===e&&_w(r,od(t,0));t.replaceData(e,n,Rw(o,a,s))}},Mw=function(t,e){var n=t.data.slice(e),i=n.length-Ie(n).length;Ow(t,e,i)},Fw=function(t,e){var n=t.data.slice(0,e),i=n.length-Pe(n).length;Ow(t,e-i,i)},$w=function(t,e,n,i){void 0===i&&(i=!0);var r=Pe(t.data).length,o=i?t:e,s=i?e:t;return i?o.appendData(s.data):o.insertData(0,s.data),Fi(An.fromDom(s)),n&&Mw(o,r),o},Lw=function(t,e){var n=t.container(),i=t.offset();return!1===od.isTextPosition(t)&&n===e.parentNode&&i>od.before(e).offset()},Hw=function(t,e){return Lw(e,t)?od(e.container(),e.offset()-1):e},Bw=function(t){return lr(t)?od(t,0):od.before(t)},zw=function(t){return lr(t)?od(t,t.data.length):od.after(t)},jw=function(t){return Hs(t.previousSibling)?at.some(zw(t.previousSibling)):t.previousSibling?Tp(t.previousSibling):at.none()},Uw=function(t){return Hs(t.nextSibling)?at.some(Bw(t.nextSibling)):t.nextSibling?Sp(t.nextSibling):at.none()},qw=function(t,e){var n=od.before(e.previousSibling?e.previousSibling:e.parentNode);return kp(t,n).fold(function(){return Cp(t,od.after(e))},at.some)},Ww=function(t,e){return Cp(t,od.after(e)).fold(function(){return kp(t,od.before(e))},at.some)},Vw=function(t,e){return jw(e).orThunk(function(){return Uw(e)}).orThunk(function(){return qw(t,e)})},Yw=function(t,e){return Uw(e).orThunk(function(){return jw(e)}).orThunk(function(){return Ww(t,e)})},Kw=function(t,e,n){return t?Yw(e,n):Vw(e,n)},Gw=function(t,e,n){return Kw(t,e,n).map(m(Hw,n))},Xw=function(e,n,t){t.fold(function(){e.focus()},function(t){e.selection.setRng(t.toRange(),n)})},Qw=function(e){return function(t){return t.dom===e}},Jw=function(t,e){return e&&Zt(t.schema.getBlockElements(),Yn(e))},Zw=function(t){if(na(t)){var e=An.fromHtml('<br data-mce-bogus="1">');return Mi(t),Ii(t,e),at.some(od.before(e.dom))}return at.none()},t_=function(t,e,s){var n=li(t).filter(Jn),i=ci(t).filter(Jn);return Fi(t),xr(n,i,e,function(t,e,n){var i=t.dom,r=e.dom,o=i.data.length;return $w(i,r,s),n.container()===r?od(i,o):n}).orThunk(function(){return s&&(n.each(function(t){return Fw(t.dom,t.dom.length)}),i.each(function(t){return Mw(t.dom,0)})),e})},e_=function(t,e){return Zt(t.schema.getTextInlineElements(),Yn(e))},n_=function(e,n,t,i){void 0===i&&(i=!0);var r=Gw(n,e.getBody(),t.dom),o=No(t,m(Jw,e),Qw(e.getBody())),s=t_(t,r,e_(e,t));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):o.bind(Zw).fold(function(){i&&Xw(e,n,s)},function(t){i&&Xw(e,n,at.some(t))})},i_=function(e){return function(t){return Un(e,t)}},r_=function(t){return tc(t,"td,th")},o_=function(t,e){var n=function(t){return Wm(An.fromDom(t),e)},i=n(t.startContainer),r=n(t.endContainer),o=i.isSome(),s=r.isSome(),a=_r(i,r,Un).getOr(!1);return{startTable:i,endTable:r,isStartInTable:o,isEndInTable:s,isSameTable:a,isMultiTable:!a&&o&&s}},s_=function(t,e){return{start:t,end:e}},a_=function(t,e,n){return{rng:t,table:e,cells:n}},u_=so.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),l_=function(t,e){return Oo(An.fromDom(t),"td,th",e)},c_=function(t){return!Un(t.start,t.end)},d_=function(t,n){return Wm(t.start,n).bind(function(e){return Wm(t.end,n).bind(function(t){return Cr(Un(e,t),e)})})},h_=function(t,e){return!c_(t)&&d_(t,e).exists(function(t){var e=t.dom.rows;return 1===e.length&&1===e[0].cells.length})},f_=function(t,e){var n=l_(t.startContainer,e),i=l_(t.endContainer,e);return _r(n,i,s_)},p_=function(t){return function(e){return Wm(e,t).bind(function(t){return Lt(r_(t)).map(function(t){return s_(e,t)})})}},m_=function(t){return function(e){return Wm(e,t).bind(function(t){return $t(r_(t)).map(function(t){return s_(t,e)})})}},g_=function(t){return function(e){return d_(e,t).map(function(t){return a_(e,t,r_(t))})}},v_=function(t,e,n,i){if(n.collapsed||!t.forall(c_))return at.none();if(e.isSameTable){var r=t.bind(g_(i));return at.some({start:r,end:r})}var o=l_(n.startContainer,i),s=l_(n.endContainer,i),a=o.bind(p_(i)).bind(g_(i)),u=s.bind(m_(i)).bind(g_(i));return at.some({start:a,end:u})},b_=function(t,e){return Nt(t,function(t){return Un(t,e)})},y_=function(n){return _r(b_(n.cells,n.rng.start),b_(n.cells,n.rng.end),function(t,e){return n.cells.slice(t,e+1)})},w_=function(t,e,n){return t.exists(function(t){return h_(t,n)&&Xm(t.start,e)})},__=function(t,e){var n=e.startTable,i=e.endTable,r=t.cloneRange();return n.each(function(t){return r.setStartAfter(t.dom)}),i.each(function(t){return r.setEndBefore(t.dom)}),r},x_=function(t,r,o,e){return v_(t,r,o,e).bind(function(t){var e=t.start,n=t.end;return e.or(n)}).bind(function(t){var e=r.isSameTable,n=y_(t).getOr([]);if(e&&t.cells.length===n.length)return at.some(u_.fullTable(t.table));if(0<n.length){if(e)return at.some(u_.partialTable(n,at.none()));var i=__(o,r);return at.some(u_.partialTable(n,at.some(de(de({},r),{rng:i}))))}return at.none()})},C_=function(t,s,a,e){return v_(t,s,a,e).bind(function(t){var e=t.start,n=t.end,i=e.bind(y_).getOr([]),r=n.bind(y_).getOr([]);if(0<i.length&&0<r.length){var o=__(a,s);return at.some(u_.multiTable(i,r,o))}return at.none()})},k_=function(t,e){var n=i_(t),i=f_(e,n),r=o_(e,n);return w_(i,e,n)?i.map(function(t){return u_.singleCellTable(e,t.start)}):r.isMultiTable?C_(i,r,e,n):x_(i,r,e,n)},S_=function(t){return(Xn(t)?li(t):gi(t)).bind(S_).orThunk(function(){return at.some(t)})},T_=function(t){return kt(t,function(t){Ir(t,"contenteditable"),Wy(t)})},E_=function(t,e){return at.from(t.dom.getParent(e,t.dom.isBlock)).map(An.fromDom)},N_=function(e,n,t){t.each(function(t){n?Fi(t):(Wy(t),e.selection.setCursorLocation(t.dom,0))})},D_=function(t,e,n,i){var r=n.cloneRange();i?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),R_(t,r,e,!1)},A_=function(t){var e=qm(t),n=An.fromDom(t.selection.getNode());vr(n.dom)&&na(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),1<e.length&&pt(e,function(t){return Un(t,n)})&&Tr(n,"data-mce-selected","1")},I_=function(o,s,t){var a=o.selection.getRng(),e=t.bind(function(t){var e=t.rng,n=t.isStartInTable,i=E_(o,n?e.endContainer:e.startContainer);e.deleteContents(),N_(o,n,i.filter(na));var r=n?s[0]:s[s.length-1];return D_(o,r,a,n),na(r)?at.none():at.some(n?s.slice(1):s.slice(0,-1))}).getOr(s);return T_(e),A_(o),!0},P_=function(t,e,n,i){var r=t.selection.getRng(),o=e[0],s=n[n.length-1];D_(t,o,r,!0),D_(t,s,r,!1);var a=na(o)?e:e.slice(1),u=na(s)?n:n.slice(0,-1);return T_(a.concat(u)),i.deleteContents(),A_(t),!0},R_=function(t,e,n,i){void 0===i&&(i=!0),e.deleteContents();var r=S_(n).getOr(n),o=An.fromDom(t.dom.getParent(r.dom,t.dom.isBlock));if(na(o)&&(Wy(o),i&&t.selection.setCursorLocation(o.dom,0)),!Un(n,o)){var s=yr(si(o),n)?[]:ui(o);kt(s.concat(fi(n)),function(t){Un(t,o)||Vn(t,o)||!na(t)||Fi(t)})}return!0},O_=function(t,e){return n_(t,!1,e),!0},M_=function(e,t,n){return k_(t,n).map(function(t){return t.fold(m(R_,e),m(O_,e),m(I_,e),m(P_,e))})},F_=function(t,e){return j_(t,e)},$_=function(e,t,n,i){return B_(t,i).fold(function(){return M_(e,t,n)},function(t){return F_(e,t)}).getOr(!1)},L_=function(t,e,n){var i=An.fromDom(t.getBody()),r=t.selection.getRng();return 0!==n.length?I_(t,n,at.none()):$_(t,i,r,e)},H_=function(t,e){return Et(Xy(e,t),as)},B_=function(t,e){return Et(Xy(e,t),ei("caption"))},z_=function(t,e,n,i,r){return wp(n,t.getBody(),r).bind(function(t){return H_(e,An.fromDom(t.getNode())).map(function(t){return!1===Un(t,i)})})},j_=function(t,e){return Wy(e),t.selection.setCursorLocation(e.dom,0),at.some(!0)},U_=function(t,n,i,r){return Sp(t.dom).bind(function(e){return Tp(t.dom).map(function(t){return n?i.isEqual(e)&&r.isEqual(t):i.isEqual(t)&&r.isEqual(e)})}).getOr(!0)},q_=function(t,e){return j_(t,e)},W_=function(t,e,n){return B_(t,An.fromDom(n.getNode())).map(function(t){return!1===Un(t,e)})},V_=function(e,n,i,r,o){return wp(i,e.getBody(),o).bind(function(t){return U_(r,i,o,t)?q_(e,r):W_(n,r,t)}).or(at.some(!0))},Y_=function(e,n,i,t){var r=od.fromRangeStart(e.selection.getRng());return H_(i,t).bind(function(t){return na(t)?j_(e,t):z_(e,i,n,t,r)}).getOr(!1)},K_=function(t,e,n,i){var r=od.fromRangeStart(t.selection.getRng());return na(i)?j_(t,i):V_(t,n,e,i,r)},G_=function(t,e){return t?Hy(e):By(e)},X_=function(t,e){var n=od.fromRangeStart(t.selection.getRng());return G_(e,n)||yp(e,t.getBody(),n).exists(function(t){return G_(e,t)})},Q_=function(e,n,t){var i=An.fromDom(e.getBody());return B_(i,t).fold(function(){return Y_(e,n,i,t)||X_(e,n)},function(t){return K_(e,n,i,t).getOr(!1)})},J_=function(t,e){var n=An.fromDom(t.selection.getStart(!0)),i=qm(t);return t.selection.isCollapsed()&&0===i.length?Q_(t,e,n):L_(t,n,i)},Z_=function(t,e,n,i){var r=document.createRange();return r.setStart(t,e),r.setEnd(n,i),r},tx=function(e){var n=od.fromRangeStart(e),i=od.fromRangeEnd(e),r=e.commonAncestorContainer;return yp(!1,r,i).map(function(t){return!Hf(n,i,r)&&Hf(n,t,r)?Z_(n.container(),n.offset(),t.container(),t.offset()):e}).getOr(e)},ex=function(t){return t.collapsed?t:tx(t)},nx=function(t){return t.firstChild&&t.firstChild===t.lastChild},ix=function(t){return"br"===t.name||t.value===ds},rx=function(t,e){return t.getBlockElements()[e.name]&&nx(e)&&ix(e.firstChild)},ox=function(t,e){var n=t.getNonEmptyElements();return e&&(e.isEmpty(n)||rx(t,e))},sx=function(t,e){var n=e.firstChild,i=e.lastChild;return n&&"meta"===n.name&&(n=n.next),i&&"mce_marker"===i.attr("id")&&(i=i.prev),ox(t,i)&&(i=i.prev),!(!n||n!==i)&&("ul"===n.name||"ol"===n.name)},ax=function(t){var e=t.firstChild,n=t.lastChild;return e&&"META"===e.nodeName&&e.parentNode.removeChild(e),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),t},ux=function(t,e,n){var i=e.serialize(n),r=t.createFragment(i);return ax(r)},lx=function(t){return bt(t.childNodes,function(t){return"LI"===t.nodeName})},cx=function(t){return t.data===ds||fr(t)},dx=function(t){return t&&t.firstChild&&t.firstChild===t.lastChild&&cx(t.firstChild)},hx=function(t){return!t.firstChild||dx(t)},fx=function(t){return 0<t.length&&hx(t[t.length-1])?t.slice(0,-1):t},px=function(t,e){var n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},mx=function(t,e){return!!px(t,e)},gx=function(t,e){var n=e.cloneRange(),i=e.cloneRange();return n.setStartBefore(t),i.setEndAfter(t),[n.cloneContents(),i.cloneContents()]},vx=function(t,e){var n=od.before(t),i=dp(e).next(n);return i?i.toRange():null},bx=function(t,e){var n=od.after(t),i=dp(e).prev(n);return i?i.toRange():null},yx=function(e,t,n,i){var r=gx(e,i),o=e.parentNode;return o.insertBefore(r[0],e),Sn.each(t,function(t){o.insertBefore(t,e)}),o.insertBefore(r[1],e),o.removeChild(e),bx(t[t.length-1],n)},wx=function(e,t,n){var i=e.parentNode;return Sn.each(t,function(t){i.insertBefore(t,e)}),vx(e,n)},_x=function(t,e,n,i){return i.insertAfter(e.reverse(),t),bx(e[0],n)},xx=function(t,r,o,e){var n=ux(r,t,e),s=px(r,o.startContainer),i=fx(lx(n.firstChild)),a=1,u=2,l=r.getRoot(),c=function(t){var e=od.fromRangeStart(o),n=dp(r.getRoot()),i=t===a?n.prev(e):n.next(e);return!i||px(r,i.getNode())!==s};return c(a)?wx(s,i,l):c(u)?_x(s,i,l,r):yx(s,i,l,o)},Cx=function(t,e,n){var i=An.fromDom(t.getRoot());return n=_w(i,od.fromRangeStart(e))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),n=Cw(i,od.fromRangeEnd(e))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")},kx=vr,Sx=function(t,e,n){return null!==n&&(n===t.getParent(e.endContainer,kx)&&Xm(An.fromDom(n),e))},Tx=function(t,e,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(t.dom.createFragment(e),n);else{var i=n.firstChild,r=n.lastChild;!i||i===r&&"BR"===i.nodeName?t.dom.setHTML(n,e):t.selection.setContent(e)}},Ex=function(t,e){at.from(t.getParent(e,"td,th")).map(An.fromDom).each(Vy)},Nx=function(t,e){var n=t.schema.getTextInlineElements(),i=t.dom;if(e){var r=t.getBody(),o=vy(i);Sn.each(i.select("*[data-mce-fragment]"),function(t){if(Y(n[t.nodeName.toLowerCase()])&&Sy(i,t))for(var e=t.parentNode;Y(e)&&e!==r;e=e.parentNode){if(Ey(i,t,e))break;if(o.compare(e,t)){i.remove(t,!0);break}}})}},Dx=function(t){for(var e=t;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")},Ax=function(t){Sn.each(t.getElementsByTagName("*"),function(t){t.removeAttribute("data-mce-fragment")})},Ix=function(t){return!!t.getAttribute("data-mce-fragment")},Px=function(t,e){return e&&!t.schema.getShortEndedElements()[e.nodeName]},Rx=function(n,t){var e,i=n.dom,r=n.selection;if(t){r.scrollIntoView(t);var o=dg(n.getBody(),t);if("false"===i.getContentEditable(o))return i.remove(t),void r.select(o);var s=i.createRng(),a=t.previousSibling;if(lr(a)){if(s.setStart(a,a.nodeValue.length),!yn.ie){var u=t.nextSibling;lr(u)&&(a.appendData(u.data),u.parentNode.removeChild(u))}}else s.setStartBefore(t),s.setEndBefore(t);var l=function(t){var e=od.fromRangeStart(t);if(e=dp(n.getBody()).next(e))return e.toRange()},c=i.getParent(t,i.isBlock);i.remove(t),c&&i.isEmpty(c)&&(n.$(c).empty(),s.setStart(c,0),s.setEnd(c,0),kx(c)||Ix(c)||!(e=l(s))?i.add(c,i.create("br",{"data-mce-bogus":"1"})):(s=e,i.remove(c))),r.setRng(s)}},Ox=function(t){var e=t.dom,n=ex(t.selection.getRng());t.selection.setRng(n);var i=e.getParent(n.startContainer,kx);Sx(e,n,i)?R_(t,n,An.fromDom(i)):t.getDoc().execCommand("Delete",!1,null)},Mx=function(t,e,n){var i,r,o,s=t.selection,a=t.dom;/^ | $/.test(e)&&(e=Cx(a,s.getRng(),e));var u=t.parser,l=n.merge,c=wy({validate:Ph(t)},t.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',h=t.fire("BeforeSetContent",{content:e,format:"html",selection:!0,paste:n.paste});if(h.isDefaultPrevented())t.fire("SetContent",{content:h.content,format:"html",selection:!0,paste:n.paste});else{-1===(e=h.content).indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,d);var f=(r=s.getRng()).startContainer||(r.parentElement?r.parentElement():null),p=t.getBody();f===p&&s.isCollapsed()&&a.isBlock(p.firstChild)&&Px(t,p.firstChild)&&a.isEmpty(p.firstChild)&&((r=a.createRng()).setStart(p.firstChild,0),r.setEnd(p.firstChild,0),s.setRng(r)),s.isCollapsed()||Ox(t);var m={context:(i=s.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},g=u.parse(e,m);if(!0===n.paste&&sx(t.schema,g)&&mx(a,i))return r=xx(c,a,s.getRng(),g),s.setRng(r),void t.fire("SetContent",h);if(Dx(g),"mce_marker"===(o=g.lastChild).attr("id")){var v=o;for(o=o.prev;o;o=o.walk(!0))if(3===o.type||!a.isBlock(o.name)){t.schema.isValidChild(o.parent.name,"span")&&o.parent.insert(v,o,"br"===o.name);break}}if(t._selectionOverrides.showBlockCaretContainer(i),m.invalid){t.selection.setContent(d),i=s.getNode();var b=t.getBody();for(9===i.nodeType?i=o=b:o=i;o!==b;)o=(i=o).parentNode;e=i===b?b.innerHTML:a.getOuterHTML(i),e=c.serialize(u.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return c.serialize(g)}))),i===b?a.setHTML(b,e):a.setOuterHTML(i,e)}else e=c.serialize(g),Tx(t,e,i);Nx(t,l),Rx(t,a.get("mce_marker")),Ax(t.getBody()),Ex(a,s.getStart()),t.fire("SetContent",h),t.addVisual()}
},Fx=function(t,e){e(t),t.firstChild&&Fx(t.firstChild,e),t.next&&Fx(t.next,e)},$x=function(t,n,e){var i={},r={},o=[];for(var s in e.firstChild&&Fx(e.firstChild,function(e){kt(t,function(t){t.name===e.name&&(i[t.name]?i[t.name].nodes.push(e):i[t.name]={filter:t,nodes:[e]})}),kt(n,function(t){"string"==typeof e.attr(t.name)&&(r[t.name]?r[t.name].nodes.push(e):r[t.name]={filter:t,nodes:[e]})})}),i)Zt(i,s)&&o.push(i[s]);for(var a in r)Zt(r,a)&&o.push(r[a]);return o},Lx=function(t,e,n){var i=$x(t,e,n);kt(i,function(e){kt(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})},Hx="html",Bx=function(t){return t instanceof qb},zx=function(i){Eb(i)&&Sp(i.getBody()).each(function(t){var e=t.getNode(),n=sr(e)?Sp(e).getOr(t):t;i.selection.setRng(n.toRange())})},jx=function(t,e,n){t.dom.setHTML(t.getBody(),e),!0!==n&&zx(t)},Ux=function(t,e,n,i){if(0===n.length||/^\s+$/.test(n)){var r='<br data-mce-bogus="1">';"TABLE"===e.nodeName?n="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(e.nodeName)&&(n="<li>"+r+"</li>");var o=Jd(t);o&&t.schema.isValidChild(e.nodeName.toLowerCase(),o.toLowerCase())?(n=r,n=t.dom.createHTML(o,Zd(t),n)):n||(n='<br data-mce-bogus="1">'),jx(t,n,i.no_selection),t.fire("SetContent",i)}else"raw"!==i.format&&(n=wy({validate:t.validate},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0}))),i.content=us(An.fromDom(e))?n:Sn.trim(n),jx(t,i.content,i.no_selection),i.no_events||t.fire("SetContent",i);return i.content},qx=function(t,e,n,i){Lx(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);var r=wy({validate:t.validate},t.schema).serialize(n);return i.content=us(An.fromDom(e))?r:Sn.trim(r),jx(t,i.content,i.no_selection),i.no_events||t.fire("SetContent",i),n},Wx=function(t,e){return de(de({format:Hx},t),{set:!0,content:Bx(e)?"":e})},Vx=function(e,n,t){var i=Wx(t,n),r=t.no_events?i:e.fire("BeforeSetContent",i);return Bx(n)||(n=r.content),at.from(e.getBody()).fold(Ct(n),function(t){return Bx(n)?qx(e,t,n,r):Ux(e,t,n,r)})},Yx=function(t,e){return Ao(t,e).isSome()},Kx=function(t){return q(t)?t:et},Gx=function(t,e,n){for(var i=t.dom,r=Kx(n);i.parentNode;){i=i.parentNode;var o=An.fromDom(i),s=e(o);if(s.isSome())return s;if(r(o))break}return at.none()},Xx=function(t,e,n){var i=e(t),r=Kx(n);return i.orThunk(function(){return r(t)?at.none():Gx(t,e,r)})},Qx=lm,Jx=function(t,e,n){var i=t.formatter.get(n);if(i)for(var r=0;r<i.length;r++){var o=i[r];if(vm(o)&&!1===o.inherit&&t.dom.is(e,o.selector))return!0}return!1},Zx=function(e,t,n,i,r){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,function(t){return!!Jx(e,t,n)||(t.parentNode===o||!!nC(e,t,n,i,!0))}),!!nC(e,t,n,i,r))},tC=function(t,e,n){return!!Qx(e,n.inline)||(!!Qx(e,n.block)||(n.selector?1===e.nodeType&&t.is(e,n.selector):void 0))},eC=function(t,e,n,i,r,o){var s=n[i];if(q(n.onmatch))return n.onmatch(e,n,i);if(s)if(U(s.length)){for(var a in s)if(Zt(s,a)){var u="attributes"===i?t.getAttrib(e,a):dm(t,e,a),l=um(s[a],o),c=_t(u)||Oe(u);if(c&&_t(l))continue;if(r&&c&&!n.exact)return!1;if((!r||n.exact)&&!Qx(u,cm(t,l,a)))return!1}}else for(var d=0;d<s.length;d++)if("attributes"===i?t.getAttrib(e,s[d]):dm(t,e,s[d]))return!0;return!0},nC=function(t,e,n,i,r){var o=t.formatter.get(n),s=t.dom;if(o&&e)for(var a=0;a<o.length;a++){var u=o[a];if(tC(t.dom,e,u)&&eC(s,e,u,"attributes",r,i)&&eC(s,e,u,"styles",r,i)){var l=u.classes;if(l)for(var c=0;c<l.length;c++)if(!t.dom.hasClass(e,um(l[c],i)))return;return u}}},iC=function(t,e,n,i,r){if(i)return Zx(t,i,e,n,r);if(i=t.selection.getNode(),Zx(t,i,e,n,r))return!0;var o=t.selection.getStart();return!(o===i||!Zx(t,o,e,n,r))},rC=function(i,r,o){var s=[],a={},t=i.selection.getStart();return i.dom.getParent(t,function(t){for(var e=0;e<r.length;e++){var n=r[e];!a[n]&&nC(i,t,n,o)&&(a[n]=!0,s.push(n))}},i.dom.getRoot()),s},oC=function(n,i){var e=function(t){return Un(t,An.fromDom(n.getBody()))},r=function(t,e){return nC(n,t.dom,e)?at.some(e):at.none()};return at.from(n.selection.getStart(!0)).bind(function(t){return Xx(An.fromDom(t),function(e){return Bt(i,function(t){return r(e,t)})},e)}).getOrNull()},sC=function(t,e){var n=t.formatter.get(e),i=t.dom;if(n)for(var r=t.selection.getStart(),o=fm(i,r),s=n.length-1;0<=s;s--){var a=n[s];if(!vm(a)||Y(a.defaultBlock))return!0;for(var u=o.length-1;0<=u;u--)if(i.is(o[u],a.selector))return!0}return!1},aC=function(i,r,t){return St(t,function(t,e){var n=pm(i,e);return i.formatter.matchNode(r,e,{},n)?t.concat([e]):t},[])},uC=hs,lC="_mce_caret",cC=function(t,e){return t.importNode(e,!0)},dC=function(t){for(var e=[];t;){if(3===t.nodeType&&t.nodeValue!==uC||1<t.childNodes.length)return[];1===t.nodeType&&e.push(t),t=t.firstChild}return e},hC=function(t){return 0<dC(t).length},fC=function(t){if(t){var e=new Uo(t,t);for(t=e.current();t;t=e.next())if(lr(t))return t}return null},pC=function(t){var e=An.fromTag("span");return Er(e,{id:lC,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Ii(e,An.fromText(uC)),e},mC=function(t){var e=fC(t);return e&&e.nodeValue.charAt(0)===uC&&e.deleteData(0,1),e},gC=function(t,e,n){void 0===n&&(n=!0);var i=t.dom,r=t.selection;if(hC(e))n_(t,!1,An.fromDom(e),n);else{var o=r.getRng(),s=i.getParent(e,i.isBlock),a=o.startContainer,u=o.startOffset,l=o.endContainer,c=o.endOffset,d=mC(e);i.remove(e,!0),a===d&&0<u&&o.setStart(d,u-1),l===d&&0<c&&o.setEnd(d,c-1),s&&i.isEmpty(s)&&Wy(An.fromDom(s)),r.setRng(o)}},vC=function(t,e,n){void 0===n&&(n=!0);var i=t.dom,r=t.selection;if(e)gC(t,e,n);else if(!(e=Dp(t.getBody(),r.getStart())))for(;e=i.get(lC);)gC(t,e,!1)},bC=function(t,e,n){var i=t.dom,r=i.getParent(n,m(rm,t));r&&i.isEmpty(r)?n.parentNode.replaceChild(e,n):(qy(An.fromDom(n)),i.isEmpty(n)?n.parentNode.replaceChild(e,n):i.insertAfter(e,n))},yC=function(t,e){return t.appendChild(e),e},wC=function(t,e){var n=yt(t,function(t,e){return yC(t,e.cloneNode(!1))},e);return yC(n,n.ownerDocument.createTextNode(uC))},_C=function(e,t,n,i,r,o){var s=e.formatter,a=e.dom,u=bt(zt(s.get()),function(t){return t!==i&&!Ee(t,"removeformat")}),l=aC(e,n,u);if(0<bt(l,function(t){return!mm(e,t,i)}).length){var c=n.cloneNode(!1);return a.add(t,c),s.remove(i,r,c,o),a.remove(c),at.some(c)}return at.none()},xC=function(t,e,n){var i,r,o=t.selection,s=o.getRng(),a=s.startOffset,u=s.startContainer.nodeValue;(i=Dp(t.getBody(),o.getStart()))&&(r=fC(i));var l=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(u&&0<a&&a<u.length&&l.test(u.charAt(a))&&l.test(u.charAt(a-1))){var c=o.getBookmark();s.collapse(!0);var d=Fm(t,s,t.formatter.get(e));d=Gg(d),t.formatter.apply(e,n,d),o.moveToBookmark(c)}else i&&r.nodeValue===uC||(r=(i=cC(t.getDoc(),pC(!0).dom)).firstChild,s.insertNode(i),a=1),t.formatter.apply(e,n,i),o.setCursorLocation(r,a)},CC=function(t,e,n,i){var r,o,s,a=t.dom,u=t.selection,l=[],c=u.getRng(),d=c.startContainer,h=c.startOffset;for(3===(o=d).nodeType&&(h!==d.nodeValue.length&&(r=!0),o=o.parentNode);o;){if(nC(t,o,e,n,i)){s=o;break}o.nextSibling&&(r=!0),l.push(o),o=o.parentNode}if(s)if(r){var f=u.getBookmark();c.collapse(!0);var p=Fm(t,c,t.formatter.get(e),!0);p=Gg(p),t.formatter.remove(e,n,p,i),u.moveToBookmark(f)}else{var m=Dp(t.getBody(),s),g=pC(!1).dom;bC(t,g,null!==m?m:s);var v=_C(t,g,s,e,n,i),b=wC(l.concat(v.toArray()),g);gC(t,m,!1),u.setCursorLocation(b,1),a.isEmpty(s)&&a.remove(s)}},kC=function(t,e){var n=t.selection,i=t.getBody();vC(t,null,!1),8!==e&&46!==e||!n.isCollapsed()||n.getStart().innerHTML!==uC||vC(t,Dp(i,n.getStart())),37!==e&&39!==e||vC(t,Dp(i,n.getStart()))},SC=function(e){e.on("mouseup keydown",function(t){kC(e,t.keyCode)})},TC=function(t,e){var n=pC(!1),i=wC(e,n.dom);return Ni(An.fromDom(t),n),Fi(An.fromDom(t)),od(i,0)},EC=function(t,e){var n=t.schema.getTextInlineElements();return Zt(n,Yn(e))&&!Np(e.dom)&&!rr(e.dom)},NC=function(t){return Np(t.dom)&&hC(t.dom)},DC={},AC=se,IC=re,PC=function(t,e){IC(DC[t],function(t){t(e)})};(function(t,e){DC[t]||(DC[t]=[]),DC[t].push(e)})("pre",function(t){var e,n=t.selection.getRng(),i=function(t){return o(t.previousSibling)&&-1!==ae(e,t.previousSibling)},r=function(t,e){fl(e).remove(),fl(t).append("<br><br>").append(e.childNodes)},o=tr(["pre"]);n.collapsed||(e=t.selection.getSelectedBlocks(),IC(AC(AC(e,o),i),function(t){r(t.previousSibling,t)}))});var RC=Sn.each,OC=function(t){return Zi(t)&&!Xp(t)&&!Np(t)&&!rr(t)},MC=function(t,e){for(var n=t;n;n=n[e]){if(lr(n)&&Re(n.data))return t;if(Zi(n)&&!Xp(n))return n}return t},FC=function(t,e,n){var i=vy(t);if(e&&n&&(e=MC(e,"previousSibling"),n=MC(n,"nextSibling"),i.compare(e,n))){for(var r=e.nextSibling;r&&r!==n;){var o=r;r=r.nextSibling,e.appendChild(o)}return t.remove(n),Sn.each(Sn.grep(n.childNodes),function(t){e.appendChild(t)}),e}return n},$C=function(t,e,n,i){if(i&&!1!==e.merge_siblings){var r=FC(t,im(i),i);FC(t,r,im(r,!0))}},LC=function(i,t,e){if(t.clear_child_styles){var n=t.links?"*:not(a)":"*";RC(i.select(n,e),function(n){OC(n)&&RC(t.styles,function(t,e){i.setStyle(n,e,"")})})}},HC=function(t,e,n){RC(t.childNodes,function(t){OC(t)&&(e(t)&&n(t),t.hasChildNodes()&&HC(t,e,n))})},BC=function(t,e){"SPAN"===e.nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},zC=function(e,n){return function(t){return!(!t||!dm(e,t,n))}},jC=function(e,n,i){return function(t){e.setStyle(t,n,i),""===t.getAttribute("style")&&t.removeAttribute("style"),BC(e,t)}},UC=so.generate([{keep:[]},{rename:["name"]},{removed:[]}]),qC=/^(src|href|style)$/,WC=Sn.each,VC=lm,YC=function(t){return/^(TR|TH|TD)$/.test(t.nodeName)},KC=function(t,e,n){return t.isChildOf(e,n)&&e!==n&&!t.isBlock(n)},GC=function(t,e,n){var i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(Zi(i)){var o=i.childNodes.length-1;!n&&r&&r--,i=i.childNodes[o<r?o:r]}return lr(i)&&n&&r>=i.nodeValue.length&&(i=new Uo(i,t.getBody()).next()||i),lr(i)&&!n&&0===r&&(i=new Uo(i,t.getBody()).prev()||i),i},XC=function(t,e){var n=e?"firstChild":"lastChild";if(YC(t)&&t[n]){var i=t[n];return"TR"===t.nodeName&&i[n]||i}return t},QC=function(t,e,n,i){var r=t.create(n,i);return e.parentNode.insertBefore(r,e),r.appendChild(e),r},JC=function(t,e,n,i,r){var o=An.fromDom(e),s=An.fromDom(t.create(i,r)),a=n?hi(o):di(o);return Oi(s,a),n?(Ni(o,s),Ai(s,o)):(Di(o,s),Ii(s,o)),s.dom},ZC=function(t,e,n){return!(!bm(n)||!VC(e,n.inline))||(!(!gm(n)||!VC(e,n.block))||(vm(n)?Zi(e)&&t.is(e,n.selector):void 0))},tk=function(t,e){return e.links&&"A"===t.nodeName},ek=function(t,e,n,i){var r=im(e,n,i);return _t(r)||"BR"===r.nodeName||t.isBlock(r)},nk=function(e,t,n){var i,r=t.parentNode,o=e.dom,s=Jd(e);gm(n)&&(s?r===o.getRoot()&&(n.list_block&&VC(t,n.list_block)||kt(Ht(t.childNodes),function(t){om(e,s,t.nodeName.toLowerCase())?i?i.appendChild(t):(i=QC(o,t,s),o.setAttribs(i,e.settings.forced_root_block_attrs)):i=null})):o.isBlock(t)&&!o.isBlock(r)&&(ek(o,t,!1)||ek(o,t.firstChild,!0,!0)||t.insertBefore(o.create("br"),t.firstChild),ek(o,t,!0)||ek(o,t.lastChild,!1,!0)||t.appendChild(o.create("br")))),ym(n)&&!VC(n.inline,t)||o.remove(t,!0)},ik=function(t,i,r,e,o){var n,s=t.dom;if(!ZC(s,e,i)&&!tk(e,i))return UC.keep();var a=e;if(bm(i)&&"all"===i.remove&&B(i.preserve_attributes)){var u=bt(s.getAttribs(a),function(t){return ft(i.preserve_attributes,t.name.toLowerCase())});if(s.removeAllAttribs(a),kt(u,function(t){return s.setAttrib(a,t.name,t.value)}),0<u.length)return UC.rename("span")}if("all"!==i.remove){WC(i.styles,function(t,e){t=cm(s,um(t,r),e+""),W(e)&&(e=t,o=null),(i.remove_similar||!o||VC(dm(s,o,e),t))&&s.setStyle(a,e,""),n=!0}),n&&""===s.getAttrib(a,"style")&&(a.removeAttribute("style"),a.removeAttribute("data-mce-style")),WC(i.attributes,function(t,e){var n;if(t=um(t,r),W(e)&&(e=t,o=null),i.remove_similar||!o||VC(s.getAttrib(o,e),t)){if("class"===e&&(t=s.getAttrib(a,e))&&(n="",kt(t.split(/\s+/),function(t){/mce\-\w+/.test(t)&&(n+=(n?" ":"")+t)}),n))return void s.setAttrib(a,e,n);if(qC.test(e)&&a.removeAttribute("data-mce-"+e),"style"===e&&tr(["li"])(a)&&"none"===s.getStyle(a,"list-style-type"))return a.removeAttribute(e),void s.setStyle(a,"list-style-type","none");"class"===e&&a.removeAttribute("className"),a.removeAttribute(e)}}),WC(i.classes,function(t){t=um(t,r),o&&!s.hasClass(o,t)||s.removeClass(a,t)});for(var l=s.getAttribs(a),c=0;c<l.length;c++){var d=l[c].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return UC.keep()}}return"none"!==i.remove?(nk(t,a,i),UC.removed()):UC.keep()},rk=function(e,t,n,i,r){return ik(e,t,n,i,r).fold(et,function(t){return e.dom.rename(i,t),!0},nt)},ok=function(n,t,i,r,o){var s;return kt(fm(n.dom,t.parentNode).reverse(),function(t){if(!s&&"_start"!==t.id&&"_end"!==t.id){var e=nC(n,t,i,r,o);e&&!1!==e.split&&(s=t)}}),s},sk=function(e,t,n,i){return ik(e,t,n,i,i).fold(Ct(i),function(t){return e.dom.createFragment().appendChild(i),e.dom.rename(i,t)},Ct(null))},ak=function(t,e,n,i,r,o,s,a){var u,l,c,d=t.dom;if(n){for(var h=n.parentNode,f=i.parentNode;f&&f!==h;f=f.parentNode){u=d.clone(f,!1);for(var p=0;p<e.length&&null!==(u=sk(t,e[p],a,u));p++);u&&(l&&u.appendChild(l),c||(c=u),l=u)}!o||s.mixed&&d.isBlock(n)||(i=d.split(n,i)),l&&(r.parentNode.insertBefore(l,r),c.appendChild(r),bm(s)&&$C(d,s,a,l))}return i},uk=function(a,n,i,t,r){var u=a.formatter.get(n),l=u[0],c=!0,d=a.dom,e=a.selection,s=function(t){var e=ok(a,t,n,i,r);return ak(a,u,e,t,t,!0,l,i)},o=function(t){return Xp(t)&&Zi(t)&&("_start"===t.id||"_end"===t.id)},h=function(e){return pt(u,function(t){return rk(a,t,i,e,e)})},f=function(e){var t=!0,n=!1;Zi(e)&&d.getContentEditable(e)&&(t=c,c="true"===d.getContentEditable(e),n=!0);var i=Ht(e.childNodes);if(c&&!n){var r=h(e)||pt(u,function(t){return tC(d,e,t)}),o=e.parentNode;!r&&Y(o)&&wm(l)&&h(o)}if(l.deep&&i.length){for(var s=0;s<i.length;s++)f(i[s]);n&&(c=t)}kt(["underline","line-through","overline"],function(t){Zi(e)&&a.dom.getStyle(e,"text-decoration")===t&&e.parentNode&&hm(d,e.parentNode)===t&&rk(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:t}},null,e)})},p=function(t){var e=d.get(t?"_start":"_end"),n=e[t?"firstChild":"lastChild"];return o(n)&&(n=n[t?"firstChild":"lastChild"]),lr(n)&&0===n.data.length&&(n=t?e.previousSibling||e.nextSibling:e.nextSibling||e.previousSibling),d.remove(e,!0),n},m=function(t){var e,n,i=Fm(a,t,u,t.collapsed);if(l.split){if(i=Gg(i),(e=GC(a,i,!0))!==(n=GC(a,i))){if(e=XC(e,!0),n=XC(n,!1),KC(d,e,n)){var r=at.from(e.firstChild).getOr(e);return s(JC(d,r,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void p(!0)}if(KC(d,n,e)){r=at.from(n.lastChild).getOr(n);return s(JC(d,r,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void p(!1)}e=QC(d,e,"span",{id:"_start","data-mce-type":"bookmark"}),n=QC(d,n,"span",{id:"_end","data-mce-type":"bookmark"});var o=d.createRng();o.setStartAfter(e),o.setEndBefore(n),$m(d,o,function(t){kt(t,function(t){Xp(t)||Xp(t.parentNode)||s(t)})}),s(e),s(n),e=p(!0),n=p()}else e=n=s(e);i.startContainer=e.parentNode?e.parentNode:e,i.startOffset=d.nodeIndex(e),i.endContainer=n.parentNode?n.parentNode:n,i.endOffset=d.nodeIndex(n)+1}$m(d,i,function(t){kt(t,f)})};if(t){if(tm(t)){var g=d.createRng();g.setStartBefore(t),g.setEndAfter(t),m(g)}else m(t);Tg(a,n,t,i)}else if("false"!==d.getContentEditable(e.getNode()))e.isCollapsed()&&bm(l)&&!qm(a).length?CC(a,n,i,r):(tg(e,!0,function(){Zm(a,m)}),bm(l)&&iC(a,n,i,e.getStart())&&nm(d,e,e.getRng()),a.nodeChanged()),Tg(a,n,t,i);else{t=e.getNode();for(var v=0;v<u.length&&(!u[v].ceFalseOverride||!rk(a,u[v],i,t,t));v++);Tg(a,n,t,i)}},lk=Sn.each,ck=function(n,t,e,i){var r=function(t){if(1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType){var e=hm(n,t.parentNode);n.getStyle(t,"color")&&e?n.setStyle(t,"text-decoration",e):n.getStyle(t,"text-decoration")===e&&n.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Sn.walk(i,r,"childNodes"),r(i))},dk=function(t,e,n,i){e.styles&&e.styles.backgroundColor&&HC(i,zC(t,"fontSize"),jC(t,"backgroundColor",um(e.styles.backgroundColor,n)))},hk=function(t,e,n,i){!bm(e)||"sub"!==e.inline&&"sup"!==e.inline||(HC(i,zC(t,"fontSize"),jC(t,"fontSize","")),t.remove(t.select("sup"===e.inline?"sub":"sup",i),!0))},fk=function(n,t,i,r){lk(t,function(e){bm(e)&&lk(n.dom.select(e.inline,r),function(t){OC(t)&&rk(n,e,i,t,e.exact?t:null)}),LC(n.dom,e,r)})},pk=function(e,n,i,r,o){nC(e,o.parentNode,i,r)&&rk(e,n,r,o)||n.merge_with_parents&&e.dom.getParent(o.parentNode,function(t){if(nC(e,t,i,r))return rk(e,n,r,o),!0})},mk=Sn.each,gk=function(t){return Zi(t)&&!Xp(t)&&!Np(t)&&!rr(t)},vk=function(t,e,n,i){if(Fh(t)&&bm(e)){var r=de(de({},t.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),o=Yx(An.fromDom(n),function(t){return Np(t.dom)});return te(r,i)&&na(An.fromDom(n.parentNode),!1)&&!o}return!1},bk=function(g,v,b,i){var y=g.formatter.get(v),w=y[0],r=!i&&g.selection.isCollapsed(),o=g.dom,t=g.selection,_=function(n,t){if(void 0===t&&(t=w),q(t.onformat)&&t.onformat(n,t,b,i),mk(t.styles,function(t,e){o.setStyle(n,e,um(t,b))}),t.styles){var e=o.getAttrib(n,"style");e&&o.setAttrib(n,"data-mce-style",e)}mk(t.attributes,function(t,e){o.setAttrib(n,e,um(t,b))}),mk(t.classes,function(t){t=um(t,b),o.hasClass(n,t)||o.addClass(n,t)})},x=function(t,e){var n=!1;return mk(t,function(t){return!!vm(t)&&(Y(t.collapsed)&&t.collapsed!==r?void 0:o.is(e,t.selector)&&!Np(e)?(_(e,t),!(n=!0)):void 0)}),n},e=function(t){if(wt(t)){var e=o.create(t);return _(e),e}return null},s=function(c,t,d){var h=[],f=!0,p=w.inline||w.block,m=e(p);$m(c,t,function(t){var u,l=function(t){var e=!1,n=f,i=t.nodeName.toLowerCase(),r=t.parentNode,o=r.nodeName.toLowerCase();if(Zi(t)&&c.getContentEditable(t)&&(n=f,f="true"===c.getContentEditable(t),e=!0),fr(t)&&!vk(g,w,t,o))return u=null,void(gm(w)&&c.remove(t));if(gm(w)&&w.wrapper&&nC(g,t,v,b))u=null;else{if(f&&!e&&gm(w)&&!w.wrapper&&rm(g,i)&&om(g,o,p)){var s=c.rename(t,p);return _(s),h.push(s),void(u=null)}if(vm(w)){var a=x(y,t);if(!a&&Y(r)&&wm(w)&&(a=x(y,r)),!bm(w)||a)return void(u=null)}!f||e||!om(g,p,i)||!om(g,o,p)||!d&&lr(t)&&fs(t.data)||Np(t)||bm(w)&&c.isBlock(t)?(u=null,kt(Ht(t.childNodes),l),e&&(f=n),u=null):(u||(u=c.clone(m,!1),t.parentNode.insertBefore(u,t),h.push(u)),u.appendChild(t))}};kt(t,l)}),!0===w.links&&kt(h,function(t){var e=function(t){"A"===t.nodeName&&_(t,w),kt(Ht(t.childNodes),e)};e(t)}),kt(h,function(t){var e=function(n){return Et(n.childNodes,gk).filter(function(t){return tC(c,t,w)}).map(function(t){var e=c.clone(t,!1);return _(e),c.replace(e,n,!0),c.remove(t,!0),e}).getOr(n)},n=function(t){var e=0;return kt(t.childNodes,function(t){am(t)||Xp(t)||e++}),e}(t);!(1<h.length)&&c.isBlock(t)||0!==n?(bm(w)||gm(w)&&w.wrapper)&&(w.exact||1!==n||(t=e(t)),fk(g,y,b,t),pk(g,w,v,b,t),dk(c,w,b,t),ck(c,w,b,t),hk(c,w,b,t),$C(c,w,b,t)):c.remove(t,!0)})};if("false"!==o.getContentEditable(t.getNode())){if(w){if(i)if(tm(i)){if(!x(y,i)){var n=o.createRng();n.setStartBefore(i),n.setEndAfter(i),s(o,Fm(g,n,y),!0)}}else s(o,i,!0);else if(r&&bm(w)&&!qm(g).length)xC(g,v,b);else{var a=t.getNode(),u=y[0];g.settings.forced_root_block||!u.defaultBlock||o.getParent(a,o.isBlock)||bk(g,u.defaultBlock),t.setRng(ex(t.getRng())),tg(t,!0,function(){Zm(g,function(t,e){var n=e?t:Fm(g,t,y);s(o,n,!1)})}),nm(o,t,t.getRng()),g.nodeChanged()}PC(v,g)}Sg(g,v,i,b)}else{i=t.getNode();for(var l=0,c=y.length;l<c;l++){var d=y[l];if(d.ceFalseOverride&&vm(d)&&o.is(i,d.selector)){_(i,d);break}}Sg(g,v,i,b)}},yk=function(t){return Zt(t,"vars")},wk=function(n,i){n.set({}),i.on("NodeChange",function(t){kk(i,t.element,n.get())}),i.on("FormatApply FormatRemove",function(t){var e=at.from(t.node).map(function(t){return tm(t)?t:t.startContainer}).bind(function(t){return Zi(t)?at.some(t):at.from(t.parentElement)}).getOrThunk(function(){return _k(i)});kk(i,e,n.get())})},_k=function(t){return t.selection.getStart()},xk=function(n,t,i,r,o){return Tt(t,function(t){var e=n.formatter.matchNode(t,i,null!=o?o:{},r);return!U(e)},function(t){return!!Jx(n,t,i)||!r&&Y(n.formatter.matchNode(t,i,o,!0))})},Ck=function(t,e){var n=null!=e?e:_k(t);return bt(fm(t.dom,n),function(t){return Zi(t)&&!rr(t)})},kk=function(o,s,t){var a=Ck(o,s);Ut(t,function(t,r){var e=function(t){var e=xk(o,a,r,t.similar,yk(t)?t.vars:undefined),n=e.isSome();if(t.state.get()!==n){t.state.set(n);var i=e.getOr(s);yk(t)?t.callback(n,{node:i,format:r,parents:a}):kt(t.callbacks,function(t){return t(n,{node:i,format:r,parents:a})})}};kt([t.withSimilar,t.withoutSimilar],e),kt(t.withVars,e)})},Sk=function(r,t,e,o,s,a){var u=t.get();kt(e.split(","),function(e){var t=Jt(u,e).getOrThunk(function(){var t={withSimilar:{state:Al(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Al(!1),similar:!1,callbacks:[]},withVars:[]};return u[e]=t}),n=function(){var t=Ck(r);return xk(r,t,e,s,a).isSome()};if(U(a)){var i=s?t.withSimilar:t.withoutSimilar;i.callbacks.push(o),1===i.callbacks.length&&i.state.set(n())}else t.withVars.push({state:Al(n()),similar:s,vars:a,callback:o})}),t.set(u)},Tk=function(t,e,n){var i=t.get();kt(e.split(","),function(e){return Jt(i,e).each(function(t){i[e]={withSimilar:de(de({},t.withSimilar),{callbacks:bt(t.withSimilar.callbacks,function(t){return t!==n})}),withoutSimilar:de(de({},t.withoutSimilar),{callbacks:bt(t.withoutSimilar.callbacks,function(t){return t!==n})}),withVars:bt(t.withVars,function(t){return t.callback!==n})}})}),t.set(i)},Ek=function(t,e,n,i,r,o){return null===e.get()&&wk(e,t),Sk(t,e,n,i,r,o),{unbind:function(){return Tk(e,n,i)}}},Nk=function(t,e,n,i){var r=t.formatter.get(e);!iC(t,e,n,i)||"toggle"in r[0]&&!r[0].toggle?bk(t,e,n,i):uk(t,e,n,i)},Dk=function(t,e){var n=(e||document).createDocumentFragment();return kt(t,function(t){n.appendChild(t.dom)}),An.fromDom(n)},Ak=function(t,e,n){return{element:t,width:e,rows:n}},Ik=function(t,e){return{element:t,cells:e}},Pk=function(t,e){return{x:t,y:e}},Rk=function(t,e){var n=parseInt(Nr(t,e),10);return isNaN(n)?1:n},Ok=function(t,e,n,i,r){for(var o=Rk(r,"rowspan"),s=Rk(r,"colspan"),a=t.rows,u=n;u<n+o;u++){a[u]||(a[u]=Ik(wc(i),[]));for(var l=e;l<e+s;l++){a[u].cells[l]=u===n&&l===e?r:yc(r)}}},Mk=function(t,e,n){var i=t.rows;return!!(i[n]?i[n].cells:[])[e]},Fk=function(t,e,n){for(;Mk(t,e,n);)e++;return e},$k=function(t){return St(t,function(t,e){return e.cells.length>t?e.cells.length:t},0)},Lk=function(t,e){for(var n=t.rows,i=0;i<n.length;i++)for(var r=n[i].cells,o=0;o<r.length;o++)if(Un(r[o],e))return at.some(Pk(o,i));return at.none()},Hk=function(t,e,n,i,r){for(var o=[],s=t.rows,a=n;a<=r;a++){var u=s[a].cells,l=e<i?u.slice(e,i+1):u.slice(i,e+1);o.push(Ik(s[a].element,l))}return o},Bk=function(t,e,n){var i=e.x,r=e.y,o=n.x,s=n.y,a=r<s?Hk(t,i,r,o,s):Hk(t,i,s,o,r);return Ak(t.element,$k(a),a)},zk=function(t,e){var n=yc(t.element),i=An.fromTag("tbody");return Oi(i,e),Ii(n,i),n},jk=function(t){return mt(t.rows,function(t){var e=mt(t.cells,function(t){var e=wc(t);return Ir(e,"colspan"),Ir(e,"rowspan"),e}),n=yc(t.element);return Oi(n,e),n})},Uk=function(t){var r=Ak(yc(t),0,[]);return kt(tc(t,"tr"),function(n,i){kt(tc(n,"td,th"),function(t,e){Ok(r,Fk(r,e,i),i,n,t)})}),Ak(r.element,$k(r.rows),r.rows)},qk=function(t){return zk(t,jk(t))},Wk=function(n,t,i){return Lk(n,t).bind(function(e){return Lk(n,i).map(function(t){return Bk(n,e,t)})})},Vk=function(t){return Et(t,function(t){return"ul"===Yn(t)||"ol"===Yn(t)})},Yk=function(t,e){return Et(t,function(t){return"li"===Yn(t)&&Xm(t,e)}).fold(Ct([]),function(){return Vk(t).map(function(t){var e=An.fromTag(Yn(t)),n=Gt(Lr(t),function(t,e){return Ne(e,"list-style")});return Or(e,n),[An.fromTag("li"),e]}).getOr([])})},Kk=function(t,e){var n=St(e,function(t,e){return Ii(e,t),e},t);return 0<e.length?Dk([n]):n},Gk=function(e){return os(e)?si(e).filter(rs).fold(Ct([]),function(t){return[e,t]}):rs(e)?[e]:[]},Xk=function(t,e){var n=An.fromDom(e.commonAncestorContainer),i=Xy(n,t),r=bt(i,function(t){return es(t)||Jo(t)}),o=Yk(i,e),s=r.concat(o.length?o:Gk(n));return mt(s,yc)},Qk=function(){return Dk([])},Jk=function(t,e){return Kk(An.fromDom(e.cloneContents()),Xk(t,e))},Zk=function(t,e){return Po(e,"table",m(Un,t))},tS=function(t,r){return Zk(t,r[0]).bind(function(t){var e=r[0],n=r[r.length-1],i=Uk(t);return Wk(i,e,n).map(function(t){return Dk([qk(t)])})}).getOrThunk(Qk)},eS=function(t,e){return 0<e.length&&e[0].collapsed?Qk():Jk(t,e[0])},nS=function(t,e){var n=Um(e,t);return 0<n.length?tS(t,n):eS(t,e)},iS=function(t){return t.replace(/^[ \f\n\r\t\v]+/,"")},rS=function(t,e){return 0<=e&&e<t.length&&Jp(t.charAt(e))},oS=function(t,e){var n=ps(t.innerText);return e?iS(n):n},sS=function(t){return t.map(function(t){return t.nodeName}).getOr("div").toLowerCase()},aS=function(d){return at.from(d.selection.getRng()).map(function(t){var e=at.from(d.dom.getParent(t.commonAncestorContainer,d.dom.isBlock)),n=d.getBody(),i=sS(e),r=yn.browser.isIE()&&"pre"!==i,o=d.dom.add(n,i,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),s=oS(o,r),a=ps(o.textContent);if(d.dom.remove(o),rS(a,0)||rS(a,a.length-1)){var u=e.getOr(n),l=oS(u,r),c=l.indexOf(s);return-1===c?s:(rS(l,c-1)?" ":"")+s+(rS(l,c+s.length)?" ":"")}return s}).getOr("")},uS=function(t,e){var n=t.selection.getRng(),i=t.dom.create("body"),r=t.selection.getSel(),o=Hb(t,Lm(r)),s=e.contextual?nS(An.fromDom(t.getBody()),o).dom:n.cloneContents();return s&&i.appendChild(s),t.selection.serializer.serialize(i,e)},lS=function(t,e){return de(de({},t),{format:e,get:!0,selection:!0})},cS=function(t,e,n){void 0===n&&(n={});var i=lS(n,e),r=t.fire("BeforeGetContent",i);if(r.isDefaultPrevented())return t.fire("GetContent",r),r.content;if("text"===r.format)return aS(t);r.getInner=!0;var o=uS(t,r);return"tree"===r.format?o:(r.content=t.selection.isCollapsed()?"":o,t.fire("GetContent",r),r.content)},dS=0,hS=1,fS=2,pS=function(p,m){var t=p.length+m.length+2,g=new Array(t),v=new Array(t),o=function(t,e,n){return{start:t,end:e,diag:n}},l=function(t,e,n,i,r){var o=c(t,e,n,i);if(null===o||o.start===e&&o.diag===e-i||o.end===t&&o.diag===t-n)for(var s=t,a=n;s<e||a<i;)s<e&&a<i&&p[s]===m[a]?(r.push([dS,p[s]]),++s,++a):i-n<e-t?(r.push([fS,p[s]]),++s):(r.push([hS,m[a]]),++a);else{l(t,o.start,n,o.start-o.diag,r);for(var u=o.start;u<o.end;++u)r.push([dS,p[u]]);l(o.end,e,o.end-o.diag,i,r)}},b=function(t,e,n,i){for(var r=t;r-e<i&&r<n&&p[r]===m[r-e];)++r;return o(t,r,e)},c=function(t,e,n,i){var r=e-t,o=i-n;if(0===r||0===o)return null;var s,a,u,l,c,d=r-o,h=o+r,f=(h%2==0?h:h+1)/2;for(g[1+f]=t,v[1+f]=e+1,s=0;s<=f;++s){for(a=-s;a<=s;a+=2){for(u=a+f,a===-s||a!==s&&g[u-1]<g[u+1]?g[u]=g[u+1]:g[u]=g[u-1]+1,c=(l=g[u])-t+n-a;l<e&&c<i&&p[l]===m[c];)g[u]=++l,++c;if(d%2!=0&&d-s<=a&&a<=d+s&&v[u-d]<=g[u])return b(v[u-d],a+t-n,e,i)}for(a=d-s;a<=d+s;a+=2){for(u=a+f-d,a===d-s||a!==d+s&&v[u+1]<=v[u-1]?v[u]=v[u+1]-1:v[u]=v[u-1],c=(l=v[u]-1)-t+n-a;t<=l&&n<=c&&p[l]===m[c];)v[u]=l--,c--;if(d%2==0&&-s<=a&&a<=s&&v[u]<=g[u+d])return b(v[u],a+t-n,e,i)}}},e=[];return l(0,p.length,0,m.length,e),e},mS=function(t){return Zi(t)?t.outerHTML:lr(t)?Ta.encodeRaw(t.data,!1):cr(t)?"<!--"+t.data+"-->":""},gS=function(t){var e,n=document.createElement("div"),i=document.createDocumentFragment();for(t&&(n.innerHTML=t);e=n.firstChild;)i.appendChild(e);return i},vS=function(t,e,n){var i=gS(e);if(t.hasChildNodes()&&n<t.childNodes.length){var r=t.childNodes[n];r.parentNode.insertBefore(i,r)}else t.appendChild(i)},bS=function(t,e){if(t.hasChildNodes()&&e<t.childNodes.length){var n=t.childNodes[e];n.parentNode.removeChild(n)}},yS=function(t,e){var n=0;kt(t,function(t){t[0]===dS?n++:t[0]===hS?(vS(e,t[1],n),n++):t[0]===fS&&bS(e,n)})},wS=function(t){return bt(mt(Ht(t.childNodes),mS),function(t){return 0<t.length})},_S=function(t,e){var n=mt(Ht(e.childNodes),mS);return yS(pS(n,t),e),e},xS=he(function(){return document.implementation.createHTMLDocument("undo")}),CS=function(t){return-1!==t.indexOf("</iframe>")},kS=function(t){return{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}},SS=function(t){return{type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}},TS=function(n){var t=wS(n.getBody()),e=At(t,function(t){var e=cy(n.serializer,t);return 0<e.length?[e]:[]}),i=e.join("");return CS(i)?kS(e):SS(i)},ES=function(t,e,n){var i=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?_S(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!Y(i)||!Op(i)||!i.isFakeCaret}),t.selection.moveToBookmark(i)},NS=function(t){return"fragmented"===t.type?t.fragments.join(""):t.content},DS=function(t){var e=An.fromTag("body",xS());return vc(e,NS(t)),kt(tc(e,"*[data-mce-bogus]"),$i),gc(e)},AS=function(t,e){return NS(t)===NS(e)},IS=function(t,e){return DS(t)===DS(e)},PS=function(t,e){return!(!t||!e)&&(!!AS(t,e)||IS(t,e))},RS=function(t){return 0===t.get()},OS=function(t,e,n){RS(n)&&(t.typing=e)},MS=function(t,e){t.typing&&(OS(t,!1,e),t.add())},FS=function(t){t.typing&&(t.typing=!1,t.add())},$S=function(t,e,n){RS(e)&&n.set(zd(t.selection))},LS=function(t,e,n,i,r,o,s){var a=TS(t);if(o=o||{},o=Sn.extend(o,a),!1===RS(i)||t.removed)return null;var u=e.data[n.get()];if(t.fire("BeforeAddUndo",{level:o,lastLevel:u,originalEvent:s}).isDefaultPrevented())return null;if(u&&PS(u,o))return null;e.data[n.get()]&&r.get().each(function(t){e.data[n.get()].beforeBookmark=t});var l=Vh(t);if(l&&e.data.length>l){for(var c=0;c<e.data.length-1;c++)e.data[c]=e.data[c+1];e.data.length--,n.set(e.data.length)}o.bookmark=zd(t.selection),n.get()<e.data.length-1&&(e.data.length=n.get()+1),e.data.push(o),n.set(e.data.length-1);var d={level:o,lastLevel:u,originalEvent:s};return 0<n.get()?(t.setDirty(!0),t.fire("AddUndo",d),t.fire("change",d)):t.fire("AddUndo",d),o},HS=function(t,e,n){e.data=[],n.set(0),e.typing=!1,t.fire("ClearUndos")},BS=function(t,e,n,i,r){if(e.transact(i)){var o=e.data[n.get()].bookmark,s=e.data[n.get()-1];ES(t,s,!0),e.transact(r)&&(e.data[n.get()-1].beforeBookmark=o)}},zS=function(t,e,n){var i;return e.get()<n.length-1&&(e.set(e.get()+1),i=n[e.get()],ES(t,i,!1),t.setDirty(!0),t.fire("Redo",{level:i})),i},jS=function(t,e,n,i){var r;return e.typing&&(e.add(),e.typing=!1,OS(e,!1,n)),0<i.get()&&(i.set(i.get()-1),r=e.data[i.get()],ES(t,r,!0),t.setDirty(!0),t.fire("Undo",{level:r})),r},US=function(t){t.clear(),t.add()},qS=function(t,e,n){return 0<n.get()||e.typing&&e.data[0]&&!PS(TS(t),e.data[0])},WS=function(t,e){return e.get()<t.data.length-1&&!t.typing},VS=function(t,e,n){return MS(t,e),t.beforeChange(),t.ignore(n),t.add()},YS=function(t,e){try{t.set(t.get()+1),e()}finally{t.set(t.get()-1)}},KS=function(o,t){var s=o.dom,e=Y(t)?t:o.getBody();U(o.hasVisual)&&(o.hasVisual=Zh(o)),kt(s.select("table,a",e),function(t){switch(t.nodeName){case"TABLE":var e=tf(o),n=s.getAttrib(t,"border");n&&"0"!==n||!o.hasVisual?s.removeClass(t,e):s.addClass(t,e);break;case"A":if(!s.getAttrib(t,"href")){var i=s.getAttrib(t,"name")||t.id,r=ef(o);i&&o.hasVisual?s.addClass(t,r):s.removeClass(t,r)}}}),o.fire("VisualAid",{element:t,hasVisual:o.hasVisual})},GS=function(s){return{undoManager:{beforeChange:function(t,e){return $S(s,t,e)},add:function(t,e,n,i,r,o){return LS(s,t,e,n,i,r,o)},undo:function(t,e,n){return jS(s,t,e,n)},redo:function(t,e){return zS(s,t,e)},clear:function(t,e){return HS(s,t,e)},reset:function(t){return US(t)},hasUndo:function(t,e){return qS(s,t,e)},hasRedo:function(t,e){return WS(t,e)},transact:function(t,e,n){return VS(t,e,n)},ignore:function(t,e){return YS(t,e)},extra:function(t,e,n,i){return BS(s,t,e,n,i)}},formatter:{match:function(t,e,n,i){return iC(s,t,e,n,i)},matchAll:function(t,e){return rC(s,t,e)},matchNode:function(t,e,n,i){return nC(s,t,e,n,i)},canApply:function(t){return sC(s,t)},closest:function(t){return oC(s,t)},apply:function(t,e,n){return bk(s,t,e,n)},remove:function(t,e,n,i){return uk(s,t,e,n,i)},toggle:function(t,e,n){return Nk(s,t,e,n)},formatChanged:function(t,e,n,i,r){return Ek(s,t,e,n,i,r)}},editor:{getContent:function(t,e){return my(s,t,e)},setContent:function(t,e){return Vx(s,t,e)},insertContent:function(t,e){return Mx(s,t,e)},addVisual:function(t){return KS(s,t)}},selection:{getContent:function(t,e){return cS(s,t,e)}},raw:{getModel:function(){return at.none()}}}},XS=function(t){var r=function(t){return H(t)?t:{}},o=t.undoManager,s=t.formatter,n=t.editor,i=t.selection,e=t.raw;return{undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:function(t,e,n){return o.transact(n)},ignore:function(t,e){return o.ignore(e)},extra:function(t,e,n,i){return o.extra(n,i)}},formatter:{match:function(t,e,n,i){return s.match(t,r(e),i)},matchAll:s.matchAll,matchNode:s.matchNode,canApply:function(t){return s.canApply(t)},closest:function(t){return s.closest(t)},apply:function(t,e){return s.apply(t,r(e))},remove:function(t,e){return s.remove(t,r(e))},toggle:function(t,e){return s.toggle(t,r(e))},formatChanged:function(t,e,n,i,r){return s.formatChanged(e,n,i,r)}},editor:{getContent:function(t){return n.getContent(t)},setContent:function(t,e){
return n.setContent(t,e)},insertContent:function(t){return n.insertContent(t)},addVisual:n.addVisual},selection:{getContent:function(t,e){return i.getContent(e)}},raw:{getModel:function(){return at.some(e.getRawModel())}}}},QS=function(){var t=Ct(null),e=Ct("");return{undoManager:{beforeChange:xt,add:t,undo:t,redo:t,clear:xt,reset:xt,hasUndo:et,hasRedo:et,transact:t,ignore:xt,extra:xt},formatter:{match:et,matchAll:Ct([]),matchNode:Ct(undefined),canApply:et,closest:e,apply:xt,remove:xt,toggle:xt,formatChanged:Ct({unbind:xt})},editor:{getContent:e,setContent:e,insertContent:xt,addVisual:xt},selection:{getContent:e},raw:{getModel:Ct(at.none())}}},JS=function(t){return Zt(t.plugins,"rtc")},ZS=function(t){return Jt(t.plugins,"rtc").bind(function(t){return at.from(t.setup)})},tT=function(t){var e=t;return ZS(t).fold(function(){return e.rtcInstance=GS(t),at.none()},function(t){return e.rtcInstance=QS(),at.some(function(){return t().then(function(t){return e.rtcInstance=XS(t),t.rtc.isRemote})})})},eT=function(t){return t.rtcInstance?t.rtcInstance:GS(t)},nT=function(t){var e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},iT=function(t,e,n){nT(t).undoManager.beforeChange(e,n)},rT=function(t,e,n,i,r,o,s){return nT(t).undoManager.add(e,n,i,r,o,s)},oT=function(t,e,n,i){return nT(t).undoManager.undo(e,n,i)},sT=function(t,e,n){return nT(t).undoManager.redo(e,n)},aT=function(t,e,n){nT(t).undoManager.clear(e,n)},uT=function(t,e){nT(t).undoManager.reset(e)},lT=function(t,e,n){return nT(t).undoManager.hasUndo(e,n)},cT=function(t,e,n){return nT(t).undoManager.hasRedo(e,n)},dT=function(t,e,n,i){return nT(t).undoManager.transact(e,n,i)},hT=function(t,e,n){nT(t).undoManager.ignore(e,n)},fT=function(t,e,n,i,r){nT(t).undoManager.extra(e,n,i,r)},pT=function(t,e,n,i,r){return nT(t).formatter.match(e,n,i,r)},mT=function(t,e,n){return nT(t).formatter.matchAll(e,n)},gT=function(t,e,n,i,r){return nT(t).formatter.matchNode(e,n,i,r)},vT=function(t,e){return nT(t).formatter.canApply(e)},bT=function(t,e){return nT(t).formatter.closest(e)},yT=function(t,e,n,i){nT(t).formatter.apply(e,n,i)},wT=function(t,e,n,i,r){nT(t).formatter.remove(e,n,i,r)},_T=function(t,e,n,i){nT(t).formatter.toggle(e,n,i)},xT=function(t,e,n,i,r,o){return nT(t).formatter.formatChanged(e,n,i,r,o)},CT=function(t,e,n){return eT(t).editor.getContent(e,n)},kT=function(t,e,n){return eT(t).editor.setContent(e,n)},ST=function(t,e,n){return eT(t).editor.insertContent(e,n)},TT=function(t,e,n){return nT(t).selection.getContent(e,n)},ET=function(t,e){return nT(t).editor.addVisual(e)},NT=function(t,e){void 0===e&&(e={});var n=e.format?e.format:"html";return TT(t,n,e)},DT=function(t){return 0===t.dom.length?(Fi(t),at.none()):at.some(t)},AT=function(t,e){return t.filter(function(t){return cg.isBookmarkNode(t.dom)}).bind(e?ci:li)},IT=function(t,e,n,i){var r=t.dom,o=e.dom,s=i?r.length:o.length;i?($w(r,o,!1,!i),n.setStart(o,s)):($w(o,r,!1,!i),n.setEnd(o,s))},PT=function(n,i){si(n).each(function(t){var e=n.dom;i&&_w(t,od(e,0))?Mw(e,0):!i&&Cw(t,od(e,e.length))&&Fw(e,e.length)})},RT=function(t,n,i,r){t.bind(function(e){return(r?Fw:Mw)(e.dom,r?e.dom.length:0),n.filter(Jn).map(function(t){return IT(e,t,i,r)})}).orThunk(function(){return AT(n,r).or(n).filter(Jn).map(function(t){return PT(t,r)})})},OT=function(t,e){var n=at.from(e.firstChild).map(An.fromDom),i=at.from(e.lastChild).map(An.fromDom);t.deleteContents(),t.insertNode(e);var r=n.bind(li).filter(Jn).bind(DT),o=i.bind(ci).filter(Jn).bind(DT);RT(r,n,t,!0),RT(o,i,t,!1),t.collapse(!1)},MT=function(t,e){return de(de({format:"html"},t),{set:!0,selection:!0,content:e})},FT=function(t,e){if("raw"===e.format)return e.content;var n=t.selection.getRng(),i=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),r=i?{context:i.nodeName.toLowerCase()}:{},o=t.parser.parse(e.content,de(de({isRootContent:!0,forced_root_block:!1},r),e));return wy({validate:t.validate},t.schema).serialize(o)},$T=function(t,e,n){void 0===n&&(n={});var i=MT(n,e),r=i;if(!i.no_events){var o=t.fire("BeforeSetContent",i);if(o.isDefaultPrevented())return void t.fire("SetContent",o);r=o}r.content=FT(t,r);var s=t.selection.getRng();OT(s,s.createContextualFragment(r.content)),t.selection.setRng(s),Ev(t,s),r.no_events||t.fire("SetContent",r)},LT=function(t,e,n){if(t&&Zt(t,e)){var i=bt(t[e],function(t){return t!==n});0===i.length?delete t[e]:t[e]=i}},HT=function(t){return!!t.select},BT=function(t){return!(!t||!t.ownerDocument)&&Vn(An.fromDom(t.ownerDocument),An.fromDom(t))},zT=function(t){return!!t&&(!!HT(t)||BT(t.startContainer)&&BT(t.endContainer))},jT=function(a,u,t,l){var c,d,n=A(a,l).selectorChangedWithUnbind,e=function(t,e){var n=a.createRng();Y(t)&&Y(e)?(n.setStart(t,e),n.setEnd(t,e),g(n),f(!1)):(Qm(a,n,l.getBody(),!0),g(n))},i=function(t,e){return $T(l,t,e)},r=function(t){return Rb(l.getBody(),m(),t)},o=function(t){return Ob(l.getBody(),m(),t)},s=function(t,e){return Lb(a,t,e).each(g),t},h=function(){var t=m(),e=p();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},f=function(t){var e=m();e.collapse(!!t),g(e)},p=function(){return u.getSelection?u.getSelection():u.document.selection},m=function(){var t,e,n,i=function(t,e,n){try{return e.compareBoundaryPoints(t,n)}catch(i){return-1}},r=u.document;if(l.bookmark!==undefined&&!1===Eb(l)){var o=eb(l);if(o.isSome())return o.map(function(t){return Hb(l,[t])[0]}).getOr(r.createRange())}try{(t=p())&&!Ji(t.anchorNode)&&(e=0<t.rangeCount?t.getRangeAt(0):t.createRange?t.createRange():r.createRange(),e=Hb(l,[e])[0])}catch(s){}return e||(e=r.createRange?r.createRange():r.body.createTextRange()),e.setStart&&9===e.startContainer.nodeType&&e.collapsed&&(n=a.getRoot(),e.setStart(n,0),e.setEnd(n,0)),c&&d&&(0===i(e.START_TO_START,e,c)&&0===i(e.END_TO_END,e,c)?e=d:d=c=null),e},g=function(t,e){var n;if(zT(t)){var i=HT(t)?t:null;if(i){d=null;try{i.select()}catch(o){}}else{var r=p();if(t=l.fire("SetSelectionRange",{range:t,forward:e}).range,r){d=t;try{r.removeAllRanges(),r.addRange(t)}catch(o){}!1===e&&r.extend&&(r.collapse(t.endContainer,t.endOffset),r.extend(t.startContainer,t.startOffset)),c=0<r.rangeCount?r.getRangeAt(0):null}t.collapsed||t.startContainer!==t.endContainer||!r.setBaseAndExtent||yn.ie||t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(n=t.startContainer.childNodes[t.startOffset])&&"IMG"===n.tagName&&(r.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),r.anchorNode===t.startContainer&&r.focusNode===t.endContainer||r.setBaseAndExtent(n,0,n,1)),l.fire("AfterSetSelectionRange",{range:t,forward:e})}}},v=function(t){return i(a.getOuterHTML(t)),t},b=function(){return Fb(l.getBody(),m())},y=function(t,e){return $b(a,m(),t,e)},w=function(){var t=p(),e=null==t?void 0:t.anchorNode,n=null==t?void 0:t.focusNode;if(!t||!e||!n||Ji(e)||Ji(n))return!0;var i=a.createRng();i.setStart(e,t.anchorOffset),i.collapse(!0);var r=a.createRng();return r.setStart(n,t.focusOffset),r.collapse(!0),i.compareBoundaryPoints(i.START_TO_START,r)<=0},_=function(){var t=m(),e=p();if(Bm(e)||!Jm(l))return t;var n=Yg(a,t);return n.each(function(t){g(t,w())}),n.getOr(t)},x=function(){for(var t,e=a.getRoot();e&&"BODY"!==e.nodeName;){if(e.scrollHeight>e.clientHeight){t=e;break}e=e.parentNode}return t},C=function(t,e){Y(t)?Tv(l,t,e):Ev(l,m(),e)},k=function(t,e){return g(Og(t,e,l.getDoc()))},S=function(){var t=m();return t.collapsed?od.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},T=function(){u=c=d=null,D.destroy()},E={bookmarkManager:null,controlSelection:null,dom:a,win:u,serializer:t,editor:l,collapse:f,setCursorLocation:e,getContent:function(t){return NT(l,t)},setContent:i,getBookmark:function(t,e){return N.getBookmark(t,e)},moveToBookmark:function(t){return N.moveToBookmark(t)},select:s,isCollapsed:h,isForward:w,setNode:v,getNode:b,getSel:p,setRng:g,getRng:m,getStart:r,getEnd:o,getSelectedBlocks:y,normalize:_,selectorChanged:function(t,e){return n(t,e),E},selectorChangedWithUnbind:n,getScrollContainer:x,scrollIntoView:C,placeCaretAt:k,getBoundingClientRect:S,destroy:T},N=cg(E),D=Dg(E,l);return E.bookmarkManager=N,E.controlSelection=D,E},UT=function(e,t){kt(t,function(t){e.attr(t,null)})},qT=function(t,o,s){t.addNodeFilter("font",function(t){kt(t,function(t){var e=o.parse(t.attr("style")),n=t.attr("color"),i=t.attr("face"),r=t.attr("size");n&&(e.color=n),i&&(e["font-family"]=i),r&&(e["font-size"]=s[parseInt(t.attr("size"),10)-1]),t.name="span",t.attr("style",o.serialize(e)),UT(t,["color","face","size"])})})},WT=function(t,n){t.addNodeFilter("strike",function(t){kt(t,function(t){var e=n.parse(t.attr("style"));e["text-decoration"]="line-through",t.name="span",t.attr("style",n.serialize(e))})})},VT=function(t,e){var n=Ha();e.convert_fonts_to_spans&&qT(t,n,Sn.explode(e.font_size_legacy_values)),WT(t,n)},YT=function(t,e){e.inline_styles&&VT(t,e)},KT=function(o){return new Mo(function(t,e){var n=function(){e("Cannot convert "+o+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new XMLHttpRequest;i.open("GET",o,!0),i.responseType="blob",i.onload=function(){200===i.status?t(i.response):n()},i.onerror=n,i.send()}catch(r){n()}})},GT=function(t){var e,n=decodeURIComponent(t).split(","),i=/data:([^;]+)/.exec(n[0]);return i&&(e=i[1]),{type:e,data:n[1]}},XT=function(t,e){var n;try{n=atob(e)}catch(_B){return at.none()}for(var i=new Uint8Array(n.length),r=0;r<i.length;r++)i[r]=n.charCodeAt(r);return at.some(new Blob([i],{type:t}))},QT=function(r){return new Mo(function(t){var e=GT(r),n=e.type,i=e.data;XT(n,i).fold(function(){return t(new Blob([]))},t)})},JT=function(t){return 0===t.indexOf("blob:")?KT(t):0===t.indexOf("data:")?QT(t):null},ZT=function(n){return new Mo(function(t){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n)})},tE=0,eE=function(t){return(t||"blobid")+tE++},nE=function(n,i,r,e){var o,s;if(0!==i.src.indexOf("blob:")){var t=GT(i.src),a=t.data,u=t.type;o=a,(s=n.getByData(o,u))?r({image:i,blobInfo:s}):JT(i.src).then(function(t){s=n.create(eE(),t,o),n.add(s),r({image:i,blobInfo:s})},function(t){e(t)})}else(s=n.getByUri(i.src))?r({image:i,blobInfo:s}):JT(i.src).then(function(e){ZT(e).then(function(t){o=GT(t).data,s=n.create(eE(),e,o),n.add(s),r({image:i,blobInfo:s})})},function(t){e(t)})},iE=function(t){return t?Ht(t.getElementsByTagName("img")):[]},rE=function(r,o){var s={};return{findAll:function(t,n){n||(n=nt);var e=bt(iE(t),function(t){var e=t.src;return!!yn.fileApi&&(!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!e||e===yn.transparentSrc)&&(0===e.indexOf("blob:")?!r.isUploaded(e)&&n(t):0===e.indexOf("data:")&&n(t)))))}),i=mt(e,function(n){if(s[n.src]!==undefined)return new Mo(function(e){s[n.src].then(function(t){if("string"==typeof t)return t;e({image:n,blobInfo:t.blobInfo})})});var t=new Mo(function(t,e){nE(o,n,t,e)}).then(function(t){return delete s[t.image.src],t})["catch"](function(t){return delete s[n.src],t});return s[n.src]=t});return Mo.all(i)}}},oE=function(t,e,n,i){(t.padd_empty_with_br||e.insert)&&n[i.name]?i.empty().append(new qb("br",1)).shortEnded=!0:i.empty().append(new qb("#text",3)).value=ds},sE=function(t){return aE(t,"#text")&&t.firstChild.value===ds},aE=function(t,e){return t&&t.firstChild&&t.firstChild===t.lastChild&&t.firstChild.name===e},uE=function(t,e){var n=t.getElementRule(e.name);return n&&n.paddEmpty},lE=function(e,t,n,i){return i.isEmpty(t,n,function(t){return uE(e,t)})},cE=function(t,e){return t&&(Zt(e,t.name)||"br"===t.name)},dE=function(t){return Y(t.attr("data-mce-bogus"))},hE=function(t){return t.attr("src")===yn.transparentSrc||Y(t.attr("data-mce-placeholder"))},fE=function(t,e){if(e.images_dataimg_filter){var n=new Image;return n.src=t.attr("src"),Ut(t.attributes.map,function(t,e){n.setAttribute(e,t)}),e.images_dataimg_filter(n)}return!0},pE=function(t,n){var i=n.blob_cache,e=function(e){var t=e.attr("src");hE(e)||dE(e)||Yb(t).filter(function(){return fE(e,n)}).bind(function(t){var e=t.type,n=t.data;return at.from(i.getByData(n,e)).orThunk(function(){return XT(e,n).map(function(t){var e=i.create(eE(),t,n);return i.add(e),e})})}).each(function(t){e.attr("src",t.blobUri())})};i&&t.addAttributeFilter("src",function(t){return kt(t,e)})},mE=function(t,m){var g=t.schema;m.remove_trailing_brs&&t.addNodeFilter("br",function(t,e,n){var i,r,o,s,a,u,l,c,d=t.length,h=Sn.extend({},g.getBlockElements()),f=g.getNonEmptyElements(),p=g.getWhiteSpaceElements();for(h.body=1,i=0;i<d;i++)if(o=(r=t[i]).parent,h[r.parent.name]&&r===o.lastChild){for(a=r.prev;a;){if("span"!==(u=a.name)||"bookmark"!==a.attr("data-mce-type")){"br"===u&&(r=null);break}a=a.prev}r&&(r.remove(),lE(g,f,p,o)&&(l=g.getElementRule(o.name))&&(l.removeEmpty?o.remove():l.paddEmpty&&oE(m,n,h,o)))}else{for(s=r;o&&o.firstChild===s&&o.lastChild===s&&!h[(s=o).name];)o=o.parent;s===o&&!0!==m.padd_empty_with_br&&((c=new qb("#text",3)).value=ds,r.replace(c))}}),t.addAttributeFilter("href",function(t){var e=t.length,n=function(t){return t.split(" ").filter(function(t){return 0<t.length}).concat(["noopener"]).sort().join(" ")},i=function(t){var e=t?Sn.trim(t):"";return/\b(noopener)\b/g.test(e)?e:n(e)};if(!m.allow_unsafe_link_target)for(;e--;){var r=t[e];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",i(r.attr("rel")))}}),m.allow_html_in_named_anchor||t.addAttributeFilter("id,name",function(t){for(var e,n,i,r,o=t.length;o--;)if("a"===(r=t[o]).name&&r.firstChild&&!r.attr("href"))for(i=r.parent,e=r.lastChild;n=e.prev,i.insert(e,r),e=n;);}),m.fix_list_elements&&t.addNodeFilter("ul,ol",function(t){for(var e,n,i=t.length;i--;)if("ul"===(n=(e=t[i]).parent).name||"ol"===n.name)if(e.prev&&"li"===e.prev.name)e.prev.append(e);else{var r=new qb("li",1);r.attr("style","list-style-type: none"),e.wrap(r)}}),m.validate&&g.getValidClasses()&&t.addAttributeFilter("class",function(t){for(var e=g.getValidClasses(),n=t.length;n--;){for(var i=t[n],r=i.attr("class").split(" "),o="",s=0;s<r.length;s++){var a=r[s],u=!1,l=e["*"];l&&l[a]&&(u=!0),l=e[i.name],!u&&l&&l[a]&&(u=!0),u&&(o&&(o+=" "),o+=a)}o.length||(o=null),i.attr("class",o)}}),pE(t,m)},gE=Sn.makeMap,vE=Sn.each,bE=Sn.explode,yE=Sn.extend,wE=function(D,A){void 0===A&&(A=$a());var I={},P=[],R={},O={};(D=D||{}).validate=!("validate"in D)||D.validate,D.root_name=D.root_name||"body";var M=function(t){for(var e=gE("tr,td,th,tbody,thead,tfoot,table"),n=A.getNonEmptyElements(),i=A.getWhiteSpaceElements(),r=A.getTextBlockElements(),o=A.getSpecialElements(),s=function(t,e){if(void 0===e&&(e=t.parent),o[t.name])t.empty().remove();else{for(var n=0,i=t.children();n<i.length;n++){var r=i[n];A.isValidChild(e.name,r.name)||s(r,e)}t.unwrap()}},a=0;a<t.length;a++){var u=t[a],l=void 0,c=void 0,d=void 0;if(u.parent&&!u.fixed)if(r[u.name]&&"li"===u.parent.name){for(var h=u.next;h&&r[h.name];)h.name="li",h.fixed=!0,u.parent.insert(h,u.parent),h=h.next;u.unwrap()}else{var f=[u];for(l=u.parent;l&&!A.isValidChild(l.name,u.name)&&!e[l.name];l=l.parent)f.push(l);if(l&&1<f.length)if(A.isValidChild(l.name,u.name)){f.reverse();for(var p=c=b(f[0].clone()),m=0;m<f.length-1;m++){A.isValidChild(p.name,f[m].name)?(d=b(f[m].clone()),p.append(d)):d=p;for(var g=f[m].firstChild;g&&g!==f[m+1];){var v=g.next;d.append(g),g=v}p=d}lE(A,n,i,c)?l.insert(u,f[0],!0):(l.insert(c,f[0],!0),l.insert(u,c)),l=f[0],(lE(A,n,i,l)||aE(l,"br"))&&l.empty().remove()}else s(u);else if(u.parent){if("li"===u.name){if((h=u.prev)&&("ul"===h.name||"ol"===h.name)){h.append(u);continue}if((h=u.next)&&("ul"===h.name||"ol"===h.name)){h.insert(u,h.firstChild,!0);continue}u.wrap(b(new qb("ul",1)));continue}A.isValidChild(u.parent.name,"div")&&A.isValidChild("div",u.name)?u.wrap(b(new qb("div",1))):s(u)}}}},b=function(t){var e=t.name;e in I&&((i=R[e])?i.push(t):R[e]=[t]);for(var n=P.length;n--;){var i,r=P[n].name;if(r in t.attributes.map)(i=O[r])?i.push(t):O[r]=[t]}return t},t=function(t,s){var e,n,i,r,o,u,a,l,c=[],d=function(t){return!1===t?"":!0===t?"p":t};s=s||{},R={},O={};var h=yE(gE("script,style,head,html,body,title,meta,param"),A.getBlockElements()),f=A.getNonEmptyElements(),p=A.children,m=D.validate,g=d("forced_root_block"in s?s.forced_root_block:D.forced_root_block),v=A.getWhiteSpaceElements(),b=/^[ \t\r\n]+/,y=/[ \t\r\n]+$/,w=/[ \t\r\n]+/g,_=/^[ \t\r\n]+$/,x=Zt(v,s.context)||Zt(v,D.root_name),C=function(){var e=N.firstChild,t=null,n=function(t){t&&((e=t.firstChild)&&3===e.type&&(e.value=e.value.replace(b,"")),(e=t.lastChild)&&3===e.type&&(e.value=e.value.replace(y,"")))};if(A.isValidChild(N.name,g.toLowerCase())){for(;e;){var i=e.next;3===e.type||1===e.type&&"p"!==e.name&&!h[e.name]&&!e.attr("data-mce-type")?(t||((t=k(g,1)).attr(D.forced_root_block_attrs),N.insert(t,e)),t.append(e)):(n(t),t=null),e=i}n(t)}},k=function(t,e){var n,i=new qb(t,e);return t in I&&((n=R[t])?n.push(i):R[t]=[i]),i},S=function(t){for(var e=A.getBlockElements(),n=t.prev;n&&3===n.type;){var i=n.value.replace(y,"");if(0<i.length)return void(n.value=i);var r=n.next;if(r){if(3===r.type&&r.value.length){n=n.prev;continue}if(!e[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}var o=n.prev;n.remove(),n=o}},T=function(t){var e={};for(var n in t)"li"!==n&&"p"!==n&&(e[n]=t[n]);return e},E=uy({validate:m,document:D.document,allow_html_data_urls:D.allow_html_data_urls,allow_svg_data_urls:D.allow_svg_data_urls,allow_script_urls:D.allow_script_urls,allow_conditional_comments:D.allow_conditional_comments,preserve_cdata:D.preserve_cdata,self_closing_elements:T(A.getSelfClosingElements()),cdata:function(t){l.append(k("#cdata",4)).value=t},text:function(t,e){var n;x||(t=t.replace(w," "),cE(l.lastChild,h)&&(t=t.replace(b,""))),0!==t.length&&((n=k("#text",3)).raw=!!e,l.append(n).value=t)},comment:function(t){l.append(k("#comment",8)).value=t},pi:function(t,e){l.append(k(t,7)).value=e,S(l)},doctype:function(t){l.append(k("#doctype",10)).value=t,S(l)},start:function(t,e,n){var i=m?A.getElementRule(t):{};if(i){var r=k(i.outputName||t,1);r.attributes=e,r.shortEnded=n,l.append(r);var o=p[l.name];o&&p[r.name]&&!o[r.name]&&c.push(r);for(var s=P.length;s--;){var a=P[s].name;a in e.map&&((u=O[a])?u.push(r):O[a]=[r])}h[t]&&S(r),n||(l=r),!x&&v[t]&&(x=!0)}},end:function(t){var e,n,i,r,o=m?A.getElementRule(t):{};if(o){if(h[t]&&!x){if((e=l.firstChild)&&3===e.type)if(0<(n=e.value.replace(b,"")).length)e.value=n,e=e.next;else for(i=e.next,e.remove(),e=i;e&&3===e.type;)n=e.value,i=e.next,(0===n.length||_.test(n))&&(e.remove(),e=i),e=i;if((e=l.lastChild)&&3===e.type)if(0<(n=e.value.replace(y,"")).length)e.value=n,e=e.prev;else for(i=e.prev,e.remove(),e=i;e&&3===e.type;)n=e.value,i=e.prev,(0===n.length||_.test(n))&&(e.remove(),e=i),e=i}if(x&&v[t]&&(x=!1),o.removeEmpty&&lE(A,f,v,l))return r=l.parent,h[l.name]?l.empty().remove():l.unwrap(),void(l=r);o.paddEmpty&&(sE(l)||lE(A,f,v,l))&&oE(D,s,h,l),l=l.parent}}},A),N=l=new qb(s.context||D.root_name,11);if(E.parse(t,s.format),m&&c.length&&(s.context?s.invalid=!0:M(c)),g&&("body"===N.name||s.isRootContent)&&C(),!s.invalid){for(a in R)if(Zt(R,a)){for(u=I[a],r=(e=R[a]).length;r--;)e[r].parent||e.splice(r,1);for(n=0,i=u.length;n<i;n++)u[n](e,a,s)}for(n=0,i=P.length;n<i;n++)if((u=P[n]).name in O){for(r=(e=O[u.name]).length;r--;)e[r].parent||e.splice(r,1);for(r=0,o=u.callbacks.length;r<o;r++)u.callbacks[r](e,u.name,s)}}return N},e={schema:A,addAttributeFilter:function(t,n){vE(bE(t),function(t){var e;for(e=0;e<P.length;e++)if(P[e].name===t)return void P[e].callbacks.push(n);P.push({name:t,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(P)},addNodeFilter:function(t,n){vE(bE(t),function(t){var e=I[t];e||(I[t]=e=[]),e.push(n)})},getNodeFilters:function(){var t=[];for(var e in I)Zt(I,e)&&t.push({name:e,callbacks:I[e]});return t},filterNode:b,parse:t};return mE(e,D),YT(e,D),e},_E=function(e,u,l){e.addAttributeFilter("data-mce-tabindex",function(t,e){for(var n=t.length;n--;){var i=t[n];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(e,null)}}),e.addAttributeFilter("src,href,style",function(t,e){for(var n="data-mce-"+e,i=u.url_converter,r=u.url_converter_scope,o=t.length;o--;){var s=t[o],a=s.attr(n);a!==undefined?(s.attr(e,0<a.length?a:null),s.attr(n,null)):(a=s.attr(e),"style"===e?a=l.serializeStyle(l.parseStyle(a),s.name):i&&(a=i.call(r,a,e,s.name)),s.attr(e,0<a.length?a:null))}}),e.addAttributeFilter("class",function(t){for(var e=t.length;e--;){var n=t[e],i=n.attr("class");i&&(i=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",0<i.length?i:null))}}),e.addAttributeFilter("data-mce-type",function(t,e,n){for(var i=t.length;i--;){var r=t[i];if("bookmark"===r.attr("data-mce-type")&&!n.cleanup)at.from(r.firstChild).exists(function(t){return!fs(t.value)})?r.unwrap():r.remove()}}),e.addNodeFilter("noscript",function(t){for(var e=t.length;e--;){var n=t[e].firstChild;n&&(n.value=Ta.decode(n.value))}}),e.addNodeFilter("script,style",function(t,e){for(var n=function(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},i=t.length;i--;){var r=t[i],o=r.firstChild?r.firstChild.value:"";if("script"===e){var s=r.attr("type");s&&r.attr("type","mce-no/type"===s?null:s.replace(/^mce\-/,"")),"xhtml"===u.element_format&&0<o.length&&(r.firstChild.value="// <![CDATA[\n"+n(o)+"\n// ]]>")}else"xhtml"===u.element_format&&0<o.length&&(r.firstChild.value="<!--\n"+n(o)+"\n-->")}}),e.addNodeFilter("#comment",function(t){for(var e=t.length;e--;){var n=t[e];u.preserve_cdata&&0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=l.decode(n.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}}),e.addNodeFilter("xml:namespace,input",function(t,e){for(var n=t.length;n--;){var i=t[n];7===i.type?i.remove():1===i.type&&("input"!==e||i.attr("type")||i.attr("type","text"))}}),e.addAttributeFilter("data-mce-type",function(t){kt(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)})},xE=function(t){var e=function(t){return t&&"br"===t.name},n=t.lastChild;if(e(n)){var i=n.prev;e(i)&&(n.remove(),i.remove())}},CE=function(t,e,n){var i,r=t.dom,o=e.cloneNode(!0),s=document.implementation;if(s.createHTMLDocument){var a=s.createHTMLDocument("");Sn.each("BODY"===o.nodeName?o.childNodes:[o],function(t){a.body.appendChild(a.importNode(t,!0))}),o="BODY"!==o.nodeName?a.body.firstChild:a.body,i=r.doc,r.doc=a}return fg(t,de(de({},n),{node:o})),i&&(r.doc=i),o},kE=function(t,e){return t&&t.hasEventListeners("PreProcess")&&!e.no_events},SE=function(t,e,n){return kE(t,n)?CE(t,e,n):e},TE=function(t,e,n){-1===Sn.inArray(e,n)&&(t.addAttributeFilter(n,function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}),e.push(n))},EE=function(t,e,n){return e.no_events||!t?n:pg(t,de(de({},e),{content:n})).content},NE=function(t,e,n){var i=ps(n.getInner?e.innerHTML:t.getOuterHTML(e));return n.selection||us(An.fromDom(e))?i:Sn.trim(i)},DE=function(t,e,n){var i=n.selection?de({forced_root_block:!1},n):n,r=t.parse(e,i);return xE(r),r},AE=function(t,e,n){return wy(t,e).serialize(n)},IE=function(t,e,n,i,r){var o=AE(e,n,i);return EE(t,r,o)},PE=function(s,a){var t=["data-mce-selected"],u=a&&a.dom?a.dom:_l.DOM,l=a&&a.schema?a.schema:$a(s);s.entity_encoding=s.entity_encoding||"named",s.remove_trailing_brs=!("remove_trailing_brs"in s)||s.remove_trailing_brs;var c=wE(s,l);_E(c,s,u);var e=function(t,e){void 0===e&&(e={});var n=de({format:"html"},e),i=SE(a,t,n),r=NE(u,i,n),o=DE(c,r,n);return"tree"===n.format?o:IE(a,s,l,o,n)};return{schema:l,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,serialize:e,addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:m(TE,c,t),getTempAttrs:Ct(t),getNodeFilters:c.getNodeFilters,getAttributeFilters:c.getAttributeFilters}},RE=function(t,e){var n=PE(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},OE="html",ME=function(t,e){void 0===e&&(e={});var n=e.format?e.format:OE;return CT(t,e,n)},FE=function(t,e,n){return void 0===n&&(n={}),kT(t,e,n)},$E=_l.DOM,LE=function(t){$E.setStyle(t.id,"display",t.orgDisplay)},HE=function(t){return at.from(t).each(function(t){return t.destroy()})},BE=function(t){t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null)},zE=function(t){var e=t.formElement;e&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),$E.unbind(e,"submit reset",t.formEventDelegate))},jE=function(t){if(!t.removed){var e=t._selectionOverrides,n=t.editorUpload,i=t.getBody(),r=t.getElement();i&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&r&&$E.remove(r.nextSibling),mg(t),t.editorManager.remove(t),!t.inline&&i&&LE(t),gg(t),$E.remove(t.getContainer()),HE(e),HE(n),t.destroy()}},UE=function(t,e){var n=t.selection,i=t.dom;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),HE(n),HE(i)),zE(t),BE(t),t.destroyed=!0):t.remove())},qE=function(s){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},i=0;i<t.length;i++){var r=t[i];for(var o in r)Zt(r,o)&&(n[o]=s(n[o],r[o]))}return n}}(function(t,e){return H(t)&&H(e)?qE(t,e):e}),WE="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),VE="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),YE="imagetools,toc".split(","),KE=function(e){var t=bt(WE,function(t){return Zt(e,t)}),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),Mt(t)},GE=function(t){var e=Sn.makeMap(t.plugins," "),n=function(t){return Zt(e,t)},i=l(l([],bt(VE,n),!0),At(YE,function(t){return n(t)?[t+" (moving to premium)"]:[]}),!0);return Mt(i)},XE=function(t,e){var n=KE(t),i=GE(e),r=0<i.length,o=0<n.length,s="mobile"===e.theme;if(r||o||s){var a="\n- ",u=s?"\n\nThemes:"+a+"mobile":"",l=r?"\n\nPlugins:"+a+i.join(a):"",c=o?"\n\nSettings:"+a+n.join(a):"";console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+u+l+c)}},QE=function(t,e){return{sections:Ct(t),settings:Ct(e)}},JE=cn().deviceType,ZE=JE.isTouch(),tN=JE.isPhone(),eN=JE.isTablet(),nN=["lists","autolink","autosave"],iN={table_grid:!1,object_resizing:!1,resize:!1},rN=function(t){var e=B(t)?t.join(" "):t,n=mt(wt(e)?e.split(" "):[],Ae);return bt(n,function(t){return 0<t.length})},oN=function(t){return bt(t,m(ft,nN))},sN=function(n,t){var e=Kt(t,function(t,e){return ft(n,e)});return QE(e.t,e.f)},aN=function(t,e,n){void 0===n&&(n={});var i=t.sections(),r=Jt(i,e).getOr({});return Sn.extend({},n,r)},uN=function(t,e){return Zt(t.sections(),e)},lN=function(t,e,n){var i=t.sections();return uN(t,e)&&i[e].theme===n},cN=function(t,e){return uN(t,e)?t.sections()[e]:{}},dN=function(t,e){return Jt(t,"toolbar_mode").orThunk(function(){return Jt(t,"toolbar_drawer").map(function(t){return!1===t?"wrap":t})}).getOr(e)},hN=function(t,e,n,i,r){var o={id:e,theme:"silver",toolbar_mode:dN(t,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r};return de(de({},o),i?iN:{})},fN=function(t,e){var n={resize:!1,toolbar_mode:dN(t,"scrolling"),toolbar_sticky:!1},i={menubar:!1};return de(de(de({},iN),n),e?i:{})},pN=function(t,e){var n=e.external_plugins?e.external_plugins:{};return t&&t.external_plugins?Sn.extend({},t.external_plugins,n):n},mN=function(t,e){return[].concat(rN(t)).concat(rN(e))},gN=function(t,e,n,i){return t&&lN(e,"mobile","mobile")?oN(i):t&&uN(e,"mobile")?i:n},vN=function(t,e,n,i){var r=rN(n.forced_plugins),o=rN(i.plugins),s=cN(e,"mobile"),a=s.plugins?rN(s.plugins):o,u=gN(t,e,o,a),l=mN(r,u);if(yn.browser.isIE()&&ft(l,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return Sn.extend(i,{plugins:l.join(" ")})},bN=function(t,e){return t&&uN(e,"mobile")},yN=function(t,e,n,i,r){var o=t?{mobile:fN(r.mobile||{},e)}:{},s=sN(["mobile"],qE(o,r)),a=Sn.extend(n,i,s.settings(),bN(t,s)?aN(s,"mobile"):{},{validate:!0,external_plugins:pN(i,s.settings())});return vN(t,s,i,a)},wN=function(t,e,n,i,r){var o=hN(r,e,n,ZE,t),s=yN(tN||eN,tN,o,i,r);return!1!==s.deprecation_warnings&&XE(r,s),s},_N=function(t,e,n){return at.from(e.settings[n]).filter(t)},xN=function(t){var n={};return"string"==typeof t?kt(0<t.indexOf("=")?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(","),function(t){var e=t.split("=");1<e.length?n[Sn.trim(e[0])]=Sn.trim(e[1]):n[Sn.trim(e[0])]=Sn.trim(e[0])}):n=t,n},CN=function(e){return function(t){return B(t)&&It(t,e)}},kN=function(t,e,n,i){var r=e in t.settings?t.settings[e]:n;return"hash"===i?xN(r):"string"===i?_N(wt,t,e).getOr(n):"number"===i?_N(W,t,e).getOr(n):"boolean"===i?_N(j,t,e).getOr(n):"object"===i?_N(H,t,e).getOr(n):"array"===i?_N(B,t,e).getOr(n):"string[]"===i?_N(CN(wt),t,e).getOr(n):"function"===i?_N(q,t,e).getOr(n):r},SN=function(){var n={};return{add:function(t,e){n[t]=e},get:function(t){return n[t]?n[t]:{icons:{}}},has:function(t){return Zt(n,t)}}}(),TN=function(t,e){return e.dom[t]},EN=function(t,e){return parseInt(Mr(e,t),10)},NN=m(TN,"clientWidth"),DN=m(TN,"clientHeight"),AN=m(EN,"margin-top"),IN=m(EN,"margin-left"),PN=function(t){return t.dom.getBoundingClientRect()},RN=function(t,e,n){var i=NN(t),r=DN(t);return 0<=e&&0<=n&&e<=i&&n<=r},ON=function(t,e,n,i){var r=PN(e);return{x:n-(t?r.left+e.dom.clientLeft+IN(e):0),y:i-(t?r.top+e.dom.clientTop+AN(e):0)}},MN=function(t,e,n){var i=An.fromDom(t.getBody()),r=t.inline?i:ri(i),o=ON(t.inline,r,e,n);return RN(r,o.x,o.y)},FN=function(t){return at.from(t).map(An.fromDom)},$N=function(t){var e=t.inline?t.getBody():t.getContentAreaContainer();return FN(e).map(Li).getOr(!1)},LN=function(){var t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,reposition:t,getArgs:t}},HN=function(n){var i=[],r=function(){var t=n.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():LN()},o=function(){return at.from(i[0])},s=function(t,e){return!(t.type!==e.type||t.text!==e.text||t.progressBar||t.timeout||e.progressBar||e.timeout)},a=function(){0<i.length&&r().reposition(i)},u=function(t){i.push(t)},l=function(e){Nt(i,function(t){return t===e}).each(function(t){i.splice(t,1)})},c=function(e,t){if(void 0===t&&(t=!0),!n.removed&&$N(n))return t&&n.fire("BeforeOpenNotification",{
notification:e}),Et(i,function(t){return s(r().getArgs(t),e)}).getOrThunk(function(){n.editorManager.setActive(n);var t=r().open(e,function(){l(t),a(),o().fold(function(){return n.focus()},function(t){return Dv(An.fromDom(t.getEl()))})});return u(t),a(),n.fire("OpenNotification",{notification:de({},t)}),t})},t=function(){o().each(function(t){r().close(t),l(t),a()})},e=Ct(i);return function(e){e.on("SkinLoaded",function(){var t=Ah(e);t&&c({text:t,type:"warning",timeout:0},!1),a()}),e.on("show ResizeEditor ResizeWindow NodeChange",function(){Bo.requestAnimationFrame(a)}),e.on("remove",function(){kt(i.slice(),function(t){r().close(t)})})}(n),{open:c,close:t,getNotifications:e}},BN=$l.PluginManager,zN=$l.ThemeManager,jN=function(n){var i=[],r=function(){var t=n.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():x()},o=function(n,i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i?i.apply(n,t):undefined}},e=function(t){n.fire("OpenWindow",{dialog:t})},t=function(t){n.fire("CloseWindow",{dialog:t})},s=function(t){i.push(t),e(t)},a=function(e){t(e),0===(i=bt(i,function(t){return t!==e})).length&&n.focus()},u=function(){return at.from(i[i.length-1])},l=function(t){n.editorManager.setActive(n),Zv(n);var e=t();return s(e),e},c=function(t,e){return l(function(){return r().open(t,e,a)})},d=function(t){return l(function(){return r().openUrl(t,a)})},h=function(t,e,n){var i=r();i.alert(t,o(n||i,e))},f=function(t,e,n){var i=r();i.confirm(t,o(n||i,e))},p=function(){u().each(function(t){r().close(t),a(t)})};return n.on("remove",function(){kt(i,function(t){r().close(t)})}),{open:c,openUrl:d,alert:h,confirm:f,close:p}},UN=function(t,e){t.notificationManager.open({type:"error",text:e})},qN=function(t,e){t._skinLoaded?UN(t,e):t.on("SkinLoaded",function(){UN(t,e)})},WN=function(t,e){qN(t,Fl.translate(["Failed to upload image: {0}",e]))},VN=function(t,e,n){kg(t,e,{message:n}),console.error(n)},YN=function(t,e,n){return n?"Failed to load "+t+": "+n+" from url "+e:"Failed to load "+t+" url: "+e},KN=function(t,e,n){VN(t,"PluginLoadError",YN("plugin",e,n))},GN=function(t,e,n){VN(t,"IconsLoadError",YN("icons",e,n))},XN=function(t,e,n){VN(t,"LanguageLoadError",YN("language",e,n))},QN=function(t,e,n){var i=Fl.translate(["Failed to initialize plugin: {0}",e]);kg(t,"PluginLoadError",{message:i}),JN(i,n),qN(t,i)},JN=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=window.console;i&&(i.error?i.error.apply(i,l([t],e,!1)):i.log.apply(i,l([t],e,!1)))},ZN=function(t){return/^[a-z0-9\-]+$/i.test(t)},tD=function(t){return nD(t,xh(t))},eD=function(t){return nD(t,Ch(t))},nD=function(e,t){var n=e.editorManager.baseURL+"/skins/content",i="content"+e.editorManager.suffix+".css",r=!0===e.inline;return mt(t,function(t){return ZN(t)&&!r?n+"/"+t+"/"+i:e.documentBaseURI.toAbsolute(t)})},iD=function(t){t.contentCSS=t.contentCSS.concat(tD(t),eD(t))},rD=function(){var e=1,n=2,i={},r=function(t,e){return{status:t,resultUri:e}},o=function(t){return t in i},t=function(t){return!!o(t)&&i[t].status===e},s=function(t){return!!o(t)&&i[t].status===n};return{hasBlobUri:o,getResultUri:function(t){var e=i[t];return e?e.resultUri:null},isPending:t,isUploaded:s,markPending:function(t){i[t]=r(e,null)},markUploaded:function(t,e){i[t]=r(n,e)},removeFailed:function(t){delete i[t]},destroy:function(){i={}}}},oD=0,sD=function(){var t=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+t()+t()+t()},aD=function(t){return t+oD+++sD()},uD=function(){var n=[],r=function(t){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[t.toLowerCase()]||"dat"},t=function(t,e,n,i,r){if(wt(t))return o({id:t,name:i,filename:r,blob:e,base64:n});if(H(t))return o(t);throw new Error("Unknown input type")},o=function(t){if(!t.blob||!t.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var e=t.id||aD("blobid"),n=t.name||e,i=t.blob;return{id:Ct(e),name:Ct(n),filename:Ct(t.filename||n+"."+r(i.type)),blob:Ct(i),base64:Ct(t.base64),blobUri:Ct(t.blobUri||URL.createObjectURL(i)),uri:Ct(t.uri)}},e=function(t){s(t.id())||n.push(t)},i=function(t){return Et(n,t).getOrUndefined()},s=function(e){return i(function(t){return t.id()===e})};return{create:t,add:e,get:s,getByUri:function(e){return i(function(t){return t.blobUri()===e})},getByData:function(e,n){return i(function(t){return t.base64()===e&&t.blob().type===n})},findFirst:i,removeByUri:function(e){n=bt(n,function(t){return t.blobUri()!==e||(URL.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){kt(n,function(t){URL.revokeObjectURL(t.blobUri())}),n=[]}}},lD=function(a,s){var n={},u=function(t,e){return t?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e},e=function(t,e,n,i){var r=new XMLHttpRequest;r.open("POST",s.url),r.withCredentials=s.credentials,r.upload.onprogress=function(t){i(t.loaded/t.total*100)},r.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+r.status)},r.onload=function(){if(r.status<200||300<=r.status)n("HTTP Error: "+r.status);else{var t=JSON.parse(r.responseText);t&&"string"==typeof t.location?e(u(s.basePath,t.location)):n("Invalid JSON: "+r.responseText)}};var o=new FormData;o.append("file",t.blob(),t.filename()),r.send(o)},i=function(){return new Mo(function(t){t([])})},l=function(t,e){return{url:e,blobInfo:t,status:!0}},c=function(t,e,n){return{url:"",blobInfo:t,status:!1,error:{message:e,options:n}}},d=function(t,e){Sn.each(n[t],function(t){t(e)}),delete n[t]},r=function(o,e,s){return a.markPending(o.blobUri()),new Mo(function(i){var n;try{var r=function(){n&&(n.close(),xt)};e(o,function(t){r(),a.markUploaded(o.blobUri(),t),d(o.blobUri(),l(o,t)),i(l(o,t))},function(t,e){var n=e||{};r(),a.removeFailed(o.blobUri()),d(o.blobUri(),c(o,t,n)),i(c(o,t,n))},function(e){e<0||100<e||at.from(n).orThunk(function(){return at.from(s).map(Z)}).each(function(t){(n=t).progressBar.value(e)})})}catch(t){i(c(o,t.message,{}))}})},o=function(t){return t===e},h=function(t){var e=t.blobUri();return new Mo(function(t){n[e]=n[e]||[],n[e].push(t)})},f=function(t,e){return t=Sn.grep(t,function(t){return!a.isUploaded(t.blobUri())}),Mo.all(Sn.map(t,function(t){return a.isPending(t.blobUri())?h(t):r(t,s.handler,e)}))},t=function(t,e){return!s.url&&o(s.handler)?i():f(t,e)};return!1===q(s.handler)&&(s.handler=e),{upload:t}},cD=function(t){return function(){return t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},dD=function(t,e){return lD(e,{url:hh(t),basePath:fh(t),credentials:ph(t),handler:mh(t)})},hD=function(n){var t=rD(),i=dD(n,t);return{upload:function(t,e){return void 0===e&&(e=!0),i.upload(t,e?cD(n):undefined)}}},fD=function(n){var i=Al(null);return n.on("change AddUndo",function(t){i.set(de({},t.level))}),{fireIfChanged:function(){var e=n.undoManager.data;Lt(e).filter(function(t){return!PS(i.get(),t)}).each(function(t){n.setDirty(!0),n.fire("change",{level:t,lastLevel:Ft(e,e.length-2).getOrNull()})})}}},pD=function(s){var e,t,a=uD(),r=rD(),n=[],i=fD(s),u=function(e){return function(t){return s.selection?e(t):[]}},o=function(t){return t+(-1===t.indexOf("?")?"?":"&")+(new Date).getTime()},l=function(t,e,n){for(var i=0;-1!==(i=t.indexOf(e,i))&&(t=t.substring(0,i)+n+t.substr(i+e.length),i+=n.length-e.length+1),-1!==i;);return t},c=function(t,e,n){var i='src="'+n+'"'+(n===yn.transparentSrc?' data-mce-placeholder="1"':"");return t=l(t,'src="'+e+'"',i),t=l(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"')},d=function(e,n){kt(s.undoManager.data,function(t){"fragmented"===t.type?t.fragments=mt(t.fragments,function(t){return c(t,e,n)}):t.content=c(t.content,e,n)})},h=function(t,e){var n=s.convertURL(e,"src");d(t.src,e),s.$(t).attr({src:uh(s)?o(e):e,"data-mce-src":n})},f=function(n){return e||(e=dD(s,r)),v().then(u(function(o){var t=mt(o,function(t){return t.blobInfo});return e.upload(t,cD(s)).then(u(function(t){var r=[],e=mt(t,function(t,e){var n=o[e].blobInfo,i=o[e].image;return t.status&&lh(s)?(a.removeByUri(i.src),JS(s)||h(i,t.url)):t.error&&(t.error.options.remove&&(d(i.getAttribute("src"),yn.transparentSrc),r.push(i)),WN(s,t.error.message)),{element:i,status:t.status,uploadUri:t.url,blobInfo:n}});return 0<e.length&&i.fireIfChanged(),0<r.length&&(JS(s)?console.error("Removing images on failed uploads is currently unsupported for RTC"):s.undoManager.transact(function(){kt(r,function(t){s.dom.remove(t),a.removeByUri(t.src)})})),n&&n(e),e}))}))},p=function(t){if(ah(s))return f(t)},m=function(e){return!1!==It(n,function(t){return t(e)})&&(0!==e.getAttribute("src").indexOf("data:")||sh(s)(e))},g=function(t){n.push(t)},v=function(){return t||(t=rE(r,a)),t.findAll(s.getBody(),m).then(u(function(t){return t=bt(t,function(t){return"string"!=typeof t||(qN(s,t),!1)}),JS(s)||kt(t,function(t){d(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")}),t}))},b=function(){a.destroy(),r.destroy(),t=e=null},y=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var e=r.getResultUri(n);if(e)return'src="'+e+'"';var i=a.getByUri(n);return i||(i=St(s.editorManager.get(),function(t,e){return t||e.editorUpload&&e.editorUpload.blobCache.getByUri(n)},null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t})};return s.on("SetContent",function(){ah(s)?p():v()}),s.on("RawSaveContent",function(t){t.content=y(t.content)}),s.on("GetContent",function(t){t.source_view||"raw"===t.format||"tree"===t.format||(t.content=y(t.content))}),s.on("PostRender",function(){s.parser.addNodeFilter("img",function(t){kt(t,function(t){var e=t.attr("src");if(!a.getByUri(e)){var n=r.getResultUri(e);n&&t.attr("src",n)}})})}),{blobCache:a,addFilter:g,uploadImages:f,uploadImagesAuto:p,scanForImages:v,destroy:b}},mD=function(i){var e={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(t){return Zi(t)&&t.hasAttribute("href")},onformat:function(n,t,e){Sn.each(e,function(t,e){i.setAttrib(n,e,t)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(t){var e;return null!==(e=null==t?void 0:t.customValue)&&void 0!==e?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Sn.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(t){e[t]={block:t,remove:"all"}}),e},gD=function(t){var n={},e=function(t){return Y(t)?n[t]:n},i=function(t){return Zt(n,t)},r=function(t,e){t&&(wt(t)?(B(e)||(e=[e]),kt(e,function(t){U(t.deep)&&(t.deep=!vm(t)),U(t.split)&&(t.split=!vm(t)||bm(t)),U(t.remove)&&vm(t)&&!bm(t)&&(t.remove="none"),vm(t)&&bm(t)&&(t.mixed=!0,t.block_expand=!0),wt(t.classes)&&(t.classes=t.classes.split(/\s+/))}),n[t]=e):Ut(t,function(t,e){r(e,t)}))},o=function(t){return t&&n[t]&&delete n[t],n};return r(mD(t.dom)),r(Oh(t)),{get:e,has:i,register:r,unregister:o}},vD=Sn.each,bD=_l.DOM,yD=function(t,e){var n,i,r,o=e&&e.schema||$a({}),s=function(t,e){e.classes.length&&bD.addClass(t,e.classes.join(" ")),bD.setAttribs(t,e.attrs)},u=function(t){i="string"==typeof t?{name:t,classes:[],attrs:{}}:t;var e=bD.create(i.name);return s(e,i),e},l=function(t,e){var n="string"!=typeof t?t.nodeName.toLowerCase():t,i=o.getElementRule(n),r=i&&i.parentsRequired;return!(!r||!r.length)&&(e&&-1!==Sn.inArray(r,e)?e:r[0])},c=function(n,t,e){var i,r,o=0<t.length&&t[0],s=o&&o.name,a=l(n,s);if(a)s===a?(r=t[0],t=t.slice(1)):r=a;else if(o)r=t[0],t=t.slice(1);else if(!e)return n;return r&&(i=u(r)).appendChild(n),e&&(i||(i=bD.create("div")).appendChild(n),Sn.each(e,function(t){var e=u(t);i.insertBefore(e,n)})),c(i,t,r&&r.siblings)};return t&&t.length?(i=t[0],n=u(i),(r=bD.create("div")).appendChild(c(n,t.slice(1),i.siblings)),r):""},wD=function(t){var e,s={classes:[],attrs:{}};return"*"!==(t=s.selector=Sn.trim(t))&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(t,e,n,i,r){switch(e){case"#":s.attrs.id=n;break;case".":s.classes.push(n);break;case":":-1!==Sn.inArray("checked disabled enabled read-only required".split(" "),n)&&(s.attrs[n]=n)}if("["===i){var o=r.match(/([\w\-]+)(?:\=\"([^\"]+))?/);o&&(s.attrs[o[1]]=o[2])}return""})),s.name=e||"div",s},_D=function(t){return t&&"string"==typeof t?(t=(t=t.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Sn.map(t.split(/(?:>|\s+(?![^\[\]]+\]))/),function(t){var e=Sn.map(t.split(/(?:~\+|~|\+)/),wD),n=e.pop();return e.length&&(n.siblings=e),n}).reverse()):[]},xD=function(n,t){var e,i,r,o="",s=Mh(n);if(""===s)return"";var a=function(t){return t.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=n.formatter.get(t)))return;t=t[0]}if("preview"in t){var u=Jt(t,"preview");if(yr(u,!1))return"";s=u.getOr(s)}e=t.block||t.inline||"span";var l=_D(t.selector);l.length?(l[0].name||(l[0].name=e),e=t.selector,i=yD(l,n)):i=yD([e],n);var c=bD.select(e,i)[0]||i.firstChild;return vD(t.styles,function(t,e){var n=a(t);n&&bD.setStyle(c,e,n)}),vD(t.attributes,function(t,e){var n=a(t);n&&bD.setAttrib(c,e,n)}),vD(t.classes,function(t){var e=a(t);bD.hasClass(c,e)||bD.addClass(c,e)}),n.fire("PreviewFormats"),bD.setStyles(i,{position:"absolute",left:-65535}),n.getBody().appendChild(i),r=bD.getStyle(n.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,vD(s.split(" "),function(t){var e=bD.getStyle(c,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(e)&&(e=bD.getStyle(n.getBody(),t,!0),"#ffffff"===bD.toHex(e).toLowerCase())||"color"===t&&"#000000"===bD.toHex(e).toLowerCase())){if("font-size"===t&&/em|%$/.test(e)){if(0===r)return;e=parseFloat(e)/(/%$/.test(e)?100:1)*r+"px"}"border"===t&&e&&(o+="padding:0 2px;"),o+=t+":"+e+";"}}),n.fire("AfterPreviewFormats"),bD.remove(i),o},CD=function(t){t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(var e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])},kD=function(r){var t=gD(r),o=Al(null);return CD(r),SC(r),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:function(t,e,n){yT(r,t,e,n)},remove:function(t,e,n,i){wT(r,t,e,n,i)},toggle:function(t,e,n){_T(r,t,e,n)},match:function(t,e,n,i){return pT(r,t,e,n,i)},closest:function(t){return bT(r,t)},matchAll:function(t,e){return mT(r,t,e)},matchNode:function(t,e,n,i){return gT(r,t,e,n,i)},canApply:function(t){return vT(r,t)},formatChanged:function(t,e,n,i){return xT(r,o,t,e,n,i)},getCssText:m(xD,r)}},SD=function(t){switch(t.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return!0;default:return!1}},TD=function(n,i,r){var o=Al(!1),s=function(t){OS(i,!1,r),i.add({},t)};n.on("init",function(){i.add()}),n.on("BeforeExecCommand",function(t){var e=t.command;SD(e)||(MS(i,r),i.beforeChange())}),n.on("ExecCommand",function(t){var e=t.command;SD(e)||s(t)}),n.on("ObjectResizeStart cut",function(){i.beforeChange()}),n.on("SaveContent ObjectResized blur",s),n.on("dragend",s),n.on("keyup",function(t){var e=t.keyCode;t.isDefaultPrevented()||((33<=e&&e<=36||37<=e&&e<=40||45===e||t.ctrlKey)&&(s(),n.nodeChanged()),46!==e&&8!==e||n.nodeChanged(),o.get()&&i.typing&&!1===PS(TS(n),i.data[0])&&(!1===n.isDirty()&&(n.setDirty(!0),n.fire("change",{level:i.data[0],lastLevel:null})),n.fire("TypingUndo"),o.set(!1),n.nodeChanged()))}),n.on("keydown",function(t){var e=t.keyCode;if(!t.isDefaultPrevented())if(33<=e&&e<=36||37<=e&&e<=40||45===e)i.typing&&s(t);else{var n=t.ctrlKey&&!t.altKey||t.metaKey;!(e<16||20<e)||224===e||91===e||i.typing||n||(i.beforeChange(),OS(i,!0,r),i.add({},t),o.set(!0))}}),n.on("mousedown",function(t){i.typing&&s(t)});var e=function(t){return"insertReplacementText"===t.inputType},a=function(t){return"insertText"===t.inputType&&null===t.data},u=function(t){return"insertFromPaste"===t.inputType||"insertFromDrop"===t.inputType};n.on("input",function(t){t.inputType&&(e(t)||a(t)||u(t))&&s(t)}),n.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||n.nodeChanged()})},ED=function(t){t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo")},ND=function(n){var i=Hl(),r=Al(0),o=Al(0),s={data:[],typing:!1,beforeChange:function(){iT(n,r,i)},add:function(t,e){return rT(n,s,o,r,i,t,e)},undo:function(){return oT(n,s,r,o)},redo:function(){return sT(n,o,s.data)},clear:function(){aT(n,s,o)},reset:function(){uT(n,s)},hasUndo:function(){return lT(n,s,o)},hasRedo:function(){return cT(n,s,o)},transact:function(t){return dT(n,s,r,t)},ignore:function(t){hT(n,r,t)},extra:function(t,e){fT(n,s,o,t,e)}};return JS(n)||TD(n,s,r),ED(n),s},DD=[9,27,Eg.HOME,Eg.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Eg.DOWN,Eg.UP,Eg.LEFT,Eg.RIGHT].concat(yn.browser.isFirefox()?[224]:[]),AD="data-mce-placeholder",ID=function(t){return"keydown"===t.type||"keyup"===t.type},PD=function(t){var e=t.keyCode;return e===Eg.BACKSPACE||e===Eg.DELETE},RD=function(t){if(ID(t)){var e=t.keyCode;return!PD(t)&&(Eg.metaKeyPressed(t)||t.altKey||112<=e&&e<=123||ft(DD,e))}return!1},OD=function(t){return ID(t)&&!(PD(t)||"keyup"===t.type&&229===t.keyCode)},MD=function(t,e,n){if(na(An.fromDom(e),!1)){var i=""===n,r=e.firstElementChild;return!r||!t.getStyle(e.firstElementChild,"padding-left")&&!t.getStyle(e.firstElementChild,"padding-right")&&(i?!t.isBlock(r):n===r.nodeName.toLowerCase())}return!1},FD=function(r){var o=r.dom,s=Jd(r),a=Nh(r),u=function(t,e){if(!RD(t)){var n=r.getBody(),i=!OD(t)&&MD(o,n,s);(""!==o.getAttrib(n,AD)!==i||e)&&(o.setAttrib(n,AD,i?a:null),o.setAttrib(n,"aria-placeholder",i?a:null),Cg(r,i),r.on(i?"keydown":"keyup",u),r.off(i?"keyup":"keydown",u))}};a&&r.on("init",function(t){u(t,!0),r.on("change SetContent ExecCommand",u),r.on("paste",function(t){return Bo.setEditorTimeout(r,function(){return u(t)})})})},$D=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,LD=function(t){return $D.test(t)},HD=function(t,e){return Hn(An.fromDom(e),Sh(t))},BD=function(t){return"rtl"===_l.DOM.getStyle(t,"direction",!0)||LD(t.textContent)},zD=function(t,e,n){return bt(_l.DOM.getParents(n.container(),"*",e),t)},jD=function(t,e,n){var i=zD(t,e,n);return at.from(i[i.length-1])},UD=function(t,e,n){var i=Lf(e,t),r=Lf(n,t);return i&&i===r},qD=function(t){return xs(t)||Cs(t)},WD=function(t,e){if(!e)return e;var n=e.container(),i=e.offset();return t?bs(n)?lr(n.nextSibling)?od(n.nextSibling,0):od.after(n):xs(e)?od(n,i+1):e:bs(n)?lr(n.previousSibling)?od(n.previousSibling,n.previousSibling.data.length):od.before(n):Cs(e)?od(n,i-1):e},VD=m(WD,!0),YD=m(WD,!1),KD=function(e){return function(t){return Un(e,An.fromDom(t.dom.parentNode))}},GD=function(t){return is(t)||os(t)},XD=function(t,e){return Vn(t,e)?Do(e,GD,KD(t)):at.none()},QD=function(t){var e=t.getBody(),n=e.firstChild&&t.dom.isBlock(e.firstChild)?e.firstChild:e;t.selection.setCursorLocation(n,0)},JD=function(t){t.dom.isEmpty(t.getBody())&&(t.setContent(""),QD(t))},ZD=function(o,s,a){return _r(Sp(a),Tp(a),function(t,e){var n=WD(!0,t),i=WD(!1,e),r=WD(!1,s);return o?Cp(a,r).exists(function(t){return t.isEqual(i)&&s.isEqual(n)}):kp(a,r).exists(function(t){return t.isEqual(n)&&s.isEqual(i)})}).getOr(!0)},tA=function(t,e){return{block:t,position:e}},eA=function(t,e){return{from:t,to:e}},nA=function(t,e){var n=An.fromDom(t),i=An.fromDom(e.container());return XD(n,i).map(function(t){return tA(t,e)})},iA=function(t){return!1===Un(t.from.block,t.to.block)},rA=function(t){return si(t.from.block).bind(function(e){return si(t.to.block).filter(function(t){return Un(e,t)})}).isSome()},oA=function(t){return!1===gr(t.from.block.dom)&&!1===gr(t.to.block.dom)},sA=function(e,n,i){return fr(i.position.getNode())&&!1===na(i.block)?xp(!1,i.block.dom).bind(function(t){return t.isEqual(i.position)?yp(n,e,t).bind(function(t){return nA(e,t)}):at.some(i)}).getOr(i):i},aA=function(e,n,t){var i=nA(e,od.fromRangeStart(t)),r=i.bind(function(t){return yp(n,e,t.position).bind(function(t){return nA(e,t).map(function(t){return sA(e,n,t)})})});return _r(i,r,eA).filter(function(t){return iA(t)&&rA(t)&&oA(t)})},uA=function(t,e,n){return n.collapsed?aA(t,e,n):at.none()},lA=function(t){var e=fi(t);return Nt(e,Zo).fold(Ct(e),function(t){return e.slice(0,t)})},cA=function(t){var e=lA(t);return kt(e,Fi),e},dA=function(t,e){var n=Xy(e,t);return Et(n.reverse(),function(t){return na(t)}).each(Fi)},hA=function(t){return 0===bt(di(t),function(t){return!na(t)}).length},fA=function(t,e,n,i){if(na(n))return Wy(n),Sp(n.dom);hA(i)&&na(e)&&Ni(i,An.fromTag("br"));var r=kp(n.dom,od.before(i.dom));return kt(cA(e),function(t){Ni(i,t)}),dA(t,e),r},pA=function(t,e,n){if(na(n))return Fi(n),na(e)&&Wy(e),Sp(e.dom);var i=Tp(n.dom);return kt(cA(e),function(t){Ii(n,t)}),dA(t,e),i},mA=function(t,e){var n=Xy(e,t);return at.from(n[n.length-1])},gA=function(t,e){return Vn(e,t)?mA(e,t):at.none()},vA=function(t,e){xp(t,e.dom).map(function(t){return t.getNode()}).map(An.fromDom).filter(ns).each(Fi)},bA=function(t,e,n){return vA(!0,e),vA(!1,n),gA(e,n).fold(m(pA,t,e,n),m(fA,t,e,n))},yA=function(t,e,n,i){return e?bA(t,i,n):bA(t,n,i)},wA=function(e,n){var i=An.fromDom(e.getBody()),t=uA(i.dom,n,e.selection.getRng()).bind(function(t){return yA(i,n,t.from.block,t.to.block)});return t.each(function(t){e.selection.setRng(t.toRange())}),t.isSome()},_A=function(n,i){var r=i.getRng();return _r(XD(n,An.fromDom(r.startContainer)),XD(n,An.fromDom(r.endContainer)),function(t,e){return!1===Un(t,e)&&(r.deleteContents(),yA(n,!0,t,e).each(function(t){i.setRng(t.toRange())}),!0)}).getOr(!1)},xA=function(t,e){var n=An.fromDom(e),i=m(Un,t);return No(n,as,i).isSome()},CA=function(t,e){return xA(t,e.startContainer)||xA(t,e.endContainer)},kA=function(t,e){var n=kp(t.dom,od.fromRangeStart(e)).isNone(),i=Cp(t.dom,od.fromRangeEnd(e)).isNone();return!CA(t,e)&&n&&i},SA=function(t){return t.setContent(""),t.selection.setCursorLocation(),!0},TA=function(t){var e=An.fromDom(t.getBody()),n=t.selection.getRng();return kA(e,n)?SA(t):_A(e,t.selection)},EA=function(t){return!t.selection.isCollapsed()&&TA(t)},NA=mr,DA=gr,AA=function(t,e,n,i,r){return at.from(e._selectionOverrides.showCaret(t,n,i,r))},IA=function(t){var e=t.ownerDocument.createRange();return e.selectNode(t),e},PA=function(t,e){return t.fire("BeforeObjectSelected",{target:e}).isDefaultPrevented()?at.none():at.some(IA(e))},RA=function(t,e,n){var i=Vf(1,t.getBody(),e),r=od.fromRangeStart(i),o=r.getNode();if(Sf(o))return AA(1,t,o,!r.isAtEnd(),!1);var s=r.getNode(!0);if(Sf(s))return AA(1,t,s,!1,!1);var a=t.dom.getParent(r.getNode(),function(t){return DA(t)||NA(t)});return Sf(a)?AA(1,t,a,!1,n):at.none()},OA=function(t,e,n){return e.collapsed?RA(t,e,n).getOr(e):e},MA=function(t){return zy(t)||$y(t)},FA=function(t){return jy(t)||Ly(t)},$A=function(t,e){lr(e)&&0===e.data.length&&t.remove(e)},LA=function(n,i,t,e,r,o){return AA(e,n,o.getNode(!r),r,!0).each(function(t){if(i.collapsed){var e=i.cloneRange();r?e.setEnd(t.startContainer,t.startOffset):e.setStart(t.endContainer,t.endOffset),e.deleteContents()}else i.deleteContents();n.selection.setRng(t)}),$A(n.dom,t),!0},HA=function(t,e){var n=t.selection.getRng();if(!lr(n.commonAncestorContainer))return!1;var i=e?sd.Forwards:sd.Backwards,r=dp(t.getBody()),o=m(Qf,e?r.next:r.prev),s=e?MA:FA,a=Kf(i,t.getBody(),n),u=WD(e,o(a));if(!u||!Jf(a,u))return!1;if(s(u))return LA(t,n,a.getNode(),i,e,u);var l=o(u);return!!(l&&s(l)&&Jf(u,l))&&LA(t,n,a.getNode(),i,e,l)},BA=function(t,e){return HA(t,e)},zA=function(t){return as(An.fromDom(t))||os(An.fromDom(t))},jA=so.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),UA=function(t,e){var n=e.getNode(!1===t),i=t?"after":"before";return Zi(n)&&n.getAttribute("data-mce-caret")===i},qA=function(e,t,n,i){var r=function(t){return es(An.fromDom(t))&&!Hf(n,i,e)};return Yf(!t,n).fold(function(){return Yf(t,i).fold(et,r)},r)},WA=function(t,e,n,i){var r=i.getNode(!1===e);return XD(An.fromDom(t),An.fromDom(n.getNode())).map(function(t){return na(t)?jA.remove(t.dom):jA.moveToElement(r)}).orThunk(function(){return at.some(jA.moveToElement(r))})},VA=function(e,n,i){return yp(n,e,i).bind(function(t){return zA(t.getNode())?at.none():qA(e,n,i,t)?at.none():n&&gr(t.getNode())?WA(e,n,i,t):!1===n&&gr(t.getNode(!0))?WA(e,n,i,t):n&&jy(i)?at.some(jA.moveToPosition(t)):!1===n&&zy(i)?at.some(jA.moveToPosition(t)):at.none()})},YA=function(t,e){return t&&gr(e.nextSibling)?at.some(jA.moveToElement(e.nextSibling)):!1===t&&gr(e.previousSibling)?at.some(jA.moveToElement(e.previousSibling)):at.none()},KA=function(e,n,t){return t.fold(function(t){return at.some(jA.remove(t))},function(t){return at.some(jA.moveToElement(t))},function(t){return Hf(n,t,e)?at.none():at.some(jA.moveToPosition(t))})},GA=function(e,t,n){return UA(t,n)?YA(t,n.getNode(!1===t)).fold(function(){return VA(e,t,n)},at.some):VA(e,t,n).bind(function(t){return KA(e,n,t)})},XA=function(t,e,n){var i=Vf(e?1:-1,t,n),r=od.fromRangeStart(i),o=An.fromDom(t);return!1===e&&jy(r)?at.some(jA.remove(r.getNode(!0))):e&&zy(r)?at.some(jA.remove(r.getNode())):!1===e&&zy(r)&&uw(o,r)?lw(o,r).map(function(t){return jA.remove(t.getNode())}):e&&jy(r)&&aw(o,r)?cw(o,r).map(function(t){return jA.remove(t.getNode())}):GA(t,e,r)},QA=function(e,n){return function(t){return e._selectionOverrides.hideFakeCaret(),n_(e,n,An.fromDom(t)),!0}},JA=function(n,i){return function(t){var e=i?od.before(t):od.after(t);return n.selection.setRng(e.toRange()),!0}},ZA=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},tI=function(t,e){return at.from(dg(t.getBody(),e))},eI=function(e,n){var t=e.selection.getNode();return tI(e,t).filter(gr).fold(function(){return XA(e.getBody(),n,e.selection.getRng()).exists(function(t){return t.fold(QA(e,n),JA(e,n),ZA(e))})},nt)},nI=function(t){kt(tc(t,".mce-offscreen-selection"),Fi)},iI=function(t,e){var n=t.selection.getNode();return!(!gr(n)||vr(n))&&tI(t,n.parentNode).filter(gr).fold(function(){return nI(An.fromDom(t.getBody())),n_(t,e,An.fromDom(t.selection.getNode())),JD(t),!0},nt)},rI=function(t){var e=t.dom,n=t.selection,i=dg(t.getBody(),n.getNode());if(mr(i)&&e.isBlock(i)&&e.isEmpty(i)){var r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(i,""),i.appendChild(r),n.setRng(od.before(r).toRange())}return!0},oI=function(t,e){return t.selection.isCollapsed()?eI(t,e):iI(t,e)},sI=function(e,n){var t=od.fromRangeStart(e.selection.getRng());return yp(n,e.getBody(),t).filter(function(t){return n?My(t):Fy(t)}).bind(function(t){return at.from(Bf(n?0:-1,t))}).exists(function(t){return e.selection.select(t),!0})},aI=function(t,e){return!!t.selection.isCollapsed()&&sI(t,e)},uI=lr,lI=function(t){return uI(t)&&t.data[0]===hs},cI=function(t){return uI(t)&&t.data[t.data.length-1]===hs},dI=function(t){return t.ownerDocument.createTextNode(hs)},hI=function(t){if(uI(t.previousSibling))return cI(t.previousSibling)||t.previousSibling.appendData(hs),t.previousSibling;if(uI(t))return lI(t)||t.insertData(0,hs),t;var e=dI(t);return t.parentNode.insertBefore(e,t),e},fI=function(t){if(uI(t.nextSibling))return lI(t.nextSibling)||t.nextSibling.insertData(0,hs),t.nextSibling;if(uI(t))return cI(t)||t.appendData(hs),t;var e=dI(t);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e},pI=function(t,e){return t?hI(e):fI(e)},mI=m(pI,!0),gI=m(pI,!1),vI=function(t,e){return lr(t.container())?pI(e,t.container()):pI(e,t.getNode())},bI=function(t,e){var n=e.get();return n&&t.container()===n&&bs(n)},yI=function(n,t){return t.fold(function(t){mf(n.get());var e=mI(t);return n.set(e),at.some(od(e,e.length-1))},function(t){return Sp(t).map(function(t){if(bI(t,n))return od(n.get(),1);mf(n.get());var e=vI(t,!0);return n.set(e),od(e,1)})},function(t){return Tp(t).map(function(t){if(bI(t,n))return od(n.get(),n.get().length-1);mf(n.get());var e=vI(t,!1);return n.set(e),od(e,e.length-1)})},function(t){mf(n.get());var e=gI(t);return n.set(e),at.some(od(e,1))})},wI=function(t,e){for(var n=0;n<t.length;n++){var i=t[n].apply(null,e);if(i.isSome())return i}return at.none()},_I=so.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),xI=function(t,e){var n=Lf(e,t);return n||t},CI=function(t,e,n){var i=VD(n),r=xI(e,i.container());return jD(t,r,i).fold(function(){return Cp(r,i).bind(m(jD,t,r)).map(function(t){return _I.before(t)})},at.none)},kI=function(t,e){return null===Dp(t,e)},SI=function(t,e,n){return jD(t,e,n).filter(m(kI,e))},TI=function(t,e,n){var i=YD(n);return SI(t,e,i).bind(function(t){return kp(t,i).isNone()?at.some(_I.start(t)):at.none()})},EI=function(t,e,n){var i=VD(n);return SI(t,e,i).bind(function(t){return Cp(t,i).isNone()?at.some(_I.end(t)):at.none()})},NI=function(t,e,n){var i=YD(n),r=xI(e,i.container());return jD(t,r,i).fold(function(){return kp(r,i).bind(m(jD,t,r)).map(function(t){return _I.after(t)})},at.none)},DI=function(t){return!1===BD(II(t))},AI=function(t,e,n){return wI([CI,TI,EI,NI],[t,e,n]).filter(DI)},II=function(t){return t.fold(G,G,G,G)},PI=function(t){return t.fold(Ct("before"),Ct("start"),Ct("end"),Ct("after"))},RI=function(t){return t.fold(_I.before,_I.before,_I.after,_I.after)},OI=function(t){return t.fold(_I.start,_I.start,_I.end,_I.end)},MI=function(t,e){return PI(t)===PI(e)&&II(t)===II(e)},FI=function(n,t,i,e,r,o){return _r(jD(t,i,e),jD(t,i,r),function(t,e){
return t!==e&&UD(i,t,e)?_I.after(n?t:e):o}).getOr(o)},$I=function(t,e){return t.fold(nt,function(t){return!MI(t,e)})},LI=function(e,n,i,r,t){var o=WD(e,t);return yp(e,i,o).map(m(WD,e)).fold(function(){return r.map(RI)},function(t){return AI(n,i,t).map(m(FI,e,n,i,o,t)).filter(m($I,r))}).filter(DI)},HI=function(t,e){return t?e.fold(V(at.some,_I.start),at.none,V(at.some,_I.after),at.none):e.fold(at.none,V(at.some,_I.before),at.none,V(at.some,_I.end))},BI=function(t,e,n,i){var r=WD(t,i),o=AI(e,n,r);return AI(e,n,r).bind(m(HI,t)).orThunk(function(){return LI(t,e,n,o,i)})};m(BI,!1),m(BI,!0);var zI,jI,UI=function(t){return q(t.selection.getSel().modify)},qI=function(t,e,n){var i=t?1:-1;return e.setRng(od(n.container(),n.offset()+i).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0},WI=function(t,e){var n=e.selection.getRng(),i=t?od.fromRangeEnd(n):od.fromRangeStart(n);return!!UI(e)&&(t&&xs(i)?qI(!0,e.selection,i):!(t||!Cs(i))&&qI(!1,e.selection,i))};(jI=zI||(zI={}))[jI.Br=0]="Br",jI[jI.Block=1]="Block",jI[jI.Wrap=2]="Wrap",jI[jI.Eol=3]="Eol";var VI,YI,KI=function(t,e){return t===sd.Backwards?Pt(e):e},GI=function(t,e,n){return t===sd.Forwards?e.next(n):e.prev(n)},XI=function(t,e,n,i){return fr(i.getNode(e===sd.Forwards))?zI.Br:!1===Hf(n,i)?zI.Block:zI.Wrap},QI=function(t,e,n,i){for(var r=dp(n),o=i,s=[];o;){var a=GI(e,r,o);if(!a)break;if(fr(a.getNode(!1)))return e===sd.Forwards?{positions:KI(e,s).concat([a]),breakType:zI.Br,breakAt:at.some(a)}:{positions:KI(e,s),breakType:zI.Br,breakAt:at.some(a)};if(a.isVisible()){if(t(o,a)){var u=XI(n,e,o,a);return{positions:KI(e,s),breakType:u,breakAt:at.some(a)}}s.push(a),o=a}else o=a}return{positions:KI(e,s),breakType:zI.Eol,breakAt:at.none()}},JI=function(n,i,r,t){return i(r,t).breakAt.map(function(t){var e=i(r,t).positions;return n===sd.Backwards?e.concat(t):[t].concat(e)}).getOr([])},ZI=function(t,o){return St(t,function(t,r){return t.fold(function(){return at.some(r)},function(i){return _r($t(i.getClientRects()),$t(r.getClientRects()),function(t,e){var n=Math.abs(o-t.left);return Math.abs(o-e.left)<=n?r:i}).or(t)})},at.none())},tP=function(e,t){return $t(t.getClientRects()).bind(function(t){return ZI(e,t.left)})},eP=m(QI,od.isAbove,-1),nP=m(QI,od.isBelow,1),iP=m(JI,-1,eP),rP=m(JI,1,nP),oP=function(t,e){return eP(t,e).breakAt.isNone()},sP=function(t,e){return nP(t,e).breakAt.isNone()},aP=function(e){return Sp(e).map(function(t){return[t].concat(nP(e,t).positions)}).getOr([])},uP=function(e){return Tp(e).map(function(t){return eP(e,t).positions.concat(t)}).getOr([])},lP=function(n){var t=function(t){return mt(t,function(t){var e=kc(t);return e.node=n,e})};if(Zi(n))return t(n.getClientRects());if(lr(n)){var e=n.ownerDocument.createRange();return e.setStart(n,0),e.setEnd(n,n.data.length),t(e.getClientRects())}},cP=function(t){return At(t,lP)};(YI=VI||(VI={}))[YI.Up=-1]="Up",YI[YI.Down=1]="Down";var dP,hP,fP=function(t,e,n,i){for(;i=$f(i,t,Ws,e);)if(n(i))return},pP=function(r,o,s,t,a,e){var u=0,l=[],n=function(t){var e=cP([t]);-1===r&&(e=e.reverse());for(var n=0;n<e.length;n++){var i=e[n];if(!s(i,c)){if(0<l.length&&o(i,ce(l))&&u++,i.line=u,a(i))return!0;l.push(i)}}},c=ce(e.getClientRects());if(!c)return l;var i=e.getNode();return n(i),fP(r,t,n,i),l},mP=function(t,e){return e.line>t},gP=function(t,e){return e.line===t},vP=m(pP,VI.Up,Nc,Dc),bP=m(pP,VI.Down,Dc,Nc),yP=function(t,e,n,i){var r,o,s,a,u=dp(e),l=[],c=0,d=function(t){return ce(t.getClientRects())};1===t?(r=u.next,o=Dc,s=Nc,a=od.after(i)):(r=u.prev,o=Nc,s=Dc,a=od.before(i));var h=d(a);do{if(a.isVisible()){var f=d(a);if(!s(f,h)){0<l.length&&o(f,ce(l))&&c++;var p=kc(f);if(p.position=a,p.line=c,n(p))return l;l.push(p)}}}while(a=r(a));return l},wP=function(e){return function(t){return mP(e,t)}},_P=function(e){return function(t){return gP(e,t)}},xP=gr,CP=$f,kP=function(t,e){return Math.abs(t.left-e)},SP=function(t,e){return Math.abs(t.right-e)},TP=function(t,e){return t>=e.left&&t<=e.right},EP=function(t,e){return t>=e.top&&t<=e.bottom},NP=function(t){return te(t,"node")},DP=function(t,r,o){return void 0===o&&(o=nt),ue(t,function(t,e){if(TP(r,e))return o(e)?e:t;if(TP(r,t))return o(t)?t:e;var n=Math.min(kP(t,r),SP(t,r)),i=Math.min(kP(e,r),SP(e,r));return i===n&&NP(e)&&xP(e.node)?e:i<n?e:t})},AP=function(t,e,n,i,r){var o=CP(i,t,Ws,e,!r);do{if(!o||n(o))return}while(o=CP(o,t,Ws,e))},IP=function(t,i,e){void 0===e&&(e=!0);var r=[],n=function(e,t){var n=bt(cP([t]),function(t){return!e(t,i)});return r=r.concat(n),0===n.length};return r.push(i),AP(VI.Up,t,m(n,Nc),i.node,e),AP(VI.Down,t,m(n,Dc),i.node,e),r},PP=function(t){return bt(Ht(t.getElementsByTagName("*")),Tf)},RP=function(t,e){return{node:t.node,before:kP(t,e)<SP(t,e)}},OP=function(t,e,n){var i=cP(PP(t)),r=bt(i,m(EP,n)),o=function(t){return!sr(t.node)&&!br(t.node)},s=DP(r,e,o);if(s){var a=o(s);if((s=DP(IP(t,s,a),e,o))&&Tf(s.node))return RP(s,e)}return null},MP=function(t,e){t.selection.setRng(e),Ev(t,t.selection.getRng())},FP=function(t,e,n){return at.some(OA(t,e,n))},$P=function(t,e,n,i,r,o){var s=e===sd.Forwards,a=dp(t.getBody()),u=m(Qf,s?a.next:a.prev),l=s?i:r;if(!n.collapsed){var c=Pc(n);if(o(c))return AA(e,t,c,e===sd.Backwards,!1)}var d=Kf(e,t.getBody(),n);if(l(d))return PA(t,d.getNode(!s));var h=WD(s,u(d)),f=As(n);if(!h)return f?at.some(n):at.none();if(l(h))return AA(e,t,h.getNode(!s),s,!1);var p=u(h);return p&&l(p)&&Jf(h,p)?AA(e,t,p.getNode(!s),s,!1):f?FP(t,h.toRange(),!1):at.none()},LP=function(e,t,n,i,r,o){var s=Kf(t,e.getBody(),n),a=ce(s.getClientRects()),u=t===VI.Down;if(!a)return at.none();var l,c=(u?bP:vP)(e.getBody(),wP(1),s),d=bt(c,_P(1)),h=a.left,f=DP(d,h);if(f&&o(f.node)){var p=Math.abs(h-f.left),m=Math.abs(h-f.right);return AA(t,e,f.node,p<m,!1)}if(l=i(s)?s.getNode():r(s)?s.getNode(!0):Pc(n)){var g=yP(t,e.getBody(),wP(1),l),v=DP(bt(g,_P(1)),h);if(v)return FP(e,v.position.toRange(),!1);if(v=ce(bt(g,_P(0))))return FP(e,v.position.toRange(),!1)}return 0===d.length?HP(e,u).filter(u?r:i).map(function(t){return OA(e,t.toRange(),!1)}):at.none()},HP=function(t,e){var n=t.selection.getRng(),i=t.getBody();if(e){var r=od.fromRangeEnd(n),o=nP(i,r);return Lt(o.positions)}r=od.fromRangeStart(n),o=eP(i,r);return $t(o.positions)},BP=function(e,t,n){return HP(e,t).filter(n).exists(function(t){return e.selection.setRng(t.toRange()),!0})},zP=function(t,e){var n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},jP=function(t,e){t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},UP=function(e,t,n){return yI(t,n).map(function(t){return zP(e,t),n})},qP=function(e,n,t){var i=e.getBody(),r=od.fromRangeStart(e.selection.getRng()),o=m(HD,e);return BI(t,o,i,r).bind(function(t){return UP(e,n,t)})},WP=function(t,e,n){var i=mt(tc(An.fromDom(e.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(t){return t.dom}),r=bt(i,t),o=bt(n,t);kt(Rt(r,o),m(jP,!1)),kt(Rt(o,r),m(jP,!0))},VP=function(t,e){if(t.selection.isCollapsed()&&!0!==t.composing&&e.get()){var n=od.fromRangeStart(t.selection.getRng());od.isTextPosition(n)&&!1===qD(n)&&(zP(t,pf(e.get(),n)),e.set(null))}},YP=function(e,n,i,t){if(n.selection.isCollapsed()){var r=bt(t,e);kt(r,function(){var t=od.fromRangeStart(n.selection.getRng());AI(e,n.getBody(),t).bind(function(t){return UP(n,i,t)})})}},KP=function(t,e,n){return!!Rh(t)&&qP(t,e,n).isSome()},GP=function(t,e){return!!Rh(e)&&WI(t,e)},XP=function(e){var n=Al(null),i=m(HD,e);return e.on("NodeChange",function(t){!Rh(e)||yn.browser.isIE()&&t.initial||(WP(i,e.dom,t.parents),VP(e,n),YP(i,e,n,t.parents))}),n},QP=m(GP,!0),JP=m(GP,!1),ZP=function(n,e,i){if(Rh(n)){var t=HP(n,e).getOrThunk(function(){var t=n.selection.getRng();return e?od.fromRangeEnd(t):od.fromRangeStart(t)});return AI(m(HD,n),n.getBody(),t).exists(function(t){var e=RI(t);return yI(i,e).exists(function(t){return zP(n,t),!0})})}return!1},tR=function(t,e){var n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(e.container(),e.offset()),n},eR=function(r){return _r(Sp(r),Tp(r),function(t,e){var n=WD(!0,t),i=WD(!1,e);return Cp(r,n).forall(function(t){return t.isEqual(i)})}).getOr(!0)},nR=function(e,n){return function(t){return yI(n,t).exists(function(t){return zP(e,t),!0})}},iR=function(t,e,n,i){var r=t.getBody(),o=m(HD,t);t.undoManager.ignore(function(){t.selection.setRng(tR(n,i)),t.execCommand("Delete"),AI(o,r,od.fromRangeStart(t.selection.getRng())).map(OI).map(nR(t,e))}),t.nodeChanged()},rR=function(t,e){var n=Lf(e,t);return n||t},oR=function(n,i,r,o){var s=rR(n.getBody(),o.container()),a=m(HD,n),u=AI(a,s,o);return u.bind(function(t){return r?t.fold(Ct(at.some(OI(t))),at.none,Ct(at.some(RI(t))),at.none):t.fold(at.none,Ct(at.some(RI(t))),at.none,Ct(at.some(OI(t))))}).map(nR(n,i)).getOrThunk(function(){var t=wp(r,s,o),e=t.bind(function(t){return AI(a,s,t)});return _r(u,e,function(){return jD(a,s,o).exists(function(t){return!!eR(t)&&(n_(n,r,An.fromDom(t)),!0)})}).orThunk(function(){return e.bind(function(){return t.map(function(t){return r?iR(n,i,o,t):iR(n,i,t,o),!0})})}).getOr(!1)})},sR=function(t,e,n){if(t.selection.isCollapsed()&&Rh(t)){var i=od.fromRangeStart(t.selection.getRng());return oR(t,e,n,i)}return!1},aR=function(t,e){var n=Xy(e,t);return Nt(n,Zo).fold(Ct(n),function(t){return n.slice(0,t)})},uR=function(t){return 1===vi(t)},lR=function(t,e,n,i){var r=m(EC,e),o=mt(bt(i,r),function(t){return t.dom});if(0===o.length)n_(e,t,n);else{var s=TC(n.dom,o);e.selection.setRng(s.toRange())}},cR=function(n,i){var t=An.fromDom(n.getBody()),e=An.fromDom(n.selection.getStart()),r=bt(aR(t,e),uR);return Lt(r).exists(function(t){var e=od.fromRangeStart(n.selection.getRng());return!(!ZD(i,e,t.dom)||NC(t))&&(lR(i,n,t,r),!0)})},dR=function(t,e){return!!t.selection.isCollapsed()&&cR(t,e)},hR=function(t,e,n){return t._selectionOverrides.hideFakeCaret(),n_(t,e,An.fromDom(n)),!0},fR=function(e,n){var i=n?$y:Ly,t=n?sd.Forwards:sd.Backwards,r=Kf(t,e.getBody(),e.selection.getRng());return i(r)?hR(e,n,r.getNode(!n)):at.from(WD(n,r)).filter(function(t){return i(t)&&Jf(r,t)}).exists(function(t){return hR(e,n,t.getNode(!n))})},pR=function(t,e){var n=t.selection.getNode();return!!br(n)&&hR(t,e,n)},mR=function(t,e){return t.selection.isCollapsed()?fR(t,e):pR(t,e)},gR=function(t){return Do(t,function(t){return mr(t.dom)||gr(t.dom)}).exists(function(t){return mr(t.dom)})},vR=function(t){var e=parseInt(t,10);return isNaN(e)?0:e},bR=function(t,e){return(t||ts(e)?"margin":"padding")+("rtl"===Mr(e,"direction")?"-right":"-left")},yR=function(t,e,n,i,r,o){var s=bR(n,An.fromDom(o));if("outdent"===e){var a=Math.max(0,vR(o.style[s])-i);t.setStyle(o,s,a?a+r:"")}else{a=vR(o.style[s])+i+r;t.setStyle(o,s,a)}},wR=function(i,t){return It(t,function(t){var e=bR(wh(i),t),n=$r(t,e).map(vR).getOr(0);return"false"!==i.dom.getContentEditable(t.dom)&&0<n})},_R=function(t){var e=kR(t);return!t.mode.isReadOnly()&&(1<e.length||wR(t,e))},xR=function(t){return rs(t)||os(t)},CR=function(t){return si(t).exists(xR)},kR=function(t){return bt(mc(t.selection.getSelectedBlocks()),function(t){return!xR(t)&&!CR(t)&&gR(t)})},SR=function(t,e){var n=t.dom,i=t.selection,r=t.formatter,o=_h(t),s=/[a-z%]+$/i.exec(o)[0],a=parseInt(o,10),u=wh(t),l=Jd(t);t.queryCommandState("InsertUnorderedList")||t.queryCommandState("InsertOrderedList")||""!==l||n.getParent(i.getNode(),n.isBlock)||r.apply("div"),kt(kR(t),function(t){yR(n,e,u,a,s,t.dom)})},TR=function(t){if(t.selection.isCollapsed()&&_R(t)){var e=t.dom,n=t.selection.getRng(),i=od.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&ew(An.fromDom(r),i))return SR(t,"outdent"),!0}return!1},ER=function(t,e){t.getDoc().execCommand(e,!1,null)},NR=function(t,e){TR(t)||oI(t,!1)||BA(t,!1)||sR(t,e,!1)||wA(t,!1)||J_(t)||aI(t,!1)||mR(t,!1)||EA(t)||dR(t,!1)||(ER(t,"Delete"),JD(t))},DR=function(t,e){oI(t,!0)||BA(t,!0)||sR(t,e,!0)||wA(t,!0)||J_(t)||aI(t,!0)||mR(t,!0)||EA(t)||dR(t,!0)||ER(t,"ForwardDelete")},AR=function(t,e){t.addCommand("delete",function(){NR(t,e)}),t.addCommand("forwardDelete",function(){DR(t,e)})},IR=5,PR=400,RR=function(t){return t.touches===undefined||1!==t.touches.length?at.none():at.some(t.touches[0])},OR=function(t,e){var n=Math.abs(t.clientX-e.x),i=Math.abs(t.clientY-e.y);return IR<n||IR<i},MR=function(n){var i=Hl(),r=Al(!1),o=zl(function(t){n.fire("longpress",de(de({},t),{type:"longpress"})),r.set(!0)},PR);n.on("touchstart",function(n){RR(n).each(function(t){o.cancel();var e={x:t.clientX,y:t.clientY,target:n.target};o.throttle(n),r.set(!1),i.set(e)})},!0),n.on("touchmove",function(t){o.cancel(),RR(t).each(function(e){i.on(function(t){OR(e,t)&&(i.clear(),r.set(!1),n.fire("longpresscancel"))})})},!0),n.on("touchend touchcancel",function(e){o.cancel(),"touchcancel"!==e.type&&i.get().filter(function(t){return t.target.isEqualNode(e.target)}).each(function(){r.get()?e.preventDefault():n.fire("tap",de(de({},e),{type:"tap"}))})},!0)},FR=function(t,e){return Zt(t,e.nodeName)},$R=function(t,e){return!!lr(e)||!!Zi(e)&&(!FR(t,e)&&!Xp(e))},LR=function(e,t,n){return pt(Gy(An.fromDom(n),An.fromDom(t)),function(t){return FR(e,t.dom)})},HR=function(t,e){if(lr(e)){if(0===e.nodeValue.length)return!0;if(/^\s+$/.test(e.nodeValue)&&(!e.nextSibling||FR(t,e.nextSibling)))return!0}return!1},BR=function(t){var e,n,i,r=t.dom,o=t.selection,s=t.schema,a=s.getBlockElements(),u=o.getStart(),l=t.getBody(),c=Jd(t);if(u&&Zi(u)&&c){var d=l.nodeName.toLowerCase();if(s.isValidChild(d,c.toLowerCase())&&!LR(a,l,u)){var h=o.getRng(),f=h.startContainer,p=h.startOffset,m=h.endContainer,g=h.endOffset,v=Eb(t);for(u=l.firstChild;u;)if($R(a,u)){if(HR(a,u)){u=(n=u).nextSibling,r.remove(n);continue}e||(e=r.create(c,Zd(t)),u.parentNode.insertBefore(e,u),i=!0),u=(n=u).nextSibling,e.appendChild(n)}else e=null,u=u.nextSibling;i&&v&&(h.setStart(f,p),h.setEnd(m,g),o.setRng(h),t.nodeChanged())}}},zR=function(t){Jd(t)&&t.on("NodeChange",m(BR,t))},jR=function(t){return Ro(An.fromDom(t.getBody()),"*[data-mce-caret]").map(function(t){return t.dom}).getOrNull()},UR=function(t){t.selection.setRng(t.selection.getRng())},qR=function(t,e){e.hasAttribute("data-mce-caret")&&(Ds(e),UR(t),t.selection.scrollIntoView(e))},WR=function(t,e){var n=jR(t);if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void qR(t,n)):void(ws(n)&&(qR(t,n),t.undoManager.add()))},VR=function(t){t.on("keyup compositionstart",m(WR,t))},YR=gr,KR=function(t,e,n){return $P(e,t,n,zy,jy,YR)},GR=function(t,e,n){return LP(e,t,n,function(t){return zy(t)||Hy(t)},function(t){return jy(t)||By(t)},YR)},XR=function(t){var e=t.dom.create(Jd(t));return(!yn.ie||11<=yn.ie)&&(e.innerHTML='<br data-mce-bogus="1">'),e},QR=function(t,e,n){var i=dp(t.getBody()),r=m(Qf,1===e?i.next:i.prev);if(n.collapsed&&Wh(t)){var o=t.dom.getParent(n.startContainer,"PRE");if(!o)return;if(!r(od.fromRangeStart(n))){var s=XR(t);1===e?t.$(o).after(s):t.$(o).before(s),t.selection.select(s,!0),t.selection.collapse()}}},JR=function(t,e){var n=e?sd.Forwards:sd.Backwards,i=t.selection.getRng();return KR(n,t,i).orThunk(function(){return QR(t,n,i),at.none()})},ZR=function(t,e){var n=e?1:-1,i=t.selection.getRng();return GR(n,t,i).orThunk(function(){return QR(t,n,i),at.none()})},tO=function(e,t){return JR(e,t).exists(function(t){return MP(e,t),!0})},eO=function(e,t){return ZR(e,t).exists(function(t){return MP(e,t),!0})},nO=function(t,e){return BP(t,e,e?jy:zy)},iO=function(t){return ft(["figcaption"],Yn(t))},rO=function(t){var e=document.createRange();return e.setStartBefore(t.dom),e.setEndBefore(t.dom),e},oO=function(t,e,n){n?Ii(t,e):Ai(t,e)},sO=function(t,e){var n=An.fromTag("br");return oO(t,n,e),rO(n)},aO=function(t,e,n,i){var r=An.fromTag(n),o=An.fromTag("br");return Er(r,i),Ii(r,o),oO(t,r,e),rO(o)},uO=function(t,e,n,i){return""===e?sO(t,i):aO(t,i,e,n)},lO=function(t,e){var n=m(Un,e);return Do(An.fromDom(t.container()),Zo,n).filter(iO)},cO=function(t,e,n){return e?sP(t.dom,n):oP(t.dom,n)},dO=function(e,n){var i=An.fromDom(e.getBody()),r=od.fromRangeStart(e.selection.getRng()),o=Jd(e),s=Zd(e);return lO(r,i).exists(function(){if(cO(i,n,r)){var t=uO(i,o,s,n);return e.selection.setRng(t),!0}return!1})},hO=function(t,e){return!!t.selection.isCollapsed()&&dO(t,e)},fO=function(t){return mt(t,function(t){return de({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:xt},t)})},pO=function(t,e){return e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey},mO=function(t,e){return At(fO(t),function(t){return pO(t,e)?[t]:[]})},gO=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(null,e)}},vO=function(t,e){return Et(mO(t,e),function(t){return t.action()})},bO=function(e,t){var n=t?sd.Forwards:sd.Backwards,i=e.selection.getRng();return $P(e,n,i,$y,Ly,br).exists(function(t){return MP(e,t),!0})},yO=function(e,t){var n=t?1:-1,i=e.selection.getRng();return LP(e,n,i,$y,Ly,br).exists(function(t){return MP(e,t),!0})},wO=function(t,e){return BP(t,e,e?Ly:$y)},_O=function(t,e){return{left:t.left-e,top:t.top-e,right:t.right+2*e,bottom:t.bottom+2*e,width:t.width+e,height:t.height+e}},xO=function(n,t){return At(t,function(t){var e=_O(kc(t.getBoundingClientRect()),-1);return[{x:e.left,y:n(e),cell:t},{x:e.right,y:n(e),cell:t}]})},CO=function(t,r,o){return St(t,function(t,i){return t.fold(function(){return at.some(i)},function(t){var e=Math.sqrt(Math.abs(t.x-r)+Math.abs(t.y-o)),n=Math.sqrt(Math.abs(i.x-r)+Math.abs(i.y-o));return at.some(n<e?i:t)})},at.none())},kO=function(t,e,n,i,r){var o=tc(An.fromDom(n),"td,th,caption").map(function(t){return t.dom}),s=bt(xO(t,o),function(t){return e(t,r)});return CO(s,i,r).map(function(t){return t.cell})},SO=function(t){return t.top},TO=function(t,e){return t.y>e},EO=m(kO,function(t){return t.bottom},function(t,e){return t.y<e}),NO=m(kO,SO,TO),DO=function(e,n){return $t(n.getClientRects()).bind(function(t){return EO(e,t.left,t.top)}).bind(function(t){return tP(uP(t),n)})},AO=function(e,n){return Lt(n.getClientRects()).bind(function(t){return NO(e,t.left,t.top)}).bind(function(t){return tP(aP(t),n)})},IO=function(e,n,t){return t.breakAt.exists(function(t){return e(n,t).breakAt.isSome()})},PO=function(t){return t.breakType===zI.Wrap&&0===t.positions.length},RO=function(t){return t.breakType===zI.Br&&1===t.positions.length},OO=function(t,e,n){var i=t(e,n);return PO(i)||!fr(n.getNode())&&RO(i)?!IO(t,e,i):i.breakAt.isNone()},MO=m(OO,eP),FO=m(OO,nP),$O=function(t,e,n){var i=od.fromRangeStart(e);return xp(!t,n).exists(function(t){return t.isEqual(i)})},LO=function(e,t,n){var i=e.selection.getRng(),r=t?1:-1;return!(!kf()||!$O(t,i,n))&&(AA(r,e,n,!t,!1).each(function(t){MP(e,t)}),!0)},HO=function(e,n,t){return DO(n,t).orThunk(function(){return $t(t.getClientRects()).bind(function(t){return ZI(iP(e,od.before(n)),t.left)})}).getOr(od.before(n))},BO=function(e,n,t){return AO(n,t).orThunk(function(){return $t(t.getClientRects()).bind(function(t){return ZI(rP(e,od.after(n)),t.left)})}).getOr(od.after(n))},zO=function(t,e){var n=e.getNode(t);return Zi(n)&&"TABLE"===n.nodeName?at.some(n):at.none()},jO=function(n,i,r,t){var o=Jd(i);o?i.undoManager.transact(function(){var t=An.fromTag(o);Er(t,Zd(i)),Ii(t,An.fromTag("br")),n?Di(An.fromDom(r),t):Ni(An.fromDom(r),t);var e=i.dom.createRng();e.setStart(t.dom,0),e.setEnd(t.dom,0),MP(i,e)}):MP(i,t.toRange())},UO=function(e,n,i){var t=zO(!!n,i),r=!1===n;t.fold(function(){return MP(e,i.toRange())},function(t){return xp(r,e.getBody()).filter(function(t){return t.isEqual(i)}).fold(function(){return MP(e,i.toRange())},function(){return jO(n,e,t,i)})})},qO=function(t,e,n,i){var r=t.selection.getRng(),o=od.fromRangeStart(r),s=t.getBody();if(!e&&MO(i,o)){var a=HO(s,n,o);return UO(t,e,a),!0}if(e&&FO(i,o)){a=BO(s,n,o);return UO(t,e,a),!0}return!1},WO=function(n,i,r){return at.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(e){return at.from(n.dom.getParent(e,"table")).map(function(t){return r(n,i,t,e)})}).getOr(!1)},VO=function(t,e){return WO(t,e,LO)},YO=function(t,e){return WO(t,e,qO)},KO=function(t,e,n){var i=cn().os;vO([{keyCode:Eg.RIGHT,action:gO(tO,t,!0)},{keyCode:Eg.LEFT,action:gO(tO,t,!1)},{keyCode:Eg.UP,action:gO(eO,t,!1)},{keyCode:Eg.DOWN,action:gO(eO,t,!0)},{keyCode:Eg.RIGHT,action:gO(VO,t,!0)},{keyCode:Eg.LEFT,action:gO(VO,t,!1)},{keyCode:Eg.UP,action:gO(YO,t,!1)},{keyCode:Eg.DOWN,action:gO(YO,t,!0)},{keyCode:Eg.RIGHT,action:gO(bO,t,!0)},{keyCode:Eg.LEFT,action:gO(bO,t,!1)},{keyCode:Eg.UP,action:gO(yO,t,!1)},{keyCode:Eg.DOWN,action:gO(yO,t,!0)},{keyCode:Eg.RIGHT,action:gO(KP,t,e,!0)},{keyCode:Eg.LEFT,action:gO(KP,t,e,!1)},{keyCode:Eg.RIGHT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:gO(QP,t,e)},{keyCode:Eg.LEFT,ctrlKey:!i.isOSX(),altKey:i.isOSX(),action:gO(JP,t,e)},{keyCode:Eg.UP,action:gO(hO,t,!1)},{keyCode:Eg.DOWN,action:gO(hO,t,!0)}],n).each(function(){n.preventDefault()})},GO=function(e,n){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&KO(e,n,t)})},XO=function(t,e,n){vO([{keyCode:Eg.BACKSPACE,action:gO(TR,t,!1)},{keyCode:Eg.BACKSPACE,action:gO(oI,t,!1)},{keyCode:Eg.DELETE,action:gO(oI,t,!0)},{keyCode:Eg.BACKSPACE,action:gO(BA,t,!1)},{keyCode:Eg.DELETE,action:gO(BA,t,!0)},{keyCode:Eg.BACKSPACE,action:gO(sR,t,e,!1)},{keyCode:Eg.DELETE,action:gO(sR,t,e,!0)},{keyCode:Eg.BACKSPACE,action:gO(J_,t,!1)},{keyCode:Eg.DELETE,action:gO(J_,t,!0)},{keyCode:Eg.BACKSPACE,action:gO(aI,t,!1)},{keyCode:Eg.DELETE,action:gO(aI,t,!0)},{keyCode:Eg.BACKSPACE,action:gO(mR,t,!1)},{keyCode:Eg.DELETE,action:gO(mR,t,!0)},{keyCode:Eg.BACKSPACE,action:gO(EA,t,!1)},{keyCode:Eg.DELETE,action:gO(EA,t,!0)},{keyCode:Eg.BACKSPACE,action:gO(wA,t,!1)},{keyCode:Eg.DELETE,action:gO(wA,t,!0)},{keyCode:Eg.BACKSPACE,action:gO(dR,t,!1)},{keyCode:Eg.DELETE,action:gO(dR,t,!0)}],n).each(function(){n.preventDefault()})},QO=function(t,e){vO([{keyCode:Eg.BACKSPACE,action:gO(rI,t)},{keyCode:Eg.DELETE,action:gO(rI,t)}],e)},JO=function(e,n){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&XO(e,n,t)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&QO(e,t)})},ZO=function(t){for(;t;){if(1===t.nodeType||3===t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}},tM=function(t,e){var n,i=e,r=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(e){if(/^(LI|DT|DD)$/.test(e.nodeName)){var s=ZO(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(r.doc.createTextNode(ds),e.firstChild)}var a=r.createRng();if(e.normalize(),e.hasChildNodes()){for(var u=new Uo(e,e);n=u.current();){if(lr(n)){a.setStart(n,0),a.setEnd(n,0);break}if(o[n.nodeName.toLowerCase()]){a.setStartBefore(n),a.setEndBefore(n);break}i=n,n=u.next()}n||(a.setStart(i,0),a.setEnd(i,0))}else fr(e)?e.nextSibling&&r.isBlock(e.nextSibling)?(a.setStartBefore(e),a.setEndBefore(e)):(a.setStartAfter(e),a.setEndAfter(e)):(a.setStart(e,0),a.setEnd(e,0));t.selection.setRng(a),Ev(t,a)}},eM=function(t,e){var n,i,r=t.getRoot();for(n=e;n!==r&&"false"!==t.getContentEditable(n);)"true"===t.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==r?i:r},nM=function(t){return at.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))},iM=function(t){return nM(t).fold(Ct(""),function(t){return t.nodeName.toUpperCase()})},rM=function(t){return nM(t).filter(function(t){return os(An.fromDom(t))}).isSome()},oM=function(t,e){return t.firstChild&&t.firstChild.nodeName===e},sM=function(t){var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.firstChild)===t},aM=function(t,e){return t&&t.parentNode&&t.parentNode.nodeName===e},uM=function(t){return t&&/^(OL|UL|LI)$/.test(t.nodeName)},lM=function(t){return uM(t)&&uM(t.parentNode)},cM=function(t){var e=t.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:t},dM=function(t,e,n){for(var i=t[n?"firstChild":"lastChild"];i&&!Zi(i);)i=i[n?"nextSibling":"previousSibling"];return i===e},hM=function(t,e,n,i,r){var o=t.dom,s=t.selection.getRng();if(n!==t.getBody()){lM(n)&&(r="LI");var a=r?e(r):o.create("BR");if(dM(n,i,!0)&&dM(n,i,!1))if(aM(n,"LI")){var u=cM(n);o.insertAfter(a,u),sM(n)?o.remove(u):o.remove(n)}else o.replace(a,n);else if(dM(n,i,!0))aM(n,"LI")?(o.insertAfter(a,cM(n)),a.appendChild(o.doc.createTextNode(" ")),a.appendChild(n)):n.parentNode.insertBefore(a,n),o.remove(i);else if(dM(n,i,!1))o.insertAfter(a,cM(n)),o.remove(i);else{n=cM(n);var l=s.cloneRange();l.setStartAfter(i),l.setEndAfter(n);var c=l.extractContents();"LI"===r&&oM(c,"LI")?(a=c.firstChild,o.insertAfter(c,n)):(o.insertAfter(c,n),o.insertAfter(a,n)),o.remove(i)}tM(t,a)}},fM=function(t){kt(Zl(An.fromDom(t),Jn),function(t){var e=t.dom;e.nodeValue=ps(e.nodeValue)})},pM=function(t,e){return e&&"A"===e.nodeName&&t.isEmpty(e)},mM=function(t){return t&&/^(TD|TH|CAPTION)$/.test(t.nodeName)},gM=function(t){t.innerHTML='<br data-mce-bogus="1">'},vM=function(t,e){return t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e},bM=function(t,e){return e&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e)},yM=function(t,e,n){var i,r=n,o=[];if(r){for(;r=r.firstChild;){if(t.isBlock(r))return;Zi(r)&&!e[r.nodeName.toLowerCase()]&&o.push(r)}for(i=o.length;i--;)!(r=o[i]).hasChildNodes()||r.firstChild===r.lastChild&&""===r.firstChild.nodeValue?t.remove(r):pM(t,r)&&t.remove(r)}},wM=function(t,e,n){return!1===lr(e)?n:t?1===n&&e.data.charAt(n-1)===hs?0:n:n===e.data.length-1&&e.data.charAt(n)===hs?e.data.length:n},_M=function(t){var e=t.cloneRange();return e.setStart(t.startContainer,wM(!0,t.startContainer,t.startOffset)),e.setEnd(t.endContainer,wM(!1,t.endContainer,t.endOffset)),e},xM=function(t){for(;lr(t)&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild;);},CM=function(t,e){var n,i,r=t.getRoot();for(n=e;n!==r&&"false"!==t.getContentEditable(n);)"true"===t.getContentEditable(n)&&(i=n),n=n.parentNode;return n!==r?i:r},kM=function(t,r,e){var o=t.dom;at.from(e.style).map(o.parseStyle).each(function(t){var e=Lr(An.fromDom(r)),n=de(de({},e),t);o.setStyles(r,n)});var n=at.from(e["class"]).map(function(t){return t.split(/\s+/)}),i=at.from(r.className).map(function(t){return bt(t.split(/\s+/),function(t){return""!==t})});_r(n,i,function(e,t){var n=bt(t,function(t){return!ft(e,t)}),i=l(l([],e,!0),n,!0);o.setAttrib(r,"class",i.join(" "))});var s=["style","class"],a=Gt(e,function(t,e){return!ft(s,e)});o.setAttribs(r,a)},SM=function(t,e){var n=Jd(t);if(n&&n.toLowerCase()===e.tagName.toLowerCase()){var i=Zd(t);kM(t,e,i)}},TM=function(t,e,n,i,r){var o,s,a,u,l,c,d=e||"P",h=t.dom,f=CM(h,i);if(!(s=h.getParent(i,h.isBlock))||!bM(h,s)){if(c=(s=s||f)===t.getBody()||mM(s)?s.nodeName.toLowerCase():s.parentNode.nodeName.toLowerCase(),!s.hasChildNodes())return o=h.create(d),SM(t,o),s.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(u=i;u.parentNode!==s;)u=u.parentNode;for(;u&&!h.isBlock(u);)u=(a=u).previousSibling;if(a&&t.schema.isValidChild(c,d.toLowerCase())){for(o=h.create(d),SM(t,o),a.parentNode.insertBefore(o,a),u=a;u&&!h.isBlock(u);)l=u.nextSibling,o.appendChild(u),u=l;n.setStart(i,r),n.setEnd(i,r)}}return i},EM=function(t,e){e.normalize();var n=e.lastChild;n&&!/^(left|right)$/gi.test(t.getStyle(n,"float",!0))||t.add(e,"br")},NM=function(s,t){var e,a,o,u,n,i,r,l,c,d,h=s.dom,f=s.schema,p=f.getNonEmptyElements(),m=s.selection.getRng(),g=function(t){var e,n,i,r=a,o=f.getTextInlineElements();if(i=e=t||"TABLE"===l||"HR"===l?h.create(t||c):u.cloneNode(!1),!1===nh(s))h.setAttrib(e,"style",null),h.setAttrib(e,"class",null);else do{if(o[r.nodeName]){if(Np(r)||Xp(r))continue;n=r.cloneNode(!1),h.setAttrib(n,"id",""),e.hasChildNodes()?n.appendChild(e.firstChild):i=n,e.appendChild(n)}}while((r=r.parentNode)&&r!==_);return SM(s,e),gM(i),e},v=function(t){var e,n,i=wM(t,a,o);if(lr(a)&&(t?0<i:i<a.nodeValue.length))return!1;if(a.parentNode===u&&d&&!t)return!0;if(t&&Zi(a)&&a===u.firstChild)return!0;if(vM(a,"TABLE")||vM(a,"HR"))return d&&!t||!d&&t;var r=new Uo(a,u);for(lr(a)&&(t&&0===i?r.prev():t||i!==a.nodeValue.length||r.next());e=r.current();){if(Zi(e)){if(!e.getAttribute("data-mce-bogus")&&(n=e.nodeName.toLowerCase(),p[n]&&"br"!==n))return!1}else if(lr(e)&&!Ys(e.nodeValue))return!1;t?r.prev():r.next()}return!0},b=function(){n=/^(H[1-6]|PRE|FIGURE)$/.test(l)&&"HGROUP"!==x?g(c):g(),ih(s)&&bM(h,r)&&h.isEmpty(u)?n=h.split(r,u):h.insertAfter(n,u),tM(s,n)};Yg(h,m).each(function(t){m.setStart(t.startContainer,t.startOffset),m.setEnd(t.endContainer,t.endOffset)}),a=m.startContainer,o=m.startOffset,c=Jd(s);var y=!(!t||!t.shiftKey),w=!(!t||!t.ctrlKey);Zi(a)&&a.hasChildNodes()&&(d=o>a.childNodes.length-1,a=a.childNodes[Math.min(o,a.childNodes.length-1)]||a,o=d&&lr(a)?a.nodeValue.length:0);var _=CM(h,a);if(_){(c&&!y||!c&&y)&&(a=TM(s,c,m,a,o)),u=h.getParent(a,h.isBlock),r=u?h.getParent(u.parentNode,h.isBlock):null,l=u?u.nodeName.toUpperCase():"";var x=r?r.nodeName.toUpperCase():"";"LI"!==x||w||(r=(u=r).parentNode,l=x),/^(LI|DT|DD)$/.test(l)&&h.isEmpty(u)?hM(s,g,r,u,c):c&&u===s.getBody()||(c=c||"P",vs(u)?(n=Ds(u),h.isEmpty(u)&&gM(u),SM(s,n),tM(s,n)):v()?b():v(!0)?(n=u.parentNode.insertBefore(g(),u),tM(s,vM(u,"HR")?n:u)):((e=_M(m).cloneRange()).setEndAfter(u),i=e.extractContents(),fM(i),xM(i),n=i.firstChild,h.insertAfter(i,u),yM(h,p,n),EM(h,u),h.isEmpty(u)&&gM(u),n.normalize(),h.isEmpty(n)?(h.remove(n),b()):(SM(s,n),tM(s,n))),h.setAttrib(n,"id",""),s.fire("NewBlock",{newBlock:n}))}},DM=function(t,e,n){for(var i,r=new Uo(e,n),o=t.getNonEmptyElements();i=r.next();)if(o[i.nodeName.toLowerCase()]||0<i.length)return!0},AM=function(t,e,n){var i=t.dom.createRng();n?(i.setStartBefore(e),i.setEndBefore(e)):(i.setStartAfter(e),i.setEndAfter(e)),t.selection.setRng(i),Ev(t,i)},IM=function(t,e){var n,i,r=t.selection,o=t.dom,s=r.getRng();Yg(o,s).each(function(t){s.setStart(t.startContainer,t.startOffset),s.setEnd(t.endContainer,t.endOffset)});var a=s.startOffset,u=s.startContainer;if(1===u.nodeType&&u.hasChildNodes()){var l=a>u.childNodes.length-1;u=u.childNodes[Math.min(a,u.childNodes.length-1)]||u,a=l&&3===u.nodeType?u.nodeValue.length:0}var c=o.getParent(u,o.isBlock),d=c?o.getParent(c.parentNode,o.isBlock):null,h=d?d.nodeName.toUpperCase():"",f=!(!e||!e.ctrlKey);"LI"!==h||f||(c=d),u&&3===u.nodeType&&a>=u.nodeValue.length&&(DM(t.schema,u,c)||(n=o.create("br"),s.insertNode(n),s.setStartAfter(n),s.setEndAfter(n),i=!0)),n=o.create("br"),dd(o,s,n),AM(t,n,i),t.undoManager.add()},PM=function(t,e){var n=An.fromTag("br");Ni(An.fromDom(e),n),t.undoManager.add()},RM=function(t,e){MM(t.getBody(),e)||Di(An.fromDom(e),An.fromTag("br"));var n=An.fromTag("br");Di(An.fromDom(e),n),AM(t,n.dom,!1),t.undoManager.add()},OM=function(t){return fr(t.getNode())},MM=function(t,e){return!!OM(od.after(e))||Cp(t,od.after(e)).map(function(t){return fr(t.getNode())}).getOr(!1)},FM=function(t){return t&&"A"===t.nodeName&&"href"in t},$M=function(t){return t.fold(et,FM,FM,et)},LM=function(t){var e=m(HD,t),n=od.fromRangeStart(t.selection.getRng());return AI(e,t.getBody(),n).filter($M)},HM=function(t,e){e.fold(xt,m(PM,t),m(RM,t),xt)},BM=function(t,e){var n=LM(t);n.isSome()?n.each(m(HM,t)):IM(t,e)},zM=function(t,e){return nM(t).filter(function(t){return 0<e.length&&Hn(An.fromDom(t),e)}).isSome()},jM=function(t){return zM(t,th(t))},UM=function(t){return zM(t,eh(t))},qM=so.generate([{br:[]},{block:[]},{none:[]}]),WM=function(t){return UM(t)},VM=function(e){return function(t){return""===Jd(t)===e}},YM=function(e){return function(t){return rM(t)===e}},KM=function(e,n){return function(t){return iM(t)===e.toUpperCase()===n}},GM=function(t){return KM("pre",t)},XM=function(){return KM("summary",!0)},QM=function(e){return function(t){return Qd(t)===e}},JM=function(t){return jM(t)},ZM=function(t,e){return e},tF=function(t){var e=Jd(t),n=eM(t.dom,t.selection.getStart());return n&&t.schema.isValidChild(n.nodeName,e||"P")},eF=function(t,e){return function(n,i){return St(t,function(t,e){return t&&e(n,i)},!0)?at.some(e):at.none()}},nF=function(t,e){return wI([eF([WM],qM.none()),eF([XM()],qM.br()),eF([GM(!0),QM(!1),ZM],qM.br()),eF([GM(!0),QM(!1)],qM.block()),eF([GM(!0),QM(!0),ZM],qM.block()),eF([GM(!0),QM(!0)],qM.br()),eF([YM(!0),ZM],qM.br()),eF([YM(!0)],qM.block()),eF([VM(!0),ZM,tF],qM.block()),eF([VM(!0)],qM.br()),eF([JM],qM.br()),eF([VM(!1),ZM],qM.br()),eF([tF],qM.block())],[t,!(!e||!e.shiftKey)]).getOr(qM.none())},iF=function(t,e){nF(t,e).fold(function(){BM(t,e)},function(){NM(t,e)},xt)},rF=function(t,e){e.isDefaultPrevented()||(e.preventDefault(),FS(t.undoManager),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),iF(t,e)}))},oF=function(e){e.on("keydown",function(t){t.keyCode===Eg.ENTER&&rF(e,t)})},sF=function(t,e,n){vO([{keyCode:Eg.END,action:gO(nO,t,!0)},{keyCode:Eg.HOME,action:gO(nO,t,!1)},{keyCode:Eg.END,action:gO(wO,t,!0)},{keyCode:Eg.HOME,action:gO(wO,t,!1)
},{keyCode:Eg.END,action:gO(ZP,t,!0,e)},{keyCode:Eg.HOME,action:gO(ZP,t,!1,e)}],n).each(function(){n.preventDefault()})},aF=function(e,n){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&sF(e,n,t)})},uF=cn().browser,lF=function(t){var e=Bl(function(){t.composing||Pw(t)},0);uF.isIE()&&(t.on("keypress",function(){e.throttle()}),t.on("remove",function(){e.cancel()}))},cF=function(e){lF(e),e.on("input",function(t){!1===t.isComposing&&Pw(e)})},dF=cn(),hF=function(t,e,n){vO([{keyCode:Eg.PAGE_UP,action:gO(ZP,t,!1,e)},{keyCode:Eg.PAGE_DOWN,action:gO(ZP,t,!0,e)}],n)},fF=function(t){return t.stopImmediatePropagation()},pF=function(t){return t.keyCode===Eg.PAGE_UP||t.keyCode===Eg.PAGE_DOWN},mF=function(t,e,n){n&&!t.get()?e.on("NodeChange",fF,!0):!n&&t.get()&&e.off("NodeChange",fF),t.set(n)},gF=function(e,n){if(!dF.os.isOSX()){var i=Al(!1);e.on("keydown",function(t){pF(t)&&mF(i,e,!0)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&hF(e,n,t),pF(t)&&i.get()&&(mF(i,e,!1),e.nodeChanged())})}},vF=function(n,i){var t=i.container(),e=i.offset();return lr(t)?(t.insertData(e,n),at.some(od(t,e+n.length))):Gf(i).map(function(t){var e=An.fromText(n);return i.isAtEnd()?Di(t,e):Ni(t,e),od(e.dom,n.length)})},bF=m(vF,ds),yF=m(vF," "),wF=function(e){return function(t){return t.fold(function(t){return kp(e.dom,od.before(t))},function(t){return Sp(t)},function(t){return Tp(t)},function(t){return Cp(e.dom,od.after(t))})}},_F=function(e,n){return function(t){return ww(e,t)?bF(n):yF(n)}},xF=function(e){return function(t){return e.selection.setRng(t.toRange()),e.nodeChanged(),!0}},CF=function(t){var e=od.fromRangeStart(t.selection.getRng()),n=An.fromDom(t.getBody());if(t.selection.isCollapsed()){var i=m(HD,t),r=od.fromRangeStart(t.selection.getRng());return AI(i,t.getBody(),r).bind(wF(n)).bind(_F(n,e)).exists(xF(t))}return!1},kF=function(t,e){vO([{keyCode:Eg.SPACEBAR,action:gO(CF,t)}],e).each(function(){e.preventDefault()})},SF=function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&kF(e,t)})},TF=function(t){var e=XP(t);return VR(t),GO(t,e),JO(t,e),oF(t),SF(t),cF(t),aF(t,e),gF(t,e),e},EF=function(t){return JS(t)?Al(null):TF(t)},NF=function(){function t(i){var r;this.lastPath=[],this.editor=i;var e=this;"onselectionchange"in i.getDoc()||i.on("NodeChange click mouseup keyup focus",function(t){var e=i.selection.getRng(),n={startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset};"nodechange"!==t.type&&Mg(n,r)||i.fire("SelectionChange"),r=n}),i.on("contextmenu",function(){i.fire("SelectionChange")}),i.on("SelectionChange",function(){var t=i.selection.getStart(!0);!t||!yn.range&&i.selection.isCollapsed()||Jm(i)&&!e.isSameElementPath(t)&&i.dom.isChildOf(t,i.getBody())&&i.nodeChanged({selectionChange:!0})}),i.on("mouseup",function(t){!t.isDefaultPrevented()&&Jm(i)&&("IMG"===i.selection.getNode().nodeName?Bo.setEditorTimeout(i,function(){i.nodeChanged()}):i.nodeChanged())})}return t.prototype.nodeChanged=function(t){var e,n,i,r=this.editor.selection;this.editor.initialized&&r&&!Yh(this.editor)&&!this.editor.mode.isReadOnly()&&(i=this.editor.getBody(),(e=r.getStart(!0)||i).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,i)||(e=i),n=[],this.editor.dom.getParent(e,function(t){if(t===i)return!0;n.push(t)}),(t=t||{}).element=e,t.parents=n,this.editor.fire("NodeChange",t))},t.prototype.isSameElementPath=function(t){var e,n=this.editor.$(t).parentsUntil(this.editor.getBody()).add(t);if(n.length===this.lastPath.length){for(e=n.length;0<=e&&n[e]===this.lastPath[e];e--);if(-1===e)return this.lastPath=n,!0}return this.lastPath=n,!1},t}(),DF=function(e){e.on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()})},AF=function(t){t.parser.addNodeFilter("details",function(t){kt(t,function(t){t.attr("data-mce-open",t.attr("open")),t.attr("open","open")})}),t.serializer.addNodeFilter("details",function(t){kt(t,function(t){var e=t.attr("data-mce-open");t.attr("open",wt(e)?e:null),t.attr("data-mce-open",null)})})},IF=function(t){DF(t),AF(t)},PF=function(t){return Zi(t)&&is(An.fromDom(t))},RF=function(t){var e=t.selection.getRng(),n=od.fromRangeStart(e),i=od.fromRangeEnd(e);if(od.isElementPosition(n)){var r=n.container();PF(r)&&Sp(r).each(function(t){return e.setStart(t.container(),t.offset())})}if(od.isElementPosition(i)){r=n.container();PF(r)&&Tp(r).each(function(t){return e.setEnd(t.container(),t.offset())})}t.selection.setRng(ex(e))},OF=function(e){e.on("click",function(t){3<=t.detail&&RF(e)})},MF=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.documentElement,r=n.defaultView;return{top:e.top+r.pageYOffset-i.clientTop,left:e.left+r.pageXOffset-i.clientLeft}},FF=function(t){return t.inline?MF(t.getBody()):{left:0,top:0}},$F=function(t){var e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}},LF=function(t){var e=t.getBody(),n=t.getDoc().documentElement,i={left:e.scrollLeft,top:e.scrollTop},r={left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop};return t.inline?i:r},HF=function(t,e){if(e.target.ownerDocument===t.getDoc())return{left:e.pageX,top:e.pageY};var n=MF(t.getContentAreaContainer()),i=LF(t);return{left:e.pageX-n.left+i.left,top:e.pageY-n.top+i.top}},BF=function(t,e,n){return{pageX:n.left-t.left+e.left,pageY:n.top-t.top+e.top}},zF=function(t,e){return BF(FF(t),$F(t),HF(t,e))},jF=gr,UF=mr,qF=function(t,e){return jF(e)&&e!==t},WF=function(t,e,n){return e!==n&&!t.dom.isChildOf(e,n)&&!jF(e)},VF=function(t){var e=t.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e},YF=function(t,e,n,i){var r=t.dom,o=e.cloneNode(!0);r.setStyles(o,{width:n,height:i}),r.setAttrib(o,"data-mce-selected",null);var s=r.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),r.setStyles(o,{margin:0,boxSizing:"border-box"}),s.appendChild(o),s},KF=function(t,e){t.parentNode!==e&&e.appendChild(t)},GF=function(t,e,n,i,r,o){var s=0,a=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>r&&(s=e.pageX+n-r),e.pageY+i>o&&(a=e.pageY+i-o),t.style.width=n-s+"px",t.style.height=i-a+"px"},XF=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},QF=function(t){return 0===t.button},JF=function(t,e){return{pageX:e.pageX-t.relX,pageY:e.pageY+5}},ZF=function(o,s){return function(t){if(QF(t)){var e=Et(s.dom.getParents(t.target),$c(jF,UF)).getOr(null);if(qF(s.getBody(),e)){var n=s.dom.getPos(e),i=s.getBody(),r=s.getDoc().documentElement;o.set({element:e,dragging:!1,screenX:t.screenX,screenY:t.screenY,maxX:(s.inline?i.scrollWidth:r.offsetWidth)-2,maxY:(s.inline?i.scrollHeight:r.offsetHeight)-2,relX:t.pageX-n.x,relY:t.pageY-n.y,width:e.offsetWidth,height:e.offsetHeight,ghost:YF(s,e,e.offsetWidth,e.offsetHeight)})}}}},t$=function(t,r){var o=Bo.throttle(function(t,e){r._selectionOverrides.hideFakeCaret(),r.selection.placeCaretAt(t,e)},0);return r.on("remove",o.stop),function(i){return t.on(function(t){var e=Math.max(Math.abs(i.screenX-t.screenX),Math.abs(i.screenY-t.screenY));if(!t.dragging&&10<e){if(r.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0,r.focus()}if(t.dragging){var n=JF(t,zF(r,i));KF(t.ghost,r.getBody()),GF(t.ghost,n,t.width,t.height,t.maxX,t.maxY),o(i.clientX,i.clientY)}})}},e$=function(t){var e=t.getSel().getRangeAt(0).startContainer;return 3===e.nodeType?e.parentNode:e},n$=function(t,i){return function(n){t.on(function(t){if(t.dragging){if(WF(i,e$(i.selection),t.element)){var e=VF(t.element);i.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||i.undoManager.transact(function(){XF(t.element),i.insertContent(i.dom.getOuterHTML(e)),i._selectionOverrides.hideFakeCaret()})}i.fire("dragend")}}),r$(t)}},i$=function(t,e){return function(){t.on(function(t){t.dragging&&e.fire("dragend")}),r$(t)}},r$=function(t){t.on(function(t){XF(t.ghost)}),t.clear()},o$=function(t){var e=Hl(),n=_l.DOM,i=document,r=ZF(e,t),o=t$(e,t),s=n$(e,t),a=i$(e,t);t.on("mousedown",r),t.on("mousemove",o),t.on("mouseup",s),n.bind(i,"mousemove",o),n.bind(i,"mouseup",a),t.on("remove",function(){n.unbind(i,"mousemove",o),n.unbind(i,"mouseup",a)}),t.on("keydown",function(t){t.keyCode===Eg.ESC&&a()})},s$=function(n){n.on("drop",function(t){var e="undefined"!=typeof t.clientX?n.getDoc().elementFromPoint(t.clientX,t.clientY):null;(jF(e)||"false"===n.dom.getContentEditableParent(e))&&t.preventDefault()})},a$=function(o){var s=function(t){if(!t.isDefaultPrevented()){var e=t.dataTransfer;e&&(ft(e.types,"Files")||0<e.files.length)&&(t.preventDefault(),"drop"===t.type&&qN(o,"Dropped file type is not supported"))}},a=function(t){fb(o,t.target)&&s(t)},t=function(){var e=_l.DOM,n=o.dom,i=document,r=o.inline?o.getBody():o.getDoc(),t=["drop","dragover"];kt(t,function(t){e.bind(i,t,a),n.bind(r,t,s)}),o.on("remove",function(){kt(t,function(t){e.unbind(i,t,a),n.unbind(r,t,s)})})};o.on("init",function(){Bo.setEditorTimeout(o,t,0)})},u$=function(t){o$(t),s$(t),Jh(t)&&a$(t)},l$=function(n){var t=Bl(function(){if(!n.removed&&n.getBody().contains(document.activeElement)){var t=n.selection.getRng();if(t.collapsed){var e=OA(n,t,!1);n.selection.setRng(e)}}},0);n.on("focus",function(){t.throttle()}),n.on("blur",function(){t.cancel()})},c$=function(r){r.on("init",function(){r.on("focusin",function(t){var e=t.target;if(br(e)){var n=dg(r.getBody(),e),i=gr(n)?n:e;r.selection.getNode()!==i&&PA(r,i).each(function(t){return r.selection.setRng(t)})}})})},d$=mr,h$=gr,f$=function(t,e){return dg(t.getBody(),e)},p$=function(a){var u,l=a.selection,c=a.dom,d=c.isBlock,h=a.getBody(),f=Cf(a,h,d,function(){return Eb(a)}),p="sel-"+c.uniqueId(),o="data-mce-selected",m=function(t){return c.hasClass(t,"mce-offscreen-selection")},g=function(t){return t!==h&&(h$(t)||br(t))&&c.isChildOf(t,h)},v=function(t){return zy(t)||jy(t)||$y(t)||Ly(t)},b=function(){var t=c.get(p);return t?t.getElementsByTagName("*")[0]:t},y=function(t){t&&l.setRng(t)},n=l.getRng,w=function(t,e,n,i){return void 0===i&&(i=!0),a.fire("ShowCaret",{target:e,direction:t,before:n}).isDefaultPrevented()?null:(i&&l.scrollIntoView(e,-1===t),f.show(n,e))},t=function(t){t.hasAttribute("data-mce-caret")&&(Ds(t),y(n()),l.scrollIntoView(t))},e=function(){a.on("mouseup",function(t){var e=n();e.collapsed&&MN(a,t.clientX,t.clientY)&&RA(a,e,!1).each(y)}),a.on("click",function(t){var e=f$(a,t.target);e&&(h$(e)&&(t.preventDefault(),a.focus()),d$(e)&&c.isChildOf(e,l.getNode())&&S())}),a.on("blur NewBlock",S),a.on("ResizeWindow FullscreenStateChanged",f.reposition);var r=function(t){var e=t.firstChild;if(_t(e))return!1;var n=od.before(e);if(fr(n.getNode())&&1===t.childNodes.length)return!v(n);var i=dp(t).next(n);return i&&!v(i)},o=function(t,e){return c.getParent(t,d)===c.getParent(e,d)},s=function(t,e){var n=c.getParent(t,d),i=c.getParent(e,d);return!_t(n)&&(!(t===i||!c.isChildOf(n,i)||!1!==h$(f$(a,n)))||!c.isChildOf(i,n)&&!o(n,i)&&r(n))};a.on("tap",function(t){var e=t.target,n=f$(a,e);h$(n)?(t.preventDefault(),PA(a,n).each(k)):g(e)&&PA(a,e).each(k)},!0),a.on("mousedown",function(t){var e=t.target;if((e===h||"HTML"===e.nodeName||c.isChildOf(e,h))&&!1!==MN(a,t.clientX,t.clientY)){var n=f$(a,e);if(n)h$(n)?(t.preventDefault(),PA(a,n).each(k)):(S(),d$(n)&&t.shiftKey||hg(t.clientX,t.clientY,l.getRng())||(T(),l.placeCaretAt(t.clientX,t.clientY)));else if(g(e))PA(a,e).each(k);else if(!1===Tf(e)){S(),T();var i=OP(h,t.clientX,t.clientY);if(i&&!s(e,i.node)){t.preventDefault();var r=w(1,i.node,i.before,!1);y(r),a.getBody().focus()}}}}),a.on("keypress",function(t){Eg.modifierPressed(t)||h$(l.getNode())&&t.preventDefault()}),a.on("GetSelectionRange",function(t){var e=t.range;if(u){if(!u.parentNode)return void(u=null);(e=e.cloneRange()).selectNode(u),t.range=e}}),a.on("SetSelectionRange",function(t){t.range=x(t.range);var e=k(t.range,t.forward);e&&(t.range=e)});var i=function(t){return"mcepastebin"===t.id};a.on("AfterSetSelectionRange",function(t){var e=t.range,n=e.startContainer.parentNode;_(e)||i(n)||T(),m(n)||S()}),a.on("copy",function(t){var e=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!yn.ie){var n=b();n&&(t.preventDefault(),e.clearData(),e.setData("text/html",n.outerHTML),e.setData("text/plain",n.outerText||n.innerText))}}),u$(a),l$(a),c$(a)},i=function(t){return ys(t)||Ts(t)||Es(t)},_=function(t){return i(t.startContainer)||i(t.endContainer)},x=function(t){var e=a.schema.getShortEndedElements(),n=c.createRng(),i=t.startContainer,r=t.startOffset,o=t.endContainer,s=t.endOffset;return Zt(e,i.nodeName.toLowerCase())?0===r?n.setStartBefore(i):n.setStartAfter(i):n.setStart(i,r),Zt(e,o.nodeName.toLowerCase())?0===s?n.setEndBefore(o):n.setEndAfter(o):n.setEnd(o,s),n},s=function(t,e,n){var i=a.$,r=Ro(An.fromDom(a.getBody()),"#"+p).fold(function(){return i([])},function(t){return i([t.dom])});0===r.length&&(r=i('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",p)).appendTo(a.getBody());var o=c.createRng();e===n&&yn.ie?(r.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(e),o.setStartAfter(r[0].firstChild.firstChild),o.setEndAfter(e)):(r.empty().append(ds).append(e).append(ds),o.setStart(r[0].firstChild,1),o.setEnd(r[0].lastChild,0)),r.css({top:c.getPos(t,a.getBody()).y}),r[0].focus();var s=l.getSel();return s.removeAllRanges(),s.addRange(o),o},C=function(t){var e=t.cloneNode(!0),n=a.fire("ObjectSelected",{target:t,targetClone:e});if(n.isDefaultPrevented())return null;var i=s(t,n.targetClone,e),r=An.fromDom(t);return kt(tc(An.fromDom(a.getBody()),"*[data-mce-selected]"),function(t){Un(r,t)||Ir(t,o)}),c.getAttrib(t,o)||t.setAttribute(o,"1"),u=t,T(),i},k=function(t,e){if(!t)return null;if(t.collapsed){if(!_(t)){var n=e?1:-1,i=Kf(n,h,t),r=i.getNode(!e);if(Tf(r))return w(n,r,!!e&&!i.isAtEnd(),!1);var o=i.getNode(e);if(Tf(o))return w(n,o,!e&&!i.isAtEnd(),!1)}return null}var s=t.startContainer,a=t.startOffset,u=t.endOffset;if(3===s.nodeType&&0===a&&h$(s.parentNode)&&(s=s.parentNode,a=c.nodeIndex(s),s=s.parentNode),1!==s.nodeType)return null;if(u===a+1&&s===t.endContainer){var l=s.childNodes[a];if(g(l))return C(l)}return null},S=function(){u&&u.removeAttribute(o),Ro(An.fromDom(a.getBody()),"#"+p).each(Fi),u=null},r=function(){f.destroy(),u=null},T=function(){f.hide()};return yn.ceFalse&&!JS(a)&&e(),{showCaret:w,showBlockCaretContainer:t,hideFakeCaret:T,destroy:r}},m$=function(s){var r=Sn.each,o=Eg.BACKSPACE,a=Eg.DELETE,u=s.dom,l=s.selection,t=s.parser,e=yn.gecko,n=yn.ie,i=yn.webkit,c="data:text/mce-internal,",d=n?"Text":"URL",h=function(t,e){try{s.getDoc().execCommand(t,!1,e)}catch(n){}},f=function(t){return t.isDefaultPrevented()},p=function(t){var e,n;t.dataTransfer&&(s.selection.isCollapsed()&&"IMG"===t.target.tagName&&l.select(t.target),0<(e=s.selection.getContent()).length&&(n=c+escape(s.id)+","+escape(e),t.dataTransfer.setData(d,n)))},m=function(t){var e;return t.dataTransfer&&(e=t.dataTransfer.getData(d))&&0<=e.indexOf(c)?(e=e.substr(c.length).split(","),{id:unescape(e[0]),html:unescape(e[1])}):null},g=function(t,e){s.queryCommandSupported("mceInsertClipboardContent")?s.execCommand("mceInsertClipboardContent",!1,{content:t,internal:e}):s.execCommand("mceInsertContent",!1,t)},v=function(){var i=function(t){var e=u.create("body"),n=t.cloneContents();return e.appendChild(n),l.serializer.serialize(e,{format:"html"})},r=function(t){var e=i(t),n=u.createRng();return n.selectNode(s.getBody()),e===i(n)};s.on("keydown",function(t){var e,n,i=t.keyCode;if(!f(t)&&(i===a||i===o)){if(e=s.selection.isCollapsed(),n=s.getBody(),e&&!u.isEmpty(n))return;if(!e&&!r(s.selection.getRng()))return;t.preventDefault(),s.setContent(""),n.firstChild&&u.isBlock(n.firstChild)?s.selection.setCursorLocation(n.firstChild,0):s.selection.setCursorLocation(n,0),s.nodeChanged()}})},b=function(){s.shortcuts.add("meta+a",null,"SelectAll")},y=function(){s.inline||u.bind(s.getDoc(),"mousedown mouseup",function(t){var e;if(t.target===s.getDoc().documentElement)if(e=l.getRng(),s.getBody().focus(),"mousedown"===t.type){if(ys(e.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(e)})},w=function(){s.on("keydown",function(t){if(!f(t)&&t.keyCode===o){if(!s.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var e=l.getNode(),n=e.previousSibling;if("HR"===e.nodeName)return u.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(u.remove(n),t.preventDefault())}}})},_=function(){Range.prototype.getClientRects||s.on("mousedown",function(t){if(!f(t)&&"HTML"===t.target.nodeName){var e=s.getBody();e.blur(),Bo.setEditorTimeout(s,function(){e.focus()})}})},x=function(){s.on("click",function(t){var e=t.target;/^(IMG|HR)$/.test(e.nodeName)&&"false"!==u.getContentEditableParent(e)&&(t.preventDefault(),s.selection.select(e),s.nodeChanged()),"A"===e.nodeName&&u.hasClass(e,"mce-item-anchor")&&(t.preventDefault(),l.select(e))})},C=function(){var n=function(){var t=u.getAttribs(l.getStart().cloneNode(!1));return function(){var e=l.getStart();e!==s.getBody()&&(u.setAttrib(e,"style",null),r(t,function(t){e.setAttributeNode(t.cloneNode(!0))}))}},i=function(){return!l.isCollapsed()&&u.getParent(l.getStart(),u.isBlock)!==u.getParent(l.getEnd(),u.isBlock)};s.on("keypress",function(t){var e;if(!f(t)&&(8===t.keyCode||46===t.keyCode)&&i())return e=n(),s.getDoc().execCommand("delete",!1,null),e(),t.preventDefault(),!1}),u.bind(s.getDoc(),"cut",function(t){var e;!f(t)&&i()&&(e=n(),Bo.setEditorTimeout(s,function(){e()}))})},k=function(){s.on("keydown",function(t){if(!f(t)&&t.keyCode===o&&l.isCollapsed()&&0===l.getRng().startOffset){var e=l.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}})},S=function(){s.on("keydown",function(t){var e,n;if(!f(t)&&t.keyCode===Eg.BACKSPACE){var i=(e=l.getRng()).startContainer,r=e.startOffset,o=u.getRoot();if(n=i,e.collapsed&&0===r){for(;n&&n.parentNode&&n.parentNode.firstChild===n&&n.parentNode!==o;)n=n.parentNode;"BLOCKQUOTE"===n.tagName&&(s.formatter.toggle("blockquote",null,n),(e=u.createRng()).setStart(i,0),e.setEnd(i,0),l.setRng(e))}}})},T=function(){var t=function(){h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),Th(s)||h("enableObjectResizing",!1)};Kh(s)||s.on("BeforeExecCommand mousedown",t)},E=function(){var e=function(){r(u.select("a"),function(t){var e=t.parentNode,n=u.getRoot();if(e.lastChild===t){for(;e&&!u.isBlock(e);){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}u.add(e,"br",{"data-mce-bogus":1})}})};s.on("SetContent ExecCommand",function(t){"setcontent"!==t.type&&"mceInsertLink"!==t.command||e()})},N=function(){Jd(s)&&s.on("init",function(){h("DefaultParagraphSeparator",Jd(s))})},D=function(){s.on("keyup focusin mouseup",function(t){Eg.modifierPressed(t)||l.normalize()},!0)},A=function(){s.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},I=function(){s.inline||s.on("keydown",function(){document.activeElement===document.body&&s.getWin().focus()})},P=function(){s.inline||(s.contentStyles.push("body {min-height: 150px}"),s.on("click",function(t){var e;if("HTML"===t.target.nodeName){if(11<yn.ie)return void s.getBody().focus();e=s.selection.getRng(),s.getBody().focus(),s.selection.setRng(e),s.selection.normalize(),s.nodeChanged()}}))},R=function(){yn.mac&&s.on("keydown",function(t){!Eg.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),s.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})},O=function(){h("AutoUrlDetect",!1)},M=function(){s.on("click",function(t){var e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)}),s.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},F=function(){s.on("init",function(){s.dom.bind(s.getBody(),"submit",function(t){t.preventDefault()})})},$=function(){t.addNodeFilter("br",function(t){for(var e=t.length;e--;)"Apple-interchange-newline"===t[e].attr("class")&&t[e].remove()})},L=function(){s.on("dragstart",function(t){p(t)}),s.on("drop",function(t){if(!f(t)){var e=m(t);if(e&&e.id!==s.id){t.preventDefault();var n=Og(t.x,t.y,s.getDoc());l.setRng(n),g(e.html,!0)}}})},H=xt,B=function(){if(!e||s.removed)return!1;var t=s.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount},z=function(){i&&(y(),x(),F(),b(),yn.iOS&&(I(),P(),M())),e&&(_(),T(),A(),R())},j=function(){S(),v(),yn.windowsPhone||D(),i&&(y(),x(),N(),F(),k(),$(),yn.iOS?(I(),P(),M()):b()),11<=yn.ie&&(P(),k()),yn.ie&&(b(),O(),L()),e&&(w(),_(),C(),T(),E(),A(),R(),k())};return JS(s)?z():j(),{refreshContentEditable:H,isHidden:B}},g$=_l.DOM,v$=function(t,e){var n=An.fromDom(t.getBody()),i=Ci(xi(n)),r=An.fromTag("style");Tr(r,"type","text/css"),Ii(r,An.fromText(e)),Ii(i,r),t.on("remove",function(){Fi(r)})},b$=function(t){return t.inline?t.getElement().nodeName.toLowerCase():undefined},y$=function(t){return Gt(t,function(t){return!1===U(t)})},w$=function(t){var e=t.settings,n=t.editorUpload.blobCache;return y$({allow_conditional_comments:e.allow_conditional_comments,allow_html_data_urls:e.allow_html_data_urls,allow_svg_data_urls:e.allow_svg_data_urls,allow_html_in_named_anchor:e.allow_html_in_named_anchor,allow_script_urls:e.allow_script_urls,allow_unsafe_link_target:e.allow_unsafe_link_target,convert_fonts_to_spans:e.convert_fonts_to_spans,fix_list_elements:e.fix_list_elements,font_size_legacy_values:e.font_size_legacy_values,forced_root_block:e.forced_root_block,forced_root_block_attrs:e.forced_root_block_attrs,padd_empty_with_br:e.padd_empty_with_br,preserve_cdata:e.preserve_cdata,remove_trailing_brs:e.remove_trailing_brs,inline_styles:e.inline_styles,root_name:b$(t),validate:!0,blob_cache:n,document:t.getDoc(),images_dataimg_filter:e.images_dataimg_filter})},_$=function(t){var e=t.settings;return de(de({},w$(t)),y$({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope,element_format:e.element_format,entities:e.entities,entity_encoding:e.entity_encoding,indent:e.indent,indent_after:e.indent_after,indent_before:e.indent_before,block_elements:e.block_elements,boolean_attributes:e.boolean_attributes,custom_elements:e.custom_elements,extended_valid_elements:e.extended_valid_elements,invalid_elements:e.invalid_elements,invalid_styles:e.invalid_styles,move_caret_before_on_enter_elements:e.move_caret_before_on_enter_elements,non_empty_elements:e.non_empty_elements,schema:e.schema,self_closing_elements:e.self_closing_elements,short_ended_elements:e.short_ended_elements,special:e.special,text_block_elements:e.text_block_elements,text_inline_elements:e.text_inline_elements,valid_children:e.valid_children,valid_classes:e.valid_classes,valid_elements:e.valid_elements,valid_styles:e.valid_styles,verify_html:e.verify_html,whitespace_elements:e.whitespace_elements}))},x$=function(a){var t=wE(w$(a),a.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,e){for(var n,i,r=t.length,o=a.dom,s="data-mce-"+e;r--;)if((i=(n=t[r]).attr(e))&&!n.attr(s)){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===e?((i=o.serializeStyle(o.parseStyle(i),n.name)).length||(i=null),n.attr(s,i),n.attr(e,i)):"tabindex"===e?(n.attr(s,i),n.attr(e,null)):n.attr(s,a.convertURL(i,e,n.name))}}),t.addNodeFilter("script",function(t){for(var e=t.length;e--;){var n=t[e],i=n.attr("type")||"no/type";0!==i.indexOf("mce-")&&n.attr("type","mce-"+i)}}),a.settings.preserve_cdata&&t.addNodeFilter("#cdata",function(t){for(var e=t.length;e--;){var n=t[e];n.type=8,n.name="#comment",n.value="[CDATA["+a.dom.encode(n.value)+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var e=t.length,n=a.schema.getNonEmptyElements();e--;){var i=t[e];i.isEmpty(n)&&0===i.getAll("br").length&&(i.append(new qb("br",1)).shortEnded=!0)}}),t},C$=function(e){e.settings.auto_focus&&Bo.setEditorTimeout(e,function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()},100)},k$=function(i){var t=i.dom.getRoot();i.inline||Jm(i)&&i.selection.getStart(!0)!==t||Sp(t).each(function(t){var e=t.getNode(),n=sr(e)?Sp(e).getOr(t):t;yn.browser.isIE()?tb(i,n.toRange()):i.selection.setRng(n.toRange())})},S$=function(t){t.bindPendingEventDelegates(),t.initialized=!0,xg(t),t.focus(!0),k$(t),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),C$(t)},T$=function(t){return t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader},E$=function(n,i,r){var t=[new Mo(function(t,e){return T$(n).loadAll(i,t,e)})];return n.inline?t:t.concat([new Mo(function(t,e){return n.ui.styleSheetLoader.loadAll(r,t,e)})])},N$=function(t){var e=T$(t),n=Ch(t),i=t.contentCSS,r=function(){e.unloadAll(i),t.inline||t.ui.styleSheetLoader.unloadAll(n)},o=function(){t.removed?r():t.on("remove",r)};if(0<t.contentStyles.length){var s="";Sn.each(t.contentStyles,function(t){s+=t+"\r\n"}),t.dom.addStyle(s)}var a=Mo.all(E$(t,i,n)).then(o)["catch"](o);return t.settings.content_style&&v$(t,t.settings.content_style),a},D$=function(e){var t=e.settings,n=e.getDoc(),i=e.getBody();wg(e),t.browser_spellcheck||t.gecko_spellcheck||(n.body.spellcheck=!1,g$.setAttrib(i,"spellcheck","false")),e.quirks=m$(e),_g(e);var r=kh(e);r!==undefined&&(i.dir=r),t.protect&&e.on("BeforeSetContent",function(e){Sn.each(t.protect,function(t){e.content=e.content.replace(t,function(t){return"<!--mce:protected "+escape(t)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type})},A$=function(t){JS(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})},I$=function(t){!0!==t.removed&&(A$(t),S$(t))},P$=function(e,t){var n=e.settings,i=e.getElement(),r=e.getDoc();n.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline||(r.open(),r.write(e.iframeHTML),r.close()),e.inline&&(g$.addClass(i,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=i,e.contentAreaContainer=i);var o=e.getBody();o.disabled=!0,e.readonly=!!n.readonly,e.readonly||(e.inline&&"static"===g$.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable=e.getParam("content_editable_state",!0)),o.disabled=!1,e.editorUpload=pD(e),e.schema=$a(n),e.dom=_l(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:e.inline?e.getBody():null,collect:function(){return e.inline},schema:e.schema,contentCssCors:gh(e),referrerPolicy:vh(e),onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=x$(e),e.serializer=RE(_$(e),e),e.selection=jT(e.dom,e.getWin(),e.serializer,e),e.annotator=lg(e),e.formatter=kD(e),e.undoManager=ND(e),e._nodeChangeDispatcher=new NF(e),e._selectionOverrides=p$(e),MR(e),IF(e),JS(e)||OF(e);var s=EF(e);AR(e,s),zR(e),FD(e);var a=tT(e);D$(e),a.fold(function(){N$(e).then(function(){return I$(e)})},function(t){e.setProgressState(!0),N$(e).then(function(){t().then(function(){e.setProgressState(!1),I$(e)},function(t){e.notificationManager.open({type:"error",text:String(t)}),I$(e)})})})},R$=_l.DOM,O$=function(t,e){if(document.domain!==window.location.hostname&&yn.browser.isIE()){var n=aD("mce");t[n]=function(){P$(t)};var i='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return R$.setAttrib(e,"src",i),!0}return!1},M$=function(t,e,n,i){var r=An.fromTag("iframe");return Er(r,i),Er(r,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:e}),Gl(r,"tox-edit-area__iframe"),r},F$=function(t){var e=Vd(t)+"<html><head>";Yd(t)!==t.documentBaseUrl&&(e+='<base href="'+t.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=Kd(t),i=Gd(t),r=t.translate(nf(t));return Xd(t)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+Xd(t)+'" />'),e+='</head><body id="'+n+'" class="mce-content-body '+i+'" data-id="'+t.id+'" aria-label="'+r+'"><br></body></html>'},$$=function(t,e){var n=t.translate("Rich Text Area"),i=M$(t.id,n,e.height,Wd(t)).dom;i.onload=function(){i.onload=null,t.fire("load")};var r=O$(t,i);return t.contentAreaContainer=e.iframeContainer,t.iframeElement=i,t.iframeHTML=F$(t),R$.add(e.iframeContainer,i),r},L$=function(t,e){var n=$$(t,e);e.editorContainer&&(R$.get(e.editorContainer).style.display=t.orgDisplay,t.hidden=R$.isHidden(e.editorContainer)),t.getElement().style.display="none",R$.setAttrib(t.id,"aria-hidden","true"),n||P$(t)},H$=_l.DOM,B$=function(e,n,t){var i=BN.get(t),r=BN.urls[t]||e.documentBaseUrl.replace(/\/$/,"");if(t=Sn.trim(t),i&&-1===Sn.inArray(n,t)){if(Sn.each(BN.dependencies(t),function(t){B$(e,n,t)}),e.plugins[t])return;try{var o=new i(e,r,e.$);(e.plugins[t]=o).init&&(o.init(e,r),n.push(t))}catch(_B){QN(e,t,_B)}}},z$=function(t){return t.replace(/^\-/,"")},j$=function(e){var n=[];Sn.each(Xh(e).split(/[ ,]/),function(t){B$(e,n,z$(t))})},U$=function(n){var t=Sn.trim(ch(n)),i=n.ui.registry.getAll().icons,e=de(de({},SN.get("default").icons),SN.get(t).icons);Ut(e,function(t,e){Zt(i,e)||n.ui.registry.addIcon(e,t)})},q$=function(t){var e=Ih(t);if(wt(e)){t.settings.theme=z$(e);var n=zN.get(e);t.theme=new n(t,zN.urls[e]),t.theme.init&&t.theme.init(t,zN.urls[e]||t.documentBaseUrl.replace(/\/$/,""),t.$)}else t.theme={}},W$=function(t){return t.theme.renderUI()},V$=function(t){var e=t.getElement(),n=Ih(t)(t,e);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:e.offsetHeight,n},Y$=function(t){return{editorContainer:t,iframeContainer:t,api:{}}},K$=function(t){var e=H$.create("div");return H$.insertAfter(e,t),Y$(e)},G$=function(t){var e=t.getElement();return t.inline?Y$(null):K$(e)},X$=function(t){var e=t.getElement();return t.orgDisplay=e.style.display,wt(Ih(t))?W$(t):q(Ih(t))?V$(t):G$(t)},Q$=function(t,e){var n={show:at.from(e.show).getOr(xt),hide:at.from(e.hide).getOr(xt),disable:at.from(e.disable).getOr(xt),isDisabled:at.from(e.isDisabled).getOr(et),enable:function(){t.mode.isReadOnly()||at.from(e.enable).map(tt)}};t.ui=de(de({},t.ui),n)},J$=function(t){t.fire("ScriptsLoaded"),U$(t),q$(t),j$(t);var e=X$(t);Q$(t,at.from(e.api).getOr({}));var n={editorContainer:e.editorContainer,iframeContainer:e.iframeContainer};return t.editorContainer=n.editorContainer?n.editorContainer:null,iD(t),t.inline?P$(t):L$(t,n)},Z$=_l.DOM,tL=function(t){return"-"===t.charAt(0)},eL=function(t,e){var n=bh(e),i=yh(e);if(!1===Fl.hasCode(n)&&"en"!==n){var r=""!==i?i:e.editorManager.baseURL+"/langs/"+n+".js";t.add(r,xt,undefined,function(){XN(e,r,n)})}},nL=function(t,e,n,i){var r=Ih(e);if(wt(r)){if(!tL(r)&&!Zt(zN.urls,r)){var o=Lh(e);o?zN.load(r,e.documentBaseURI.toAbsolute(o)):zN.load(r,"themes/"+r+"/theme"+n+".js")}t.loadQueue(function(){zN.waitFor(r,i)})}else i()},iL=function(t){return at.from(dh(t)).filter(function(t){return 0<t.length}).map(function(t){return{url:t,name:at.none()}})},rL=function(e,t,n){return at.from(t).filter(function(t){return 0<t.length&&!SN.has(t)}).map(function(t){return{url:e.editorManager.baseURL+"/icons/"+t+"/icons"+n+".js",name:at.some(t)}})},oL=function(e,n,t){var i=rL(n,"default",t),r=iL(n).orThunk(function(){return rL(n,ch(n),"")});kt(wr([i,r]),function(t){e.add(t.url,xt,undefined,function(){GN(n,t.url,t.name.getOrUndefined())})})},sL=function(i,r){Sn.each(Qh(i),function(t,e){BN.load(e,t,xt,undefined,function(){KN(i,t,e)}),i.settings.plugins+=" "+e}),Sn.each(Xh(i).split(/[ ,]/),function(t){if((t=Sn.trim(t))&&!BN.urls[t])if(tL(t)){t=t.substr(1,t.length);var e=BN.dependencies(t);Sn.each(e,function(t){var e={prefix:"plugins/",resource:t,suffix:"/plugin"+r+".js"},n=BN.createUrl(e,t);BN.load(n.resource,n,xt,undefined,function(){KN(i,n.prefix+n.resource+n.suffix,n.resource)})})}else{var n={prefix:"plugins/",resource:t,suffix:"/plugin"+r+".js"};BN.load(t,n,xt,undefined,function(){KN(i,n.prefix+n.resource+n.suffix,t)})}})},aL=function(t,e){var n=Dl.ScriptLoader;nL(n,t,e,function(){eL(n,t),oL(n,t,e),sL(t,e),n.loadQueue(function(){t.removed||J$(t)},t,function(){t.removed||J$(t)})})},uL=function(t,e){return jo.forElement(t,{contentCssCors:Gh(e),referrerPolicy:vh(e)})},lL=function(e){var t=e.id;Fl.setCode(bh(e));var n=function(){Z$.unbind(window,"ready",n),e.render()};if(Za.Event.domLoaded){if(e.getElement()&&yn.contentEditable){var i=An.fromDom(e.getElement()),r=Pr(i);e.on("remove",function(){gt(
i.dom.attributes,function(t){return Ir(i,t.name)}),Er(i,r)}),e.ui.styleSheetLoader=uL(i,e),Hh(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var o=e.getElement().form||Z$.getParent(t,"form");o&&(e.formElement=o,Bh(e)&&!ur(e.getElement())&&(Z$.insertAfter(Z$.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},Z$.bind(o,"submit reset",e.formEventDelegate),e.on("reset",function(){e.resetContent()}),!zh(e)||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),o._mceOldSubmit(o)})),e.windowManager=jN(e),e.notificationManager=HN(e),jh(e)&&e.on("GetContent",function(t){t.save&&(t.content=Z$.encode(t.content))}),Uh(e)&&e.on("submit",function(){e.initialized&&e.save()}),qh(e)&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),aL(e,e.suffix)}}else Z$.bind(window,"ready",n)},cL=function(t,e){return ET(t,e)},dL={"font-size":"size","font-family":"face"},hL=function(t,e,n){var i=function(e){return $r(e,t).orThunk(function(){return"font"===Yn(e)?Jt(dL,t).bind(function(t){return Dr(e,t)}):at.none()})},r=function(t){return Un(An.fromDom(e),t)};return Xx(An.fromDom(n),function(t){return i(t)},r)},fL=function(t){return t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},pL=function(t,e){return at.from(_l.DOM.getStyle(e,t,!0))},mL=function(n){return function(e,t){return at.from(t).map(An.fromDom).filter(Qn).bind(function(t){return hL(n,e,t.dom).or(pL(n,t.dom))}).getOr("")}},gL=mL("font-size"),vL=V(fL,mL("font-family")),bL=function(t){return Sp(t.getBody()).map(function(t){var e=t.container();return lr(e)?e.parentNode:e})},yL=function(n){return at.from(n.selection.getRng()).bind(function(t){var e=n.getBody();return t.startContainer===e&&0===t.startOffset?at.none():at.from(n.selection.getStart(!0))})},wL=function(t,e){return yL(t).orThunk(m(bL,t)).map(An.fromDom).filter(Qn).bind(e)},_L=function(t,e){return wL(t,K(at.some,e))},xL=function(t,e){if(/^[0-9.]+$/.test(e)){var n=parseInt(e,10);if(1<=n&&n<=7){var i=rh(t),r=oh(t);return r?r[n-1]||e:i[n-1]||e}return e}return e},CL=function(t){var e=t.split(/\s*,\s*/);return mt(e,function(t){return-1===t.indexOf(" ")||Ne(t,'"')||Ne(t,"'")?t:"'"+t+"'"}).join(",")},kL=function(t,e){var n=xL(t,e);t.formatter.toggle("fontname",{value:CL(n)}),t.nodeChanged()},SL=function(e){return _L(e,function(t){return vL(e.getBody(),t.dom)}).getOr("")},TL=function(t,e){t.formatter.toggle("fontsize",{value:xL(t,e)}),t.nodeChanged()},EL=function(e){return _L(e,function(t){return gL(e.getBody(),t.dom)}).getOr("")},NL=function(i){return _L(i,function(n){var t=An.fromDom(i.getBody()),e=function(){var t=parseFloat(Mr(n,"line-height")),e=parseFloat(Mr(n,"font-size"));return String(t/e)};return Xx(n,function(t){return $r(t,"line-height")},m(Un,t)).getOrThunk(e)}).getOr("")},DL=function(t,e){t.formatter.toggle("lineheight",{value:String(e)}),t.nodeChanged()},AL=function(t){if("string"==typeof t)return{content:t,details:{}};var e=Sn.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:e}},IL=function(t,e){var n=AL(e);ST(t,n.content,n.details)},PL=Sn.each,RL=Sn.map,OL=Sn.inArray,ML=function(){function t(t){this.commands={state:{},exec:{},value:{}},this.editor=t,this.setupCommands(t)}return t.prototype.execCommand=function(e,n,i,t){var r,o=!1,s=this;if(!s.editor.removed){if("mcefocus"!==e.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||t&&t.skip_focus?nb(s.editor):s.editor.focus()),(t=s.editor.fire("BeforeExecCommand",{command:e,ui:n,value:i})).isDefaultPrevented())return!1;var a=e.toLowerCase();if(r=s.commands.exec[a])return r(a,n,i),s.editor.fire("ExecCommand",{command:e,ui:n,value:i}),!0;if(PL(this.editor.plugins,function(t){if(t.execCommand&&t.execCommand(e,n,i))return s.editor.fire("ExecCommand",{command:e,ui:n,value:i}),!(o=!0)}),o)return o;if(s.editor.theme&&s.editor.theme.execCommand&&s.editor.theme.execCommand(e,n,i))return s.editor.fire("ExecCommand",{command:e,ui:n,value:i}),!0;try{o=s.editor.getDoc().execCommand(e,n,i)}catch(u){}return!!o&&(s.editor.fire("ExecCommand",{command:e,ui:n,value:i}),!0)}},t.prototype.queryCommandState=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.state[t])return e(t);try{return this.editor.getDoc().queryCommandState(t)}catch(n){}return!1}},t.prototype.queryCommandValue=function(t){var e;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(t=t.toLowerCase(),e=this.commands.value[t])return e(t);try{return this.editor.getDoc().queryCommandValue(t)}catch(n){}}},t.prototype.addCommands=function(t,n){void 0===n&&(n="exec");var i=this;PL(t,function(e,t){PL(t.toLowerCase().split(","),function(t){i.commands[n][t]=e})})},t.prototype.addCommand=function(t,r,o){var s=this;t=t.toLowerCase(),this.commands.exec[t]=function(t,e,n,i){return r.call(o||s.editor,e,n,i)}},t.prototype.queryCommandSupported=function(t){if(t=t.toLowerCase(),this.commands.exec[t])return!0;try{return this.editor.getDoc().queryCommandSupported(t)}catch(e){}return!1},t.prototype.addQueryStateHandler=function(t,e,n){var i=this;t=t.toLowerCase(),this.commands.state[t]=function(){return e.call(n||i.editor)}},t.prototype.addQueryValueHandler=function(t,e,n){var i=this;t=t.toLowerCase(),this.commands.value[t]=function(){return e.call(n||i.editor)}},t.prototype.hasCustomCommand=function(t){return t=t.toLowerCase(),!!this.commands.exec[t]},t.prototype.execNativeCommand=function(t,e,n){return e===undefined&&(e=!1),n===undefined&&(n=null),this.editor.getDoc().execCommand(t,e,n)},t.prototype.isFormatMatch=function(t){return this.editor.formatter.match(t)},t.prototype.toggleFormat=function(t,e){this.editor.formatter.toggle(t,e),this.editor.nodeChanged()},t.prototype.storeSelection=function(t){this.selectionBookmark=this.editor.selection.getBookmark(t)},t.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},t.prototype.setupCommands=function(o){var s=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":xt,"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},mceFocus:function(t,e,n){Ib(o,n)},"Cut,Copy,Paste":function(t){var e,n=o.getDoc();try{s.execNativeCommand(t)}catch(r){e=!0}if("paste"!==t||n.queryCommandEnabled(t)||(e=!0),e||!n.queryCommandSupported(t)){var i=o.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");yn.mac&&(i=i.replace(/Ctrl\+/g,"\u2318+")),o.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(o.selection.isCollapsed()){var t=o.dom.getParent(o.selection.getStart(),"a");t&&o.dom.remove(t,!0)}else o.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(t){var e=t.substring(7);"full"===e&&(e="justify"),PL("left,center,right,justify".split(","),function(t){e!==t&&o.formatter.remove("align"+t)}),"none"!==e&&s.toggleFormat("align"+e)},"InsertUnorderedList,InsertOrderedList":function(t){var e;s.execNativeCommand(t);var n=o.dom.getParent(o.selection.getNode(),"ol,ul");n&&(e=n.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(s.storeSelection(),o.dom.split(e,n),s.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){s.toggleFormat(t)},"ForeColor,HiliteColor":function(t,e,n){s.toggleFormat(t,{value:n})},FontName:function(t,e,n){kL(o,n)},FontSize:function(t,e,n){TL(o,n)},LineHeight:function(t,e,n){DL(o,n)},Lang:function(t,e,n){s.toggleFormat(t,{value:n.code,customValue:n.customCode})},RemoveFormat:function(t){o.formatter.remove(t)},mceBlockQuote:function(){s.toggleFormat("blockquote")},FormatBlock:function(t,e,n){return s.toggleFormat(n||"p")},mceCleanup:function(){var t=o.selection.getBookmark();o.setContent(o.getContent()),o.selection.moveToBookmark(t)},mceRemoveNode:function(t,e,n){var i=n||o.selection.getNode();i!==o.getBody()&&(s.storeSelection(),o.dom.remove(i,!0),s.restoreSelection())},mceSelectNodeDepth:function(t,e,n){var i=0;o.dom.getParent(o.selection.getNode(),function(t){if(1===t.nodeType&&i++===n)return o.selection.select(t),!1},o.getBody())},mceSelectNode:function(t,e,n){o.selection.select(n)},mceInsertContent:function(t,e,n){IL(o,n)},mceInsertRawHTML:function(t,e,n){o.selection.setContent("tiny_mce_marker");var i=o.getContent();o.setContent(i.replace(/tiny_mce_marker/g,function(){return n}))},mceInsertNewLine:function(t,e,n){iF(o,n)},mceToggleFormat:function(t,e,n){s.toggleFormat(n)},mceSetContent:function(t,e,n){o.setContent(n)},"Indent,Outdent":function(t){SR(o,t)},mceRepaint:xt,InsertHorizontalRule:function(){o.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual,o.addVisual()},mceReplaceContent:function(t,e,n){o.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceInsertLink:function(t,e,n){"string"==typeof n&&(n={href:n});var i=o.dom.getParent(o.selection.getNode(),"a");n.href=n.href.replace(/ /g,"%20"),i&&n.href||o.formatter.remove("link"),n.href&&o.formatter.apply("link",n,i)},selectAll:function(){var t=o.dom.getParent(o.selection.getStart(),mr);if(t){var e=o.dom.createRng();e.selectNodeContents(t),o.selection.setRng(e)}},mceNewDocument:function(){o.setContent("")},InsertLineBreak:function(t,e,n){return BM(o,n),!0}});var t=function(i){return function(){var t=o.selection,e=t.isCollapsed()?[o.dom.getParent(t.getNode(),o.dom.isBlock)]:t.getSelectedBlocks(),n=RL(e,function(t){return!!o.formatter.matchNode(t,i)});return-1!==OL(n,!0)}};s.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return s.isFormatMatch(t)},mceBlockQuote:function(){return s.isFormatMatch("blockquote")},Outdent:function(){return _R(o)},"InsertUnorderedList,InsertOrderedList":function(t){var e=o.dom.getParent(o.selection.getNode(),"ul,ol");return e&&("insertunorderedlist"===t&&"UL"===e.tagName||"insertorderedlist"===t&&"OL"===e.tagName)}},"state"),s.addCommands({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}}),s.addQueryValueHandler("FontName",function(){return SL(o)},this),s.addQueryValueHandler("FontSize",function(){return EL(o)},this),s.addQueryValueHandler("LineHeight",function(){return NL(o)},this)},t}(),FL="data-mce-contenteditable",$L=function(t,e,n){Jl(t,e)&&!1===n?Ql(t,e):n&&Gl(t,e)},LL=function(t,e,n){try{t.getDoc().execCommand(e,!1,String(n))}catch(i){}},HL=function(t,e){t.dom.contentEditable=e?"true":"false"},BL=function(t){kt(tc(t,'*[contenteditable="true"]'),function(t){Tr(t,FL,"true"),HL(t,!1)})},zL=function(t){kt(tc(t,"*["+FL+'="true"]'),function(t){Ir(t,FL),HL(t,!0)})},jL=function(t){at.from(t.selection.getNode()).each(function(t){t.removeAttribute("data-mce-selected")})},UL=function(t){t.selection.setRng(t.selection.getRng())},qL=function(t,e){var n=An.fromDom(t.getBody());$L(n,"mce-content-readonly",e),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),jL(t),t.readonly=!0,HL(n,!1),BL(n)):(t.readonly=!1,HL(n,!0),zL(n),LL(t,"StyleWithCSS",!1),LL(t,"enableInlineTableEditing",!1),LL(t,"enableObjectResizing",!1),Nb(t)&&t.focus(),UL(t),t.nodeChanged())},WL=function(t){return t.readonly},VL=function(e){e.parser.addAttributeFilter("contenteditable",function(t){WL(e)&&kt(t,function(t){t.attr(FL,t.attr("contenteditable")),t.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(FL,function(t){WL(e)&&kt(t,function(t){t.attr("contenteditable",t.attr(FL))})}),e.serializer.addTempAttr(FL)},YL=function(t){t.serializer?VL(t):t.on("PreInit",function(){VL(t)})},KL=function(t){return"click"===t.type},GL=function(e,t){return Oo(t,"a",function(t){return Un(t,An.fromDom(e.getBody()))}).bind(function(t){return Dr(t,"href")})},XL=function(n,i){if(KL(i)&&!Eg.metaKeyPressed(i)){var t=An.fromDom(i.target);GL(n,t).each(function(t){if(i.preventDefault(),/^#/.test(t)){var e=n.dom.select(t+',[name="'+Te(t,"#")+'"]');e.length&&n.selection.scrollIntoView(e[0],!0)}else window.open(t,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}},QL=function(e){e.on("ShowCaret",function(t){WL(e)&&t.preventDefault()}),e.on("ObjectSelected",function(t){WL(e)&&t.preventDefault()})},JL=Sn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),ZL=function(){function t(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||et}return t.isNative=function(t){return!!JL[t.toLowerCase()]},t.prototype.fire=function(t,e){var n=t.toLowerCase(),i=Wa(n,e||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);var r=this.bindings[n];if(r)for(var o=0,s=r.length;o<s;o++){var a=r[o];if(!a.removed){if(a.once&&this.off(n,a.func),i.isImmediatePropagationStopped())return i;if(!1===a.func.call(this.scope,i))return i.preventDefault(),i}}return i},t.prototype.on=function(t,e,n,i){if(!1===e&&(e=et),e){var r={func:e,removed:!1};i&&Sn.extend(r,i);for(var o=t.toLowerCase().split(" "),s=o.length;s--;){var a=o[s],u=this.bindings[a];u||(u=[],this.toggleEvent(a,!0)),u=n?l([r],u,!0):l(l([],u,!0),[r],!1),this.bindings[a]=u}}return this},t.prototype.off=function(t,e){var n=this;if(t)for(var i=t.toLowerCase().split(" "),r=i.length;r--;){var o=i[r],s=this.bindings[o];if(!o)return Ut(this.bindings,function(t,e){n.toggleEvent(e,!1),delete n.bindings[e]}),this;if(s){if(e){var a=vt(s,function(t){return t.func===e});s=a.fail,this.bindings[o]=s,kt(a.pass,function(t){t.removed=!0})}else s.length=0;s.length||(this.toggleEvent(t,!1),delete this.bindings[o])}}else Ut(this.bindings,function(t,e){n.toggleEvent(e,!1)}),this.bindings={};return this},t.prototype.once=function(t,e,n){return this.on(t,e,n,{once:!0})},t.prototype.has=function(t){return t=t.toLowerCase(),!(!this.bindings[t]||0===this.bindings[t].length)},t}(),tH=function(n){return n._eventDispatcher||(n._eventDispatcher=new ZL({scope:n,toggleEvent:function(t,e){ZL.isNative(t)&&n.toggleNativeEvent&&n.toggleNativeEvent(t,e)}})),n._eventDispatcher},eH={fire:function(t,e,n){var i=this;if(i.removed&&"remove"!==t&&"detach"!==t)return e;var r=tH(i).fire(t,e);if(!1!==n&&i.parent)for(var o=i.parent();o&&!r.isPropagationStopped();)o.fire(t,r,!1),o=o.parent();return r},on:function(t,e,n){return tH(this).on(t,e,n)},off:function(t,e){return tH(this).off(t,e)},once:function(t,e){return tH(this).once(t,e)},hasEventListeners:function(t){return tH(this).has(t)}},nH=_l.DOM,iH=function(t,e){if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;var n=Dh(t);return n?(t.eventRoot||(t.eventRoot=nH.select(n)[0]),t.eventRoot):t.getBody()},rH=function(t){return!t.hidden&&!WL(t)},oH=function(t,e,n){rH(t)?t.fire(e,n):WL(t)&&XL(t,n)},sH=function(o,s){var t;if(o.delegates||(o.delegates={}),!o.delegates[s]&&!o.removed){var e=iH(o,s);if(Dh(o)){if(dP||(dP={},o.editorManager.on("removeEditor",function(){o.editorManager.activeEditor||dP&&(Ut(dP,function(t,e){o.dom.unbind(iH(o,e))}),dP=null)})),dP[s])return;t=function(t){for(var e=t.target,n=o.editorManager.get(),i=n.length;i--;){var r=n[i].getBody();(r===e||nH.isChildOf(e,r))&&oH(n[i],s,t)}},dP[s]=t,nH.bind(e,s,t)}else t=function(t){oH(o,s,t)},nH.bind(e,s,t),o.delegates[s]=t}},aH=de(de({},eH),{bindPendingEventDelegates:function(){var e=this;Sn.each(e._pendingNativeEvents,function(t){sH(e,t)})},toggleNativeEvent:function(t,e){var n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?sH(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(iH(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents:function(){var n=this,t=n.getBody(),e=n.dom;n.delegates&&(Ut(n.delegates,function(t,e){n.dom.unbind(iH(n,e),e,t)}),delete n.delegates),!n.inline&&t&&e&&(t.onload=null,e.unbind(n.getWin()),e.unbind(n.getDoc())),e&&(e.unbind(t),e.unbind(n.getContainer()))}}),uH=["design","readonly"],lH=function(t,e,n,i){var r=n[e.get()],o=n[i];try{o.activate()}catch(_B){return void console.error("problem while activating editor mode "+i+":",_B)}r.deactivate(),r.editorReadOnly!==o.editorReadOnly&&qL(t,o.editorReadOnly),e.set(i),vg(t,i)},cH=function(t,e,n,i){if(i!==n.get()){if(!Zt(e,i))throw new Error("Editor mode '"+i+"' is invalid");t.initialized?lH(t,n,e,i):t.on("init",function(){return lH(t,n,e,i)})}},dH=function(t,e,n){var i;if(ft(uH,e))throw new Error("Cannot override default mode "+e);return de(de({},t),((i={})[e]=de(de({},n),{deactivate:function(){try{n.deactivate()}catch(_B){console.error("problem while deactivating editor mode "+e+":",_B)}}}),i))},hH=function(e){var n=Al("design"),i=Al({design:{activate:xt,deactivate:xt,editorReadOnly:!1},readonly:{activate:xt,deactivate:xt,editorReadOnly:!0}});return YL(e),QL(e),{isReadOnly:function(){return WL(e)},set:function(t){return cH(e,i.get(),n,t)},get:function(){return n.get()},register:function(t,e){i.set(dH(i.get(),t,e))}}},fH=Sn.each,pH=Sn.explode,mH={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},gH=Sn.makeMap("alt,ctrl,shift,meta,access"),vH=function(t){var e,n={};fH(pH(t.toLowerCase(),"+"),function(t){t in gH?n[t]=!0:/^[0-9]{2,}$/.test(t)?n.keyCode=parseInt(t,10):(n.charCode=t.charCodeAt(0),n.keyCode=mH[t]||t.toUpperCase().charCodeAt(0))});var i=[n.keyCode];for(e in gH)n[e]?i.push(e):n[e]=!1;return n.id=i.join(","),n.access&&(n.alt=!0,yn.mac?n.ctrl=!0:n.shift=!0),n.meta&&(yn.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},bH=function(){function t(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;var n=this;t.on("keyup keypress keydown",function(e){!n.hasModifier(e)&&!n.isFunctionKey(e)||e.isDefaultPrevented()||(fH(n.shortcuts,function(t){if(n.matchShortcut(e,t))return n.pendingPatterns=t.subpatterns.slice(0),"keydown"===e.type&&n.executeShortcutAction(t),!0}),n.matchShortcut(e,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===e.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}return t.prototype.add=function(t,n,e,i){var r=this,o=r.normalizeCommandFunc(e);return fH(pH(Sn.trim(t)),function(t){var e=r.createShortcut(t,n,o,i);r.shortcuts[e.id]=e}),!0},t.prototype.remove=function(t){var e=this.createShortcut(t);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},t.prototype.normalizeCommandFunc=function(t){var e=this,n=t;return"string"==typeof n?function(){e.editor.execCommand(n,!1,null)}:Sn.isArray(n)?function(){e.editor.execCommand(n[0],n[1],n[2])}:n},t.prototype.createShortcut=function(t,e,n,i){var r=Sn.map(pH(t,">"),vH);return r[r.length-1]=Sn.extend(r[r.length-1],{func:n,scope:i||this.editor}),Sn.extend(r[0],{desc:this.editor.translate(e),subpatterns:r.slice(1)})},t.prototype.hasModifier=function(t){return t.altKey||t.ctrlKey||t.metaKey},t.prototype.isFunctionKey=function(t){return"keydown"===t.type&&112<=t.keyCode&&t.keyCode<=123},t.prototype.matchShortcut=function(t,e){return!!e&&(e.ctrl===t.ctrlKey&&e.meta===t.metaKey&&(e.alt===t.altKey&&e.shift===t.shiftKey&&(!!(t.keyCode===e.keyCode||t.charCode&&t.charCode===e.charCode)&&(t.preventDefault(),!0))))},t.prototype.executeShortcutAction=function(t){return t.func?t.func.call(t.scope):null},t}(),yH=function(){var t={},e={},n={},i={},r={},o={},s={},a=function(n,i){return function(t,e){return n[t.toLowerCase()]=de(de({},e),{type:i})}},u=function(t,e){return i[t.toLowerCase()]=e};return{addButton:a(t,"button"),addGroupToolbarButton:a(t,"grouptoolbarbutton"),addToggleButton:a(t,"togglebutton"),addMenuButton:a(t,"menubutton"),addSplitButton:a(t,"splitbutton"),addMenuItem:a(e,"menuitem"),addNestedMenuItem:a(e,"nestedmenuitem"),addToggleMenuItem:a(e,"togglemenuitem"),addAutocompleter:a(n,"autocompleter"),addContextMenu:a(r,"contextmenu"),addContextToolbar:a(o,"contexttoolbar"),addContextForm:a(o,"contextform"),addSidebar:a(s,"sidebar"),addIcon:u,getAll:function(){return{buttons:t,menuItems:e,icons:i,popups:n,contextMenus:r,contextToolbars:o,sidebars:s}}}},wH=function(){var t=yH();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,getAll:t.getAll}},_H=_l.DOM,xH=Sn.extend,CH=Sn.each,kH=Sn.resolve,SH=yn.ie,TH=function(){function t(t,e,n){var i=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,xH(this,aH),this.settings=wN(this,t,this.documentBaseUrl,n.defaultSettings,e),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(Dl.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),_l.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),$l.languageLoad=this.settings.language_load,$l.baseURL=n.baseURL,this.id=t,this.setDirty(!1),this.documentBaseURI=new ey(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new bH(this),this.editorCommands=new ML(this),this.settings.cache_suffix&&(yn.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:wH(),styleSheetLoader:undefined,show:xt,hide:xt,enable:xt,disable:xt,isDisabled:et};var r=hH(this);this.mode=r,this.setMode=r.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=fl.overrideDefaults(function(){return{context:i.inline?i.getBody():i.getDoc(),element:i.getBody()}})}return t.prototype.render=function(){lL(this)},t.prototype.focus=function(t){this.execCommand("mceFocus",!1,t)},t.prototype.hasFocus=function(){return Eb(this)},t.prototype.execCallback=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i,r=this,o=r.settings[t];if(o)return r.callbackLookup&&(i=r.callbackLookup[t])&&(o=i.func,i=i.scope),"string"==typeof o&&(i=(i=o.replace(/\.\w+$/,""))?kH(i):0,o=kH(o),r.callbackLookup=r.callbackLookup||{},r.callbackLookup[t]={func:o,scope:i}),o.apply(i||r,e)},t.prototype.translate=function(t){return Fl.translate(t)},t.prototype.getParam=function(t,e,n){return kN(this,t,e,n)},t.prototype.hasPlugin=function(t,e){return!!ft(Xh(this).split(/[ ,]/),t)&&(!e||BN.get(t)!==undefined)},t.prototype.nodeChanged=function(t){this._nodeChangeDispatcher.nodeChanged(t)},t.prototype.addCommand=function(t,e,n){this.editorCommands.addCommand(t,e,n)},t.prototype.addQueryStateHandler=function(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)},t.prototype.addQueryValueHandler=function(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)},t.prototype.addShortcut=function(t,e,n,i){this.shortcuts.add(t,e,n,i)},t.prototype.execCommand=function(t,e,n,i){return this.editorCommands.execCommand(t,e,n,i)},t.prototype.queryCommandState=function(t){return this.editorCommands.queryCommandState(t)},t.prototype.queryCommandValue=function(t){return this.editorCommands.queryCommandValue(t)},t.prototype.queryCommandSupported=function(t){return this.editorCommands.queryCommandSupported(t)},t.prototype.show=function(){var t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(_H.show(t.getContainer()),_H.hide(t.id)),t.load(),t.fire("show"))},t.prototype.hide=function(){var t=this,e=t.getDoc();t.hidden||(SH&&e&&!t.inline&&e.execCommand("SelectAll"),t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(_H.hide(t.getContainer()),_H.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.fire("hide"))},t.prototype.isHidden=function(){return!!this.hidden},t.prototype.setProgressState=function(t,e){this.fire("ProgressState",{state:t,time:e})},t.prototype.load=function(t){var e,n=this,i=n.getElement();if(n.removed)return"";if(i){(t=t||{}).load=!0;var r=ur(i)?i.value:i.innerHTML;return e=n.setContent(r,t),t.element=i,t.no_events||n.fire("LoadContent",t),t.element=i=null,e}},t.prototype.save=function(t){var e,n,i=this,r=i.getElement();if(r&&i.initialized&&!i.removed)return(t=t||{}).save=!0,t.element=r,e=t.content=i.getContent(t),t.no_events||i.fire("SaveContent",t),"raw"===t.format&&i.fire("RawSaveContent",t),e=t.content,ur(r)?r.value=e:(!t.is_removing&&i.inline||(r.innerHTML=e),(n=_H.getParent(i.id,"form"))&&CH(n.elements,function(t){if(t.name===i.id)return t.value=e,!1})),t.element=r=null,!1!==t.set_dirty&&i.setDirty(!1),e},t.prototype.setContent=function(t,e){return FE(this,t,e)},t.prototype.getContent=function(t){return ME(this,t)},t.prototype.insertContent=function(t,e){e&&(t=xH({content:t},e)),this.execCommand("mceInsertContent",!1,t)},t.prototype.resetContent=function(t){t===undefined?FE(this,this.startContent,{format:"raw"}):FE(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},t.prototype.isDirty=function(){return!this.isNotDirty},t.prototype.setDirty=function(t){var e=!this.isNotDirty;this.isNotDirty=!t,t&&t!==e&&this.fire("dirty")},t.prototype.getContainer=function(){var t=this;return t.container||(t.container=_H.get(t.editorContainer||t.id+"_parent")),t.container},t.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},t.prototype.getElement=function(){return this.targetElm||(this.targetElm=_H.get(this.id)),this.targetElm},t.prototype.getWin=function(){var t,e=this;return e.contentWindow||(t=e.iframeElement)&&(e.contentWindow=t.contentWindow),e.contentWindow},t.prototype.getDoc=function(){var t,e=this;return e.contentDocument||(t=e.getWin())&&(e.contentDocument=t.document),e.contentDocument},t.prototype.getBody=function(){var t=this.getDoc();return this.bodyElement||(t?t.body:null)},t.prototype.convertURL=function(t,e,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",t,n,!0,e):!r.convert_urls||n&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length?t:r.relative_urls?i.documentBaseURI.toRelative(t):t=i.documentBaseURI.toAbsolute(t,r.remove_script_host)},t.prototype.addVisual=function(t){cL(this,t)},t.prototype.remove=function(){jE(this)},t.prototype.destroy=function(t){UE(this,t)},t.prototype.uploadImages=function(t){return this.editorUpload.uploadImages(t)},t.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},t.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},t.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},t.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},t.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},t}(),EH=_l.DOM,NH=Sn.explode,DH=Sn.each,AH=Sn.extend,IH=0,PH=!1,RH=[],OH=[],MH=function(t){return"length"!==t},FH=function(e){var n=e.type;DH(zH.get(),function(t){switch(n){case"scroll":t.fire("ScrollWindow",e);break;case"resize":t.fire("ResizeWindow",e)}})},$H=function(t){t!==PH&&(t?fl(window).on("resize scroll",FH):fl(window).off("resize scroll",FH),PH=t)},LH=function(e){var t=OH;delete RH[e.id];for(var n=0;n<RH.length;n++)if(RH[n]===e){RH.splice(n,1);break}return OH=bt(OH,function(t){return e!==t}),zH.activeEditor===e&&(zH.activeEditor=0<OH.length?OH[0]:null),zH.focusedEditor===e&&(zH.focusedEditor=null),t.length!==OH.length},HH=function(t){return t&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(LH(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null),t},BH="CSS1Compat"!==document.compatMode,zH=de(de({},eH),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:fl,majorVersion:"5",minorVersion:"10.3",releaseDate:"2022-02-09",editors:RH,i18n:Fl,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var t,e,n=this,i="";e=ey.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));var r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,i=r.suffix;else{for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++){var a;if(""!==(a=o[s].src||"")){var u=a.substring(a.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(a)){-1!==u.indexOf(".min")&&(i=".min"),t=a.substring(0,a.lastIndexOf("/"));break}}}if(!t&&document.currentScript)-1!==(a=document.currentScript.src).indexOf(".min")&&(i=".min"),t=a.substring(0,a.lastIndexOf("/"))}n.baseURL=new ey(e).toAbsolute(t),n.documentBaseURL=e,n.baseURI=new ey(n.baseURL),n.suffix=i,vb(n)},overrideDefaults:function(t){var e=t.base_url;e&&this._setBaseUrl(e);var n=t.suffix;t.suffix&&(this.suffix=n);var i=(this.defaultSettings=t).plugin_base_urls;i!==undefined&&Ut(i,function(t,e){$l.PluginManager.urls[e]=t})},init:function(i){var n,a=this,r=Sn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),e=function(t,e){return t.inline&&e.tagName.toLowerCase()in r},u=function(t){var e=t.id;return e||(e=Jt(t,"name").filter(function(t){return!EH.get(t)}).getOrThunk(EH.uniqueId),t.setAttribute("id",e)),e},t=function(t){var e=i[t];if(e)return e.apply(a,[])},o=function(t,e){return e.constructor===RegExp?e.test(t.className):EH.hasClass(t,e)},l=function(e){var n=[];if(yn.browser.isIE()&&yn.browser.version.major<11)return JN("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(BH)return JN("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(e.types)return DH(e.types,function(t){n=n.concat(EH.select(t.selector))}),n;if(e.selector)return EH.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":var t=e.elements||"";0<t.length&&DH(NH(t),function(e){var t=EH.get(e);t?n.push(t):DH(document.forms,function(t){DH(t.elements,function(t){t.name===e&&(e="mce_editor_"+IH++,EH.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":DH(EH.select("textarea"),function(t){e.editor_deselector&&o(t,e.editor_deselector)||e.editor_selector&&!o(t,e.editor_selector)||n.push(t)})}return n},c=function(t){n=t},d=function(){var r,o=0,s=[],n=function(t,e,n){var i=new TH(t,e,a);s.push(i),i.on("init",function(){++o===r.length&&c(s)}),i.targetElm=i.targetElm||n,i.render()};EH.unbind(window,"ready",d),t("onpageload"),r=fl.unique(l(i)),i.types?DH(i.types,function(e){Sn.each(r,function(t){return!EH.is(t,e.selector)||(n(u(t),AH({},i,e),t),!1)})}):(Sn.each(r,function(t){HH(a.get(t.id))}),0===(r=Sn.grep(r,function(t){return!a.get(t.id)})).length?c([]):DH(r,function(t){e(i,t)?JN("Could not initialize inline editor on invalid inline target element",t):n(u(t),i,t)}))};return a.settings=i,EH.bind(window,"ready",d),new Mo(function(e){n?e(n):c=function(t){e(t)}})},get:function(e){return 0===arguments.length?OH.slice(0):wt(e)?Et(OH,function(t){return t.id===e}).getOr(null):W(e)&&OH[e]?OH[e]:null},add:function(t){var n=this;return RH[t.id]===t||(null===n.get(t.id)&&(MH(t.id)&&(RH[t.id]=t),RH.push(t),OH.push(t)),$H(!0),n.activeEditor=t,n.fire("AddEditor",{editor:t}),hP||(hP=function(t){var e=n.fire("BeforeUnload");if(
e.returnValue)return t.preventDefault(),t.returnValue=e.returnValue,e.returnValue},window.addEventListener("beforeunload",hP))),t},createEditor:function(t,e){return this.add(new TH(t,e,this))},remove:function(t){var e,n,i=this;if(t){if(!wt(t))return n=t,z(i.get(n.id))?null:(LH(n)&&i.fire("RemoveEditor",{editor:n}),0===OH.length&&window.removeEventListener("beforeunload",hP),n.remove(),$H(0<OH.length),n);DH(EH.select(t),function(t){(n=i.get(t.id))&&i.remove(n)})}else for(e=OH.length-1;0<=e;e--)i.remove(OH[e])},execCommand:function(t,e,n){var i=this,r=i.get(n);switch(t){case"mceAddEditor":return i.get(n)||new TH(n,i.settings,i).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():i.execCommand("mceAddEditor",!1,n),!0}return!!i.activeEditor&&i.activeEditor.execCommand(t,e,n)},triggerSave:function(){DH(OH,function(t){t.save()})},addI18n:function(t,e){Fl.add(t,e)},translate:function(t){return Fl.translate(t)},setActive:function(t){var e=this.activeEditor;this.activeEditor!==t&&(e&&e.fire("deactivate",{relatedTarget:t}),t.fire("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl:function(t){this.baseURL=new ey(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new ey(this.baseURL)}});zH.setup();var jH,UH,qH=Math.min,WH=Math.max,VH=Math.round,YH=function(t,e,n){var i=e.x,r=e.y,o=t.w,s=t.h,a=e.w,u=e.h,l=(n||"").split("");return"b"===l[0]&&(r+=u),"r"===l[1]&&(i+=a),"c"===l[0]&&(r+=VH(u/2)),"c"===l[1]&&(i+=VH(a/2)),"b"===l[3]&&(r-=s),"r"===l[4]&&(i-=o),"c"===l[3]&&(r-=VH(s/2)),"c"===l[4]&&(i-=VH(o/2)),JH(i,r,o,s)},KH=function(t,e,n,i){var r,o;for(o=0;o<i.length;o++)if((r=YH(t,e,i[o])).x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return i[o];return null},GH=function(t,e,n){return JH(t.x-e,t.y-n,t.w+2*e,t.h+2*n)},XH=function(t,e){var n=WH(t.x,e.x),i=WH(t.y,e.y),r=qH(t.x+t.w,e.x+e.w),o=qH(t.y+t.h,e.y+e.h);return r-n<0||o-i<0?null:JH(n,i,r-n,o-i)},QH=function(t,e,n){var i=t.x,r=t.y,o=t.x+t.w,s=t.y+t.h,a=e.x+e.w,u=e.y+e.h,l=WH(0,e.x-i),c=WH(0,e.y-r),d=WH(0,o-a),h=WH(0,s-u);return i+=l,r+=c,n&&(o+=l,s+=c,i-=d,r-=h),JH(i,r,(o-=d)-i,(s-=h)-r)},JH=function(t,e,n,i){return{x:t,y:e,w:n,h:i}},ZH=function(t){return JH(t.left,t.top,t.width,t.height)},tB={inflate:GH,relativePosition:YH,findBestRelativePosition:KH,intersect:XH,clamp:QH,create:JH,fromClientRect:ZH},eB=function(t,e,n){void 0===n&&(n=1e3);var i=!1,r=null,o=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i||(i=!0,null!==r&&(clearTimeout(r),r=null),n.apply(null,t))}},s=o(t),a=o(e);return{start:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i||null!==r||(r=setTimeout(function(){return a.apply(null,t)},n))},resolve:s,reject:a}},nB=function(){var n={},a={};return{load:function(i,r){var o='Script at URL "'+r+'" failed to load',s='Script at URL "'+r+"\" did not call `tinymce.Resource.add('"+i+"', data)` within 1 second";if(n[i]!==undefined)return n[i];var t=new Mo(function(t,e){var n=eB(t,e);a[i]=n.resolve,Dl.ScriptLoader.loadScript(r,function(){return n.start(s)},function(){return n.reject(o)})});return n[i]=t},add:function(t,e){a[t]!==undefined&&(a[t](e),delete a[t]),n[t]=Mo.resolve(e)}}}(),iB=Sn.each,rB=Sn.extend,oB=function(){};oB.extend=jH=function(i){var t=this,o=t.prototype,n=function(){var t,e,n,i=this;if(!UH&&(i.init&&i.init.apply(i,arguments),e=i.Mixins))for(t=e.length;t--;)(n=e[t]).init&&n.init.apply(i,arguments)},e=function(){return this},r=function(i,r){return function(){var t=this,e=t._super;t._super=o[i];var n=r.apply(t,arguments);return t._super=e,n}};UH=!0;var s=new t;return UH=!1,i.Mixins&&(iB(i.Mixins,function(t){for(var e in t)"init"!==e&&(i[e]=t[e])}),o.Mixins&&(i.Mixins=o.Mixins.concat(i.Mixins))),i.Methods&&iB(i.Methods.split(","),function(t){i[t]=e}),i.Properties&&iB(i.Properties.split(","),function(t){var n="_"+t;i[t]=function(t){var e=this;return t!==undefined?(e[n]=t,e):e[n]}}),i.Statics&&iB(i.Statics,function(t,e){n[e]=t}),i.Defaults&&o.Defaults&&(i.Defaults=rB({},o.Defaults,i.Defaults)),Ut(i,function(t,e){"function"==typeof t&&o[e]?s[e]=r(e,t):s[e]=t}),n.prototype=s,(n.constructor=n).extend=jH,n};var sB,aB=Math.min,uB=Math.max,lB=Math.round,cB=function(t){var n={},a=0,u=0,l=0,e=function(t,e,n){var i,r;r=i=0;var o=aB(t/=255,aB(e/=255,n/=255)),s=uB(t,uB(e,n));return o===s?{h:0,s:0,v:100*(r=o)}:(i=(s-o)/s,{h:lB(60*((t===o?3:n===o?1:5)-(t===o?e-n:n===o?t-e:n-t)/((r=s)-o))),s:lB(100*i),v:lB(100*r)})},i=function(t,e,n){if(t=(parseInt(t,10)||0)%360,e=parseInt(e,10)/100,n=parseInt(n,10)/100,e=uB(0,aB(e,1)),n=uB(0,aB(n,1)),0!==e){var i=t/60,r=n*e,o=r*(1-Math.abs(i%2-1)),s=n-r;switch(Math.floor(i)){case 0:a=r,u=o,l=0;break;case 1:a=o,u=r,l=0;break;case 2:a=0,u=r,l=o;break;case 3:a=0,u=o,l=r;break;case 4:a=o,u=0,l=r;break;case 5:a=r,u=0,l=o;break;default:a=u=l=0}a=lB(255*(a+s)),u=lB(255*(u+s)),l=lB(255*(l+s))}else a=u=l=lB(255*n)},r=function(){var t=function(t){return 1<(t=parseInt(t,10).toString(16)).length?t:"0"+t};return"#"+t(a)+t(u)+t(l)},o=function(){return{r:a,g:u,b:l}},s=function(){return e(a,u,l)},c=function(t){var e;return"object"==typeof t?"r"in t?(a=t.r,u=t.g,l=t.b):"v"in t&&i(t.h,t.s,t.v):(e=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(t))?(a=parseInt(e[1],10),u=parseInt(e[2],10),l=parseInt(e[3],10)):(e=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(t))?(a=parseInt(e[1],16),u=parseInt(e[2],16),l=parseInt(e[3],16)):(e=/#([0-F])([0-F])([0-F])/gi.exec(t))&&(a=parseInt(e[1]+e[1],16),u=parseInt(e[2]+e[2],16),l=parseInt(e[3]+e[3],16)),a=a<0?0:255<a?255:a,u=u<0?0:255<u?255:u,l=l<0?0:255<l?255:l,n};return t&&c(t),n.toRgb=o,n.toHsv=s,n.toHex=r,n.parse=c,n},dB={serialize:function(t){var e=JSON.stringify(t);return wt(e)?e.replace(/[\u0080-\uFFFF]/g,function(t){var e=t.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e}):e},parse:function(t){try{return JSON.parse(t)}catch(e){}}},hB={callbacks:{},count:0,send:function(e){var n=this,i=_l.DOM,r=e.count!==undefined?e.count:n.count,o="tinymce_jsonp_"+r;n.callbacks[r]=function(t){i.remove(o),delete n.callbacks[r],e.callback(t)},i.add(i.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),n.count++}},fB=de(de({},eH),{send:function(t){var e,n=0,i=function(){!t.async||4===e.readyState||1e4<n++?(t.success&&n<1e4&&200===e.status?t.success.call(t.success_scope,""+e.responseText,e,t):t.error&&t.error.call(t.error_scope,1e4<n?"TIMED_OUT":"GENERAL",e,t),e=null):Bo.setTimeout(i,10)};if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=!1!==t.async,t.data=t.data||"",fB.fire("beforeInitialize",{settings:t}),(e=new XMLHttpRequest).overrideMimeType&&e.overrideMimeType(t.content_type),e.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.crossDomain&&(e.withCredentials=!0),t.content_type&&e.setRequestHeader("Content-Type",t.content_type),t.requestheaders&&Sn.each(t.requestheaders,function(t){e.setRequestHeader(t.key,t.value)}),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),(e=fB.fire("beforeSend",{xhr:e,settings:t}).xhr).send(t.data),!t.async)return i();Bo.setTimeout(i,10)}}),pB=Sn.extend,mB=function(){function e(t){this.settings=pB({},t),this.count=0}return e.sendRPC=function(t){return(new e).send(t)},e.prototype.send=function(t){var n=t.error,i=t.success,r=pB(this.settings,t);r.success=function(t,e){void 0===(t=dB.parse(t))&&(t={error:"JSON Parse error."}),t.error?n.call(r.error_scope||r.scope,t.error,e):i.call(r.success_scope||r.scope,t.result)},r.error=function(t,e){n&&n.call(r.error_scope||r.scope,t,e)},r.data=dB.serialize({id:t.id||"c"+this.count++,method:t.method,params:t.params}),r.content_type="application/json",fB.send(r)},e}(),gB=function(){return n={},i=[],t={getItem:function(t){var e=n[t];return e||null},setItem:function(t,e){i.push(t),n[t]=String(e)},key:function(t){return i[t]},removeItem:function(e){i=i.filter(function(t){return t===e}),delete n[e]},clear:function(){i=[],n={}},length:0},Object.defineProperty(t,"length",{get:function(){return i.length},configurable:!1,enumerable:!1}),t;var n,i,t};try{var vB="__storage_test__";(sB=window.localStorage).setItem(vB,vB),sB.removeItem(vB)}catch(_B){sB=gB()}var bB={geom:{Rect:tB},util:{Promise:Mo,Delay:Bo,Tools:Sn,VK:Eg,URI:ey,Class:oB,EventDispatcher:ZL,Observable:eH,I18n:Fl,XHR:fB,JSON:dB,JSONRequest:mB,JSONP:hB,LocalStorage:sB,Color:cB,ImageUploader:hD},dom:{EventUtils:Za,Sizzle:$u,DomQuery:fl,TreeWalker:Uo,TextSeeker:xc,DOMUtils:_l,ScriptLoader:Dl,RangeUtils:Xg,Serializer:RE,StyleSheetLoader:zo,ControlSelection:Dg,BookmarkManager:cg,Selection:jT,Event:Za.Event},html:{Styles:Ha,Entities:Ta,Node:qb,Schema:$a,SaxParser:uy,DomParser:wE,Writer:yy,Serializer:wy},Env:yn,AddOnManager:$l,Annotator:lg,Formatter:kD,UndoManager:ND,EditorCommands:ML,WindowManager:jN,NotificationManager:HN,EditorObservable:aH,Shortcuts:bH,Editor:TH,FocusManager:ib,EditorManager:zH,DOM:_l.DOM,ScriptLoader:Dl.ScriptLoader,PluginManager:BN,ThemeManager:zN,IconManager:SN,Resource:nB,trim:Sn.trim,isArray:Sn.isArray,is:Sn.is,toArray:Sn.toArray,makeMap:Sn.makeMap,each:Sn.each,map:Sn.map,grep:Sn.grep,inArray:Sn.inArray,extend:Sn.extend,create:Sn.create,walk:Sn.walk,createNS:Sn.createNS,resolve:Sn.resolve,explode:Sn.explode,_addCacheSuffix:Sn._addCacheSuffix,isOpera:yn.opera,isWebKit:yn.webkit,isIE:yn.ie,isGecko:yn.gecko,isMac:yn.mac},yB=Sn.extend(zH,bB),wB=function(t){if("object"==typeof module)try{module.exports=t}catch(_){}};(function(t){window.tinymce=t,window.tinyMCE=t})(yB),wB(yB)}(),function(t,e){if("object"==typeof exports&&exports)e(exports);else{var n={};e(n),"function"==typeof define&&define.amd?define(n):t.Mustache=n}}(this,function(b){function e(t,e){return o.call(t,e)}function y(t){return!e(r,t)}function w(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function t(t){return String(t).replace(/[&<>"'\/]/g,function(t){return u[t]})}function _(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=t||{},this.parent=e,this._cache={}}function n(){this.clearCache()}function f(t,e,n,i){for(var r,o,s,a="",u=0,l=t.length;u<l;++u)switch(o=(r=t[u])[1],r[0]){case"#":if("object"==typeof(s=n.lookup(o)))if(p(s))for(var c=0,d=s.length;c<d;++c)a+=f(r[4],e,n.push(s[c]),i);else s&&(a+=f(r[4],e,n.push(s),i));else if("function"==typeof s){var h=null==i?null:i.slice(r[3],r[5]);null!=(s=s.call(n.view,h,function(t){return e.render(t,n)}))&&(a+=s)}else s&&(a+=f(r[4],e,n,i));break;case"^":(!(s=n.lookup(o))||p(s)&&0===s.length)&&(a+=f(r[4],e,n,i));break;case">":"function"==typeof(s=e.getPartial(o))&&(a+=s(n));break;case"&":null!=(s=n.lookup(o))&&(a+=s);break;case"name":null!=(s=n.lookup(o))&&(a+=b.escape(s));break;case"text":a+=o}return a}function x(t){for(var e,n=[],i=n,r=[],o=0,s=t.length;o<s;++o)switch((e=t[o])[0]){case"#":case"^":r.push(e),i.push(e),i=e[4]=[];break;case"/":r.pop()[5]=e[2],i=0<r.length?r[r.length-1][4]:n;break;default:i.push(e)}return n}function C(t){for(var e,n,i=[],r=0,o=t.length;r<o;++r)(e=t[r])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(n=e,i.push(e)));return i}function k(t){return[new RegExp(w(t[0])+"\\s*"),new RegExp("\\s*"+w(t[1]))]}function i(t,e){function n(){if(f&&!p)for(;h.length;)delete d[h.pop()];else h=[];p=f=!1}if(t=t||"","string"==typeof(e=e||b.tags)&&(e=e.split(T)),2!==e.length)throw new Error("Invalid tags: "+e.join(", "));for(var i,r,o,s,a,u=k(e),l=new _(t),c=[],d=[],h=[],f=!1,p=!1;!l.eos();){if(i=l.pos,o=l.scanUntil(u[0]))for(var m=0,g=o.length;m<g;++m)y(s=o.charAt(m))?h.push(d.length):p=!0,d.push(["text",s,i,i+1]),i+=1,"\n"==s&&n();if(!l.scan(u[0]))break;if(f=!0,r=l.scan(D)||"name",l.scan(S),"="===r?(o=l.scanUntil(E),l.scan(E),l.scanUntil(u[1])):"{"===r?(o=l.scanUntil(new RegExp("\\s*"+w("}"+e[1]))),l.scan(N),l.scanUntil(u[1]),r="&"):o=l.scanUntil(u[1]),!l.scan(u[1]))throw new Error("Unclosed tag at "+l.pos);if(a=[r,o,i,l.pos],d.push(a),"#"===r||"^"===r)c.push(a);else if("/"===r){if(0===c.length)throw new Error('Unopened section "'+o+'" at '+i);if((v=c.pop())[1]!==o)throw new Error('Unclosed section "'+v[1]+'" at '+i)}else if("name"===r||"{"===r||"&"===r)p=!0;else if("="===r){if(2!==(e=o.split(T)).length)throw new Error("Invalid tags at "+i+": "+e.join(", "));u=k(e)}}var v;if(v=c.pop())throw new Error('Unclosed section "'+v[1]+'" at '+l.pos);return x(d=C(d))}var S=/\s*/,T=/\s+/,r=/\S/,E=/\s*=/,N=/\s*\}/,D=/#|\^|\/|>|\{|&|=|!/,o=RegExp.prototype.test,a=Object.prototype.toString,p=Array.isArray||function(t){return"[object Array]"===a.call(t)},u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};_.prototype.eos=function(){return""===this.tail},_.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},_.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return e},s.make=function(t){return t instanceof s?t:new s(t)},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."==t)e=this.view;else for(var n=this;n;){if(0<t.indexOf(".")){e=n.view;for(var i=t.split("."),r=0;e&&r<i.length;)e=e[i[r++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},n.prototype.clearCache=function(){this._cache={},this._partialCache={}},n.prototype.compile=function(t,e){var n=this._cache[t];if(!n){var i=b.parse(t,e);n=this._cache[t]=this.compileTokens(i,t)}return n},n.prototype.compilePartial=function(t,e,n){var i=this.compile(e,n);return this._partialCache[t]=i},n.prototype.getPartial=function(t){return t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t)),this._partialCache[t]},n.prototype.compileTokens=function(i,r){var o=this;return function(t,e){if(e)if("function"==typeof e)o._loadPartial=e;else for(var n in e)o.compilePartial(n,e[n]);return f(i,o,s.make(t),r)}},n.prototype.render=function(t,e,n){return this.compile(t)(e,n)},b.name="mustache.js",b.version="0.7.2",b.tags=["{{","}}"],b.Scanner=_,b.Context=s,b.Writer=n,b.parse=i,b.escape=t;var l=new n;b.clearCache=function(){return l.clearCache()},b.compile=function(t,e){return l.compile(t,e)},b.compilePartial=function(t,e,n){return l.compilePartial(t,e,n)},b.compileTokens=function(t,e){return l.compileTokens(t,e)},b.render=function(t,e,n){return l.render(t,e,n)},b.to_html=function(t,e,n,i){var r=b.render(t,e,n);if("function"!=typeof i)return r;i(r)}}),function(t,a,r){function n(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}}function i(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b","i").test(t.className)}function o(t,e){t.classList?t.classList.add(e):i(t,e)||(t.className+=" "+e)}function e(t,e){if(t.classList)t.classList.remove(e);else if(i(t,e)){var n=new RegExp("\\b"+e+"\\b","i");t.className=t.className.split(n).join("")}}function s(t){for(var e in this)0===e.indexOf("_on")&&"function"==typeof this[e]&&(this[e]=n(this[e],this));this.options=t=t||{},this.root=t.root||r.documentElement,this.prefix=(t.prefix||"highlighter")+"-",this.throttle=t.throttle||1e3/60,this.selected=null,!(this.handles={start:this.createHandle("start"),end:this.createHandle("end")})!==t.enable&&this.enable()}s.prototype={constructor:s,get:function(){return a.getSelection()},enable:function(){return this.enabled||(this.bind(this.root,{click:"_onClick"}),this.bind(r,{tapstart:"_onDocumentDown",mousedown:"_onDocumentDown"}),this.options.highlightStyles&&(this.style=this.createStyle(),r.getElementsByTagName("head")[0].appendChild(this.style)),r.body.appendChild(this.handles.start),r.body.appendChild(this.handles.end),this.hideHandles(),this.enabled=!0),this},disable:function(){this.enabled&&(this.unbind(this.root,{click:"_onClick"}),this.unbind(r,{tapstart:"_onDocumentDown",mousedown:"_onDocumentDown"}),this.style&&this.style.parentNode.removeChild(this.style),r.body.removeChild(this.handles.start),r.body.removeChild(this.handles.end),this.get().removeAllRanges(),this.showHandles(),this.enabled=!1)},isEnabled:function(){return this.enabled},select:function(t){var e=this.get(),n=a.scrollY,i=a.scrollX,r=t.getClientRects(),o=r[0],s=r[r.length-1];return e.removeAllRanges(),e.addRange(t),this.positionHandles({x:o.left+i,y:o.top+n+o.height/2},{x:s.left+s.width+i,y:s.top+n+s.height/2}),this.selected=t,this.showHandles()},deselect:function(){var t=this.get();return t&&(this.selected=null,t.removeAllRanges()),this.hideHandles()},selectWord:function(t){var e=this.createRange(t);return e&&(e.expand("word"),e.toString().trim()&&this.select(e)),this},selectRange:function(t,e){var n=r.createRange();return n.setStart(t.startContainer,t.startOffset),n.setEnd(e.endContainer,e.endOffset),this.select(n)},expandStart:function(t){var e=this.selected;return e&&(e.startContainer!==t.startContainer||e.startOffset!==t.startOffset)&&this.selectRange(t,e),this},expandEnd:function(t){var e=this.selected;return e&&(t.expand("character"),(e.endContainer!==t.endContainer||e.endOffset!==t.endOffset)&&this.selectRange(e,t)),this},createRange:function(t){return r.caretRangeFromPoint(t.x,t.y)},showHandles:function(){return e(r.documentElement,this.prefix+"hide"),this},hideHandles:function(){return o(r.documentElement,this.prefix+"hide"),this},getFirstPosition:function(t){var e=t.touches?t.touches[0]:t;return e?{x:e.clientX,y:e.clientY}:null},bind:function(t,e){var n,i;for(n in e)e.hasOwnProperty(n)&&("string"==typeof(i=e[n])&&(i=this[i]),t.addEventListener(n,i,!1));return this},unbind:function(t,e){var n,i;for(n in e)e.hasOwnProperty(n)&&("string"==typeof(i=e[n])&&(i=this[i]),t.removeEventListener(n,i,!1));return this},updatePositionByHandle:function(t){var e,n,i,r;return this.hideHandles(),n=this.createRange(t),this.showHandles(),n&&(e=this.selected,i=!this._isStartHandle&&1===e.compareBoundaryPoints(Range.START_TO_START,n),r=this._isStartHandle&&-1===e.compareBoundaryPoints(Range.END_TO_END,n),i||r?(this._isStartHandle=!this._isStartHandle,e.collapse(i),i?this.selectRange(n,e):this.selectRange(e,n)):this[this._isStartHandle?"expandStart":"expandEnd"](n)),this},isHandle:function(t){return t===this.handles.start||t===this.handles.end},positionHandles:function(t,e){return e=e||{},(t=t||{}).y&&(this.handles.start.style.top=t.y+"px"),t.x&&(this.handles.start.style.left=t.x+"px"),e.y&&(this.handles.end.style.top=e.y+"px"),e.x&&(this.handles.end.style.left=e.x+"px"),this},createHandle:function(t){var e=r.createElement("span");return o(e,this.prefix+"handle"),o(e,this.prefix+t),this.bind(e,{touchstart:"_onHandleDown",mousedown:"_onHandleDown"}),e},createStyle:function(){var t="::selection {$} ::-moz-selection {$} ::-webkit-selection {$}",e=r.createElement("style"),n="string"==typeof this.options.highlightStyles,i=this.options.highlightStyles;return i=n?i:"background-color: rgb(180, 213, 254)",t=t.replace(/\$/g,i),e.appendChild(r.createTextNode(t)),e},_onClick:function(t){if(!this.selected&&!this._cleared){var e=this.getFirstPosition(t);e&&this.selectWord(e),t.preventDefault()}},_onDocumentDown:function(t){var e,n,i,r=this.getFirstPosition(t),o=this.selected;delete this._cleared,this.selected&&r&&!this.isHandle(t.target)&&(n=-1===(e=this.createRange(r)).compareBoundaryPoints(Range.START_TO_END,o),i=1===e.compareBoundaryPoints(Range.END_TO_START,o),(n||i)&&(this._cleared=!0,this.deselect())),this.isEnabled()&&t.preventDefault()},_onHandleDown:function(t){var e=this.getFirstPosition(t);e&&this.selected&&(this._offset={y:e.y-parseFloat(t.target.style.top)+a.scrollY,x:e.x-parseFloat(t.target.style.left)+a.scrollX},this._startPosition=this._endPosition=e,this._isStartHandle=t.target===this.handles.start,this.bind(r,{mousemove:"_onHandleMove",mouseup:"_onHandleUp",touchmove:"_onHandleMove",touchend:"_onHandleUp"})),t.stopPropagation(),t.preventDefault()},_onHandleMove:function(t){var e,n=this;t.stopPropagation(),t.preventDefault(),this._throttled||(this._throttled=setTimeout(function(){n._throttled=null},this.throttle),this._startPosition&&(e=this.getFirstPosition(t))&&(e={y:e.y-this._offset.y,x:e.x-this._offset.x},this.updatePositionByHandle(e,this._isStartHandle)))},_onHandleUp:function(){clearTimeout(this._throttled),delete this._isStartHandle,delete this._startPosition,delete this._endPosition,delete this._throttled,delete this._offset,this.unbind(r,{mousemove:"_onHandleMove",mouseup:"_onHandleUp",touchmove:"_onHandleMove",touchend:"_onHandleUp"})}},t.exports?t.exports=s:t.Highlighter=s}("undefined"!=typeof module?module:this,this,this.document),function(){var b,c,i,y,m,g,r,o,s,l,t,e,n,u,a,d,h,f,p,v,w,_,x,C,k,S,T,E,N,D,A,I=[].slice,P={}.hasOwnProperty,R=function(t,e){function n(){this.constructor=t}for(var i in e)P.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},O=function(t,e){return function(){return t.apply(e,arguments)}},M=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};if(f=function(r){return this.map(function(){var t,e,n,i;for(n="",t=this;(null!=t?t.nodeType:void 0)===Node.ELEMENT_NODE&&t!==r;)i=t.tagName.replace(":","\\:"),e="["+(e=b(t.parentNode).children(i).index(t)+1)+"]",n="/"+t.tagName.toLowerCase()+e+n,t=t.parentNode;return n}).get()},p=function(t){var n,e,i;return n=function(t){return u(t)+"["+a(t)+"]"},i=t,e=function(t){var e;for(e="";t!==i;){if(null==t)throw new Error("Called getPathTo on a node which was not a descendant of @rootNode. "+i);e=n(t)+"/"+e,t=t.parentNode}return(e="/"+e).replace(/\/$/,"")},this.map(function(){return e(this)}).get()},l=function(t,e,n){var i,r,o,s,a;if(!t.hasChildNodes())throw new Error("XPath error: node has no children!");for(s=o=0,a=(r=t.childNodes).length;s<a;s++)if(i=r[s],u(i)===e&&(o+=1)===n)return i;throw new Error("XPath error: wanted child not found.")},u=function(t){var e;switch(e=t.nodeName.toLowerCase()){case"#text":return"text()";case"#comment":return"comment()";case"#cdata-section":return"cdata-section()";default:return e}},a=function(t){var e,n;for(e=0,n=t;n;)n.nodeName===t.nodeName&&e++,n=n.previousSibling;return e},d=null,"undefined"!=typeof Gettext&&null!==Gettext?(w=new Gettext({domain:"annotator"}),d=function(t){return w.gettext(t)}):d=function(t){return t},E=function(t){return d(t)},("undefined"!=typeof jQuery&&null!==jQuery&&null!=(S=jQuery.fn)?S.jquery:void 0)||console.error(E("Annotator requires jQuery: have you included lib/vendor/jquery.js?")),JSON&&JSON.parse&&JSON.stringify||console.error(E("Annotator requires a JSON implementation: have you included lib/vendor/json2.js?")),b=jQuery,(g={}).flatten=function(t){var o;return(o=function(t){var e,n,i,r;for(n=[],i=0,r=t.length;i<r;i++)e=t[i],n=n.concat(e&&b.isArray(e)?o(e):e);return n})(t)},g.contains=function(t,e){var n;for(n=e;null!=n;){if(n===t)return!0;n=n.parentNode}return!1},g.getTextNodes=function(t){var n;return n=function(t){var e;if(t&&t.nodeType!==Node.TEXT_NODE){if(e=[],t.nodeType!==Node.COMMENT_NODE)for(t=t.lastChild;t;)e.push(n(t)),t=t.previousSibling;return e.reverse()}return t},t.map(function(){return g.flatten(n(this))})},g.getLastTextNodeUpTo=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.lastChild&&null!=(e=g.getLastTextNodeUpTo(t.lastChild)))return e}return null!=(t=t.previousSibling)?g.getLastTextNodeUpTo(t):null},g.getFirstTextNodeNotBefore=function(t){var e;switch(t.nodeType){case Node.TEXT_NODE:return t;case Node.ELEMENT_NODE:if(null!=t.firstChild&&null!=(e=g.getFirstTextNodeNotBefore(t.firstChild)))return e}return null!=(t=t.nextSibling)?g.getFirstTextNodeNotBefore(t):null},g.readRangeViaSelection=function(t){var e;return(e=g.getGlobal().getSelection()).removeAllRanges(),e.addRange(t.toRange()),e.toString()},g.xpathFromNode=function(t,e){var n;try{n=f.call(t,e)}catch(y){console.log("jQuery-based XPath construction failed! Falling back to manual."),n=p.call(t,e)}return n},g.nodeFromXPath=function(t,e){var n,i,r,o,s,a,u;for(r=e,s=0,a=(o=t.substring(1).split("/")).length;s<a;s++)i=(u=o[s].split("["))[0],n=null!=(n=u[1])?parseInt((null!=n?n.split("]"):void 0)[0]):1,r=l(r,i.toLowerCase(),n);return r},g.escape=function(t){return t.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},g.uuid=(N=0,function(){return N++}),g.getGlobal=function(){return function(){return this}()},g.maxZIndex=function(i){var t,r;return t=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],"static"===b(r).css("position")?n.push(-1):n.push(parseInt(b(r).css("z-index"),10)||-1);return n}(),Math.max.apply(Math,t)},g.mousePosition=function(t,e){var n,i;return"absolute"!==(i=b(e).css("position"))&&"fixed"!==i&&"relative"!==i&&(e=b(e).offsetParent()[0]),n=b(e).offset(),{top:t.pageY-n.top,left:t.pageX-n.left}},g.preventEventDefault=function(t){return null!=t&&"function"==typeof t.preventDefault?t.preventDefault():void 0},e=["log","debug","info","warn","exception","assert","dir","dirxml","trace","group","groupEnd","groupCollapsed","time","timeEnd","profile","profileEnd","count","clear","table","error","notifyFirebug","firebug","userObjects"],"undefined"!=typeof console&&null!==console)for(null==console.group&&(console.group=function(t){return console.log("GROUP: ",t)}),null==console.groupCollapsed&&(console.groupCollapsed=console.group),_=0,C=e.length;_<C;_++)t=e[_],null==console[t]&&(console[t]=function(){return console.log(E("Not implemented:")+" console."+name)});else{for(this.console={},x=0,k=e.length;x<k;x++)t=e[x],this.console[t]=function(){};this.console.error=function(){var t;return t=1<=arguments.length?I.call(arguments,0):[],alert("ERROR: "+t.join(", "))},this.console.warn=function(){var t;return t=1<=arguments.length?I.call(arguments,0):[],alert("WARNING: "+t.join(", "))}}(i=function(){function o(t,e){this.options=b.extend(!0,{},this.options,e),this.element=b(t),this._closures={},this.on=this.subscribe,this.addEvents()}return o.prototype.events={},o.prototype.options={},o.prototype.element=null,o.prototype.addEvents=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=o._parseEvents(this.events)).length;e<n;e++)t=i[e],r.push(this._addEvent(t.selector,t.event,t.functionName));return r},o.prototype.removeEvents=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=o._parseEvents(this.events)).length;e<n;e++)t=i[e],r.push(this._removeEvent(t.selector,t.event,t.functionName));return r},o.prototype._addEvent=function(t,e,n){var i,r;return r=this,i=function(){return r[n].apply(r,arguments)},""===t&&o._isCustomEvent(e)?this.subscribe(e,i):this.element.delegate(t,e,i),this._closures[t+"/"+e+"/"+n]=i,this},o.prototype._removeEvent=function(t,e,n){var i;return i=this._closures[t+"/"+e+"/"+n],""===t&&o._isCustomEvent(e)?this.unsubscribe(e,i):this.element.undelegate(t,e,i),delete this._closures[t+"/"+e+"/"+n],this},o.prototype.publish=function(){return this.element.triggerHandler.apply(this.element,arguments),this},o.prototype.subscribe=function(t,e){var n;return(n=function(){return e.apply(this,[].slice.call(arguments,1))}).guid=e.guid=b.guid+=1,this.element.bind(t,n),this},o.prototype.unsubscribe=function(){return this.element.unbind.apply(this.element,arguments),this},o}())._parseEvents=function(t){var e,n,i,r,o,s,a;for(r in n=[],t)i=t[r],o=2<=(a=r.split(" ")).length?I.call(a,0,s=a.length-1):(s=0,[]),e=a[s++],n.push({selector:o.join(" "),event:e,functionName:i});return n},i.natives=(A=function(){var t,e;for(D in e=[],t=jQuery.event.special)P.call(t,D)&&(t[D],e.push(D));return e}(),"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error".split(/[^a-z]+/).concat(A)),i._isCustomEvent=function(t){return t=t.split(".")[0],-1===b.inArray(t,i.natives)},(m={}).sniff=function(t){return null!=t.commonAncestorContainer?new m.BrowserRange(t):"string"==typeof t.start?new m.SerializedRange(t):t.start&&"object"==typeof t.start?new m.NormalizedRange(t):(console.error(E("Could not sniff range type")),!1)},m.nodeFromXPath=function(r,n){var t,e,i,o,s;return null==n&&(n=document),e=function(t,e){null==e&&(e=null);try{return document.evaluate("."+t,n,e,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(e){return console.log("XPath evaluation failed."),console.log("Trying fallback..."),g.nodeFromXPath(t,n)}},b.isXMLDoc(document.documentElement)?(t=document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement),(o=e(r,t))||(r=function(){var t,e,n,i;for(i=[],t=0,e=(n=r.split("/")).length;t<e;t++)(s=n[t])&&-1===s.indexOf(":")?i.push(s.replace(/^([a-z]+)/,"xhtml:$1")):i.push(s);return i}().join("/"),i=document.lookupNamespaceURI(null),o=e(r,t=function(t){return"xhtml"===t?i:document.documentElement.getAttribute("xmlns:"+t)})),o):e(r)},m.RangeError=function(t){function i(t,e,n){this.type=t,this.message=e,this.parent=null!=n?n:null,i.__super__.constructor.call(this,this.message)}return R(i,t),i}(Error),m.BrowserRange=function(){function t(t){this.commonAncestorContainer=t.commonAncestorContainer,this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset}return t.prototype.normalize=function(){var t,e,n,i;if(this.tainted)return console.error(E("You may only call normalize() once on a BrowserRange!")),!1;if(this.tainted=!0,i={},this.startContainer.nodeType===Node.ELEMENT_NODE?(i.start=g.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]),i.startOffset=0):(i.start=this.startContainer,i.startOffset=this.startOffset),this.endContainer.nodeType===Node.ELEMENT_NODE){if(null!=(e=this.endContainer.childNodes[this.endOffset])){for(t=e;null!=t&&t.nodeType!==Node.TEXT_NODE;)t=t.firstChild;null!=t&&(i.end=t,i.endOffset=0)}null==i.end&&(e=this.endContainer.childNodes[this.endOffset-1],i.end=g.getLastTextNodeUpTo(e),i.endOffset=i.end.nodeValue.length)}else i.end=this.endContainer,i.endOffset=this.endOffset;for(n={},0<i.startOffset?i.start.nodeValue.length>i.startOffset?n.start=i.start.splitText(i.startOffset):n.start=i.start.nextSibling:n.start=i.start,i.start===i.end?(n.start.nodeValue.length>i.endOffset-i.startOffset&&n.start.splitText(i.endOffset-i.startOffset),n.end=n.start):(i.end.nodeValue.length>i.endOffset&&i.end.splitText(i.endOffset),n.end=i.end),n.commonAncestor=this.commonAncestorContainer;n.commonAncestor.nodeType!==Node.ELEMENT_NODE;)n.commonAncestor=n.commonAncestor.parentNode;return new m.NormalizedRange(n)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t}(),m.NormalizedRange=function(){function t(t){this.commonAncestor=t.commonAncestor,this.start=t.start,this.end=t.end}return t.prototype.normalize=function(){return this},t.prototype.limit=function(e){var t,n,i,r,o,s;if(!(t=b.grep(this.textNodes(),function(t){return t.parentNode===e||b.contains(e,t.parentNode)})).length)return null;for(this.start=t[0],this.end=t[t.length-1],i=b(this.start).parents(),r=0,o=(s=b(this.end).parents()).length;r<o;r++)if(n=s[r],-1!==i.index(n)){this.commonAncestor=n;break}return this},t.prototype.serialize=function(l,c){var t,e,n;return n=(e=function(t,e){var n,i,r,o,s,a,u;for(r=c?b(t).parents(":not("+c+")").eq(0):b(t).parent(),s=g.xpathFromNode(r,l)[0],a=i=0,u=(n=(o=g.getTextNodes(r)).slice(0,o.index(t))).length;a<u;a++)i+=n[a].nodeValue.length;return e?[s,i+t.nodeValue.length]:[s,i]})(this.start),t=e(this.end,!0),new m.SerializedRange({start:n[0],end:t[0],startOffset:n[1],endOffset:t[1]})},t.prototype.text=function(){var r;return function(){var t,e,n,i;for(i=[],t=0,e=(n=this.textNodes()).length;t<e;t++)r=n[t],i.push(r.nodeValue);return i}.call(this).join("")},t.prototype.textNodes=function(){var t,e,n,i;return e=(i=[(n=g.getTextNodes(b(this.commonAncestor))).index(this.start),n.index(this.end)])[0],t=i[1],b.makeArray(n.slice(e,+t+1||9e9))},t.prototype.toRange=function(){var t;return(t=document.createRange()).setStartBefore(this.start),t.setEndAfter(this.end),t},t}(),m.SerializedRange=function(){function t(t){this.start=t.start,this.startOffset=t.startOffset,this.end=t.end,this.endOffset=t.endOffset}return t.prototype.normalize=function(t){var e,n,i,r,o,s,a,u,l,c,d,h,f,p;for(s={},l=0,d=(f=["start","end"]).length;l<d;l++){o=f[l];try{r=m.nodeFromXPath(this[o],t)}catch(b){throw n=b,new m.RangeError(o,"Error while finding "+o+" node: "+this[o]+": "+n,n)}if(!r)throw new m.RangeError(o,"Couldn't find "+o+" node: "+this[o]);for(i=0,a=this[o+"Offset"],"end"===o&&a--,c=0,h=(p=g.getTextNodes(b(r))
).length;c<h;c++){if(i+(u=p[c]).nodeValue.length>a){s[o+"Container"]=u,s[o+"Offset"]=this[o+"Offset"]-i;break}i+=u.nodeValue.length}if(null==s[o+"Offset"])throw new m.RangeError(o+"offset","Couldn't find offset "+this[o+"Offset"]+" in element "+this[o])}return e=null==document.compareDocumentPosition?function(t,e){return t.contains(e)}:function(t,e){return 16&t.compareDocumentPosition(e)},b(s.startContainer).parents().each(function(){if(e(this,s.endContainer))return s.commonAncestorContainer=this,!1}),new m.BrowserRange(s).normalize(t)},t.prototype.serialize=function(t,e){return this.normalize(t).serialize(t,e)},t.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,end:this.end,endOffset:this.endOffset}},t}(),v=this.Annotator,(c=function(){function r(t,e){if(this.onDeleteAnnotation=O(this.onDeleteAnnotation,this),this.onEditAnnotation=O(this.onEditAnnotation,this),this.onAdderClick=O(this.onAdderClick,this),this.onAdderMousedown=O(this.onAdderMousedown,this),this.onHighlightMouseover=O(this.onHighlightMouseover,this),this.checkForEndSelection=O(this.checkForEndSelection,this),this.checkForStartSelection=O(this.checkForStartSelection,this),this.clearViewerHideTimer=O(this.clearViewerHideTimer,this),this.startViewerHideTimer=O(this.startViewerHideTimer,this),this.showViewer=O(this.showViewer,this),this.onEditorSubmit=O(this.onEditorSubmit,this),this.onEditorHide=O(this.onEditorHide,this),this.showEditor=O(this.showEditor,this),r.__super__.constructor.apply(this,arguments),this.plugins={},!r.supported())return this;this.options.readOnly||this._setupDocumentEvents(),this._setupWrapper()._setupViewer()._setupEditor(),this._setupDynamicStyle(),this.adder=b(this.html.adder).appendTo(this.wrapper).hide(),r._instances.push(this)}return R(r,i),r.prototype.events={".annotator-adder button click":"onAdderClick",".annotator-adder button mousedown":"onAdderMousedown",".annotator-hl mouseover":"onHighlightMouseover",".annotator-hl mouseout":"startViewerHideTimer"},r.prototype.html={adder:'<div class="annotator-adder"><button>'+E("Annotate")+"</button></div>",wrapper:'<div class="annotator-wrapper"></div>'},r.prototype.options={readOnly:!1},r.prototype.plugins={},r.prototype.editor=null,r.prototype.viewer=null,r.prototype.selectedRanges=null,r.prototype.mouseIsDown=!1,r.prototype.ignoreMouseup=!1,r.prototype.viewerHideTimer=null,r.prototype._setupWrapper=function(){return this.wrapper=b(this.html.wrapper),this.element.find("script").remove(),this.element.wrapInner(this.wrapper),this.wrapper=this.element.find(".annotator-wrapper"),this},r.prototype._setupViewer=function(){var n;return this.viewer=new r.Viewer({readOnly:this.options.readOnly}),this.viewer.hide().on("edit",this.onEditAnnotation).on("delete",this.onDeleteAnnotation).addField({load:(n=this,function(t,e){return e.text?b(t).html(g.escape(e.text)):b(t).html("<i>"+E("No Comment")+"</i>"),n.publish("annotationViewerTextField",[t,e])})}).element.appendTo(this.wrapper).bind({mouseover:this.clearViewerHideTimer,mouseout:this.startViewerHideTimer}),this},r.prototype._setupEditor=function(){return this.editor=new r.Editor,this.editor.hide().on("hide",this.onEditorHide).on("save",this.onEditorSubmit).addField({type:"textarea",label:E("Comments")+"\u2026",load:function(t,e){return b(t).find("textarea").val(e.text||"")},submit:function(t,e){return e.text=b(t).find("textarea").val()}}),this.editor.element.appendTo(this.wrapper),this},r.prototype._setupDocumentEvents=function(){return b(document).bind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection}),this},r.prototype._setupDynamicStyle=function(){var t,e,n,r;return(n=b("#annotator-dynamic-style")).length||(n=b('<style id="annotator-dynamic-style"></style>').appendTo(document.head)),e="*"+function(){var t,e,n,i;for(i=[],t=0,e=(n=["adder","outer","notice","filter"]).length;t<e;t++)r=n[t],i.push(":not(.annotator-"+r+")");return i}().join(""),t=g.maxZIndex(b(document.body).find(e)),t=Math.max(t,1e3),n.text([".annotator-adder, .annotator-outer, .annotator-notice {","  z-index: "+(t+20)+";","}",".annotator-filter {","  z-index: "+(t+10)+";","}"].join("\n")),this},r.prototype.destroy=function(){var t,e,n;for(e in b(document).unbind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection}),b("#annotator-dynamic-style").remove(),this.adder.remove(),this.viewer.destroy(),this.editor.destroy(),this.wrapper.find(".annotator-hl").each(function(){return b(this).contents().insertBefore(this),b(this).remove()}),this.wrapper.contents().insertBefore(this.wrapper),this.wrapper.remove(),this.element.data("annotator",null),n=this.plugins)n[e],this.plugins[e].destroy();if(this.removeEvents(),-1!==(t=r._instances.indexOf(this)))return r._instances.splice(t,1)},r.prototype.getSelectedRanges=function(){var i,r,o,s,t,a,u,e,n;for(u=g.getGlobal().getSelection(),t=[],a=[],u.isCollapsed||(t=function(){var t,e,n;for(n=[],r=t=0,e=u.rangeCount;0<=e?t<e:e<t;r=0<=e?++t:--t)s=u.getRangeAt(r),i=new m.BrowserRange(s),null===(o=i.normalize().limit(this.wrapper[0]))&&a.push(s),n.push(o);return n}.call(this),u.removeAllRanges()),e=0,n=a.length;e<n;e++)s=a[e],u.addRange(s);return b.grep(t,function(t){return t&&u.addRange(t.toRange()),t})},r.prototype.createAnnotation=function(){var t;return t={},this.publish("beforeAnnotationCreated",[t]),t},r.prototype.setupAnnotation=function(t){var e,n,i,r,o,s,a,u,l,c;for(o=this.wrapper[0],t.ranges||(t.ranges=this.selectedRanges),i=[],s=0,u=(c=t.ranges).length;s<u;s++){r=c[s];try{i.push(m.sniff(r).normalize(o))}catch(b){if(!((e=b)instanceof m.RangeError))throw e;this.publish("rangeNormalizeFail",[t,r,e])}}for(t.quote=[],t.ranges=[],t.highlights=[],a=0,l=i.length;a<l;a++)n=i[a],t.quote.push(b.trim(n.text())),t.ranges.push(n.serialize(this.wrapper[0],".annotator-hl")),b.merge(t.highlights,this.highlightRange(n));return t.quote=t.quote.join(" / "),b(t.highlights).data("annotation",t),t},r.prototype.updateAnnotation=function(t){return this.publish("beforeAnnotationUpdated",[t]),this.publish("annotationUpdated",[t]),t},r.prototype.deleteAnnotation=function(t){var e,n,i,r;if(null!=t.highlights)for(n=0,i=(r=t.highlights).length;n<i;n++)null!=(e=r[n]).parentNode&&(e.childNodes[0],b(e).replaceWith(e.childNodes));return this.publish("annotationDeleted",[t]),t},r.prototype.loadAnnotations=function(t){var o,s,a;return null==t&&(t=[]),a=this,s=function(t){var e,n,i,r;for(null==t&&(t=[]),i=0,r=(n=t.splice(0,10)).length;i<r;i++)e=n[i],a.setupAnnotation(e);return 0<t.length?setTimeout(function(){return s(t)},10):a.publish("annotationsLoaded",[o])},o=t.slice(),s(t),this},r.prototype.dumpAnnotations=function(){return this.plugins.Store?this.plugins.Store.dumpAnnotations():(console.warn(E("Can't dump annotations without Store plugin.")),!1)},r.prototype.highlightRange=function(t,e){var n,i,r,o,s,a,u;for(null==e&&(e="annotator-hl"),r=/^\s*$/,n=b("<span class='"+e+"'></span>"),u=[],o=0,s=(a=t.textNodes()).length;o<s;o++)i=a[o],r.test(i.nodeValue)||u.push(b(i).wrapAll(n).parent().show()[0]);return u},r.prototype.highlightRanges=function(t,e){var n,i,r,o;for(null==e&&(e="annotator-hl"),n=[],r=0,o=t.length;r<o;r++)i=t[r],b.merge(n,this.highlightRange(i,e));return n},r.prototype.addPlugin=function(t,e){var n,i;return this.plugins[t]?console.error(E("You cannot have more than one instance of any plugin.")):"function"==typeof(n=r.Plugin[t])?(this.plugins[t]=new n(this.element[0],e),"function"==typeof(i=(this.plugins[t].annotator=this).plugins[t]).pluginInit&&i.pluginInit()):console.error(E("Could not load ")+t+E(" plugin. Have you included the appropriate <script> tag?")),this},r.prototype.showEditor=function(t,e){return this.editor.element.css(e),this.editor.load(t),this.publish("annotationEditorShown",[this.editor,t]),this},r.prototype.onEditorHide=function(){return this.publish("annotationEditorHidden",[this.editor]),this.ignoreMouseup=!1},r.prototype.onEditorSubmit=function(t){return this.publish("annotationEditorSubmit",[this.editor,t])},r.prototype.showViewer=function(t,e){return this.viewer.element.css(e),this.viewer.load(t),this.publish("annotationViewerShown",[this.viewer,t])},r.prototype.startViewerHideTimer=function(){if(!this.viewerHideTimer)return this.viewerHideTimer=setTimeout(this.viewer.hide,250)},r.prototype.clearViewerHideTimer=function(){return clearTimeout(this.viewerHideTimer),this.viewerHideTimer=!1},r.prototype.checkForStartSelection=function(t){return t&&this.isAnnotator(t.target)||this.startViewerHideTimer(),this.mouseIsDown=!0},r.prototype.checkForEndSelection=function(t){var e,n,i,r;if(this.mouseIsDown=!1,!this.ignoreMouseup){for(this.selectedRanges=this.getSelectedRanges(),n=0,i=(r=this.selectedRanges).length;n<i;n++)if(e=r[n].commonAncestor,b(e).hasClass("annotator-hl")&&(e=b(e).parents("[class!=annotator-hl]")[0]),this.isAnnotator(e))return;return t&&this.selectedRanges.length?this.adder.css(g.mousePosition(t,this.wrapper[0])).show():this.adder.hide()}},r.prototype.isAnnotator=function(t){return!!b(t).parents().addBack().filter("[class^=annotator-]").not(this.wrapper).length},r.prototype.onHighlightMouseover=function(t){var e;return this.clearViewerHideTimer(),!this.mouseIsDown&&!this.viewer.isShown()&&(e=b(t.target).parents(".annotator-hl").addBack().map(function(){return b(this).data("annotation")}),this.showViewer(b.makeArray(e),g.mousePosition(t,this.wrapper[0])))},r.prototype.onAdderMousedown=function(t){return null!=t&&t.preventDefault(),this.ignoreMouseup=!0},r.prototype.onAdderClick=function(t){var e,n,i,r,o,s,a,u;return null!=t&&t.preventDefault(),r=this.adder.position(),this.adder.hide(),e=this.setupAnnotation(this.createAnnotation()),b(e.highlights).addClass("annotator-hl-temporary"),o=function(){return i(),b(e.highlights).removeClass("annotator-hl-temporary"),s.publish("annotationCreated",[e])},n=function(){return i(),u.deleteAnnotation(e)},i=function(){return a.unsubscribe("annotationEditorHidden",n),a.unsubscribe("annotationEditorSubmit",o)},(a=u=s=this).subscribe("annotationEditorHidden",n),this.subscribe("annotationEditorSubmit",o),this.showEditor(e,r)},r.prototype.onEditAnnotation=function(t){var e,n,i,r,o;return n=this.viewer.element.position(),i=function(){return e(),r.updateAnnotation(t)},e=function(){return o.unsubscribe("annotationEditorHidden",e),o.unsubscribe("annotationEditorSubmit",i)},(o=r=this).subscribe("annotationEditorHidden",e),this.subscribe("annotationEditorSubmit",i),this.viewer.hide(),this.showEditor(t,n)},r.prototype.onDeleteAnnotation=function(t){return this.viewer.hide(),this.deleteAnnotation(t)},r}()).Plugin=function(){function n(t,e){n.__super__.constructor.apply(this,arguments)}return R(n,i),n.prototype.pluginInit=function(){},n.prototype.destroy=function(){return this.removeEvents()},n}(),null==(null!=(T=(n=g.getGlobal()).document)?T.evaluate:void 0)&&b.getScript("http://assets.annotateit.org/vendor/xpath.min.js"),null==n.getSelection&&b.getScript("http://assets.annotateit.org/vendor/ierange.min.js"),null==n.JSON&&b.getScript("http://assets.annotateit.org/vendor/json2.min.js"),null==n.Node&&(n.Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}),c.$=b,c.Delegator=i,c.Range=m,c.Util=g,c._instances=[],c._t=E,c.supported=function(){return function(){return!!this.getSelection}()},c.noConflict=function(){return g.getGlobal().Annotator=v,this},b.fn.annotator=function(e){var n;return n=Array.prototype.slice.call(arguments,1),this.each(function(){var t;return(t=b.data(this,"annotator"))?e&&t[e].apply(t,n):(t=new c(this,e),b.data(this,"annotator",t))})},(this.Annotator=c).Widget=function(){function n(t,e){n.__super__.constructor.apply(this,arguments),this.classes=b.extend({},c.Widget.prototype.classes,this.classes)}return R(n,i),n.prototype.classes={hide:"annotator-hide",invert:{x:"annotator-invert-x",y:"annotator-invert-y"}},n.prototype.destroy=function(){return this.removeEvents(),this.element.remove()},n.prototype.checkOrientation=function(){var t,e,n,i,r;return this.resetOrientation(),r=b(c.Util.getGlobal()),e=(i=this.element.children(":first")).offset(),n={top:r.scrollTop(),right:r.width()+r.scrollLeft()},(t={top:e.top,right:e.left+i.width()}).top-n.top<0&&this.invertY(),0<t.right-n.right&&this.invertX(),this},n.prototype.resetOrientation=function(){return this.element.removeClass(this.classes.invert.x).removeClass(this.classes.invert.y),this},n.prototype.invertX=function(){return this.element.addClass(this.classes.invert.x),this},n.prototype.invertY=function(){return this.element.addClass(this.classes.invert.y),this},n.prototype.isInvertedY=function(){return this.element.hasClass(this.classes.invert.y)},n.prototype.isInvertedX=function(){return this.element.hasClass(this.classes.invert.x)},n}(),c.Editor=function(t){function n(t){this.onCancelButtonMouseover=O(this.onCancelButtonMouseover,this),this.processKeypress=O(this.processKeypress,this),this.submit=O(this.submit,this),this.load=O(this.load,this),this.hide=O(this.hide,this),this.show=O(this.show,this),n.__super__.constructor.call(this,b(this.html)[0],t),this.fields=[],this.annotation={}}return R(n,t),n.prototype.events={"form submit":"submit",".annotator-save click":"submit",".annotator-cancel click":"hide",".annotator-cancel mouseover":"onCancelButtonMouseover","textarea keydown":"processKeypress"},n.prototype.classes={hide:"annotator-hide",focus:"annotator-focus"},n.prototype.html='<div class="annotator-outer annotator-editor">\n  <form class="annotator-widget">\n    <ul class="annotator-listing"></ul>\n    <div class="annotator-controls">\n      <a href="#cancel" class="annotator-cancel">'+E("Cancel")+'</a>\n<a href="#save" class="annotator-save annotator-focus">'+E("Save")+"</a>\n    </div>\n  </form>\n</div>",n.prototype.options={},n.prototype.show=function(t){return c.Util.preventEventDefault(t),this.element.removeClass(this.classes.hide),this.element.find(".annotator-save").addClass(this.classes.focus),this.checkOrientation(),this.element.find(":input:first").focus(),this.setupDraggables(),this.publish("show")},n.prototype.hide=function(t){return c.Util.preventEventDefault(t),this.element.addClass(this.classes.hide),this.publish("hide")},n.prototype.load=function(t){var e,n,i,r;for(this.annotation=t,this.publish("load",[this.annotation]),n=0,i=(r=this.fields).length;n<i;n++)(e=r[n]).load(e.element,this.annotation);return this.show()},n.prototype.submit=function(t){var e,n,i,r;for(c.Util.preventEventDefault(t),n=0,i=(r=this.fields).length;n<i;n++)(e=r[n]).submit(e.element,this.annotation);return this.publish("save",[this.annotation]),this.hide()},n.prototype.addField=function(t){var e,n,i;switch(n=b.extend({id:"annotator-field-"+c.Util.uuid(),type:"input",label:"",load:function(){},submit:function(){}},t),i=null,e=b('<li class="annotator-item" />'),n.element=e[0],n.type){case"textarea":i=b("<textarea />");break;case"input":case"checkbox":i=b("<input />");break;case"select":i=b("<select />")}return e.append(i),i.attr({id:n.id,placeholder:n.label}),"checkbox"===n.type&&(i[0].type="checkbox",e.addClass("annotator-checkbox"),e.append(b("<label />",{"for":n.id,html:n.label}))),this.element.find("ul:first").append(e),this.fields.push(n),n.element},n.prototype.checkOrientation=function(){var t,e;return n.__super__.checkOrientation.apply(this,arguments),e=this.element.find("ul"),t=this.element.find(".annotator-controls"),this.element.hasClass(this.classes.invert.y)?t.insertBefore(e):t.is(":first-child")&&t.insertAfter(e),this},n.prototype.processKeypress=function(t){return 27===t.keyCode?this.hide():13!==t.keyCode||t.shiftKey?void 0:this.submit()},n.prototype.onCancelButtonMouseover=function(){return this.element.find("."+this.classes.focus).removeClass(this.classes.focus)},n.prototype.setupDraggables=function(){var s,a,t,u,l,e,n,i,c,d,h;return this.element.find(".annotator-resize").remove(),(t=this.element.hasClass(this.classes.invert.y)?this.element.find(".annotator-item:last"):this.element.find(".annotator-item:first"))&&b('<span class="annotator-resize"></span>').appendTo(t),l=null,s=this.classes,u=this.element,d=null,c=u.find(".annotator-resize"),a=u.find(".annotator-controls"),h=!1,e=function(t){if(t.target===this)return l={element:this,top:t.pageY,left:t.pageX},d=u.find("textarea:first"),b(window).bind({"mouseup.annotator-editor-resize":i,"mousemove.annotator-editor-resize":n}),t.preventDefault()},i=function(){return l=null,b(window).unbind(".annotator-editor-resize")},n=function(t){var e,n,i,r,o;if(l&&!1===h)return e={top:t.pageY-l.top,left:t.pageX-l.left},l.element===c[0]?(r=d.outerHeight(),o=d.outerWidth(),n=u.hasClass(s.invert.x)?-1:1,i=u.hasClass(s.invert.y)?1:-1,d.height(r+e.top*i),d.width(o+e.left*n),d.outerHeight()!==r&&(l.top=t.pageY),d.outerWidth()!==o&&(l.left=t.pageX)):l.element===a[0]&&(u.css({top:parseInt(u.css("top"),10)+e.top,left:parseInt(u.css("left"),10)+e.left}),l.top=t.pageY,l.left=t.pageX),h=!0,setTimeout(function(){return h=!1},1e3/60)},c.bind("mousedown",e),a.bind("mousedown",e)},n}(c.Widget),c.Viewer=function(t){function e(t){this.onDeleteClick=O(this.onDeleteClick,this),this.onEditClick=O(this.onEditClick,this),this.load=O(this.load,this),this.hide=O(this.hide,this),this.show=O(this.show,this),e.__super__.constructor.call(this,b(this.html.element)[0],t),this.item=b(this.html.item)[0],this.fields=[],this.annotations=[]}return R(e,t),e.prototype.events={".annotator-edit click":"onEditClick",".annotator-delete click":"onDeleteClick"},e.prototype.classes={hide:"annotator-hide",showControls:"annotator-visible"},e.prototype.html={element:'<div class="annotator-outer annotator-viewer">\n  <ul class="annotator-widget annotator-listing"></ul>\n</div>',item:'<li class="annotator-annotation annotator-item">\n  <span class="annotator-controls">\n    <a href="#" title="View as webpage" class="annotator-link">View as webpage</a>\n    <button title="Edit" class="annotator-edit">Edit</button>\n    <button title="Delete" class="annotator-delete">Delete</button>\n  </span>\n</li>'},e.prototype.options={readOnly:!1},e.prototype.show=function(t){var e,n;return c.Util.preventEventDefault(t),e=this.element.find(".annotator-controls").addClass(this.classes.showControls),setTimeout((n=this,function(){return e.removeClass(n.classes.showControls)}),500),this.element.removeClass(this.classes.hide),this.checkOrientation().publish("show")},e.prototype.isShown=function(){return!this.element.hasClass(this.classes.hide)},e.prototype.hide=function(t){return c.Util.preventEventDefault(t),this.element.addClass(this.classes.hide),this.publish("hide")},e.prototype.load=function(t){var e,n,i,r,o,s,a,u,l,c,d,h,f,p,m,g,v;for(this.annotations=t||[],d=this.element.find("ul:first").empty(),h=0,p=(g=this.annotations).length;h<p;h++)for(e=g[h],l=(i=(u=b(this.item).clone().appendTo(d).data("annotation",e)).find(".annotator-controls")).find(".annotator-link"),o=i.find(".annotator-edit"),r=i.find(".annotator-delete"),0===(c=new y(e.links||[]).get("alternate",{type:"text/html"})).length||null==c[0].href?l.remove():l.attr("href",c[0].href),this.options.readOnly?(o.remove(),r.remove()):n={showEdit:function(){return o.removeAttr("disabled")},hideEdit:function(){return o.attr("disabled","disabled")},showDelete:function(){return r.removeAttr("disabled")},hideDelete:function(){return r.attr("disabled","disabled")}},f=0,m=(v=this.fields).length;f<m;f++)a=v[f],s=b(a.element).clone().appendTo(u)[0],a.load(s,e,n);return this.publish("load",[this.annotations]),this.show()},e.prototype.addField=function(t){var e;return(e=b.extend({load:function(){}},t)).element=b("<div />")[0],this.fields.push(e),e.element,this},e.prototype.onEditClick=function(t){return this.onButtonClick(t,"edit")},e.prototype.onDeleteClick=function(t){if(1==confirm("Are you sure you want to delete this annotation?"))return this.onButtonClick(t,"delete")},e.prototype.onButtonClick=function(t,e){var n;return n=b(t.target).parents(".annotator-annotation"),this.publish(e,[n.data("annotation")])},e}(c.Widget),y=function(){function t(t){this.data=t}return t.prototype.get=function(t,n){var i,e,r,o,s,a,u;for(null==n&&(n={}),n=b.extend({},n,{rel:t}),r=function(){var t;for(e in t=[],n)P.call(n,e)&&(n[e],t.push(e));return t}(),u=[],o=0,s=(a=this.data).length;o<s;o++)i=a[o],r.reduce(function(t,e){return t&&i[e]===n[e]},!0)&&u.push(i);return u},t}(),(c=c||{}).Notification=function(){function e(t){this.hide=O(this.hide,this),this.show=O(this.show,this),e.__super__.constructor.call(this,b(this.options.html).appendTo(document.body)[0],t)}return R(e,i),e.prototype.events={click:"hide"},e.prototype.options={html:"<div class='annotator-notice'></div>",classes:{show:"annotator-notice-show",info:"annotator-notice-info",success:"annotator-notice-success",error:"annotator-notice-error"}},e.prototype.show=function(t,e){return null==e&&(e=c.Notification.INFO),this.currentStatus=e,b(this.element).addClass(this.options.classes.show).addClass(this.options.classes[this.currentStatus]).html(g.escape(t||"")),setTimeout(this.hide,5e3),this},e.prototype.hide=function(){return null==this.currentStatus&&(this.currentStatus=c.Notification.INFO),b(this.element).removeClass(this.options.classes.show).removeClass(this.options.classes[this.currentStatus]),this},e}(),c.Notification.INFO="info",c.Notification.SUCCESS="success",c.Notification.ERROR="error",b(function(){var t;return t=new c.Notification,c.showNotification=t.show,c.hideNotification=t.hide}),c.Plugin.Unsupported=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return R(e,t),e.prototype.options={message:c._t("Sorry your current browser does not support the Annotator")},e.prototype.pluginInit=function(){if(!c.supported())return b((t=this,function(){if(c.showNotification(t.options.message),void 0===window.XMLHttpRequest&&void 0!==ActiveXObject)return b("html").addClass("ie6")}));var t},e}(c.Plugin),s=function(t){var e,n,i,r,o;return e=t.match(new RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?")),i=0,n=new Date(e[1],0,1),e[3]&&n.setMonth(e[3]-1),e[5]&&n.setDate(e[5]),e[7]&&n.setHours(e[7]),e[8]&&n.setMinutes(e[8]),e[10]&&n.setSeconds(e[10]),e[12]&&n.setMilliseconds(1e3*Number("0."+e[12])),e[14]&&(i=60*Number(e[16])+Number(e[17]),i*=null!=(o="-"===e[15])?o:{1:-1}),i-=n.getTimezoneOffset(),r=Number(n)+60*i*1e3,n.setTime(Number(r)),n},r=function(t){var e,n,i,r,o,s,a,u,l,c;if("undefined"!=typeof atob&&null!==atob)return atob(t);if(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=s=0,c=[],!t)return t;for(t+="";s<t.length;)a=(i=n.indexOf(t.charAt(s++))<<18|n.indexOf(t.charAt(s++))<<12|(r=n.indexOf(t.charAt(s++)))<<6|(o=n.indexOf(t.charAt(s++))))>>16&255,u=i>>8&255,l=255&i,c[e++]=64===r?String.fromCharCode(a):64===o?String.fromCharCode(a,u):String.fromCharCode(a,u,l);return c.join("")},o=function(t){var e,n,i;if(0!=(e=t.length%4))for(n=0,i=4-e;0<=i?n<i:i<n;0<=i?++n:--n)t+="=";return t=(t=t.replace(/-/g,"+")).replace(/_/g,"/"),r(t)},h=function(t){var e,n;return(n=t.split("."))[0],e=n[1],n[2],JSON.parse(o(e))},c.Plugin.Auth=function(t){function n(t,e){n.__super__.constructor.apply(this,arguments),this.waitingForToken=[],this.options.token?this.setToken(this.options.token):this.requestToken()}return R(n,t),n.prototype.options={token:null,tokenUrl:"/auth/token",autoFetch:!0},n.prototype.requestToken=function(){return this.requestInProgress=!0,b.ajax({url:this.options.tokenUrl,dataType:"text",xhrFields:{withCredentials:!0}}).done((e=this,function(t){return e.setToken(t)})).fail(function(t,e,n){var i;return i=c._t("Your session has expired; please log in again."),console.error(i+" "+n,t),c.showNotification(i,c.Notification.ERROR)}).always((t=this,function(){return t.requestInProgress=!1}));var t,e},n.prototype.setToken=function(t){var e,n,i;if(this.token=t,this._unsafeToken=h(t),this.haveValidToken()){for(this.options.autoFetch&&(this.refreshTimeout=setTimeout((n=this,function(){return n.requestToken()}),1e3*(this.timeToExpiry()-2))),this.updateHeaders(),e=[];0<this.waitingForToken.length;)e.push(this.waitingForToken.pop()(this._unsafeToken));return e}if(console.warn(c._t("Didn't get a valid token.")),this.options.autoFetch)return console.warn(c._t("Getting a new token in 10s.")),setTimeout((i=this,function(){return i.requestToken()}),1e4)},n.prototype.haveValidToken=function(){return!!(this._unsafeToken&&this._unsafeToken.issuedAt&&this._unsafeToken.ttl&&this._unsafeToken.consumerKey&&0<this.timeToExpiry())},n.prototype.timeToExpiry=function(){var t,e;return t=(new Date).getTime()/1e3,0<(e=s(this._unsafeToken.issuedAt).getTime()/1e3+this._unsafeToken.ttl-t)?e:0},n.prototype.updateHeaders=function(){var t;return t=this.element.data("annotator:headers"),this.element.data("annotator:headers",b.extend(t,{"x-annotator-auth-token":this.token}))},n.prototype.withToken=function(t){if(null!=t)return this.haveValidToken()?t(this._unsafeToken):(this.waitingForToken.push(t),this.requestInProgress?void 0:this.requestToken())},n}(c.Plugin),c.Plugin.Store=function(t){function n(t,e){this._onError=O(this._onError,this),this._onLoadAnnotationsFromSearch=O(this._onLoadAnnotationsFromSearch,this),this._onLoadAnnotations=O(this._onLoadAnnotations,this),this._getAnnotations=O(this._getAnnotations,this),n.__super__.constructor.apply(this,arguments),this.annotations=[]}return R(n,t),n.prototype.events={annotationCreated:"annotationCreated",annotationDeleted:"annotationDeleted",annotationUpdated:"annotationUpdated"},n.prototype.options={annotationData:{},emulateHTTP:!1,loadFromSearch:!1,prefix:"/store",urls:{create:"/annotations",read:"/annotations/:id",update:"/annotations/:id",destroy:"/annotations/:id",search:"/search"}},n.prototype.pluginInit=function(){if(c.supported())return this.annotator.plugins.Auth?this.annotator.plugins.Auth.withToken(this._getAnnotations):this._getAnnotations()},n.prototype._getAnnotations=function(){return this.options.loadFromSearch?this.loadAnnotationsFromSearch(this.options.loadFromSearch):this.loadAnnotations()},n.prototype.annotationCreated=function(e){return M.call(this.annotations,e)<0?(this.registerAnnotation(e),this._apiRequest("create",e,(n=this,function(t){return null==t.id&&console.warn(c._t("Warning: No ID returned from server for annotation "),e),n.updateAnnotation(e,t)}))):this.updateAnnotation(e,{});var n},n.prototype.annotationUpdated=function(e){if(0<=M.call(this.annotations,e))return this._apiRequest("update",e,(n=this,function(t){return n.updateAnnotation(e,t)}));var n},n.prototype.annotationDeleted=function(t){if(0<=M.call(this.annotations,t))return this._apiRequest("destroy",t,(e=this,function(){return e.unregisterAnnotation(t)}));var e},n.prototype.registerAnnotation=function(t){return this.annotations.push(t)},n.prototype.unregisterAnnotation=function(t){return this.annotations.splice(this.annotations.indexOf(t),1)},n.prototype.updateAnnotation=function(t,e){return M.call(this.annotations,t)<0?console.error(c._t("Trying to update unregistered annotation!")):b.extend(t,e),b(t.highlights).data("annotation",t)},n.prototype.loadAnnotations=function(){return this._apiRequest("read",null,this._onLoadAnnotations)},n.prototype._onLoadAnnotations=function(t){var e,n,i,r,o,s,a,u,l;for(null==t&&(t=[]),i={},o=0,a=(l=this.annotations).length;o<a;o++)i[(e=l[o]).id]=e;for(r=[],s=0,u=t.length;s<u;s++)i[(e=t[s]).id]?(n=i[e.id],this.updateAnnotation(n,e)):r.push(e);return this.annotations=this.annotations.concat(r),this.annotator.loadAnnotations(r.slice())},n.prototype.loadAnnotationsFromSearch=function(t){return this._apiRequest("search",t,this._onLoadAnnotationsFromSearch)},n.prototype._onLoadAnnotationsFromSearch=function(t){return null==t&&(t={}),this._onLoadAnnotations(t.rows||[])},n.prototype.dumpAnnotations=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.annotations).length;e<n;e++)t=i[e],r.push(JSON.parse(this._dataFor(t)));return r},n.prototype._apiRequest=function(t,e,n){var i,r,o,s;return i=e&&e.id,s=this._urlFor(t,i),r=this._apiRequestOptions(t,e,n),(o=b.ajax(s,r))._id=i,o._action=t,o},n.prototype._apiRequestOptions=function(t,e,n){var i,r,o;return o={type:r=this._methodFor(t),headers:this.element.data("annotator:headers"),dataType:"json",success:n||function(){},error:this._onError},!this.options.emulateHTTP||"PUT"!==r&&"DELETE"!==r||(o.headers=b.extend(o.headers,{"X-HTTP-Method-Override":r}),o.type="POST"),"search"===t?o=b.extend(o,{data:e}):(i=e&&this._dataFor(e),this.options.emulateJSON?(o.data={json:i},this.options.emulateHTTP&&(o.data._method=r),o):o=b.extend(o,{data:i,contentType:"application/json; charset=utf-8"}))},n.prototype._urlFor=function(t,e){var n;return n=null!=this.options.prefix?this.options.prefix:"",(n=(n+=this.options.urls[t]).replace(/\/:id/,null!=e?"/"+e:"")).replace(/:id/,null!=e?e:"")},n.prototype._methodFor=function(t){return{create:"POST",read:"GET",update:"PUT",destroy:"DELETE",search:"GET"}[t]},n.prototype._dataFor=function(t){var e,n;return n=t.highlights,delete t.highlights,b.extend(t,this.options.annotationData),e=JSON.stringify(t),n&&(t.highlights=n),e},n.prototype._onError=function(t){var e,n;switch(e=t._action,n=c._t("Sorry we could not ")+e+c._t(" this annotation"),"search"===t._action?n=c._t("Sorry we could not search the store for annotations"):"read"!==t._action||t._id||(n=c._t("Sorry we could not ")+e+c._t(" the annotations from the store")),t.status){case 401:n=c._t("Sorry you are not allowed to ")+e+c._t(" this annotation");break;case 404:n=c._t("Sorry we could not connect to the annotations store");break;case 500:n=c._t("Sorry something went wrong with the annotation store")}return c.showNotification(n,c.Notification.ERROR),console.error(c._t("API request failed:")+" '"+t.status+"'")},n}(c.Plugin),c.Plugin.Permissions=function(t){function n(t,e){this._setAuthFromToken=O(this._setAuthFromToken,this),this.updateViewer=O(this.updateViewer,this),this.updateAnnotationPermissions=O(this.updateAnnotationPermissions,this),this.updatePermissionsField=O(this.updatePermissionsField,this),this.addFieldsToAnnotation=O(this.addFieldsToAnnotation,this),n.__super__.constructor.apply(this,arguments),this.options.user&&(this.setUser(this.options.user),delete this.options.user)}return R(n,t),n.prototype.events={beforeAnnotationCreated:"addFieldsToAnnotation"},n.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,userId:function(t){return t},userString:function(t){return t},userAuthorize:function(t,e,n){var i,r,o,s;if(e.permissions){if(0===(r=e.permissions[t]||[]).length)return!0;for(o=0,s=r.length;o<s;o++)if(i=r[o],this.userId(n)===i)return!0;return!1}return!e.user||!!n&&this.userId(n)===this.userId(e.user)},user:"",permissions:{read:[],update:[],"delete":[],admin:[]}},n.prototype.pluginInit=function(){var t,r,s;if(c.supported())return t=function(n,i){return function(t,e){return r[n].call(r,i,t,e)}},!(r=this).user&&this.annotator.plugins.Auth&&this.annotator.plugins.Auth.withToken(this._setAuthFromToken),!0===this.options.showViewPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:c._t("Allow anyone to <strong>view</strong> this annotation"),load:t("updatePermissionsField","read"),submit:t("updateAnnotationPermissions","read")}),!0===this.options.showEditPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:c._t("Allow anyone to <strong>edit</strong> this annotation"),load:t("updatePermissionsField","update"),submit:t("updateAnnotationPermissions","update")}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter?this.annotator.plugins.Filter.addFilter({label:c._t("User"),property:"user",isFiltered:(s=this,function(t,e){var n,i,r,o;if(e=s.options.userString(e),!t||!e)return!1;for(i=0,r=(o=t.split(/\s*/)).length;i<r;i++)if(n=o[i],-1===e.indexOf(n))return!1;return!0})}):void 0},n.prototype.setUser=function(t){return this.user=t},n.prototype.addFieldsToAnnotation=function(t){if(t&&(t.permissions=this.options.permissions,this.user))return t.user=this.user},n.prototype.authorize=function(t,e,n){return void 0===n&&(n=this.user),!this.options.userAuthorize||this.options.userAuthorize.call(this.options,t,e,n)},n.prototype.updatePermissionsField=function(t,e,n){var i;return i=(e=b(e).show()).find("input").removeAttr("disabled"),this.authorize("admin",n)||e.hide(),this.authorize(t,n||{},null)?i.attr("checked","checked"):i.removeAttr("checked")},n.prototype.updateAnnotationPermissions=function(t,e,n){return n.permissions||(n.permissions=this.options.permissions),b(e).find("input"
).is(":checked")?n.permissions[t]=[]:n.permissions[t]=[this.options.userId(this.user)]},n.prototype.updateViewer=function(t,e,n){var i,r;if(t=b(t),r=this.options.userString(e.user),e.user&&r&&"string"==typeof r?(i=c.Util.escape(this.options.userString(e.user)),t.html(i).addClass("annotator-user")):t.remove(),n&&(this.authorize("update",e)||n.hideEdit(),!this.authorize("delete",e)))return n.hideDelete()},n.prototype._setAuthFromToken=function(t){return this.setUser(t.userId)},n}(c.Plugin),c.Plugin.AnnotateItPermissions=function(t){function e(){return this._setAuthFromToken=O(this._setAuthFromToken,this),this.updateAnnotationPermissions=O(this.updateAnnotationPermissions,this),this.updatePermissionsField=O(this.updatePermissionsField,this),this.addFieldsToAnnotation=O(this.addFieldsToAnnotation,this),e.__super__.constructor.apply(this,arguments)}return R(e,t),e.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,groups:{world:"group:__world__",authenticated:"group:__authenticated__",consumer:"group:__consumer__"},userId:function(t){return t.userId},userString:function(t){return t.userId},userAuthorize:function(t,e,n){var i,r,o,s,a;return i=(e.permissions||{})[t]||[],r=this.groups.world,0<=M.call(i,r)||null!=n&&null!=n.userId&&null!=n.consumerKey&&(n.userId===e.user&&n.consumerKey===e.consumer||(o=this.groups.authenticated,0<=M.call(i,o)||n.consumerKey===e.consumer&&(s=this.groups.consumer,0<=M.call(i,s))||n.consumerKey===e.consumer&&(a=n.userId,0<=M.call(i,a))||!(n.consumerKey!==e.consumer||!n.admin)))},permissions:{read:["group:__world__"],update:[],"delete":[],admin:[]}},e.prototype.addFieldsToAnnotation=function(t){if(t&&(t.permissions=this.options.permissions,this.user))return t.user=this.user.userId,t.consumer=this.user.consumerKey},e.prototype.updatePermissionsField=function(t,e,n){var i;return i=(e=b(e).show()).find("input").removeAttr("disabled"),this.authorize("admin",n)||e.hide(),this.user&&this.authorize(t,n||{},{userId:"__nonexistentuser__",consumerKey:this.user.consumerKey})?i.attr("checked","checked"):i.removeAttr("checked")},e.prototype.updateAnnotationPermissions=function(t,e,n){return n.permissions||(n.permissions=this.options.permissions),b(e).find("input").is(":checked")?n.permissions[t]=["read"===t?this.options.groups.world:this.options.groups.consumer]:n.permissions[t]=[]},e.prototype._setAuthFromToken=function(t){return this.setUser(t)},e}(c.Plugin.Permissions),c.Plugin.Filter=function(t){function i(t,e){var n;this._onPreviousClick=O(this._onPreviousClick,this),this._onNextClick=O(this._onNextClick,this),this._onFilterKeyup=O(this._onFilterKeyup,this),this._onFilterBlur=O(this._onFilterBlur,this),this._onFilterFocus=O(this._onFilterFocus,this),this.updateHighlights=O(this.updateHighlights,this),t=b(this.html.element).appendTo((null!=e?e.appendTo:void 0)||this.options.appendTo),i.__super__.constructor.call(this,t,e),(n=this.options).filters||(n.filters=[]),this.filter=b(this.html.filter),this.filters=[],this.current=0}return R(i,t),i.prototype.events={".annotator-filter-property input focus":"_onFilterFocus",".annotator-filter-property input blur":"_onFilterBlur",".annotator-filter-property input keyup":"_onFilterKeyup",".annotator-filter-previous click":"_onPreviousClick",".annotator-filter-next click":"_onNextClick",".annotator-filter-clear click":"_onClearClick"},i.prototype.classes={active:"annotator-filter-active",hl:{hide:"annotator-hl-filtered",active:"annotator-hl-active"}},i.prototype.html={element:'<div class="annotator-filter">\n  <strong>'+c._t("Navigate:")+'</strong>\n<span class="annotator-filter-navigation">\n  <button class="annotator-filter-previous">'+c._t("Previous")+'</button>\n<button class="annotator-filter-next">'+c._t("Next")+"</button>\n</span>\n<strong>"+c._t("Filter by:")+"</strong>\n</div>",filter:'<span class="annotator-filter-property">\n  <label></label>\n  <input/>\n  <button class="annotator-filter-clear">'+c._t("Clear")+"</button>\n</span>"},i.prototype.options={appendTo:"body",filters:[],addAnnotationFilter:!0,isFiltered:function(t,e){var n,i,r,o;if(!t||!e)return!1;for(i=0,r=(o=t.split(/\s+/)).length;i<r;i++)if(n=o[i],-1===e.indexOf(n))return!1;return!0}},i.prototype.pluginInit=function(){var t,e,n,i;for(e=0,n=(i=this.options.filters).length;e<n;e++)t=i[e],this.addFilter(t);if(this.updateHighlights(),this._setupListeners()._insertSpacer(),!0===this.options.addAnnotationFilter)return this.addFilter({label:c._t("Annotation"),property:"text"})},i.prototype.destroy=function(){var t,e;return i.__super__.destroy.apply(this,arguments),e=b("html"),t=parseInt(e.css("padding-top"),10)||0,e.css("padding-top",t-this.element.outerHeight()),this.element.remove()},i.prototype._insertSpacer=function(){var t,e;return e=b("html"),t=parseInt(e.css("padding-top"),10)||0,e.css("padding-top",t+this.element.outerHeight()),this},i.prototype._setupListeners=function(){var t,e,n,i;for(n=0,i=(e=["annotationsLoaded","annotationCreated","annotationUpdated","annotationDeleted"]).length;n<i;n++)t=e[n],this.annotator.subscribe(t,this.updateHighlights);return this},i.prototype.addFilter=function(t){var r,o;return o=b.extend({label:"",property:"",isFiltered:this.options.isFiltered},t),function(){var t,e,n,i;for(i=[],t=0,e=(n=this.filters).length;t<e;t++)(r=n[t]).property===o.property&&i.push(r);return i}.call(this).length||(o.id="annotator-filter-"+o.property,o.annotations=[],o.element=this.filter.clone().appendTo(this.element),o.element.find("label").html(o.label).attr("for",o.id),o.element.find("input").attr({id:o.id,placeholder:c._t("Filter by ")+o.label+"\u2026"}),o.element.find("button").hide(),o.element.data("filter",o),this.filters.push(o)),this},i.prototype.updateFilter=function(t){var e,n,i,r,o,s,a;if(t.annotations=[],this.updateHighlights(),this.resetHighlights(),i=b.trim(t.element.find("input").val())){for(n=this.highlights.map(function(){return b(this).data("annotation")}),o=0,s=(a=b.makeArray(n)).length;o<s;o++)r=(e=a[o])[t.property],t.isFiltered(i,r)&&t.annotations.push(e);return this.filterHighlights()}},i.prototype.updateHighlights=function(){return this.highlights=this.annotator.element.find(".annotator-hl:visible"),this.filtered=this.highlights.not(this.classes.hl.hide)},i.prototype.filterHighlights=function(){var t,e,n,i,r,o,s,a,u,l;for(t=b.grep(this.filters,function(t){return!!t.annotations.length}),i=(null!=(l=t[0])?l.annotations:void 0)||[],1<t.length&&(n=[],b.each(t,function(){return b.merge(n,this.annotations)}),s=[],i=[],b.each(n,function(){return-1===b.inArray(this,s)?s.push(this):i.push(this)})),r=this.highlights,o=a=0,u=i.length;a<u;o=++a)e=i[o],r=r.not(e.highlights);return r.addClass(this.classes.hl.hide),this.filtered=this.highlights.not(this.classes.hl.hide),this},i.prototype.resetHighlights=function(){return this.highlights.removeClass(this.classes.hl.hide),this.filtered=this.highlights,this},i.prototype._onFilterFocus=function(t){var e;return(e=b(t.target)).parent().addClass(this.classes.active),e.next("button").show()},i.prototype._onFilterBlur=function(t){var e;if(!t.target.value)return(e=b(t.target)).parent().removeClass(this.classes.active),e.next("button").hide()},i.prototype._onFilterKeyup=function(t){var e;if(e=b(t.target).parent().data("filter"))return this.updateFilter(e)},i.prototype._findNextHighlight=function(t){var e,n,i,r,o,s,a,u;return this.highlights.length?(s=t?0:-1,u=t?-1:0,a=t?"lt":"gt",(i=(e=this.highlights.not("."+this.classes.hl.hide)).filter("."+this.classes.hl.active)).length||(i=e.eq(s)),n=i.data("annotation"),r=e.index(i[0]),(o=e.filter(":"+a+"("+r+")").not(n.highlights).eq(u)).length||(o=e.eq(u)),this._scrollToHighlight(o.data("annotation").highlights)):this},i.prototype._onNextClick=function(){return this._findNextHighlight()},i.prototype._onPreviousClick=function(){return this._findNextHighlight(!0)},i.prototype._scrollToHighlight=function(t){return t=b(t),this.highlights.removeClass(this.classes.hl.active),t.addClass(this.classes.hl.active),b("html, body").animate({scrollTop:t.offset().top-(this.element.height()+20)},150)},i.prototype._onClearClick=function(t){return b(t.target).prev("input").val("").keyup().blur()},i}(c.Plugin),c.Plugin.Markdown=function(t){function n(t,e){this.updateTextField=O(this.updateTextField,this),null!=(null!=Showdown?Showdown.converter:void 0)?(n.__super__.constructor.apply(this,arguments),this.converter=new Showdown.converter):console.error(c._t("To use the Markdown plugin, you must include Showdown into the page first."))}return R(n,t),n.prototype.events={annotationViewerTextField:"updateTextField"},n.prototype.updateTextField=function(t,e){var n;return n=c.Util.escape(e.text||""),b(t).html(this.convert(n))},n.prototype.convert=function(t){return this.converter.makeHtml(t)},n}(c.Plugin),c.Plugin.Tags=function(t){function e(){return this.setAnnotationTags=O(this.setAnnotationTags,this),this.updateField=O(this.updateField,this),e.__super__.constructor.apply(this,arguments)}return R(e,t),e.prototype.options={parseTags:function(t){var e;return e=[],(t=b.trim(t))&&(e=t.split(/\s+/)),e},stringifyTags:function(t){return t.join(" ")}},e.prototype.field=null,e.prototype.input=null,e.prototype.pluginInit=function(){if(c.supported())return this.field=this.annotator.editor.addField({label:c._t("Add some tags here")+"\u2026",load:this.updateField,submit:this.setAnnotationTags}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter&&this.annotator.plugins.Filter.addFilter({label:c._t("Tag"),property:"tags",isFiltered:c.Plugin.Tags.filterCallback}),this.input=b(this.field).find(":input")},e.prototype.parseTags=function(t){return this.options.parseTags(t)},e.prototype.stringifyTags=function(t){return this.options.stringifyTags(t)},e.prototype.updateField=function(t,e){var n;return n="",e.tags&&(n=this.stringifyTags(e.tags)),this.input.val(n)},e.prototype.setAnnotationTags=function(t,e){return e.tags=this.parseTags(this.input.val())},e.prototype.updateViewer=function(t,e){return t=b(t),e.tags&&b.isArray(e.tags)&&e.tags.length?t.addClass("annotator-tags").html(function(){return b.map(e.tags,function(t){return'<span class="annotator-tag">'+c.Util.escape(t)+"</span>"}).join(" ")}):t.remove()},e}(c.Plugin),c.Plugin.Tags.filterCallback=function(t,e){var n,i,r,o,s,a,u;if(null==e&&(e=[]),r=0,i=[],t)for(o=0,a=(i=t.split(/\s+/g)).length;o<a;o++)if(n=i[o],e.length)for(s=0,u=e.length;s<u;s++)-1!==e[s].indexOf(n)&&(r+=1);return r===i.length},c.prototype.setupPlugins=function(t,e){var n,i,r,o,s,a,u,l;for(n in null==t&&(t={}),null==e&&(e={}),r=["Unsupported","Auth","Tags","Filter","Store","AnnotateItPermissions"],(s=c.Util.getGlobal()).Showdown&&r.push("Markdown"),o=s.location.href.split(/#|\?/).shift()||"",i={Tags:{},Filter:{filters:[{label:c._t("User"),property:"user"},{label:c._t("Tags"),property:"tags"}]},Auth:{tokenUrl:t.tokenUrl||"http://annotateit.org/api/token"},Store:{prefix:t.storeUrl||"http://annotateit.org/api",annotationData:{uri:o},loadFromSearch:{uri:o}}},e)P.call(e,n)&&(e[n],M.call(r,n)<0&&r.push(n));for(b.extend(!0,i,e),l=[],a=0,u=r.length;a<u;a++)(n=r[a])in i&&!i[n]?l.push(void 0):l.push(this.addPlugin(n,i[n]));return l}}.call(this),function(){var s=function(t,e){return function(){return t.apply(e,arguments)}},r=Object.prototype.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Annotator.Plugin.Touch=function(t){function o(t,e){this._onDocumentTap=s(this._onDocumentTap,this),this._onHighlightTap=s(this._onHighlightTap,this),this._onAdderTap=s(this._onAdderTap,this),this._onToggleTap=s(this._onToggleTap,this),this._onSelection=s(this._onSelection,this),this._watchForSelection=s(this._watchForSelection,this),o.__super__.constructor.apply(this,arguments),this.utils=Annotator.Plugin.Touch.utils,this.selection=null,this.document=r(document)}var r,e;return a(o,t),e=Annotator._t,r=Annotator.$,o.states={ON:"on",OFF:"off"},o.prototype.template='<div class="annotator-touch-widget annotator-touch-controls annotator-touch-hide">\n  <div class="annotator-touch-widget-inner">\n    <a class="annotator-button annotator-add annotator-focus">'+e("Annotate")+'</a>\n<a class="annotator-button annotator-touch-toggle" data-state="off">'+e("Start Annotating")+"</a>\n  </div>\n</div>",o.prototype.classes={hide:"annotator-touch-hide"},o.prototype.options={force:!1,useHighlighter:!1},o.prototype.pluginInit=function(){if(Annotator.supported()&&(this.options.force||o.isTouchDevice()))return this._setupControls(),this.options.useHighlighter&&(this.showControls(),this.highlighter=new Highlighter({root:this.element[0],prefix:"annotator-selection",enable:!1,highlightStyles:!0})),this.document.delegate(".annotator-hl","tap",{preventDefault:!1},this._onHighlightTap),this.subscribe("selection",this._onSelection),this._unbindAnnotatorEvents(),this._setupAnnotatorEvents(),this._watchForSelection()},o.prototype.pluginDestroy=function(){if(this.controls&&this.controls.remove(),this.highlighter&&this.highlighter.disable(),this.annotator)return this.annotator.editor.unsubscribe("hide",this._watchForSelection)},o.prototype.startAnnotating=function(){return this.highlighter&&this.highlighter.enable(),this.toggle.attr("data-state",o.states.ON),this.toggle.html("Stop Annotating"),this},o.prototype.stopAnnotating=function(){return this.highlighter&&this.highlighter.disable(),this.toggle.attr("data-state",o.states.OFF),this.toggle.html("Start Annotating"),this},o.prototype.isAnnotating=function(){return!this.options.useHighlighter||this.toggle.attr("data-state")===o.states.ON},o.prototype.showEditor=function(t){return this.annotator.showEditor(t,{}),this.hideControls(),this},o.prototype.showControls=function(){return this.controls.removeClass(this.classes.hide),this},o.prototype.hideControls=function(){return this.options.useHighlighter||this.controls.addClass(this.classes.hide),this},o.prototype._setupControls=function(){if(this.annotator.adder.remove(),this.controls=r(this.template).appendTo("body"),this.adder=this.controls.find(".annotator-add"),this.adder.bind("tap",{onTapDown:function(t){return t.stopPropagation()}},this._onAdderTap),this.toggle=this.controls.find(".annotator-touch-toggle"),this.toggle.bind({tap:this._onToggleTap}),!this.options.useHighlighter)return this.toggle.hide()},o.prototype._setupAnnotatorEvents=function(){var t=this;return this.editor=new o.Editor(this.annotator.editor),this.viewer=new o.Viewer(this.annotator.viewer),this.annotator.editor.on("show",function(){if(t._clearWatchForSelection(),t.annotator.onAdderMousedown(),t.highlighter)return t.highlighter.disable()}),this.annotator.viewer.on("show",function(){if(t.highlighter)return t.highlighter.disable()}),this.annotator.editor.on("hide",function(){return t.utils.nextTick(function(){return t.highlighter&&t.highlighter.enable().deselect(),t._watchForSelection()})}),this.annotator.viewer.on("hide",function(){return t.utils.nextTick(function(){if(t.highlighter)return t.highlighter.enable().deselect()})})},o.prototype._unbindAnnotatorEvents=function(){return this.document.unbind({mouseup:this.annotator.checkForEndSelection,mousedown:this.annotator.checkForStartSelection}),this.element.unbind("click mousedown mouseover mouseout")},o.prototype._watchForSelection=function(){var e,n,i,r=this;if(!this.timer)return e=o.isAndroid()?300:1e3/60,n=(new Date).getTime(),(i=function(){var t;return t=(new Date).getTime()-n,e<t&&(n=(new Date).getTime(),r._checkSelection()),r.timer=r.utils.requestAnimationFrame.call(window,i)})()},o.prototype._clearWatchForSelection=function(){return this.utils.cancelAnimationFrame.call(window,this.timer),this.timer=null},o.prototype._checkSelection=function(){var t,e,n;if(e=window.getSelection(),t=this.selectionString,n=r.trim(e+""),e.rangeCount&&n!==this.selectionString&&(this.range=e.getRangeAt(0),this.selectionString=n),(0===e.rangeCount||this.range&&this.range.collapsed)&&(this.range=null,this.selectionString=""),this.selectionString!==t)return this.publish("selection",[this.range,this])},o.prototype._onSelection=function(){return this.isAnnotating()&&this.range&&this._isValidSelection(this.range)?(this.adder.removeAttr("disabled"),this.showControls()):(this.adder.attr("disabled",""),this.hideControls())},o.prototype._isValidSelection=function(t){var e,n,i;return e=function(t){return r(t).parents(".annotator-wrapper").length},i=t.startOffset<t.startContainer.length&&e(t.startContainer),n=0<t.endOffset&&e(t.endContainer),i||n},o.prototype._onToggleTap=function(t){return t.preventDefault(),this.isAnnotating()?this.stopAnnotating():this.startAnnotating()},o.prototype._onAdderTap=function(t){var e,n,i,r=this;if(t.preventDefault(),this.range&&(e=new Annotator.Range.BrowserRange(this.range),(i=e.normalize().limit(this.element[0]))&&!this.annotator.isAnnotator(i.commonAncestor)))return n=function(t){return r.annotator.unsubscribe("beforeAnnotationCreated",n),t.quote=i.toString(),t.ranges=[i]},this.annotator.subscribe("beforeAnnotationCreated",n),this.annotator.onAdderClick(t)},o.prototype._onHighlightTap=function(t){var e;if(!r(t.currentTarget).parents().filter(function(){return r(this).is("a, [data-annotator-clickable]")}).length)return r.contains(this.element[0],t.currentTarget)?((e=t.originalEvent)&&e.touches&&(t.pageX=e.touches[0].pageX,t.pageY=e.touches[0].pageY),this.annotator.viewer.isShown()&&this.annotator.viewer.hide(),this.annotator.onHighlightMouseover(t),this.document.unbind("tap",this._onDocumentTap),this.document.bind("tap",{preventDefault:!1},this._onDocumentTap)):void 0},o.prototype._onDocumentTap=function(t){if(this.annotator.isAnnotator(t.target)||this.annotator.viewer.hide(),!this.annotator.viewer.isShown())return this.document.unbind("tap",this._onDocumentTap)},o.isTouchDevice=function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},o.isAndroid=function(){return/Android/i.test(window.navigator.userAgent)},o}(Annotator.Plugin),Annotator.Plugin.Touch.Editor=function(t){function i(t,e){var n=this;this.editor=t,this._onOverlayTap=s(this._onOverlayTap,this),this._onCancel=s(this._onCancel,this),this._onSubmit=s(this._onSubmit,this),this._onExpandTap=s(this._onExpandTap,this),this._triggerAndroidRedraw=s(this._triggerAndroidRedraw,this),i.__super__.constructor.call(this,this.editor.element[0],e),this.element.addClass("annotator-touch-editor"),this.element.wrapInner('<div class="annotator-touch-widget" />'),this.element.find("form").addClass("annotator-touch-widget-inner"),this.element.find(".annotator-controls a").addClass("annotator-button"),this.element.undelegate("textarea","keydown"),this.on("hide",function(){return n.element.find(":focus").blur()}),this._setupQuoteField(),this._setupAndroidRedrawHack()}var r,o,e;return a(i,t),e=Annotator._t,o=Annotator.$,r=Annotator.Plugin.Touch,i.prototype.events={click:"_onOverlayTap",".annotator-save tap":"_onSubmit",".annotator-cancel tap":"_onCancel",".annotator-quote-toggle tap":"_onExpandTap"},i.prototype.classes={expand:"annotator-touch-expand"},i.prototype.templates={quote:'<button class="annotator-quote-toggle">'+e("expand")+'</button>\n<span class="quote"></span>'},i.prototype.showQuote=function(){return this.quote.addClass(this.classes.expand),this.quote.find("button").text(e("Collapse")),this},i.prototype.hideQuote=function(){return this.quote.removeClass(this.classes.expand),this.quote.find("button").text(e("Expand")),this},i.prototype.isQuoteHidden=function(){return!this.quote.hasClass(this.classes.expand)},i.prototype._setupQuoteField=function(){var n=this;return this.quote=o(this.editor.addField({id:"quote",load:function(t,e){return n.hideQuote(),n.quote.find("span").html(Annotator.Util.escape(e.quote||"")),n.quote.find("button").toggle(n._isTruncated())}})),this.quote.empty().addClass("annotator-item-quote"),this.quote.append(this.templates.quote)},i.prototype._setupAndroidRedrawHack=function(){var t,e,n=this;if(r.isAndroid())return e=null,t=function(){return e=null,n._triggerAndroidRedraw()},o(window).bind("scroll",function(){if(!e)return e=setTimeout(t,100)})},i.prototype._triggerAndroidRedraw=function(){return this._input||(this._input=this.element.find(":input:first")),this._default||(this._default=parseFloat(this._input.css("padding-top"))),this._multiplier=-1*(this._multiplier||1),this._input[0].style.paddingTop=this._default+this._multiplier+"px",this._input[0].style.paddingTop=this._default-this._multiplier+"px"},i.prototype._isTruncated=function(){var t,e,n;return(e=this.isQuoteHidden())||this.hideQuote(),n=this.quote.height(),this.showQuote(),t=this.quote.height(),e?this.hideQuote():this.showQuote(),n<t},i.prototype._onExpandTap=function(t){return t.preventDefault(),t.stopPropagation(),this.isQuoteHidden()?this.showQuote():this.hideQuote()},i.prototype._onSubmit=function(t){return t.preventDefault(),this.editor.submit()},i.prototype._onCancel=function(t){return t.preventDefault(),this.editor.hide()},i.prototype._onOverlayTap=function(t){if(t.target===this.element[0])return this.editor.hide()},i}(Annotator.Delegator),jQuery.event.special.tap={add:function(e){var n,i,r,t;return i=e.data=e.data||{},n=this,t=function(t){return!1!==i.preventDefault&&t.preventDefault(),i.onTapDown&&i.onTapDown.apply(this,arguments),i.event=t,i.touched=setTimeout(function(){return i.touched=null},i.timeout||300),jQuery(document).bind({touchend:r,mouseup:r})},r=function(t){return null!=i.touched&&(clearTimeout(i.touched),(t.target===n||jQuery.contains(n,t.target))&&(e.origHandler||e.handler).call(this,i.event),i.touched=null),i.onTapUp&&i.onTapUp.apply(this,arguments),jQuery(document).unbind({touchstart:r,mousedown:r})},i.tapHandlers={touchstart:t,mousedown:t},e.selector?jQuery(n).delegate(e.selector,i.tapHandlers):jQuery(n).bind(i.tapHandlers)},remove:function(t){return jQuery(this).unbind(t.data.tapHandlers)}},Annotator.Delegator.natives.push("touchstart","touchmove","touchend","tap"),Annotator.Plugin.Touch.utils=function(){var t,i,e,n,r,o,s;for(r=["ms","moz","webkit","o"],n=window.requestAnimationFrame,t=window.cancelAnimationFrame,o=0,s=r.length;o<s;o++)e=r[o],n||(n=window[e+"RequestAnimationFrame"],t=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]);return n||(i=0,n=function(t){var e,n;return e=(new Date).getTime(),n=Math.max(0,16-(e-i)),i=e+n,window.setTimeout(function(){return t(e+n)},n)}),t||(t=function(t){return clearTimeout(t)}),{requestAnimationFrame:n,cancelAnimationFrame:t,nextTick:function(t){return setTimeout(t,0)}}}(),Annotator.Plugin.Touch.Viewer=function(t){function n(t,e){this.viewer=t,this._onLoad=s(this._onLoad,this),n.__super__.constructor.call(this,this.viewer.element[0],e),this.element.unbind("click"),this.element.addClass("annotator-touch-widget annotator-touch-viewer"),this.on("load",this._onLoad)}var i;return a(n,t),i=Annotator.$,n.prototype.events={".annotator-item tap":"_onTap",".annotator-edit tap":"_onEdit",".annotator-delete tap":"_onDelete"},n.prototype.hideAllControls=function(){return this.element.find(".annotator-item").removeClass(this.viewer.classes.showControls),this},n.prototype._onLoad=function(){var t;return(t=this.element.find(".annotator-controls")).toggleClass("annotator-controls annotator-touch-controls"),t.find("button").addClass("annotator-button")},n.prototype._onTap=function(t){var e,n;if(e=(n=i(t.currentTarget)).hasClass(this.viewer.classes.showControls),this.hideAllControls(),!e)return n.addClass(this.viewer.classes.showControls)},n.prototype._onEdit=function(t){return t.preventDefault(),this.viewer.onEditClick(t)},n.prototype._onDelete=function(t){return t.preventDefault(),this.viewer.onDeleteClick(t)},n}(Annotator.Delegator)}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;Annotator.Plugin.RichText=function(t){function e(){return this.mdConvert=n(this.mdConvert,this),this.updateViewer=n(this.updateViewer,this),this.updateEditor=n(this.updateEditor,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.options={editor_enabled:!0,tinymce:{selector:"li.annotator-item textarea",plugins:"media image link code melcatalog paste",link_list:!1,target_list:!1,rel_list:!1,paste_as_text:!0,menubar:!1,statusbar:!1,toolbar_items_size:"small",extended_valid_elements:"iframe[src|frameborder|style|scrolling|class|width|height|name|align|id]",toolbar:"undo redo | styleselect | bold italic | link image media | code"}},e.prototype.mdconverter=null!=Showdown?new Showdown.converter:null,e.prototype.pluginInit=function(){var t,e;if(t=this.annotator,e=this.annotator.editor,Annotator.supported()&&(t.viewer.addField({load:this.updateViewer}),this.options.editor_enabled))return t.editor.addField({type:"input",load:this.updateEditor}),t.subscribe("annotationEditorShown",function(){return $(t.editor.element).find(".mce-container").css("z-index",3e9),t.editor.checkOrientation()}),t.subscribe("annotationEditorHidden",function(){}),this.options.tinymce.setup=function(t){return t.on("change",function(){return $(e.element).find("textarea")[0].value=tinymce.activeEditor.getContent()}),t.on("Init",function(){return $(".mce-container").css("z-index","3090000000000000000")})},tinymce.init(this.options.tinymce)},e.prototype.updateEditor=function(t,e){var n;return n=null!=e.text?e.text:"",tinymce.activeEditor.setContent(this.mdConvert(n)),$(t).remove()},e.prototype.updateViewer=function(t,e){var n;return(n=$(t.parentNode).find("div:first-of-type")[0]).innerHTML=this.mdConvert(e.text),$(n).addClass("richText-annotation"),$(t).remove()},e.prototype.mdConvert=function(t){return null!=this.mdconverter&&""!==t?this.mdconverter.makeHtml(t):t},e}(Annotator.Plugin)}.call(this),tinymce.PluginManager.add("melcatalog",function(o){function t(t,e){var n="catalog?term="+encodeURI(e)+"&onlyimages="+("image"==t?"true":"false");o.windowManager.open({width:650,height:650,url:n,title:"Search Melville Electronic Library",resizable:!0,buttons:[{text:"Close",onclick:"submit"}],onClose:function(){i(t)}})}function i(t){var e=a();if(e!==undefined&&0!=e.length){var n=e.split("|");"image"==t?s(n[0],n[1],n[2]):r(n[0],n[1])}}function r(t,e){var n="/documents/catalog/reference/"+t,i='<a class="catalog-popup" data-parent data-gallery="remoteload" data-title="'+o.dom.encode(e)+'" href="'+n+'">'+o.dom.encode(e)+"</a>";o.insertContent(i)}function s(t,e,n){var i="/documents/catalog/image/"+t,r='<a class="catalog-popup" data-parent data-gallery="remoteload" data-title="'+o.dom.encode(e)+'"href="'+i+'"><img src="'+n+'"/></a>';o.insertContent(r)}function n(){var t=$("div")[0];return jQuery.data(t,"annotation")}function a(){var t=$("div")[0],e=jQuery.data(t,"catalog");return jQuery.data(t,"catalog",""),e}function u(){return tinymce.activeEditor.selection.getContent({format:"text"})}function e(){var t=n(),e=u();return 0<e.length&&(t=e),t}o.ui.registry.addButton("mellink",{image:icons.external_link,tooltip:"Insert/edit link to MEL Catalog object",onclick:function(){t("reference",e())}}),o.ui.registry.addButton("melimage",{image:icons.file_image,tooltip:"Insert/edit image from MEL Catalog",onclick:function(){t("image",e())}})});var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__hasProp={}.hasOwnProperty,Sidebar,sidebar,subscriber,studio;Annotator.Plugin.Categories=function(t){function e(t,e){this.loadCategories=__bind(this.loadCategories,this),this.updateField=__bind(this.updateField,this),this.updateViewer=__bind(this.updateViewer,this),this.addHighlightMarkup=__bind(this.addHighlightMarkup,this),this.updateHighlightMarkup=__bind(this.updateHighlightMarkup,this),this.updateHighlightRules=__bind(this.updateHighlightRules,this),this.options.categories=e}return __extends(e,t),e.prototype.field=null,e.prototype.input=null,e.prototype.options={categories:{}},e.prototype.pluginInit=function(){if(Annotator.supported()){var t,e;if(this.annotator.subscribe("annotationEditorSubmit",this.setAnnotationCat),this.annotator.subscribe("annotationCreated",this.addHighlightMarkup),this.annotator.subscribe("annotationUpdated",this.updateHighlightMarkup),this.annotator.subscribe("annotationsLoaded",this.loadCategories),0,e=this.options.categories,0<Object.keys(e).length){this.annotator.editor.addField({id:"annotation-category",label:"category",type:"input",load:this.updateField}),$("head").append($("<style/>",{id:"annotator-category-styles",html:""}));var n=$("#annotation-category").parent();for(t in n.attr("id","annotation-category-selection"),e){var i=e[t],r=$("<button>").attr("class","btn btn-default").attr("value",t).text(i.name);r.data("active-color",$.xcolor.opacity("#FFFFFF",i.hex,.4).getHex()),r.click(function(t){t.preventDefault(),$(this).toggleClass("active").removeAttr("style"),$(this).hasClass("active")&&$(this).css("background-color",$(this).data("active-color"))}),n.append(r)}$("#annotation-category").hide()}return this.viewer=this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter&&this.annotator.plugins.Filter.addFilter({label:"Categories",property:"category",isFiltered:Annotator.Plugin.Categories.filterCallback}),this.input=$(this.field).find(":input")}},e.prototype.loadCategories=function(t){var i=this.options.categories;$.each(t,function(t,e){if(e.annotation_categories!==undefined){var n="";$.each(e.annotation_categories,function(t,e){n+=" annotation_category-"+e,i[e].css_classes!==undefined&&""!=i[e].css_classes&&(n+=" "+i[e].css_classes)}),$(e.highlights).addClass(n)}}),this.updateHighlightRules()},e.prototype.setViewer=function(t){return t},e.prototype.updateField=function(t,e){$("#annotation-category-selection button").removeClass("active").removeAttr("style"),e.annotation_categories!==undefined&&$.each(e.annotation_categories,function(t,e){var n=$('#annotation-category-selection button[value="'+e+'"]');n.addClass("active").removeAttr("style").css("background-color",n.data("active-color"))})},e.prototype.addHighlightMarkup=function(t){var e,n,i,r,o,s=this.options.categories;if(n=t.highlights,t.annotation_categories!==undefined)for(o=[],i=0,r=n.length;i<r;i++){e=n[i];var a="";$.each(t.annotation_categories,function(t,e){a+=" annotation_category-"+e,s[e].css_classes!==undefined&&""!=s[e].css_classes&&(a+=" "+s[e].css_classes)}),o.push(e.className=e.className+a)}this.updateHighlightRules()},e.prototype.updateHighlightMarkup=function(t){$(t.highlights).attr("class","annotator-hl"),this.addHighlightMarkup(t)},e.prototype.updateHighlightRules=function(){_ref=this.options.categories;var s=new Array;$.each($(".annotator-wrapper .annotator-hl"),function(t,e){for(var r="",n="",i=$(e).attr("class").split(" "),o=0;o<i.length;o++)i[o].match(/^annotation_category-/)&&(n+="."+i[o]);""!=n&&(r=n),$.each($(e).parentsUntil(".annotator-wrapper"),function(t,e){if($(e).is("span.annotator-hl")){var n="",i=$(e).attr("class").split(" ");for(t=0;t<i.length;t++)i[t].match(/^annotation_category-/)&&(n+="."+i[t]);""!=n&&(r=n+" "+r)}}),""!=r&&s.push(r.replace(/ $/,""))});for(var n={},t=0;t<s.length;t++)n[s[t]]=0;var i="";for(t=0;t<s.length;t++){var e=s[t];if(0==n[e]){for(var r={},o=e.split(" "),a=0;a<o.length;a++)for(var u=o[a].split("."),l=0;l<u.length;l++){var c=u[l].replace(/^annotation_category-/,"");""!=c&&(r[c]=1)}var d="#FFFFFF",h=0;$.each(r,function(){h++});var f=.4/h;$.each(r,function(t){hex=_ref[t].hex;var e=$.xcolor.opacity(d,hex,f);d=e.getHex()}),i+=e+" { background-color: "+d+"; } ",n[e]=1}}$.each(_ref,function(t,e){n["annotation_category-"+t]===undefined&&(i+=".annotation_category-"+t+" { background-color: "+$.xcolor.opacity("#FFFFFF",e.hex,.4).getHex()+"; } ")}),$("style#annotator-category-styles").html(i);var p=new Array;$.each(n,function(t){p.push(t)})},e.prototype.setAnnotationCat=function(n){n.annotation.annotation_categories=[],$.each($("#annotation-category-selection button"),function(t,e){$(e).hasClass("active")&&n.annotation.annotation_categories.push(parseInt($(e).val()))})},e.prototype.updateViewer=function(t,e){t=$(t);var i=this.options.categories;return t.addClass("annotator-category"),e.annotation_categories!==undefined&&0<e.annotation_categories.length?t.addClass("annotator-category").html(function(){var n="";return $.each(e.annotation_categories,function(t,e){
n+='<span class="annotation_category_viewer-'+e+'">'+i[e].name+'</span><span class="viewer_indicator annotation_category-'+e+'"></span>'}),n}):t.remove()},e}(Annotator.Plugin),function(){"use strict";var o,n;o=jQuery,(n=function(t,e){var n,i,r=this;return this.options=o.extend({title:null,footer:null,remote:null},o.fn.ekkoLightbox.defaults,e||{}),this.$element=o(t),"",this.modal_id=this.options.modal_id?this.options.modal_id:"ekkoLightbox-"+Math.floor(1e3*Math.random()+1),i='<div class="modal-header"'+(this.options.title||this.options.always_show_close?"":' style="display:none"')+'><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+(this.options.title||"&nbsp;")+"</h4></div>",n='<div class="modal-footer"'+(this.options.footer?"":' style="display:none"')+">"+this.options.footer+"</div>",o(document.body).append('<div id="'+this.modal_id+'" class="ekko-lightbox modal fade" tabindex="-1"><div class="modal-dialog"><div class="modal-content">'+i+'<div class="modal-body"><div class="ekko-lightbox-container"><div></div></div></div>'+n+"</div></div></div>"),this.modal=o("#"+this.modal_id),this.modal_dialog=this.modal.find(".modal-dialog").first(),this.modal_content=this.modal.find(".modal-content").first(),this.modal_body=this.modal.find(".modal-body").first(),this.lightbox_container=this.modal_body.find(".ekko-lightbox-container").first(),this.lightbox_body=this.lightbox_container.find("> div:first-child").first(),this.showLoading(),this.modal_arrows=null,this.border={top:parseFloat(this.modal_dialog.css("border-top-width"))+parseFloat(this.modal_content.css("border-top-width"))+parseFloat(this.modal_body.css("border-top-width")),right:parseFloat(this.modal_dialog.css("border-right-width"))+parseFloat(this.modal_content.css("border-right-width"))+parseFloat(this.modal_body.css("border-right-width")),bottom:parseFloat(this.modal_dialog.css("border-bottom-width"))+parseFloat(this.modal_content.css("border-bottom-width"))+parseFloat(this.modal_body.css("border-bottom-width")),left:parseFloat(this.modal_dialog.css("border-left-width"))+parseFloat(this.modal_content.css("border-left-width"))+parseFloat(this.modal_body.css("border-left-width"))},this.padding={top:parseFloat(this.modal_dialog.css("padding-top"))+parseFloat(this.modal_content.css("padding-top"))+parseFloat(this.modal_body.css("padding-top")),right:parseFloat(this.modal_dialog.css("padding-right"))+parseFloat(this.modal_content.css("padding-right"))+parseFloat(this.modal_body.css("padding-right")),bottom:parseFloat(this.modal_dialog.css("padding-bottom"))+parseFloat(this.modal_content.css("padding-bottom"))+parseFloat(this.modal_body.css("padding-bottom")),left:parseFloat(this.modal_dialog.css("padding-left"))+parseFloat(this.modal_content.css("padding-left"))+parseFloat(this.modal_body.css("padding-left"))},this.modal.on("show.bs.modal",this.options.onShow.bind(this)).on("shown.bs.modal",function(){return r.modal_shown(),r.options.onShown.call(r)}).on("hide.bs.modal",this.options.onHide.bind(this)).on("hidden.bs.modal",function(){return r.gallery&&o(document).off("keydown.ekkoLightbox"),r.modal.remove(),r.options.onHidden.call(r)}).modal("show",e),this.modal}).prototype={modal_shown:function(){var t,e=this;return this.options.remote?(this.gallery=this.$element.data("gallery"),this.gallery&&(this.gallery_items="document.body"===this.options.gallery_parent_selector||""===this.options.gallery_parent_selector?o(document.body).find('*[data-toggle="lightbox"][data-gallery="'+this.gallery+'"]'):this.$element.parents(this.options.gallery_parent_selector).first().find('*[data-toggle="lightbox"][data-gallery="'+this.gallery+'"]'),this.gallery_index=this.gallery_items.index(this.$element),o(document).on("keydown.ekkoLightbox",this.navigate.bind(this)),this.options.directional_arrows&&1<this.gallery_items.length&&(this.lightbox_container.prepend('<div class="ekko-lightbox-nav-overlay"><a href="#" class="'+this.strip_stops(this.options.left_arrow_class)+'"></a><a href="#" class="'+this.strip_stops(this.options.right_arrow_class)+'"></a></div>'),this.modal_arrows=this.lightbox_container.find("div.ekko-lightbox-nav-overlay").first(),this.lightbox_container.find("a"+this.strip_spaces(this.options.left_arrow_class)).on("click",function(t){return t.preventDefault(),e.navigate_left()}),this.lightbox_container.find("a"+this.strip_spaces(this.options.right_arrow_class)).on("click",function(t){return t.preventDefault(),e.navigate_right()}))),this.options.type?"image"===this.options.type?this.preloadImage(this.options.remote,!0):"youtube"===this.options.type&&(t=this.getYoutubeId(this.options.remote))?this.showYoutubeVideo(t):"vimeo"===this.options.type?this.showVimeoVideo(this.options.remote):"instagram"===this.options.type?this.showInstagramVideo(this.options.remote):"url"===this.options.type?this.showInstagramVideo(this.options.remote):this.error('Could not detect remote target type. Force the type using data-type="image|youtube|vimeo|url"'):this.detectRemoteType(this.options.remote)):this.error("No remote target given")},strip_stops:function(t){return t.replace(/\./g,"")},strip_spaces:function(t){return t.replace(/\s/g,"")},isImage:function(t){return t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSwf:function(t){return t.match(/\.(swf)((\?|#).*)?$/i)},getYoutubeId:function(t){var e;return!(!(e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/))||11!==e[2].length)&&e[2]},getVimeoId:function(t){return 0<t.indexOf("vimeo")&&t},getInstagramId:function(t){return 0<t.indexOf("instagram")&&t},navigate:function(t){if(39===(t=t||window.event).keyCode||37===t.keyCode){if(39===t.keyCode)return this.navigate_right();if(37===t.keyCode)return this.navigate_left()}},navigate_left:function(){var t;if(1!==this.gallery_items.length)return this.showLoading(),0===this.gallery_index?this.gallery_index=this.gallery_items.length-1:this.gallery_index--,this.options.onNavigate("left",this.gallery_index),this.$element=o(this.gallery_items.get(this.gallery_index)),this.updateTitleAndFooter(),t=this.$element.attr("data-remote")||this.$element.attr("href"),this.detectRemoteType(t,this.$element.attr("data-type"))},navigate_right:function(){var t,e;if(1!==this.gallery_items.length)return this.showLoading(),this.gallery_index===this.gallery_items.length-1?this.gallery_index=0:this.gallery_index++,this.options.onNavigate("right",this.gallery_index),this.$element=o(this.gallery_items.get(this.gallery_index)),e=this.$element.attr("data-remote")||this.$element.attr("href"),this.updateTitleAndFooter(),this.detectRemoteType(e,this.$element.attr("data-type")),this.gallery_index+1<this.gallery_items.length&&(e=(t=o(this.gallery_items.get(this.gallery_index+1),!1)).attr("data-remote")||t.attr("href"),"image"===t.attr("data-type")||this.isImage(e))?this.preloadImage(e,!1):void 0},detectRemoteType:function(t,e){var n;return"image"===e||this.isImage(t)?(this.options.type="image",this.preloadImage(t,!0)):"youtube"===e||(n=this.getYoutubeId(t))?(this.options.type="youtube",this.showYoutubeVideo(n)):"vimeo"===e||(n=this.getVimeoId(t))?(this.options.type="vimeo",this.showVimeoVideo(n)):"instagram"===e||(n=this.getInstagramId(t))?(this.options.type="instagram",this.showInstagramVideo(n)):"url"===e||(n=this.getInstagramId(t))?(this.options.type="instagram",this.showInstagramVideo(n)):(this.options.type="url",this.loadRemoteContent(t))},updateTitleAndFooter:function(){var t,e,n,i;return n=this.modal_content.find(".modal-header"),e=this.modal_content.find(".modal-footer"),i=this.$element.data("title")||"",t=this.$element.data("footer")||"",i||this.options.always_show_close?n.css("display","").find(".modal-title").html(i||"&nbsp;"):n.css("display","none"),t?e.css("display","").html(t):e.css("display","none"),this},showLoading:function(){return this.lightbox_body.html('<div class="modal-loading">Loading..</div>'),this},showYoutubeVideo:function(t){var e,n,i;return e=560/315,i=this.$element.data("width")||560,n=(i=this.checkDimensions(i))/e,this.resize(i),this.lightbox_body.html('<iframe width="'+i+'" height="'+n+'" src="//www.youtube.com/embed/'+t+'?badge=0&autoplay=1&html5=1" frameborder="0" allowfullscreen></iframe>'),this.modal_arrows?this.modal_arrows.css("display","none"):void 0},showVimeoVideo:function(t){var e,n,i;return e=500/281,i=this.$element.data("width")||560,n=(i=this.checkDimensions(i))/e,this.resize(i),this.lightbox_body.html('<iframe width="'+i+'" height="'+n+'" src="'+t+'?autoplay=1" frameborder="0" allowfullscreen></iframe>'),this.modal_arrows?this.modal_arrows.css("display","none"):void 0},showInstagramVideo:function(t){var e;return e=this.$element.data("width")||612,e=this.checkDimensions(e),this.resize(e),this.lightbox_body.html('<iframe width="'+e+'" height="'+e+'" src="'+this.addTrailingSlash(t)+'embed/" frameborder="0" allowfullscreen></iframe>'),this.modal_arrows?this.modal_arrows.css("display","none"):void 0},loadRemoteContent:function(t){var e,n,i=this;return n=this.$element.data("width")||560,this.resize(n),e=this.$element.data("disableExternalCheck")||!1,console.log(e,this.isExternal(t)),e||this.isExternal(t)?this.lightbox_body.html('<iframe width="'+n+'" height="'+n+'" src="'+t+'" frameborder="0" allowfullscreen></iframe>'):this.lightbox_body.load(t,o.proxy(function(){return i.$element.trigger("loaded.bs.modal")})),this.modal_arrows?this.modal_arrows.css("display","block"):void 0},isExternal:function(t){var e;return"string"==typeof(e=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/))[1]&&0<e[1].length&&e[1].toLowerCase()!==location.protocol||"string"==typeof e[2]&&0<e[2].length&&e[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host},error:function(t){return this.lightbox_body.html(t),this},preloadImage:function(t,e){var n,i=this;return n=new Image,(null==e||!0===e)&&(n.onload=function(){var t;return(t=o("<img />")).attr("src",n.src),t.addClass("img-responsive"),i.lightbox_body.html(t),i.modal_arrows&&i.modal_arrows.css("display","block"),i.resize(n.width)},n.onerror=function(){return i.error("Failed to load image: "+t)}),n.src=t,n},resize:function(t){var e;return e=t+this.border.left+this.padding.left+this.padding.right+this.border.right,this.modal_dialog.css("width","auto").css("max-width",e),this.lightbox_container.find("a").css("padding-top",function(){return o(this).parent().height()/2}),this},checkDimensions:function(t){var e;return e=t+this.border.left+this.padding.left+this.padding.right+this.border.right,document.body.clientWidth<e&&(t=this.modal_body.width()),t},close:function(){return this.modal.modal("hide")},addTrailingSlash:function(t){return"/"!==t.substr(-1)&&(t+="/"),t}},o.fn.ekkoLightbox=function(e){return this.each(function(){var t;return t=o(this),e=o.extend({remote:t.attr("data-remote")||t.attr("href"),gallery_parent_selector:t.attr("data-parent"),type:t.attr("data-type")},e,t.data()),new n(this,e),this})},o.fn.ekkoLightbox.defaults={gallery_parent_selector:"*:not(.row)",left_arrow_class:".glyphicon .glyphicon-chevron-left",right_arrow_class:".glyphicon .glyphicon-chevron-right",directional_arrows:!0,type:null,always_show_close:!0,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){}}}.call(this),jQuery(function(n){function e(t){var e=n("div")[0];jQuery.data(e,"annotation",t)}Annotator.Plugin.MelCatalogue=function(){return{pluginInit:function(){this.annotator.subscribe("annotationEditorShown",function(t){e(t.annotation.quote)}).subscribe("annotationViewerShown",function(){n(".catalog-popup").off().attr("target","_blank"),n(".catalog-popup").on("click",function(t){t.preventDefault(),n(".ekko-lightbox").remove(),n(this).ekkoLightbox(),n(".ekko-lightbox .modal-dialog").draggable().resizable()})})}}}});var annotation_studio={initialize_annotator:function(){(sidebar=new Sidebar.App).token=token;var t=$("#textcontent").annotator(annotatorOptions).annotator("setupPlugins",{},plugin_options()),e={editor_enabled:annotationStudioConfig.enableRichTextEditor,tinymce:{toolbar:annotationStudioConfig.tinyMCEToolbar,image_dimensions:!1}};t.annotator("addPlugin","MelCatalogue"),subscriber=$("#textcontent").annotator().data("annotator"),mobile_device?t.annotator("addPlugin","Touch"):t.annotator("addPlugin","RichText",e),subscriber.subscribe("annotationsLoaded",annotation_studio.loadSidebar),subscriber.subscribe("annotationsLoaded",annotation_studio.stopSpinner),subscriber.subscribe("annotationsLoaded",annotation_studio.handleHash),subscriber.subscribe("annotationEditorShown",annotation_studio.parentIndex),subscriber.subscribe("annotationsLoaded",__bind(function(t){t.map(inlineData)},this)),subscriber.subscribe("beforeAnnotationCreated",annotation_studio.createUuid),subscriber.subscribe("beforeAnnotationCreated",annotation_studio.addUserName),subscriber.subscribe("annotationCreated",annotation_studio.loadSidebar),subscriber.subscribe("annotationCreated",inlineData),subscriber.subscribe("annotationUpdated",annotation_studio.loadSidebar),subscriber.subscribe("annotationDeleted",annotation_studio.deleteFromSidebar),$(".annotator-checkbox label").text("My groups can view this annotation"),sidebar.filtered=$("#visibleannotations").hasClass("active"),sidebar.sort_editable=sidebar_sort_editable,sidebar.subscriber=subscriber},selectedTags:[],loadOptions:function(t,e){var n=[];if($.each($("#category-chooser button.active"),function(t,e){n.push($(e).data("annotation_category_id"))}),e)var i={limit:admin_filter_user?null:1e3,groups:groups,subgroups:subgroups,user:e,currentUser:filter_user,adminUser:admin_filter_user,mode:"user",context:search_context,uri:[location.protocol,"//",location.host,location.pathname].join(""),annotation_categories:n};else i={limit:admin_filter_user?null:1e3,groups:groups,subgroups:subgroups,user:filter_user,adminUser:admin_filter_user,mode:annotation_studio.getMode(),context:search_context,uri:[location.protocol,"//",location.host,location.pathname].join(""),annotation_categories:n};return $("#tagsearchbox").length&&""!=$("#tagsearchbox").val()&&(i.tags=$("#tagsearchbox").val()),$.each(t,function(t,e){i[t]=e}),i},refreshAnnotations:function(){subscriber.loadAnnotations(subscriber.plugins.Store.annotations),$("#spinnermodal").modal("show")},filterAnnotations:function(t,e){console.log("*** the user select is"),console.log(e);var n=annotation_studio.loadOptions(t,e),i=annotation_studio.reloadAnnotations(n),r=annotation_studio.cleanupDocument();$.when(i).then(r).done(annotation_studio.refreshAnnotations(),annotation_studio.loadSidebar())},modeFilter:function(t){console.log("*** went into mode filter");var e={mode:t.target.id};annotation_studio.filterAnnotations(e)},resetByUser:function(){$(".by-user").val("")},userFilter:function(t){console.log("*** went into user filter"),"All Users"===$("#users option:selected").text()?$("label.who-made:nth-child(3)").addClass("active"):$("label.who-made").removeClass("active");var e={};console.log("*** event is"),console.log(t),console.log("*** target is"),console.log(t.target),console.log("*** value is"),console.log(t.target.value),annotation_studio.filterAnnotations(e,t.target.value)},tagFilter:function(){$('*[data-role="remove"]').hide();var t={};annotation_studio.filterAnnotations(t)},tagFilterCheck:function(){for(var t=$("#annotation-tag-list").find("input:checkbox:checked"),e=[],n=0;n<t.length;n++)e.push(t[n].value);annotation_studio.selectedTags=e;var i={};annotation_studio.filterAnnotations(i)},categoryFilter:function(t){$(t.currentTarget).toggleClass("active").removeAttr("style"),$(t.currentTarget).hasClass("active")&&$(t.currentTarget).css("background-color",$(t.currentTarget).data("active-color"));var e={};annotation_studio.filterAnnotations(e)},sortUpdate:function(){sidebar.listAnnotations(subscriber.dumpAnnotations())},stopSpinner:function(){$("#spinnermodal").modal("hide")},startSpinner:function(){$("#spinnermodal").modal("show")},loadSidebar:function(){setTimeout(function(){sidebar.listAnnotations(subscriber.dumpAnnotations())},100)},deleteFromSidebar:function(){$(".glyphicon-comment").remove(),setTimeout(function(){sidebar.listAnnotations(subscriber.dumpAnnotations())},100)},removeHilites:function(){$(".glyphicon-comment").remove();var t=$(".annotator-hl");return 0<t.length&&(t.children().unwrap(),t.contents().unwrap()),!0},handleHash:function(){var t=window.location.hash;0<t.length&&0<$(t).length&&(console.info(t),setTimeout(function(){$("html,body").animate({scrollTop:$(t).offset().top-150},500)},1e3))},createUuid:function(t){null==t.uuid?(t.uuid=Math.uuid(8,16),console.info("New uuid for annotation: '"+t.quote+"': "+t.uuid)):console.info("Existing uuid for annotation: '"+t.quote+"': "+t.uuid)},cleanupDocument:function(){var t=new $.Deferred;return annotation_studio.removeHilites()?t.resolve("Cleanup complete."):t.reject("Cleanup failed."),t.promise()},reloadAnnotations:function(t){var e=new $.Deferred;return subscriber.plugins.Store.annotations=[],subscriber.plugins.Store.loadAnnotationsFromSearch(t)?setTimeout(function(){e.resolve("Reload complete.")},100):e.reject("Reload failed."),e.promise()},getMode:function(){return $("label.viewchoice.active").attr("id")||"user"},addUserName:function(t){null==t.username&&(t.username=annotation_username,console.info("New username for annotation: "+annotation_username))},parentIndex:function(t,e){if(0<!e.parentIndex){var n=$(".annotator-hl-temporary").parent()[0],i=$("#textcontent").find("*").index(n);e.parentIndex=i}},set_document_state:function(t){$.each(t,function(t,e){var n=$("#"+e);0<n.length&&!n.hasClass("active")&&(n.parent().hasClass("btn-group")&&n.siblings().removeClass("active"),n.addClass("active"),n.attr("id").match(/^annotation_category/)&&n.css("background-color",$.xcolor.opacity("#FFFFFF",n.data("hex"),.4).getHex()))})},retrieve_document_state:function(){var n=[];return $.each($("#toolsmenu .btn.active"),function(t,e){n.push($(e).attr("id"))}),n},initialize_default_state_behavior:function(){annotation_studio.set_document_state(default_state),$("#default_state").on("click",function(t){t.preventDefault();var e=annotation_studio.retrieve_document_state();$.ajax({url:"/documents/"+document_slug+"/set_default_state",type:"POST",data:{default_state:JSON.stringify(e)}}).done(function(){$("#default_state").removeClass("active")})})}};jQuery(function(n){if("documents"==n("body").attr("id")&&"show annotable"==n("body").attr("class")){annotation_studio.startSpinner(),annotation_studio.initialize_default_state_behavior(),annotation_studio.initialize_annotator(),snapshot.initialize(),n(".annotator-button").on("tap",function(){console.log("button tapped"),n(".annotator-item").removeClass("hide")}),n(".annotator-adder").on("click",function(){n(".annotator-item").removeClass("hide")}),n(".annotator-edit").on("tap",function(){n(".annotator-item").removeClass("hide")}),n(".viewchoice").on("click",annotation_studio.modeFilter),n(".who-made").on("click",annotation_studio.resetByUser),n("#users").on("change",annotation_studio.userFilter);n("#annotation-tag-list");n("body").on("click","#annotation-tag-list input",annotation_studio.tagFilterCheck),n("#tagsearchbox").tagsinput(),n("#tagsearchbox").on("itemAdded",annotation_studio.tagFilter),n("#tagsearchbox").on("itemRemoved",annotation_studio.tagFilter),n(window).scroll(lazyShowAndHideAnnotations),n("#visibleannotations").on("click",function(){sidebar.filtered=!0,sidebar.showAndHideAnnotations()}),n("#allannotations").on("click",function(){sidebar.filtered=!1,sidebar.showAllAnnotations()}),n.each(n("#category-chooser button"),function(t,e){n(e).data("active-color",n.xcolor.opacity("#FFFFFF",n(e).data("hex"),.4).getHex()),n(e).on("click",annotation_studio.categoryFilter)}),n("#textpositionsort").on("click",{},annotation_studio.sortUpdate),n("#customsort").on("click",{},annotation_studio.sortUpdate)}});var lazyShowAndHideAnnotations=_.debounce(function(){sidebar.showAndHideAnnotations()},30),__bind=function(t,e){return function(){return t.apply(e,arguments)}},inlineData=__bind(function(t){if(null!=t.highlights[0]){highlightCount=t.highlights.length;for(var e=0;e<highlightCount;e++)t.highlights[e].dataset.uuid=t.uuid;t.highlights[0].id="hl"+t.uuid,t.highlights[0].title=t.user,t.highlights[0].dataset.tags=t.tags.join(","),t.highlights[0].dataset.annotation_categories=t.annotation_categories.join(","),t.highlights[0].dataset.groups=t.groups.join(","),t.highlights[0].dataset.subgroups=t.subgroups.join(","),t.highlights[0].dataset.username=t.username,t.highlights[0].dataset.user=t.user}else console.info("Annotation: "+t.uuid+"has no highlights.")},this),snapshot={save:function(t){var e=$.ajax({url:"/documents/"+document_slug+"/snapshot",type:"POST",data:{snapshot:t.html()}}).done(function(){console.log("Saved snapshot"),$("#snapshot-progress").modal("hide"),console.log("Removed spinner")}).fail(function(){console.log("Failed to save snapshot")});return Promise.resolve(e)},addHTML:function(){return new Promise(function(t,e){var n=$("#snapshot").html();n.length?t(n):e("Failed to add HTML.")})},addJSON:function(){var n='<script type="text/javascript" id="json-archive">var annotations = '+JSON.stringify(subscriber.dumpAnnotations())+"</script>";return new Promise(function(t,e){n.length?t(n):e("Failed to add JSON.")})},addCSS:function(){var t=$("#annotator-category-styles")[0].textContent,n='<style type="text/css">';return n+=".annotator-hl { background: rgba(255, 255, 10, 0.3) } .annotator-hl-active { background: rgba(255, 255, 10, 0.8) }.annotator-hl-filtered { background-color: transparent }",n+=t,n+="</style>",new Promise(function(t,e){n.length?t(n):e("Failed to add CSS.")})},addFilters:function(){var t=["tags","annotation_categories","user"];return _.map(t,function(t){var e=doc_uri+"/annotations/field/"+t+".json";return Promise.resolve($.get(e))})},initialize:function(){$("#snapshot_trigger").click(function(t){t.preventDefault(),$("#snapshot-progress").modal("show"),$(".glyphicon-comment").remove(),console.log("Started spinner");var i=$("#snapshot-staging");i.html("");var e=snapshot.addCSS(i),n=snapshot.addHTML(i),r=snapshot.addJSON(i),o=snapshot.addFilters(i),s=[e,n,r];Promise.all(s).then(function(t){t.forEach(function(t){i.append(t)})}).then(function(){return Promise.all(o)}).then(function(t){var e={},n="";t.forEach(function(t){$.extend(e,t)}),n='<script type="text/javascript" id="filter-lists">var filterLists = '+JSON.stringify(e)+"</script>",i.append(n)}).then(function(){snapshot.save(i)})["catch"](function(t){console.log("Argh, broken: "+t.message)})})}},Sidebar=Sidebar||{};Sidebar.Annotation=Backbone.Model.extend({initialize:function(){},defaults:{user:null,quote:null,text:null,id:null}});var Sidebar=Sidebar||{};Sidebar.AnnotationRows=Backbone.Model.extend({defaults:{rows:null}});var Sidebar=Sidebar||{};Sidebar.LocalAnnotationList=Backbone.Collection.extend({model:Sidebar.Annotation});var Sidebar=Sidebar||{};Sidebar.RemoteAnnotationList=Backbone.Collection.extend({model:Sidebar.Annotation,url:"http://localhost:3000/api/search",initialize:function(t){this.fetch({data:t,success:this.fetchSuccess,error:this.fetchError}),this.deferred=new $.Deferred},deferred:Function.constructor.prototype,fetchSuccess:function(t){t.deferred.resolve()},fetchError:function(){throw new Error("Fetch did not get annotations from the API")}});var Sidebar=Sidebar||{};Sidebar.AnnotationListView=Backbone.View.extend({el:$("div#annotation-well"),initialize:function(){this.template=$("#annotation-template").html();var t=this;sidebar.sort_editable&&$("ul#annotation-list").sortable({handle:".handle",containment:"parent",update:function(){t.listUpdate()}})},listUpdate:function(){var n={},i=0;$.each($("li.annotation-item"),function(t,e){n[$(e).find("span.highlightlink").attr("data-highlight").replace(/#hl/,"")]=i,i+=1});$.ajax({url:annotationStudioConfig.apiURL+"/annotations/positions",type:"POST",data:{sort_positions:n},headers:{"x-annotator-auth-token":sidebar.token}}).done(function(){$.each(sidebar.subscriber.plugins.Store.annotations,function(t,e){e.sort_position=n[e.uuid]})})},render:function(){var t=this.collection;$("ul#annotation-list").find(".annotation-item").remove(),$("#textpositionsort").hasClass("active")?(sorted_ids=$(".annotator-hl").map(function(t,e){return e.id.substring(2)}).toArray(),t.each(function(t){t.set("order",sorted_ids.indexOf(t.get("uuid")))}),t.comparator=function(t){return t.get("order")}):t.comparator=function(t){return t.get("sort_position")},t.sort(),t.each(function(t){var e=new Sidebar.AnnotationView({model:t});$("ul#annotation-list").append(e.render().el)}),$("li.annotation-item span").tooltip(),$("span.annotator-hl").click(function(){$("ul#annotation-list li").removeClass("hover"),$("span.highlightlink").tooltip("hide");var t="#sb"+this.id.toString().match(/(hl)(.+)/).slice(1)[1];$("div#annotation-well").animate({scrollTop:$(t).offset().top},100,function(){console.info("Scroll to: "+t),$(t).trigger("click")})}),$("li.annotation-item").click(function(){if(!$(this).hasClass("focuswhite")){var t=$(this).find("span.highlightlink").attr("data-highlight");$("ul#annotation-list li").removeClass("hover"),$("#annotation-well ul#annotation-list li").removeClass("focuswhite"),$("ul#annotation-list li .details").hide(),$("ul#annotation-list li .highlightlink.comment, ul#annotation-list li .highlightlink.highlight").show(),$(this).find(".comment, .highlight").hide(),$(this).find(".details").show(200),$(this).addClass("focuswhite"),$("span.highlightlink").tooltip("hide"),0<$(t).length&&($("html,body").animate({scrollTop:$(t).offset().top-150},500),$(".glyphicon-comment").remove(),$(t).prepend('<i class="glyphicon glyphicon-comment"></i>'))}}),annotationStudioConfig.melCatalogEnabled&&$("li.annotation-item a.catalog-popup").unbind("click").on("click",function(){$("li.annotation-item a.catalog-popup").unbind("click").attr("target","_blank")}),sidebar.sort_editable&&($("#customsort").hasClass("active")?$("ul#annotation-list").sortable("enable").addClass("sorting_on"):$("ul#annotation-list").sortable("disable").removeClass("sorting_on")),sidebar.showAndHideAnnotations()}});var Sidebar=Sidebar||{};Sidebar.AnnotationView=Backbone.View.extend({tagName:"li",className:"annotation-item",initialize:function(){this.commenttemplate=$("#comment-template").html(),this.highlighttemplate=$("#highlight-template").html(),this.mdconverter=new Showdown.converter,this.href="#full"+this.model.get("uuid")},render:function(){return $(this.el).find("highlight.comment img").addClass("thumbnail"),""!=this.model.get("text")?(this.mdConvert(),$(this.el).html(Mustache.to_html(this.commenttemplate,this.model.toJSON()))):$(this.el).html(Mustache.to_html(this.highlighttemplate,this.model.toJSON())),$(this.el).find(".details").hide(),$(this.el).addClass(this.displayCategories()),$(this.el).find("a").click(function(){return window.open(this.href,"_blank"),!1}),this},mdConvert:function(){var t=this.model.get("text");if(""!=t){var e=this.mdconverter.makeHtml(t);$(e).text();this.model.set("text",e)}return this},displayCategories:function(){var t=this.model.get("annotation_categories");return _.map(t,function(t){return"annotation_category-"+t}).join(" ")}});var Sidebar=Sidebar||{};Sidebar.App=Backbone.Router.extend({routes:{list:"listAnnotations",update:"updateAnnotations"},listAnnotations:function(t){Sidebar.annotations=new Sidebar.LocalAnnotationList(t),new Sidebar.AnnotationListView({container:$("#annotation-well"),collection:Sidebar.annotations}).render()},updateAnnotations:function(t){Sidebar.annotations=new Sidebar.RemoteAnnotationList(t);var e=new Sidebar.AnnotationListView({container:$("#annotation-well"),collection:Sidebar.annotations});Sidebar.annotations.deferred.done(function(){e.render()})},showAndHideAnnotations:function(){this.filtered&&$("ul#annotation-list li").each(function(t,e){highlight_id=$(e).find("span.highlightlink").data("highlight"),isScrolledIntoView($(highlight_id))?$(e).show():$(e).hide()})},showAllAnnotations:function(){$("ul#annotation-list li").show()}}),$(function(){"use strict";setTimeout(function(){$(".self_removing").alert("close")},5e3)}),$(function(){"use strict";function t(){var t=localStorage.tabs?JSON.parse(localStorage.tabs):{};for(var e in t)if(t.hasOwnProperty(e)){var n=e.split(":"),i=$("body#"+n[0]+" #"+n[1]);if(0<i.length){var r=i.find("a[href="+t[e]+"]");0<r.length&&r.tab("show")}}}var s=$("body");t(),s.on("shown.bs.tab",'a[data-toggle="tab"]',function(t){var e=$(t.target),n=e.closest("ul").attr("id"),i=e.attr("href"),r=s.attr("id")+":"+n,o=localStorage.tabs?JSON.parse(localStorage.tabs):{};o[r]=i,localStorage.tabs=JSON.stringify(o)})}),$(function(){"use strict";var t=$("body");t.on("click",".show-password-fields",function(){var t='<label for="user_current_password">Current Password</label>\n<input class="form-control" id="user_current_password" name="user[current_password]" size="30" type="password">';return t+='<label for="user_password">New Password</label>\n<input class="form-control" id="user_password" name="user[password]" size="30" type="password">',t+='<label for="user_password_confirmation">Confirm Password</label>\n<input class="form-control" id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password">',t+='<button class="cancel-password-fields btn btn-default">Cancel Change Password</button>',$(this).closest(".form-group").html(t),!1}),t.on("click",".cancel-password-fields",function(){var t='<button class="show-password-fields btn btn-default">Change Password</button>';return $(this).closest(".form-group").html(t),!1})}),window.formatDateTime=function(t){"use strict";function e(t){return t<10?"0"+t:""+t}var n=(t=new Date(Date.parse(t))).getDate(),i=t.getMonth()+1,r=t.getFullYear(),o=t.getHours()+1,s=t.getMinutes()+1;return e(i)+"/"+e(n)+"/"+r+" "+e(o)+":"+e(s)},$(function(){"use strict";$(".dont-overflow").on("shown.bs.dropdown",function(){var t=$(this).find(".dropdown-menu");t.css("height",""),t.css("overflow",""),t.css("width","");var e=t.height(),n=t.offset();n=n.top;var i=$(window).height();i<n+e&&(t.css("height",i-n+"px"),t.css("overflow","auto"),t.css("width","+=20"))})}),$(function(){"use strict";var i,t=$("body");t.on("change",".confirm-changes input,.confirm-changes select",function(){var t=$(this).closest("form").find("input[type=submit]").val();i='You have unsaved changes on this page. You will lose them unless you stay on this page and click "'+t+'".'}),t.on("submit",".confirm-changes",function(){var t=$(this).find(".bootstrap-tagsinput input");if(0<t.length)for(var e=0;e<t.length;e++){var n=$(t[e]).val();if(0<n.length)return alert("You haven't finished creating the class. Put the cursor after the word \""+n+'" and type the "enter" key to get it recognized.'),!1}i=undefined}),$(window).on("beforeunload",function(){return i})}),$(function(){$("#manual-login-toggle").click(function(t){return t.preventDefault(),$("#manual-login").slideToggle(),!1})});